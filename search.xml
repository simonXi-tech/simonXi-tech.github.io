<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—</title>
    <url>/2019/11/20/00-Hexo%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¸€ç›´æƒ³è¦åšä¸ªäººåšå®¢ï¼åšä¸»æœ‰è¿‡ä¸€å¹´çš„å·¥ä½œç»å†ï¼Œé‚£æ®µæ—¶é—´åœ¨csdnä¸Šå†™äº†å¾ˆå¤šåšå®¢ï¼Œä½†è¶Šæ¥è¶Šæœ‰ä¸€ç§å—åˆ¶äºäººçš„æ„Ÿè§‰ã€‚2019è€ƒç ”åšä¸»ä¾¥å¹¸æŸ985ä¸Šå²¸ï¼Œç®—æ˜¯äººç”Ÿçš„ä¸€ä¸ªåˆ†ç•Œç‚¹ã€‚2019.11.20ï¼Œåšä¸»å¿ƒè¡€æ¥æ½®ï¼Œåœ¨bç«™ä¸Šæœç´¢å¦‚ä½•æ­å»ºä¸ªäººåšå®¢çš„è§†é¢‘ï¼Œæ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼š<a href="https://www.bilibili.com/video/av62400697" target="_blank" rel="noopener">ä¸€æ­¥ä¸€æ­¥æ•™ä½ å¦‚ä½•åœ¨Windows10ä¸Šå®Œæˆhexoåšå®¢æ­å»ºå’Œyiliaä¸»é¢˜ä½¿ç”¨</a>ã€‚äºæ˜¯æœ‰äº†æ­¤åšå®¢çš„è¯ç”Ÿï¼Œè¡·å¿ƒæ„Ÿè°¢æ— ç§å¥‰çŒ®çš„å¤§ç¥ä»¬ï¼ä»Šåå°†åˆ©ç”¨è¿™ä¸ªåšå®¢ï¼Œåˆ†äº«è‡ªå·±çš„æ‰€å­¦æ‰€æ„Ÿï¼Œè¯·å¤§å®¶ä¸åèµæ•™ï¼<a id="more"></a></p>
<h1 id="è½¯ä»¶å‡†å¤‡"><a href="#è½¯ä»¶å‡†å¤‡" class="headerlink" title="è½¯ä»¶å‡†å¤‡"></a>è½¯ä»¶å‡†å¤‡</h1><h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><h3 id="ä¸‹è½½å’Œå®‰è£…git"><a href="#ä¸‹è½½å’Œå®‰è£…git" class="headerlink" title="ä¸‹è½½å’Œå®‰è£…git"></a>ä¸‹è½½å’Œå®‰è£…git</h3><ol>
<li><a href="https://git-scm.com/" target="_blank" rel="noopener">gitä¸‹è½½åœ°å€</a>ï¼Œgitçš„å®‰è£…ä¸€è·¯nextå³å¯ã€‚</li>
<li>å®‰è£…å®Œæˆåï¼Œæ¡Œé¢é¼ æ ‡å³é”®ï¼Œæ­¤æ—¶ä¼šæœ‰Git GUI Hereå’ŒGit Bash Hereä¸¤ä¸ªç¨‹åºã€‚  </li>
<li>åœ¨cmd.exeä¸­è¾“å…¥<code>git --version</code>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸã€‚åšä¸»çš„è¾“å‡ºä¸ºï¼šgit version 2.24.0.windows.2<br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/00_gitä¸‹è½½.jpg" alt="â€œ00_gitä¸‹è½½â€"><br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/01_gitå®‰è£…å®Œæˆ.jpg" alt="&quot;01_gitå®‰è£…å®Œæˆ&quot;">  </li>
</ol>
<h3 id="gité…ç½®"><a href="#gité…ç½®" class="headerlink" title="gité…ç½®"></a>gité…ç½®</h3><ol>
<li>æ³¨å†Œgithubè´¦å·ã€‚</li>
<li>é¼ æ ‡å³å‡»ç‚¹å‡»Git Bash Here<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># é…ç½®ç”¨æˆ·å usernameä½¿ç”¨è‡ªå·±æ³¨å†Œçš„ç”¨æˆ·å</span><br><span class="line">git config --global user.name &quot;username&quot; </span><br><span class="line"># é…ç½®é‚®ç®± username@email.comä½¿ç”¨è‡ªå·±æ³¨å†Œçš„é‚®ç®±</span><br><span class="line">git config --global user.email &quot;username@email.com&quot;</span><br></pre></td></tr></table></figure></li>
<li>é…ç½®ssh<br>åœ¨è§†é¢‘ä¸­ï¼Œå¯¹sshè¿›è¡Œäº†é…ç½®ã€‚åšä¸»å‘ç°ï¼Œä¸é…ç½®ä¹Ÿå¯ä»¥ï¼Œæ‰€ä»¥å°±å·äº†æ‡’ã€‚</li>
</ol>
<h2 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h2><h3 id="ä¸‹è½½å’Œå®‰è£…Node-js"><a href="#ä¸‹è½½å’Œå®‰è£…Node-js" class="headerlink" title="ä¸‹è½½å’Œå®‰è£…Node.js"></a>ä¸‹è½½å’Œå®‰è£…Node.js</h3><ol>
<li><a href="https://nodejs.org/en/" target="_blank" rel="noopener">nodejsä¸‹è½½åœ°å€</a>ï¼Œnodejsçš„å®‰è£…ä¸€è·¯nextå³å¯ã€‚</li>
<li>nodejså®‰è£…å®Œæˆåï¼Œå¯ä»¥åœ¨Git Bashä¸­è¾“å…¥<code>node -v</code>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸã€‚<br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/02_nodejsä¸‹è½½.jpg" alt="â€œ02_nodejsä¸‹è½½â€"><br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/03_æ£€æŸ¥nodejsæ˜¯å¦å®‰è£…æˆåŠŸ.jpg" alt="â€œ03_æ£€æŸ¥nodejsæ˜¯å¦å®‰è£…æˆåŠŸâ€"></li>
<li>npmä»‹ç»<br>npmæ˜¯éšåŒnodejsä¸€èµ·å®‰è£…çš„åŒ…ç®¡ç†å·¥å…·ï¼Œèƒ½è§£å†³nodejsä»£ç éƒ¨ç½²ä¸Šçš„å¾ˆå¤šé—®é¢˜ï¼Œå¸¸è§çš„ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š<ul>
<li>å…è®¸ç”¨æˆ·ä»npmæœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨ã€‚</li>
<li>å…è®¸ç”¨æˆ·ä»npmæœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨ã€‚</li>
<li>å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ°npmæœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨ã€‚<br>ç”±äºæ–°ç‰ˆçš„nodejså·²ç»é›†æˆäº†npmï¼Œæ‰€ä»¥ä¹‹å‰npmä¹Ÿä¸€å¹¶å®‰è£…å¥½äº†ã€‚åŒæ ·å¯ä»¥é€šè¿‡è¾“å…¥<code>npm -v</code>æ¥æµ‹è¯•æ˜¯å¦æˆåŠŸå®‰è£…ã€‚<a href="https://www.runoob.com/nodejs/nodejs-npm.html" target="_blank" rel="noopener">npmä½¿ç”¨ä»‹ç»</a></li>
</ul>
</li>
</ol>
<h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><h3 id="é™æ€åšå®¢"><a href="#é™æ€åšå®¢" class="headerlink" title="é™æ€åšå®¢"></a>é™æ€åšå®¢</h3><p>Hexoæ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexoä½¿ç”¨Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexo æ–‡æ¡£</a>  </p>
<p>åœ¨ Hexo ä¸­æœ‰ä¸¤ä»½ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼Œå…¶åç§°éƒ½æ˜¯ _config.ymlã€‚å…¶ä¸­ï¼Œä¸€ä»½ä½äºç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä¸»è¦åŒ…å« Hexo æœ¬èº«çš„é…ç½®ï¼›å¦ä¸€ä»½ä½äºä¸»é¢˜ç›®å½•ä¸‹ï¼Œè¿™ä»½é…ç½®ç”±ä¸»é¢˜ä½œè€…æä¾›ï¼Œä¸»è¦ç”¨äºé…ç½®ä¸»é¢˜ç›¸å…³çš„é€‰é¡¹ã€‚<br>ä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œåœ¨ä»¥ä¸‹è¯´æ˜ä¸­ï¼Œå°†å‰è€…ç§°ä¸º ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ åè€…ç§°ä¸º ä¸»é¢˜é…ç½®æ–‡ä»¶</p>
<h3 id="å®‰è£…hexo"><a href="#å®‰è£…hexo" class="headerlink" title="å®‰è£…hexo"></a>å®‰è£…hexo</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. æ£€æŸ¥npmç‰ˆæœ¬ï¼Œç¡®å®šnpmæ˜¯å¦å®‰è£…æˆåŠŸ</span><br><span class="line">npm -v</span><br><span class="line">2. å®‰è£…cnpm,é€šè¿‡æ·˜å®é•œåƒæº</span><br><span class="line">npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br><span class="line">3. æ£€æŸ¥cnpmæ˜¯å¦å®‰è£…æˆåŠŸ</span><br><span class="line">cnpm -v</span><br><span class="line">4. å®‰è£…hexo</span><br><span class="line">cnpm install -g hexo-cli</span><br><span class="line">5. æ£€æŸ¥hexoæ˜¯å¦å®‰è£…æˆåŠŸ</span><br><span class="line">hexo -v</span><br></pre></td></tr></table></figure>
<p><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/04_æ£€æŸ¥npmç‰ˆæœ¬.jpg" alt="â€œ04_æ£€æŸ¥npmç‰ˆæœ¬â€"><br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/05_æ£€æŸ¥cnpmç‰ˆæœ¬.jpg" alt="â€œ05_æ£€æŸ¥cnpmç‰ˆæœ¬â€"><br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/06_æ£€æŸ¥hexoç‰ˆæœ¬.jpg" alt="â€œ06_æ£€æŸ¥hexoç‰ˆæœ¬â€"></p>
<h3 id="åˆå§‹åŒ–hexo"><a href="#åˆå§‹åŒ–hexo" class="headerlink" title="åˆå§‹åŒ–hexo"></a>åˆå§‹åŒ–hexo</h3><ol>
<li>åœ¨æœ¬åœ°å»ºç«‹ ç«™ç‚¹ æ–‡ä»¶å¤¹</li>
<li>åœ¨Git Bashä¸­ä½¿ç”¨linuxå‘½ä»¤æ“ä½œ<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è¿›å…¥dç›˜</span><br><span class="line">cd d:</span><br><span class="line"># å»ºç«‹ç«™ç‚¹æ–‡ä»¶å¤¹</span><br><span class="line">mkdir Blog</span><br><span class="line">cd Blog&#x2F;</span><br><span class="line"># åˆå§‹åŒ–hexo</span><br><span class="line">hexo init</span><br><span class="line"># æ˜¾ç¤ºBlogæ–‡ä»¶å¤¹ä¸‹å†…å®¹</span><br><span class="line">ls -l</span><br></pre></td></tr></table></figure></li>
<li>å¯åŠ¨hexoï¼Œé€šè¿‡<code>http://localhost:4000</code>å¯ä»¥è®¿é—®é»˜è®¤ä¸º<code>landscape</code>ä¸»é¢˜çš„åšå®¢<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚</span><br><span class="line">hexo clean</span><br><span class="line"># ç”Ÿæˆé™æ€æ–‡ä»¶</span><br><span class="line">hexo g</span><br><span class="line"># æ–‡ç« çš„ Slugï¼Œä½œä¸ºæ–°æ–‡ç« çš„æ–‡ä»¶åå’Œå‘å¸ƒåçš„ URL é»˜è®¤ç«¯å£4000</span><br><span class="line">hexo s</span><br><span class="line"># -p é‡è®¾ç«¯å£</span><br><span class="line">hexo s -p 5000</span><br></pre></td></tr></table></figure>
<img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/07_å¯åŠ¨hexoæœ¬åœ°é¢„è§ˆ.jpg" alt="â€œ07_å¯åŠ¨hexoæœ¬åœ°é¢„è§ˆâ€"></li>
</ol>
<h2 id="Visual-Studio-Code"><a href="#Visual-Studio-Code" class="headerlink" title="Visual Studio Code"></a>Visual Studio Code</h2><p>Visual Studio Codeæ˜¯ä¸€ä¸ªè·¨å¹³å°æºä»£ç ç¼–è¾‘å™¨ã€‚<a href="https://code.visualstudio.com/Download" target="_blank" rel="noopener">Visual Studio Codeä¸‹è½½åœ°å€</a>ã€‚ä¸‹è½½å®Œæˆåé»˜è®¤å®‰è£…å³å¯ã€‚<br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/08_vscodeä¸‹è½½.jpg" alt="â€œ08_vscodeä¸‹è½½â€"><br><a href="https://jingyan.baidu.com/article/6d704a136d72ae28db51ca27.html" target="_blank" rel="noopener">Visual Studio codeä¸‹è½½ã€å®‰è£…ã€æ±‰åŒ–æ•™ç¨‹</a>  </p>
<h1 id="å°†ç½‘ç«™éƒ¨ç½²åˆ°Githubä¸Š"><a href="#å°†ç½‘ç«™éƒ¨ç½²åˆ°Githubä¸Š" class="headerlink" title="å°†ç½‘ç«™éƒ¨ç½²åˆ°Githubä¸Š"></a>å°†ç½‘ç«™éƒ¨ç½²åˆ°Githubä¸Š</h1><ol>
<li>æ³¨å†Œgithubè´¦å·</li>
<li>åœ¨Git Bashä¸­ï¼Œè¿›å…¥Blogç›®å½•ä¸‹å®‰è£… hexo éƒ¨ç½²æ’ä»¶<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cnpm install --save hexo-deployer-git</span><br></pre></td></tr></table></figure></li>
<li>åœ¨githubä¸­æŒ‰ç…§<strong>è‡ªå·±çš„æ˜µç§°+.github.io</strong>æ–¹å¼å»ºç«‹ä¸€ä¸ªrepository<br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/09_æ–°å»ºgithub.ioä»“åº“.jpg" alt="â€œ09_æ–°å»ºgithub.ioä»“åº“â€"><br>åˆ›å»ºå®Œæˆåï¼Œä¼šç”Ÿæˆä¸€ä¸ªé“¾æ¥ï¼Œå¤åˆ¶è¯¥é“¾æ¥ã€‚<br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/10_å¤åˆ¶é“¾æ¥.jpg" alt="â€œ10_å¤åˆ¶é“¾æ¥â€"></li>
<li>ä½¿ç”¨VSCodeæ‰“å¼€<code>Blog/_config.yml</code>æ–‡ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š<br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/11_ä¿®æ”¹æ ¹ç›®å½•_config.yml.jpg" alt="â€œ11_ä¿®æ”¹æ ¹ç›®å½•_config.ymlâ€"><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;deployment.html</span><br><span class="line">## repoï¼šå°†é¡¹ç›®éƒ¨ç½²åˆ°https:&#x2F;&#x2F;github.com&#x2F;simonXi-tech&#x2F;simonXi-tech.github.io.git</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https:&#x2F;&#x2F;github.com&#x2F;simonXi-tech&#x2F;simonXi-tech.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨<code>hexo d</code>è¿›è¡Œéƒ¨ç½²ï¼Œå³å¯å°†æœ¬åœ°åšå®¢æ¨é€åˆ°githubä¸Š</li>
<li>æ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢<a href="https://simonxi-tech.github.io/" target="_blank" rel="noopener">https://simonxi-tech.github.io/</a></li>
</ol>
<h1 id="æ›´æ¢åšå®¢ä¸»é¢˜"><a href="#æ›´æ¢åšå®¢ä¸»é¢˜" class="headerlink" title="æ›´æ¢åšå®¢ä¸»é¢˜"></a>æ›´æ¢åšå®¢ä¸»é¢˜</h1><p>åšä¸»æ²¡æœ‰é‡‡ç”¨<a href="https://www.bilibili.com/video/av62400697" target="_blank" rel="noopener">ä¸€æ­¥ä¸€æ­¥æ•™ä½ å¦‚ä½•åœ¨Windows10ä¸Šå®Œæˆhexoåšå®¢æ­å»ºå’Œyiliaä¸»é¢˜ä½¿ç”¨</a>ä¸­çš„ yilia ä¸»é¢˜ï¼Œè€Œæ˜¯é€‰æ‹© NexT ä¸»é¢˜ã€‚<br><a href="https://hexothe.me/" target="_blank" rel="noopener">æ’åå‰ 10 çš„ Hexo ä¸»é¢˜</a></p>
<h2 id="Nextä¸»é¢˜"><a href="#Nextä¸»é¢˜" class="headerlink" title="Nextä¸»é¢˜"></a>Nextä¸»é¢˜</h2><h3 id="ä¸‹è½½Nextä¸»é¢˜"><a href="#ä¸‹è½½Nextä¸»é¢˜" class="headerlink" title="ä¸‹è½½Nextä¸»é¢˜"></a>ä¸‹è½½Nextä¸»é¢˜</h3><ol>
<li>ä» github ä¸Šå…‹éš† next ä¸»é¢˜<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># themes&#x2F;nextè¡¨ç¤ºå…‹éš†nextåçš„æœ¬åœ°ä½ç½® Blog&#x2F;themes&#x2F;next</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;hexo-theme-next.git themes&#x2F;next</span><br></pre></td></tr></table></figure></li>
<li><p>æ‰“å¼€ ç«™ç‚¹é…ç½®æ–‡ä»¶ æ–‡ä»¶ï¼Œä¿®æ”¹ä¸»é¢˜<br><img src="/images/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/12_ä¿®æ”¹ä¸»é¢˜.jpg" alt="â€œ12_ä¿®æ”¹ä¸»é¢˜â€"></p>
</li>
<li><p>é‡æ–°åŠ è½½</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚</span><br><span class="line"># åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚</span><br><span class="line">hexo clean  </span><br><span class="line"># ç”Ÿæˆé™æ€æ–‡ä»¶ é»˜è®¤åœ¨ç«™ç‚¹ç›®å½•ä¸‹æ–°å»º public&#x2F;ï¼Œæœ€ç»ˆè¿™äº›å†…å®¹å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®</span><br><span class="line">hexo g    </span><br><span class="line"># æ–‡ä»¶ç”Ÿæˆåç«‹å³éƒ¨ç½²ç½‘ç«™          </span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="ä½¿ç”¨-MarkDown-ç¼–å†™åšå®¢"><a href="#ä½¿ç”¨-MarkDown-ç¼–å†™åšå®¢" class="headerlink" title="ä½¿ç”¨ MarkDown ç¼–å†™åšå®¢"></a>ä½¿ç”¨ MarkDown ç¼–å†™åšå®¢</h1><p>ç¼–å†™ MarkDown ä½¿ç”¨ Visual Studio Codeã€‚MarkDown çš„è¯­æ³•å‚è€ƒ<a href="https://www.runoob.com/markdown/md-tutorial.html" target="_blank" rel="noopener">Markdown æ•™ç¨‹</a></p>
<h2 id="æ–°å»ºæ–‡ç« "><a href="#æ–°å»ºæ–‡ç« " class="headerlink" title="æ–°å»ºæ–‡ç« "></a>æ–°å»ºæ–‡ç« </h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºä¸€ç¯‡æ–‡ç« ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®<code>layout</code>çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨<code>_config.yml</code>ä¸­çš„<code>default_layout</code>å‚æ•°ä»£æ›¿ã€‚å¦‚æœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚<br>æ¯”å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new &quot;post title with whitespace&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="æ’å…¥æœ¬åœ°å›¾ç‰‡"><a href="#æ’å…¥æœ¬åœ°å›¾ç‰‡" class="headerlink" title="æ’å…¥æœ¬åœ°å›¾ç‰‡"></a>æ’å…¥æœ¬åœ°å›¾ç‰‡</h2><p>ç”±äºåˆæ­¥ä½¿ç”¨hexoï¼Œæ‰€ä»¥åšä¸»é€‰æ‹©æœ€ç®€å•æœ€ç¬¨çš„æ–¹æ³•æ’å…¥æœ¬åœ°å›¾ç‰‡ã€‚  </p>
<ol>
<li>åœ¨<code>source</code>ç›®å½•ä¸‹æ–°å»º<code>images</code>æ–‡ä»¶å¤¹ï¼Œåœ¨å†™åšå®¢ä¹‹å‰ï¼Œå…ˆåˆ°<code>source/image/</code>ç›®å½•ä¸‹æ–°å»ºå¯¹åº”è¯¥åšå®¢çš„æ–‡ä»¶å¤¹ã€‚æ¯”å¦‚æ–°å»º<strong>00_Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—</strong>æ–‡ä»¶å¤¹</li>
<li>å°†æœ¬åœ°çš„å›¾ç‰‡å¤åˆ¶åˆ°<strong>00_Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—</strong>æ–‡ä»¶å¤¹</li>
<li>ä½¿ç”¨<code>![â€œå›¾ç‰‡æè¿°â€](/source/00-Hexoä¸ªäººåšå®¢æ­å»ºæŒ‡å—/xx.jpg)</code>å¯¼å…¥å›¾ç‰‡</li>
<li>æ³¨æ„:è¿™æ ·å¯¼å…¥æœ¬åœ°å›¾ç‰‡ï¼Œåœ¨ViSual Studio Codeä¸­æ˜¯ä¸æ˜¾ç¤ºçš„ã€‚é€šè¿‡<code>http://localhost:4000</code>è®¿é—®å¯ä»¥æŸ¥çœ‹æ•ˆæœ</li>
</ol>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>èŠ±è´¹äº†ä¸€å¤©æ—¶é—´ï¼Œè®¤çœŸæ¢³ç†äº†hexoåšå®¢æ­å»ºçš„è¿‡ç¨‹ã€‚è™½ç„¶å†™åšå®¢è€—æ—¶ï¼Œä½†æ˜¯æœ‰ä¸€ç§æ»¡è¶³æ„Ÿã€‚ä¸é‡å¤é€ è½®å­ï¼</p>
]]></content>
      <categories>
        <category>åšå®¢æ­å»º</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>01-Nextä¸»é¢˜ä¼˜åŒ–ä¸€</title>
    <url>/2019/11/21/01-Next%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96%E4%B8%80/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><a href="https://theme-next.org/docs/getting-started/" target="_blank" rel="noopener">NexTå…¥é—¨è‹±æ–‡åŸç«™</a><br><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">NexTå…¥é—¨ä¸­æ–‡ç½‘ç«™</a> </p>
<p> åœ¨ Hexo ä¸­æœ‰ä¸¤ä»½ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼Œå…¶åç§°éƒ½æ˜¯ _config.ymlã€‚å…¶ä¸­ï¼Œä¸€ä»½ä½äºç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä¸»è¦åŒ…å« Hexo æœ¬èº«çš„é…ç½®ï¼›å¦ä¸€ä»½ä½äºä¸»é¢˜ç›®å½•ä¸‹ï¼Œè¿™ä»½é…ç½®ç”±ä¸»é¢˜ä½œè€…æä¾›ï¼Œä¸»è¦ç”¨äºé…ç½®ä¸»é¢˜ç›¸å…³çš„é€‰é¡¹ã€‚</p>
<p>ä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œåœ¨ä»¥ä¸‹è¯´æ˜ä¸­ï¼Œå°†å‰è€…ç§°ä¸º ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ åè€…ç§°ä¸º ä¸»é¢˜é…ç½®æ–‡ä»¶ã€‚<a id="more"></a></p>
<h1 id="ä¸»é¢˜è®¾å®š"><a href="#ä¸»é¢˜è®¾å®š" class="headerlink" title="ä¸»é¢˜è®¾å®š"></a>ä¸»é¢˜è®¾å®š</h1><p>scheme æ˜¯ NexT æ”¯æŒçš„ä¸€ç§ç‰¹æ€§ï¼Œå€ŸåŠ©äº Schemeï¼ŒNexT ä¸ºä½ æä¾›å¤šç§ä¸åŒçš„å¤–è§‚ã€‚åŒæ—¶ï¼Œå‡ ä¹æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥åœ¨ Scheme ä¹‹é—´å…±ç”¨ã€‚ç›®å‰NexTæ”¯æŒå››ç§ Scheme ï¼Œä»–ä»¬æ˜¯ï¼š</p>
<ul>
<li>Muse - é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½</li>
<li>Mist - Museçš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚</li>
<li>Pisces - åŒæ  Schemeï¼Œå°å®¶ç¢§ç‰ä¼¼çš„æ¸…æ–°</li>
<li>Gemini - ç±»ä¼¼ Piscesï¼Œæ å—ç›¸é—´ï¼Œæµ®åŠ¨æ¢¦å¹»èˆ¬çš„äº«å—</li>
</ul>
<p>Scheme çš„åˆ‡æ¢é€šè¿‡æ›´æ”¹ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢ scheme å…³é”®å­—ã€‚ ä½ ä¼šçœ‹åˆ°æœ‰å››è¡Œ scheme çš„é…ç½®ï¼Œå°†ä½ éœ€ç”¨å¯ç”¨çš„ scheme å‰é¢æ³¨é‡Š#å»é™¤å³å¯ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Scheme Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Schemes</span><br><span class="line">#scheme: Muse</span><br><span class="line">#scheme: Mist</span><br><span class="line">#scheme: Pisces</span><br><span class="line">scheme: Gemini</span><br></pre></td></tr></table></figure></p>
<h1 id="é€‰æ‹©è¯­è¨€"><a href="#é€‰æ‹©è¯­è¨€" class="headerlink" title="é€‰æ‹©è¯­è¨€"></a>é€‰æ‹©è¯­è¨€</h1><p>ç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ å°† language è®¾ç½®æˆä½ æ‰€éœ€è¦çš„è¯­è¨€ã€‚å»ºè®®æ˜ç¡®è®¾ç½®ä½ æ‰€éœ€è¦çš„è¯­è¨€ï¼Œä¾‹å¦‚é€‰ç”¨ç®€ä½“ä¸­æ–‡ï¼Œé…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># é…ç½®ä¸ºä¸­æ–‡</span><br><span class="line">language: zh-CN</span><br><span class="line"># é…ç½®ä¸ºè‹±æ–‡</span><br><span class="line">language: en</span><br></pre></td></tr></table></figure></p>
<h1 id="é…ç½®èœå•é¡¹"><a href="#é…ç½®èœå•é¡¹" class="headerlink" title="é…ç½®èœå•é¡¹"></a>é…ç½®èœå•é¡¹</h1><p>èœå•é…ç½®åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼Œæ ¼å¼ï¼š<code>Key: /link/ || icon</code>ã€‚Key æ˜¯èœå•é¡¹çš„åå­—(æ¯”å¦‚ï¼šä¸»é¡µï¼Œå½’æ¡£ç­‰)ï¼›link æ˜¯æŒ‡å‘ç«™ç‚¹å†…éƒ¨ç›¸å¯¹urlçš„ç›®æ ‡é“¾æ¥ï¼›icon æ˜¯ Font Awesome å›¾æ ‡ã€‚<br>NexTé»˜è®¤æä¾› ä¸»é¡µ å’Œ å½’æ¡£ä¸¤ä¸ªèœå•é¡¹ã€‚è¦è‡ªå®šä¹‰èœå•é¡¹ï¼Œè¯·åœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­ç¼–è¾‘ä»¥ä¸‹å†…å®¹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Menu Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Usage: &#96;Key: &#x2F;link&#x2F; || icon&#96;</span><br><span class="line"># Key æ˜¯èœå•é¡¹çš„åå­—ã€‚å¦‚æœè¯¥é¡¹çš„ç¿»è¯‘ç‰ˆæœ¬å¯å¾—ï¼Œåˆ™ä½¿ç”¨ç¿»è¯‘ç‰ˆæœ¬ï¼›å¦åˆ™ä½¿ç”¨åŸåã€‚Key åŒºåˆ†å¤§å°å†™ã€‚</span><br><span class="line"># åœ¨&#96;||&#96;å®šç•Œç¬¦ä¹‹å‰çš„å€¼æ˜¯ç›®æ ‡é“¾æ¥ï¼Œåœ¨&#96;||&#96;å®šç•Œç¬¦ä¹‹åçš„æ˜¯Font Awesomeå›¾æ ‡</span><br><span class="line"># å½“åœ¨å­ç›®å½•ä¸­è¿è¡Œç«™ç‚¹æ—¶(ä¾‹å¦‚yoursite.com&#x2F;blog)ï¼Œä»é“¾æ¥å€¼ä¸­åˆ é™¤å‰è¾¹çš„æ–œæ  (&#x2F;archives -&gt; archives).</span><br><span class="line"># å¤–é“¾éœ€è¦ä½¿ç”¨ http:&#x2F;&#x2F; æˆ–è€… https:&#x2F;&#x2F;</span><br><span class="line">menu:</span><br><span class="line">  home: &#x2F; || home</span><br><span class="line">  #about: &#x2F;about&#x2F; || user</span><br><span class="line">  tags: &#x2F;tags&#x2F; || tags</span><br><span class="line">  categories: &#x2F;categories&#x2F; || th</span><br><span class="line">  archives: &#x2F;archives&#x2F; || archive</span><br><span class="line">  #schedule: &#x2F;schedule&#x2F; || calendar</span><br><span class="line">  #sitemap: &#x2F;sitemap.xml || sitemap</span><br><span class="line">  #commonweal: &#x2F;404&#x2F; || heartbeat</span><br></pre></td></tr></table></figure></p>
<p>NexTè¿˜æ”¯æŒå±‚æ¬¡ç»“æ„çš„åŠ¨æ€å­èœå•ã€‚åœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ çš„èœå•éƒ¨åˆ†æ·»åŠ å­èœå•é¡¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: &#x2F; || home</span><br><span class="line">  archives: &#x2F;archives&#x2F; || archive</span><br><span class="line">  Docs:</span><br><span class="line">    default: &#x2F;docs&#x2F; || book</span><br><span class="line">    Third Party Services:</span><br><span class="line">      default: &#x2F;third-party-services&#x2F; || plug</span><br><span class="line">      Algolia Search: &#x2F;algolia-search&#x2F; || adn</span><br></pre></td></tr></table></figure><br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNexTæ˜¾ç¤ºä¸å¸¦badgesçš„èœå•é¡¹iconsã€‚badgesçš„ä½œç”¨å°±æ˜¯ç»Ÿè®¡èœå•é¡¹ä¸‹çš„å…ƒç´ ä¸ªæ•°ã€‚æ¯”å¦‚æœ‰å¤šå°‘ä¸ªtagsï¼Œæœ‰å¤šå°‘ä¸ªarchivesã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Enable &#x2F; Disable menu icons &#x2F; item badges.</span><br><span class="line">menu_settings:</span><br><span class="line">  icons: true</span><br><span class="line">  badges: true</span><br></pre></td></tr></table></figure><br><img src="/images/01-Nextä¸»é¢˜ä¼˜åŒ–ä¸€/00_icons&amp;badges.jpg" alt="&quot;00_icons&amp;badges&quot;"></p>
<h1 id="é…ç½®Favicons"><a href="#é…ç½®Favicons" class="headerlink" title="é…ç½®Favicons"></a>é…ç½®Favicons</h1><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒHexo ç«™ç‚¹ä½¿ç”¨ hexo-site/themes/next/source/images/ ç›®å½•ä¸­NexT faviconsã€‚å¯¹åº”ä¸åŒçš„è®¾å¤‡faviconsæœ‰ä¸åŒçš„å¤§å°ã€‚ä½ å¯ä»¥ç”¨ä½ è‡ªå·±faviconsæ¥ä»£æ›¿å®ƒä»¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Site Information Settings</span><br><span class="line"># See: https:&#x2F;&#x2F;theme-next.org&#x2F;docs&#x2F;getting-started&#x2F;</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">favicon:</span><br><span class="line">  small: &#x2F;images&#x2F;favicon-16x16-next.png</span><br><span class="line">  medium: &#x2F;images&#x2F;favicon-32x32-next.png</span><br><span class="line">  apple_touch_icon: &#x2F;images&#x2F;apple-touch-icon-next.png</span><br><span class="line">  safari_pinned_tab: &#x2F;images&#x2F;logo.svg</span><br><span class="line">  #android_manifest: &#x2F;images&#x2F;manifest.json</span><br><span class="line">  #ms_browserconfig: &#x2F;images&#x2F;browserconfig.xml</span><br></pre></td></tr></table></figure>
<p>faviconsçš„æ„æ€å¦‚ä¸‹å›¾ï¼š<br><img src="/images/01-Nextä¸»é¢˜ä¼˜åŒ–ä¸€/01_favicons.jpg" alt="&quot;01_favicons&quot;"><br>æˆ‘ä»¬å¯ä»¥æ‰¾è‡ªå·±å–œæ¬¢çš„iconsï¼Œç„¶åè¦†ç›– hexo-site/themes/next/source/images/ ç›®å½•ä¸‹çš„ apple-touch-icon-next.png å³å¯ä¿®æ”¹ä¸ºè‡ªå·±çš„faviconã€‚</p>
<h1 id="é…ç½®Avatar-å¤´åƒ"><a href="#é…ç½®Avatar-å¤´åƒ" class="headerlink" title="é…ç½®Avatar(å¤´åƒ)"></a>é…ç½®Avatar(å¤´åƒ)</h1><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒNexTä¸åœ¨ä¾§æ æ˜¾ç¤ºå¤´åƒã€‚ä½ å¯ä»¥é€šè¿‡ ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸‹ avatar å­—æ®µè¿›è¡Œé…ç½®ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Sidebar Avatar</span><br><span class="line">avatar:</span><br><span class="line">  # å°†è‡ªå·±çš„å¤´åƒå¤åˆ¶åˆ°hexo-site&#x2F;themes&#x2F;next&#x2F;source&#x2F;images&#x2F;</span><br><span class="line">  # å¯ä»¥è®¾ç½®ä¸ºåŠ¨å›¾</span><br><span class="line">  url: &#x2F;images&#x2F;avatar.png</span><br><span class="line">  # true:å¤´åƒä¸ºåœ†å½¢ false:å¤´åƒä¸ºæ–¹å½¢</span><br><span class="line">  rounded: true</span><br><span class="line">  # true:é¼ æ ‡æ‚¬åœåœ¨å¤´åƒä¸Šæ—¶ï¼Œå¤´åƒæ—‹è½¬   false:å¤´åƒä¸æ—‹è½¬</span><br><span class="line">  rotated: false</span><br></pre></td></tr></table></figure></p>
<h1 id="é…ç½®ä½œè€…å’Œæè¿°"><a href="#é…ç½®ä½œè€…å’Œæè¿°" class="headerlink" title="é…ç½®ä½œè€…å’Œæè¿°"></a>é…ç½®ä½œè€…å’Œæè¿°</h1><p>ç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ è®¾ç½® author ä¸ºä½ çš„æ˜µç§°ï¼›è®¾ç½® description å­—æ®µä¸ºä½ çš„ç«™ç‚¹æè¿°ã€‚ç«™ç‚¹æè¿°å¯ä»¥æ˜¯ä½ å–œæ¬¢çš„ä¸€å¥ç­¾å:) </p>
<pre><code># Site
title: simonXi-techçš„åšå®¢
subtitle: &#39;&#39;
description: &#39;&#39;
keywords:
author: simonXi
language: zh-CN
timezone: &#39;&#39;
</code></pre><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>çœ‹ç€è‡ªå·±çš„åšå®¢ä¸€ç‚¹ä¸€ç‚¹å»ºèµ·æ¥ï¼ŒçœŸçš„è¶…å¼€å¿ƒï¼</p>
]]></content>
      <categories>
        <category>åšå®¢æ­å»º</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>02-Nextä¸»é¢˜ä¼˜åŒ–äºŒ</title>
    <url>/2019/11/22/02-Next%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96%E4%BA%8C/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¿™ç¯‡åšå®¢ä¸»è¦å‚è€ƒNexTå®˜ç½‘çš„æ•™ç¨‹ï¼Œç™¾åº¦çš„æ—¶å€™æ‰¾åˆ°å¾ˆå¤šå…³äºNextä¸»é¢˜çš„åšå®¢ã€‚ä½†æ˜¯å¾ˆå¤šå†…å®¹éƒ½æ˜¯è¿‡æ—¶çš„ï¼ŒåŸç«™è™½ç„¶æ˜¯è‹±æ–‡çš„ï¼Œä½†æ˜¯è€å¿ƒçœ‹è¿˜æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„ã€‚<br><a id="more"></a></p>
<h1 id="é…ç½®åˆ†ç±»å’Œæ ‡ç­¾"><a href="#é…ç½®åˆ†ç±»å’Œæ ‡ç­¾" class="headerlink" title="é…ç½®åˆ†ç±»å’Œæ ‡ç­¾"></a>é…ç½®åˆ†ç±»å’Œæ ‡ç­¾</h1><p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">hexoæ–‡æ¡£</a><br>NexTåœ¨<a href="https://theme-next.org/docs/theme-settings/custom-pages" target="_blank" rel="noopener">Custom Pages</a>ä¸­è¯¦ç»†è§£é‡Šäº†å®šåˆ¶åŒ–é¡µé¢çš„æ“ä½œã€‚</p>
<h2 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h2><p>æ‚¨å¯ä»¥æ‰§è¡Œä¸‹åˆ—å‘½ä»¤æ¥åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« æˆ–è€…æ–°çš„é¡µé¢ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure><br>æ‚¨å¯ä»¥åœ¨å‘½ä»¤ä¸­æŒ‡å®šæ–‡ç« çš„å¸ƒå±€ï¼ˆlayoutï¼‰ï¼Œé»˜è®¤ä¸º postï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ _config.yml ä¸­çš„ default_layout å‚æ•°æ¥æŒ‡å®šé»˜è®¤å¸ƒå±€ã€‚<br>Hexo æœ‰ä¸‰ç§é»˜è®¤å¸ƒå±€ï¼špostã€page å’Œ draftã€‚åœ¨åˆ›å»ºè¿™ä¸‰ç§ä¸åŒç±»å‹çš„æ–‡ä»¶æ—¶ï¼Œå®ƒä»¬å°†ä¼šè¢«ä¿å­˜åˆ°ä¸åŒçš„è·¯å¾„ã€‚</p>
<ul>
<li>é»˜è®¤postå¸ƒå±€ä¿å­˜åœ¨ source/_posts ç›®å½•ä¸‹ï¼›</li>
<li>pageå¸ƒå±€ä¿å­˜åœ¨ sourceç›®å½•ä¸‹ï¼›</li>
<li>draftå¸ƒå±€ä¿å­˜åœ¨ source/draftsç›®å½•ä¸‹ã€‚</li>
</ul>
<h3 id="åˆ›å»ºæ ‡ç­¾å’Œåˆ†ç±»é¡µé¢"><a href="#åˆ›å»ºæ ‡ç­¾å’Œåˆ†ç±»é¡µé¢" class="headerlink" title="åˆ›å»ºæ ‡ç­¾å’Œåˆ†ç±»é¡µé¢"></a>åˆ›å»ºæ ‡ç­¾å’Œåˆ†ç±»é¡µé¢</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># åˆ›å»º categories é¡µé¢ï¼›åˆ›å»ºè·¯å¾„ source</span><br><span class="line">hexo new page categories</span><br><span class="line"># åˆ›å»º tags é¡µé¢ï¼›åˆ›å»ºè·¯å¾„ source</span><br><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure>
<p><img src="/images/02-Nextä¸»é¢˜ä¼˜åŒ–äºŒ/00_åˆ›å»ºæ ‡ç­¾é¡µå’Œåˆ†ç±»é¡µ.jpg" alt="&quot;00_åˆ›å»ºæ ‡ç­¾é¡µå’Œåˆ†ç±»é¡µ&quot;"></p>
<ul>
<li>ç¼–è¾‘ /source/categories/index.md<br><img src="/images/02-Nextä¸»é¢˜ä¼˜åŒ–äºŒ/01_ä¿®æ”¹categoriesçš„index.md.jpg" alt="&quot;01_ä¿®æ”¹categoriesçš„index.md&quot;"></li>
<li>ç¼–è¾‘ /source/tags/index.md<br><img src="/images/02-Nextä¸»é¢˜ä¼˜åŒ–äºŒ/02_ä¿®æ”¹tagsçš„index.md.jpg" alt="&quot;02_ä¿®æ”¹tagsçš„index.md&quot;"></li>
</ul>
<h2 id="Fron-matter"><a href="#Fron-matter" class="headerlink" title="Fron-matter"></a><a href="https://hexo.io/zh-cn/docs/front-matter" target="_blank" rel="noopener">Fron-matter</a></h2><p>Front-matter æ˜¯æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ <code>---</code> åˆ†éš”çš„åŒºåŸŸï¼Œå¸¸ç”¨çš„å‚æ•°å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: æ–‡ç« æ ‡é¢˜</span><br><span class="line">date: å»ºç«‹æ—¥æœŸ</span><br><span class="line">tags: æ ‡ç­¾</span><br><span class="line">categoriesï¼šåˆ†ç±»</span><br><span class="line">commentsï¼šå¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>
<h3 id="åˆ†ç±»å’Œæ ‡ç­¾"><a href="#åˆ†ç±»å’Œæ ‡ç­¾" class="headerlink" title="åˆ†ç±»å’Œæ ‡ç­¾"></a>åˆ†ç±»å’Œæ ‡ç­¾</h3><p>åªæœ‰æ–‡ç« æ”¯æŒåˆ†ç±»å’Œæ ‡ç­¾ï¼Œæ‚¨å¯ä»¥åœ¨ Front-matter ä¸­è®¾ç½®ã€‚åœ¨å…¶ä»–ç³»ç»Ÿä¸­ï¼Œåˆ†ç±»å’Œæ ‡ç­¾å¬èµ·æ¥å¾ˆæ¥è¿‘ï¼Œä½†æ˜¯åœ¨ Hexo ä¸­ä¸¤è€…æœ‰ç€æ˜æ˜¾çš„å·®åˆ«ï¼šåˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ Foo, Bar ä¸ç­‰äº Bar, Fooï¼›è€Œæ ‡ç­¾æ²¡æœ‰é¡ºåºå’Œå±‚æ¬¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 02-Nextä¸»é¢˜ä¼˜åŒ–äºŒ</span><br><span class="line">date: 2019-11-22 11:54:04</span><br><span class="line">tags: </span><br><span class="line">  - hexo</span><br><span class="line">categories: </span><br><span class="line">  - åšå®¢æ­å»º</span><br><span class="line">  - hexo</span><br><span class="line">comments:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>åœ¨æ¯ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ tags å’Œ categories æŒ‡å®šå¯¹åº”çš„ æ ‡ç­¾ å’Œ åˆ†ç±» å³å¯ã€‚<br><img src="/images/02-Nextä¸»é¢˜ä¼˜åŒ–äºŒ/03_è®¾ç½®æ ‡ç­¾å’Œåˆ†ç±».jpg" alt="&quot;03_è®¾ç½®æ ‡ç­¾å’Œåˆ†ç±»&quot;"><br>Hexo ä¸æ”¯æŒæŒ‡å®šå¤šä¸ªåŒçº§åˆ†ç±»ã€‚å¦‚ä¸Šæ‰€ç¤ºï¼Œæ ‡é¢˜ä¸º 02-Nextä¸»é¢˜ä¼˜åŒ–äºŒ çš„æ–‡ç« å±äºçˆ¶åˆ†ç±» åšå®¢æ­å»º ä¸‹å­åˆ†ç±» hexo ä¸­çš„æ–‡ç« ã€‚<br>å¦‚æœä½ éœ€è¦ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹ list ä¸­çš„æ–¹æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">categories:</span><br><span class="line">- [Diary, PlayStation]</span><br><span class="line">- [Diary, Games]</span><br><span class="line">- [Life]</span><br></pre></td></tr></table></figure></p>
<p>æ­¤æ—¶è¿™ç¯‡æ–‡ç« åŒæ—¶åŒ…æ‹¬ä¸‰ä¸ªåˆ†ç±»ï¼š PlayStation å’Œ Games åˆ†åˆ«éƒ½æ˜¯çˆ¶åˆ†ç±» Diary çš„å­åˆ†ç±»ï¼ŒåŒæ—¶ Life æ˜¯ä¸€ä¸ªæ²¡æœ‰å­åˆ†ç±»çš„åˆ†ç±»ã€‚</p>
<h1 id="ä¸»é¢˜é…ç½®"><a href="#ä¸»é¢˜é…ç½®" class="headerlink" title="ä¸»é¢˜é…ç½®"></a>ä¸»é¢˜é…ç½®</h1><p><a href="https://theme-next.org/docs/theme-settings/" target="_blank" rel="noopener">Nextä¸»é¢˜é…ç½®è‹±æ–‡åŸæ–‡</a><br><a href="http://theme-next.iissnan.com/theme-settings.html" target="_blank" rel="noopener">NexTä¸»é¢˜é…ç½®ä¸­æ–‡ç¿»è¯‘</a> </p>
<h2 id="Theme-Settings"><a href="#Theme-Settings" class="headerlink" title="Theme Settings"></a><a href="https://theme-next.org/docs/theme-settings/" target="_blank" rel="noopener">Theme Settings</a></h2><h3 id="ä»£ç å—é«˜äº®"><a href="#ä»£ç å—é«˜äº®" class="headerlink" title="ä»£ç å—é«˜äº®"></a>ä»£ç å—é«˜äº®</h3><p>NexT ç›®å‰æä¾›8ç§ä»£ç é«˜äº®ä¸»é¢˜ã€‚æ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ° codeblockã€‚codeblock.copy_buttonä½¿ç”¨è®¾ç½®å¤åˆ¶ä»£ç å¿«æ·é”®ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">codeblock:</span><br><span class="line">  # Code Highlight theme</span><br><span class="line">  # Available values: normal | night | night eighties | night blue | night bright | solarized | solarized dark | galactic</span><br><span class="line">  # See: https:&#x2F;&#x2F;github.com&#x2F;chriskempson&#x2F;tomorrow-theme</span><br><span class="line">  highlight_theme: solarized</span><br><span class="line">  # Add copy button on codeblock</span><br><span class="line">  copy_button:</span><br><span class="line">    enable: true</span><br><span class="line">    # Show text copy result.</span><br><span class="line">    show_result: true</span><br><span class="line">    # Available values: default | flat | mac</span><br><span class="line">    style:</span><br></pre></td></tr></table></figure></p>
<h3 id="é˜…è¯»è¿›åº¦"><a href="#é˜…è¯»è¿›åº¦" class="headerlink" title="é˜…è¯»è¿›åº¦"></a>é˜…è¯»è¿›åº¦</h3><p>NexTæ”¯æŒé¡µé¢æ»šåŠ¨é˜…è¯»è¿›åº¦æŒ‡ç¤ºå™¨ï¼Œé»˜è®¤å¼€å¯ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Reading progress bar</span><br><span class="line">reading_progress:</span><br><span class="line">  enable: true</span><br><span class="line">  # Available values: top | bottom</span><br><span class="line">  position: top</span><br><span class="line">  color: &quot;#37c6c0&quot;</span><br><span class="line">  height: 3px</span><br></pre></td></tr></table></figure></p>
<h3 id="ä¹¦ç­¾"><a href="#ä¹¦ç­¾" class="headerlink" title="ä¹¦ç­¾"></a>ä¹¦ç­¾</h3><p>ä¹¦ç­¾æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œå…è®¸ç”¨æˆ·ä¿å­˜ä»–ä»¬çš„é˜…è¯»è¿›åº¦ã€‚ç”¨æˆ·å¯ä»¥å•å‡»ä¹¦ç­¾å›¾æ ‡(å¦‚ğŸ”–)æ¥ä¿å­˜æ»šåŠ¨çš„ä½ç½®ã€‚å½“ä»–ä»¬ä¸‹æ¬¡è®¿é—®ä½ çš„åšå®¢æ—¶ï¼Œä»–ä»¬å¯ä»¥è‡ªåŠ¨æ¢å¤æ¯ä¸ªé¡µé¢çš„æœ€åæ»šåŠ¨ä½ç½®ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bookmark:</span><br><span class="line">  enable: true</span><br><span class="line">  # Customize the color of the bookmark.</span><br><span class="line">  color: &quot;#222&quot;</span><br><span class="line">  # If auto, save the reading progress when closing the page or clicking the bookmark-icon.</span><br><span class="line">  # If manual, only save it by clicking the bookmark-icon.</span><br><span class="line">  save: auto</span><br></pre></td></tr></table></figure></p>
<h3 id="Github-Banner"><a href="#Github-Banner" class="headerlink" title="Github Banner"></a>Github Banner</h3><p>NexTæä¾›åœ¨å³ä¸Šè§’æä¾› <code>Follow me on GitHub</code> bannerã€‚æ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ° github_bannerï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># permalinkæ˜¯å…¨è·¯å¾„çš„githubé“¾æ¥</span><br><span class="line"># &#96;Follow me on GitHub&#96; banner in the top-right corner.</span><br><span class="line">github_banner:</span><br><span class="line">  enable: true</span><br><span class="line">  permalink: https:&#x2F;&#x2F;github.com&#x2F;simonXi-tech</span><br><span class="line">  title: Follow me on GitHub</span><br></pre></td></tr></table></figure></p>
<h2 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a><a href="https://theme-next.org/docs/theme-settings/footer" target="_blank" rel="noopener">Footer</a></h2><h3 id="ç«™ç‚¹èµ·å§‹æ—¶é—´"><a href="#ç«™ç‚¹èµ·å§‹æ—¶é—´" class="headerlink" title="ç«™ç‚¹èµ·å§‹æ—¶é—´"></a>ç«™ç‚¹èµ·å§‹æ—¶é—´</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNexTåœ¨é¡µè„šæ˜¾ç¤ºå½“å‰å¹´ä»½ï¼Œæ¯”å¦‚<code>Â©2018</code>ã€‚æ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­çš„<code>since</code>éƒ¨åˆ†ä¸­çš„å€¼ï¼Œå°†å…¶é…ç½®ä¸ºæ˜¾ç¤ºæ—¶é—´é—´éš”ï¼Œå¦‚<code>Â©2015 - 2018</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">footer:</span><br><span class="line">  since: 2015</span><br></pre></td></tr></table></figure></p>
<h3 id="ç«™ç‚¹Footerå›¾æ ‡"><a href="#ç«™ç‚¹Footerå›¾æ ‡" class="headerlink" title="ç«™ç‚¹Footerå›¾æ ‡"></a>ç«™ç‚¹Footerå›¾æ ‡</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">footer:</span><br><span class="line">  icon:</span><br><span class="line">    # Icon name in Font Awesome. See: https:&#x2F;&#x2F;fontawesome.com&#x2F;v4.7.0&#x2F;icons&#x2F;</span><br><span class="line">    # &#96;heart&#96; is recommended with animation in red (#ff0000).</span><br><span class="line">    name: user</span><br><span class="line">    # If you want to animate the icon, set it to true.</span><br><span class="line">    animated: false</span><br><span class="line">    # Change the color of icon, using Hex Code.</span><br><span class="line">    color: &quot;#808080&quot;</span><br></pre></td></tr></table></figure>
<h3 id="ç«™ç‚¹ç‰ˆæƒåç§°"><a href="#ç«™ç‚¹ç‰ˆæƒåç§°" class="headerlink" title="ç«™ç‚¹ç‰ˆæƒåç§°"></a>ç«™ç‚¹ç‰ˆæƒåç§°</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNexTæ˜¾ç¤º ç«™ç‚¹é…ç½®æ–‡ä»¶ ä¸­çš„ä½œè€…åç§°ã€‚æ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­çš„ç‰ˆæƒéƒ¨åˆ†ä¸­çš„å€¼æ¥é…ç½®å®ƒã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">footer:</span><br><span class="line">  # If not defined, &#96;author&#96; from Hexo &#96;_config.yml&#96; will be used.</span><br><span class="line">  copyright:</span><br></pre></td></tr></table></figure></p>
<h3 id="ç«™ç‚¹å¹³å°ä¿¡æ¯"><a href="#ç«™ç‚¹å¹³å°ä¿¡æ¯" class="headerlink" title="ç«™ç‚¹å¹³å°ä¿¡æ¯"></a>ç«™ç‚¹å¹³å°ä¿¡æ¯</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNexT æ˜¾ç¤º Hexo å’Œ Theme &amp; scheme ä¿¡æ¯ï¼Œæ¯”å¦‚ <code>Powered by Hexo v4.0.0 | Theme â€“ NexT.Gemini v7.5.0</code>ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­çš„ <code>powered</code> å’Œ <code>theme</code> éƒ¨åˆ†ç¼–è¾‘å€¼æ¥é…ç½®å®ƒã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">footer:</span><br><span class="line">  powered:</span><br><span class="line">    # Hexo link (Powered by Hexo).</span><br><span class="line">    enable: false</span><br><span class="line">    # Version info of Hexo after Hexo link (vX.X.X).</span><br><span class="line">    version: false</span><br><span class="line"></span><br><span class="line">  theme:</span><br><span class="line">    # Theme &amp; scheme info link (Theme - NexT.scheme).</span><br><span class="line">    enable: false</span><br><span class="line">    # Version info of NexT after scheme info (vX.X.X).</span><br><span class="line">    version: false</span><br></pre></td></tr></table></figure></p>
<h3 id="ç«™ç‚¹å¤‡æ¡ˆä¿¡æ¯"><a href="#ç«™ç‚¹å¤‡æ¡ˆä¿¡æ¯" class="headerlink" title="ç«™ç‚¹å¤‡æ¡ˆä¿¡æ¯"></a>ç«™ç‚¹å¤‡æ¡ˆä¿¡æ¯</h3><p>ä¸­å›½ç”¨æˆ·å»ºç«‹è‡ªå·±çš„ç«™ç‚¹éœ€è¦å¤‡æ¡ˆä¿¡æ¯ã€‚é»˜è®¤è¿™äº›ä¿¡æ¯æ˜¯ä¸æ˜¾ç¤ºçš„ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­çš„ <code>beian</code> éƒ¨åˆ†ç¼–è¾‘å€¼æ¥é…ç½®å®ƒã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">footer:</span><br><span class="line">  # Beian ICP and gongan information for Chinese users. See: http:&#x2F;&#x2F;www.beian.miit.gov.cn, http:&#x2F;&#x2F;www.beian.gov.cn</span><br><span class="line">  beian:</span><br><span class="line">    enable: false</span><br><span class="line">    icp:</span><br><span class="line">    # The digit in the num of gongan beian.</span><br><span class="line">    gongan_id:</span><br><span class="line">    # The full num of gongan beian.</span><br><span class="line">    gongan_num:</span><br><span class="line">    # The icon for gongan beian. See: http:&#x2F;&#x2F;www.beian.gov.cn&#x2F;portal&#x2F;download</span><br><span class="line">    gongan_icon_url:</span><br></pre></td></tr></table></figure></p>
<h2 id="Sidebar"><a href="#Sidebar" class="headerlink" title="Sidebar"></a><a href="https://theme-next.org/docs/theme-settings/sidebar" target="_blank" rel="noopener">Sidebar</a></h2><h3 id="ä¾§è¾¹æ é£æ ¼"><a href="#ä¾§è¾¹æ é£æ ¼" class="headerlink" title="ä¾§è¾¹æ é£æ ¼"></a>ä¾§è¾¹æ é£æ ¼</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sidebar:</span><br><span class="line">  # ä¾§è¾¹æ ä½ç½®</span><br><span class="line">  position: left</span><br><span class="line">  #position: right</span><br></pre></td></tr></table></figure>
<h3 id="ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥"><a href="#ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥" class="headerlink" title="ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥"></a>ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥</h3><p>æ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ° socialã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># icons_onlyåªæ˜¾ç¤ºå›¾æ ‡</span><br><span class="line">social_icons:</span><br><span class="line">  enable: true</span><br><span class="line">  icons_only: false</span><br><span class="line">  transition: false</span><br><span class="line"></span><br><span class="line"># Social Links</span><br><span class="line"># Usage: &#96;Key: permalink || icon&#96;</span><br><span class="line"># Key is the link label showing to end users.</span><br><span class="line"># Value before &#96;||&#96; delimiter is the target permalink, value after &#96;||&#96; delimiter is the name of Font Awesome icon.</span><br><span class="line">social:</span><br><span class="line">  GitHub: https:&#x2F;&#x2F;github.com&#x2F;simonXi-tech || github</span><br><span class="line">  #E-Mail: mailto:yourname@gmail.com || envelope</span><br><span class="line">  #Weibo: https:&#x2F;&#x2F;weibo.com&#x2F;yourname || weibo</span><br><span class="line">  #Google: https:&#x2F;&#x2F;plus.google.com&#x2F;yourname || google</span><br><span class="line">  #Twitter: https:&#x2F;&#x2F;twitter.com&#x2F;yourname || twitter</span><br><span class="line">  #FB Page: https:&#x2F;&#x2F;www.facebook.com&#x2F;yourname || facebook</span><br><span class="line">  #VK Group: https:&#x2F;&#x2F;vk.com&#x2F;yourname || vk</span><br><span class="line">  #StackOverflow: https:&#x2F;&#x2F;stackoverflow.com&#x2F;yourname || stack-overflow</span><br><span class="line">  #YouTube: https:&#x2F;&#x2F;youtube.com&#x2F;yourname || youtube</span><br><span class="line">  #Instagram: https:&#x2F;&#x2F;instagram.com&#x2F;yourname || instagram</span><br><span class="line">  #Skype: skype:yourname?call|chat || skype</span><br></pre></td></tr></table></figure></p>
<h3 id="ä¾§è¾¹æ å‹æƒ…é“¾æ¥"><a href="#ä¾§è¾¹æ å‹æƒ…é“¾æ¥" class="headerlink" title="ä¾§è¾¹æ å‹æƒ…é“¾æ¥"></a>ä¾§è¾¹æ å‹æƒ…é“¾æ¥</h3><p>æ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ° linksã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Blog rolls</span><br><span class="line">links_settings:</span><br><span class="line">  icon: link</span><br><span class="line">  title: å‹æƒ…é“¾æ¥</span><br><span class="line">  # Available values: block | inline</span><br><span class="line">  layout: inline</span><br><span class="line"></span><br><span class="line">links:</span><br><span class="line">  CSDN: https:&#x2F;&#x2F;blog.csdn.net&#x2F;simonforfuture</span><br><span class="line">  Bilibili: https:&#x2F;&#x2F;www.bilibili.com&#x2F;</span><br></pre></td></tr></table></figure></p>
<h3 id="ä¾§è¾¹æ TOC"><a href="#ä¾§è¾¹æ TOC" class="headerlink" title="ä¾§è¾¹æ TOC"></a>ä¾§è¾¹æ TOC</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNexTæ˜¾ç¤ºä¾§è¾¹æ ä¸­çš„ç›®å½•(Table Of Contents)ã€‚æ‚¨å¯ä»¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶è®¾ç½®<code>toc.enable</code>ä¸ºfalseå–æ¶ˆã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  # Automatically add list number to toc.</span><br><span class="line">  number: true</span><br><span class="line">  # If true, all words will placed on next lines if header width longer then sidebar width.</span><br><span class="line">  wrap: false</span><br><span class="line">  # If true, all level of TOC in a post will be displayed, rather than the activated part of it.</span><br><span class="line">  expand_all: false</span><br><span class="line">  # Maximum heading depth of generated toc.</span><br><span class="line">  max_depth: 6</span><br></pre></td></tr></table></figure></p>
<h3 id="å›åˆ°é¡¶éƒ¨"><a href="#å›åˆ°é¡¶éƒ¨" class="headerlink" title="å›åˆ°é¡¶éƒ¨"></a>å›åˆ°é¡¶éƒ¨</h3><p>æ˜¾ç¤ºæ–‡ç« æµè§ˆçš„ç™¾åˆ†æ¯”ï¼Œå›åˆ°é¡¶éƒ¨ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">back2top:</span><br><span class="line">  enable: true</span><br><span class="line">  # Back to top in sidebar.</span><br><span class="line">  sidebar: true</span><br><span class="line">  # Scroll percent label in b2t button.</span><br><span class="line">  scrollpercent: true</span><br></pre></td></tr></table></figure></p>
<h2 id="Posts"><a href="#Posts" class="headerlink" title="Posts"></a><a href="https://theme-next.org/docs/theme-settings/posts" target="_blank" rel="noopener">Posts</a></h2><h3 id="åºè¨€æ–‡æœ¬"><a href="#åºè¨€æ–‡æœ¬" class="headerlink" title="åºè¨€æ–‡æœ¬"></a>åºè¨€æ–‡æœ¬</h3><p>é€šå¸¸éœ€è¦åœ¨ä¸»é¡µä¸­æ˜¾ç¤ºæ–‡ç« çš„æŸäº›éƒ¨åˆ†ï¼Œç„¶åæä¾›å®Œæ•´æ–‡ç« çš„é“¾æ¥ã€‚æ¥ä¸‹æ¥ç»™å‡º3ç§æ–¹æ³•æ¥æ§åˆ¶æ–‡ç« åœ¨ä¸»é¡µä¸­æ˜¾ç¤ºçš„æ–¹å¼ã€‚æ¢å¥è¯è¯´ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ¥æ˜¾ç¤ºæ–‡ç« æ‘˜è¦å’ŒRead MoreæŒ‰é’®ã€‚</p>
<p>Hexoæ¨èä½¿ç”¨<code>&lt;!-- more --&gt;</code>æ‰‹åŠ¨è®¾ç½®æ˜¾ç¤ºæ–‡ç« çš„æŸäº›éƒ¨åˆ†ã€‚</p>
<h2 id="æ–‡ç« è®¡æ•°"><a href="#æ–‡ç« è®¡æ•°" class="headerlink" title="æ–‡ç« è®¡æ•°"></a>æ–‡ç« è®¡æ•°</h2><p>NexT çš„å­—æ•°ç»Ÿè®¡å’Œé˜…è¯»æ—¶é•¿åŠŸèƒ½éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ <a href="https://github.com/theme-next/hexo-symbols-count-time" target="_blank" rel="noopener">hexo-symbols-count-time</a><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-symbols-count-time</span><br><span class="line"># ç«™ç‚¹é…ç½®æ–‡ä»¶æ·»åŠ </span><br><span class="line">symbols_count_time:</span><br><span class="line">  symbols: true</span><br><span class="line">  time: true</span><br><span class="line">  total_symbols: true</span><br><span class="line">  total_time: true  </span><br><span class="line"># ä¸»é¢˜é…ç½®æ–‡ä»¶ä¿®æ”¹</span><br><span class="line"># Post wordcount display settings</span><br><span class="line"># Dependencies: https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;hexo-symbols-count-time</span><br><span class="line">symbols_count_time:</span><br><span class="line">  separated_meta: true</span><br><span class="line">  item_text_post: true</span><br><span class="line">  item_text_total: false</span><br><span class="line">  awl: 4</span><br><span class="line">  wpm: 275</span><br></pre></td></tr></table></figure></p>
<h3 id="æ ‡ç­¾å›¾æ ‡"><a href="#æ ‡ç­¾å›¾æ ‡" class="headerlink" title="æ ‡ç­¾å›¾æ ‡"></a>æ ‡ç­¾å›¾æ ‡</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–‡ç« åº•éƒ¨æ ‡ç­¾æœ‰ #ã€‚æ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°tag_iconã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">tag_icon: true</span><br></pre></td></tr></table></figure></p>
<h3 id="å¼€å¯æ‰“èµ"><a href="#å¼€å¯æ‰“èµ" class="headerlink" title="å¼€å¯æ‰“èµ"></a>å¼€å¯æ‰“èµ</h3><p>è¶Šæ¥è¶Šå¤šçš„å¹³å°ï¼ˆå¾®ä¿¡å…¬ä¼—å¹³å°ï¼Œå¾®åšï¼Œç®€ä¹¦ï¼Œç™¾åº¦æ‰“èµç­‰ï¼‰æ”¯æŒæ‰“èµåŠŸèƒ½ï¼Œä»˜è´¹é˜…è¯»æ—¶ä»£è¶Šæ¥è¶Šè¿‘ï¼Œç‰¹æ­¤å¢åŠ äº†æ‰“èµåŠŸèƒ½ï¼Œæ”¯æŒå¾®ä¿¡æ‰“èµã€æ”¯ä»˜å®æ‰“èµå’Œæ¯”ç‰¹å¸ã€‚</p>
<ol>
<li>è·å–æ‚¨çš„å¾®ä¿¡æ”¯ä»˜/æ”¯ä»˜å®/æ¯”ç‰¹å¸ä»˜æ¬¾ç ï¼Œå¹¶å°†å…¶æ”¾å…¥ next ä¸»é¢˜ç›®å½•ä¸‹çš„ source/images ä¸­ï¼Œæˆ–å°†å…¶ä¸Šä¼ åˆ°å›¾åƒäº‘ä¸­ï¼Œè·å–HTTPåœ°å€</li>
<li>åœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­å¡«å…¥ å¾®ä¿¡ å’Œ æ”¯ä»˜å® æ”¶æ¬¾äºŒç»´ç å›¾ç‰‡åœ°å€ å³å¯å¼€å¯è¯¥åŠŸèƒ½ã€‚ <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Reward (Donate)</span><br><span class="line"># Front-matter variable (unsupport animation).</span><br><span class="line">reward_settings:</span><br><span class="line">  # If true, reward will be displayed in every article by default.</span><br><span class="line">  enable: true</span><br><span class="line">  animation: true</span><br><span class="line">  comment: æ‰“èµï¼Œä½ æ€•äº†ä¹ˆ(â—Ë‡âˆ€Ë‡â—)</span><br><span class="line"></span><br><span class="line">reward:</span><br><span class="line">  wechatpay: &#x2F;images&#x2F;wechatpay.jpg</span><br><span class="line">  alipay: &#x2F;images&#x2F;alipay.jpg</span><br><span class="line">  #bitcoin: &#x2F;images&#x2F;bitcoin.png</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Advanced-Settings"><a href="#Advanced-Settings" class="headerlink" title="Advanced Settings"></a><a href="https://theme-next.org/docs/advanced-settings" target="_blank" rel="noopener">Advanced Settings</a></h1><h2 id="èƒŒæ™¯åŠ¨ç”»"><a href="#èƒŒæ™¯åŠ¨ç”»" class="headerlink" title="èƒŒæ™¯åŠ¨ç”»"></a>èƒŒæ™¯åŠ¨ç”»</h2><p>NexT ç›®å‰æä¾›ä¸‰ç§èƒŒæ™¯åŠ¨ç”»æ–¹å¼ï¼šthreeï¼Œcanvas-nestï¼Œcanavas-ribbonã€‚åœ¨ä½¿ç”¨è¿™äº›èƒŒæ™¯åŠ¨ç”»ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½è¿™äº›JavaScript 3D åº“ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd themes&#x2F;next</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;theme-next-three.git source&#x2F;lib&#x2F;three</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;theme-next-canvas-nest.git source&#x2F;lib&#x2F;canvas-nest</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;theme-next-canvas-ribbon.git source&#x2F;lib&#x2F;canvas-ribbon</span><br></pre></td></tr></table></figure><br>ç„¶åå¯ä»¥æŒ‰ç…§è‡ªå·±çš„å–œå¥½ï¼Œæ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ° canvas ç›¸å…³å†…å®¹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># JavaScript 3D library.</span><br><span class="line"># Dependencies: https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;theme-next-three</span><br><span class="line">three:</span><br><span class="line">  enable: false</span><br><span class="line">  three_waves: false</span><br><span class="line">  canvas_lines: false</span><br><span class="line">  canvas_sphere: false</span><br><span class="line"></span><br><span class="line"># Canvas-nest</span><br><span class="line"># Dependencies: https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;theme-next-canvas-nest</span><br><span class="line"># For more information: https:&#x2F;&#x2F;github.com&#x2F;hustcc&#x2F;canvas-nest.js</span><br><span class="line">canvas_nest:</span><br><span class="line">  enable: true</span><br><span class="line">  onmobile: true # Display on mobile or not</span><br><span class="line">  color: &quot;0,0,255&quot; # RGB values, use &#96;,&#96; to separate</span><br><span class="line">  opacity: 0.5 # The opacity of line: 0~1</span><br><span class="line">  zIndex: -1 # z-index property of the background</span><br><span class="line">  count: 99 # The number of lines</span><br><span class="line"></span><br><span class="line"># Canvas-ribbon</span><br><span class="line"># Dependencies: https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;theme-next-canvas-ribbon</span><br><span class="line"># For more information: https:&#x2F;&#x2F;github.com&#x2F;zproo&#x2F;canvas-ribbon</span><br><span class="line">canvas_ribbon:</span><br><span class="line">  enable: true</span><br><span class="line">  size: 300 # The width of the ribbon</span><br><span class="line">  alpha: 0.6 # The transparency of the ribbon</span><br><span class="line">  zIndex: -1 # The display level of the ribbon</span><br></pre></td></tr></table></figure><br>æ›´å¤šNexTèƒŒæ™¯åŠ¨ç”»ï¼Œå¯ä»¥å»githubä¸Šæœç´¢<a href="https://github.com/theme-next" target="_blank" rel="noopener">NexT</a>æŸ¥æ‰¾ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é…ç½®å®Œæ„Ÿè§‰é«˜å¤§ä¸Šä¸å°‘ï¼Œå“ˆå“ˆå“ˆï¼</p>
]]></content>
      <categories>
        <category>åšå®¢æ­å»º</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>03-Nextä¸»é¢˜ä¼˜åŒ–ä¸‰</title>
    <url>/2019/11/22/03-Next%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96%E4%B8%89/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>é™æ€ç½‘ç«™åœ¨ä¸€äº›åŠŸèƒ½ä¸Šæ˜¯æœ‰é™åˆ¶çš„ï¼ŒNexTå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡æ¥æ‰©å±•ç½‘ç«™ã€‚<a id="more"></a></p>
<h1 id="Third-party-Services"><a href="#Third-party-Services" class="headerlink" title="Third-party Services"></a><a href="https://theme-next.org/docs/third-party-services/" target="_blank" rel="noopener">Third-party Services</a></h1><h2 id="æ•°å­¦æ–¹ç¨‹"><a href="#æ•°å­¦æ–¹ç¨‹" class="headerlink" title="æ•°å­¦æ–¹ç¨‹"></a><a href="https://theme-next.org/docs/third-party-services/math-equations" target="_blank" rel="noopener">æ•°å­¦æ–¹ç¨‹</a></h2><p>NexTæä¾›ä¸¤ä¸ªæ¸²æŸ“å¼•æ“æ¥æ˜¾ç¤ºæ•°å­¦æ–¹ç¨‹ã€‚<a href="https://www.mathjax.org/" target="_blank" rel="noopener">MathJax</a>å’Œ<a href="https://katex.org/" target="_blank" rel="noopener">KaTeX</a><br>å®‰è£…MathJaxæ¥æ¸²æŸ“æ•°å­¦å…¬å¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§æ¸²æŸ“å™¨ï¼š<br><a href="https://github.com/sun11/hexo-renderer-kramed" target="_blank" rel="noopener">hexo-renderer-kramed</a><br><a href="https://github.com/wzpan/hexo-renderer-pandoc" target="_blank" rel="noopener">hexo-renderer-pandoc</a></p>
<h3 id="å®‰è£…MathJax"><a href="#å®‰è£…MathJax" class="headerlink" title="å®‰è£…MathJax"></a>å®‰è£…MathJax</h3><ol>
<li>éœ€è¦å¸è½½åŸæ¥çš„æ¸²æŸ“å™¨ hexo-renderer-marded å’Œå®‰è£…ä¸Šè¿°æ¸²æŸ“å™¨ä¹‹ä¸€<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm un hexo-renderer-marked</span><br><span class="line">npm i hexo-renderer-kramed # or hexo-renderer-pandoc</span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­ï¼Œé€‰æ‹© mathjax ä¸ºæ¸²æŸ“å™¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Math Formulas Render Support</span><br><span class="line">math:</span><br><span class="line">  # Default (true) will load mathjax &#x2F; katex script on demand.</span><br><span class="line">  # That is it only render those page which has &#96;mathjax: true&#96; in Front-matter.</span><br><span class="line">  # If you set it to false, it will load mathjax &#x2F; katex srcipt EVERY PAGE.</span><br><span class="line">  per_page: true</span><br><span class="line"></span><br><span class="line">  # hexo-renderer-pandoc (or hexo-renderer-kramed) required for full MathJax support.</span><br><span class="line">  mathjax:</span><br><span class="line">    enable: true</span><br><span class="line">    # See: https:&#x2F;&#x2F;mhchem.github.io&#x2F;MathJax-mhchem&#x2F;</span><br><span class="line">    # ä¸“é—¨ç”¨äºé…ç½®åŒ–å­¦æ–¹ç¨‹å¼</span><br><span class="line">    mhchem: false</span><br><span class="line"></span><br><span class="line">  # hexo-renderer-markdown-it-plus (or hexo-renderer-markdown-it with markdown-it-katex plugin) required for full Katex support.</span><br><span class="line">  katex:</span><br><span class="line">    enable: false</span><br><span class="line">    # See: https:&#x2F;&#x2F;github.com&#x2F;KaTeX&#x2F;KaTeX&#x2F;tree&#x2F;master&#x2F;contrib&#x2F;copy-tex</span><br><span class="line">    copy_tex: false</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿è¡Œæ ‡å‡†Hexoç”Ÿæˆã€éƒ¨ç½²æµç¨‹æˆ–å¯åŠ¨æœåŠ¡å™¨:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g -d</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨Front Matterä¸­æ‰“å¼€ MathJaxå¼€å…³</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">title: 03-Nextä¸»é¢˜ä¼˜åŒ–ä¸‰</span><br><span class="line">date: 2019-11-22 17:57:33</span><br><span class="line">tags: </span><br><span class="line">  - hexo</span><br><span class="line">categories: </span><br><span class="line">  - åšå®¢æ­å»º</span><br><span class="line">  - hexo</span><br><span class="line">mathjax: true</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒMarkdownå’ŒTeXçš„è¯­æ³•ä¼šå‘ç”Ÿå†²çªã€‚ä¾‹å¦‚ï¼Œä¸‹åˆ’çº¿(<em>)åœ¨Markdownä¸­å¯ä»¥è§£é‡Šä¸ºæ–œä½“æ–‡æœ¬çš„å¼€å¤´ï¼Œåœ¨TeXä¸­å¯ä»¥è§£é‡Šä¸ºä¸‹æ ‡æ ‡è®°ã€‚ä¸ºäº†é¿å…è¯­æ³•é”™è¯¯ï¼Œè¯·ä½¿ç”¨è½¬ä¹‰å­—ç¬¦(\</em>)ã€‚</p>
<h3 id="åœ¨MathJaxä¸­ç¼–å·å’Œå¼•ç”¨æ–¹ç¨‹"><a href="#åœ¨MathJaxä¸­ç¼–å·å’Œå¼•ç”¨æ–¹ç¨‹" class="headerlink" title="åœ¨MathJaxä¸­ç¼–å·å’Œå¼•ç”¨æ–¹ç¨‹"></a>åœ¨MathJaxä¸­ç¼–å·å’Œå¼•ç”¨æ–¹ç¨‹</h3><p>åœ¨NexTçš„æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¢åŠ äº†è‡ªåŠ¨æ–¹ç¨‹ç¼–å·çš„åŠŸèƒ½ï¼Œä½¿å¾—åœ¨åç»­æ–‡ç« ä¸­å¯ä»¥æåŠè¿™ä¸ªæ–¹ç¨‹ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹é¢ç®€è¦æè¿°å¦‚ä½•ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ã€‚</p>
<p>é€šå¸¸ï¼Œè¦ä½¿è‡ªåŠ¨æ–¹ç¨‹ç¼–å·å·¥ä½œï¼Œæ‚¨å¿…é¡»å°†LaTeXæ–¹ç¨‹åŒ…è£…åœ¨ <code>equation</code> ç¯å¢ƒä¸­ã€‚<br>ä½¿ç”¨ç®€å•çš„æ—§å¼é£æ ¼(ä¾‹å¦‚:ç”¨ä¸¤è¾¹å„æœ‰ä¸¤ä¸ªç¾å…ƒç¬¦å·æ¥åŒ…è£…ç­‰å¼)æ˜¯è¡Œä¸é€šçš„ã€‚å¦‚ä½•å¼•ç”¨ä¸€ä¸ªæ–¹ç¨‹?å¿…é¡»ç»™å‡ºä¸€ä¸ª <code>\label{}</code> æ ‡è®°ï¼Œç„¶ååœ¨åé¢çš„æ–‡æœ¬ä¸­ï¼Œä½¿ç”¨ <code>\ref{}</code> æˆ– <code>\eqref{}</code> å¼•ç”¨å®ƒã€‚<br>æœ€å¥½ä½¿ç”¨ <code>\eqref{}</code>ï¼Œå› ä¸ºå¦‚æœä½¿ç”¨ <code>\ref{}</code>ï¼Œåˆ™æ–¹ç¨‹å·å‘¨å›´æ²¡æœ‰æ‹¬å·ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„æ–¹ç¨‹ç¼–å·åœºæ™¯ã€‚</p>
<h4 id="ç®€å•æ–¹ç¨‹"><a href="#ç®€å•æ–¹ç¨‹" class="headerlink" title="ç®€å•æ–¹ç¨‹"></a>ç®€å•æ–¹ç¨‹</h4><p>å¯¹äºç®€å•çš„æ–¹ç¨‹ï¼Œä½¿ç”¨ä¸‹é¢çš„å½¢å¼ç»™å‡ºä¸€ä¸ªæ ‡è®°ï¼Œ<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$$\begin&#123;equation&#125;</span><br><span class="line">e&#x3D;mc^2</span><br><span class="line">\end&#123;equation&#125;\label&#123;eq1&#125;$$</span><br></pre></td></tr></table></figure></p>
<script type="math/tex; mode=display">\begin{equation}
e=mc^2
\end{equation}\label{eq1}</script><p>ç„¶åï¼Œä½ å¯ä»¥åœ¨ä½ çš„æ–‡æœ¬ä¸­å¾ˆå®¹æ˜“åœ°å¼•ç”¨è¿™ä¸ªæ–¹ç¨‹ï¼Œä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„ä¸œè¥¿:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">The famous matter-energy equation $\eqref&#123;eq1&#125;$ proposed by Einstein...</span><br></pre></td></tr></table></figure></p>
<p>æ¸²æŸ“åç»“æœï¼šThe famous matter-energy equation (1) proposed by Einsteinâ€¦</p>
<h4 id="å¤šè¡Œæ–¹ç¨‹"><a href="#å¤šè¡Œæ–¹ç¨‹" class="headerlink" title="å¤šè¡Œæ–¹ç¨‹"></a>å¤šè¡Œæ–¹ç¨‹</h4><p>å¯¹äºå å¤šè¡Œçš„æ–¹ç¨‹ï¼Œåœ¨ <code>equation</code> ç¯å¢ƒä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>aligned</code> ç¯å¢ƒæŠŠå®ƒåˆ†æˆå¤šè¡Œ:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$$\begin&#123;equation&#125;</span><br><span class="line">\begin&#123;aligned&#125;</span><br><span class="line">a &amp;&#x3D; b + c \\</span><br><span class="line">  &amp;&#x3D; d + e + f + g \\</span><br><span class="line">  &amp;&#x3D; h + i</span><br><span class="line">\end&#123;aligned&#125;</span><br><span class="line">\end&#123;equation&#125;\label&#123;eq2&#125;$$</span><br></pre></td></tr></table></figure>
<script type="math/tex; mode=display">\begin{equation}
\begin{aligned}
a &= b + c \\
  &= d + e + f + g \\
  &= h + i
\end{aligned}
\end{equation}\label{eq2}</script><p>ç„¶åï¼Œä½ å¯ä»¥åœ¨ä½ çš„æ–‡æœ¬ä¸­å¾ˆå®¹æ˜“åœ°å¼•ç”¨è¿™ä¸ªæ–¹ç¨‹ï¼Œä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„ä¸œè¥¿:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Equation $\eqref&#123;eq2&#125;$ is a multi-line equation.</span><br></pre></td></tr></table></figure>
<p>æ¸²æŸ“ä¸ºï¼šEquation (2) is a multi-line equation.</p>
<h4 id="å¤šä¸ªæ–¹ç¨‹å¯¹é½"><a href="#å¤šä¸ªæ–¹ç¨‹å¯¹é½" class="headerlink" title="å¤šä¸ªæ–¹ç¨‹å¯¹é½"></a>å¤šä¸ªæ–¹ç¨‹å¯¹é½</h4><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>align</code> ç¯å¢ƒæ¥å¯¹é½å¤šä¸ªæ–¹ç¨‹ã€‚æ¯ä¸ªæ–¹ç¨‹éƒ½æœ‰è‡ªå·±çš„ç¼–å·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$$\begin&#123;align&#125;</span><br><span class="line">a &amp;&#x3D; b + c \label&#123;eq3&#125; \\</span><br><span class="line">x &amp;&#x3D; yz \label&#123;eq4&#125;\\</span><br><span class="line">l &amp;&#x3D; m - n \label&#123;eq5&#125;</span><br><span class="line">\end&#123;align&#125;$$</span><br></pre></td></tr></table></figure>
<script type="math/tex; mode=display">\begin{align}
a &= b + c \label{eq3} \\
x &= yz \label{eq4}\\
l &= m - n \label{eq5}
\end{align}</script><p>ç„¶åï¼Œä½ å¯ä»¥åœ¨ä½ çš„æ–‡æœ¬ä¸­å¾ˆå®¹æ˜“åœ°å¼•ç”¨è¿™ä¸ªæ–¹ç¨‹ï¼Œä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„ä¸œè¥¿:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">There are three aligned equations: equation $\eqref&#123;eq3&#125;$, equation $\eqref&#123;eq4&#125;$ and equation $\eqref&#123;eq5&#125;$.</span><br></pre></td></tr></table></figure>
<p>æ¸²æŸ“ä¸ºï¼šThere are three aligned equations: equation (3), equation (4) and equation (5).<br><code>align</code>æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–¹ç¨‹ç¯å¢ƒï¼Œæ‰€ä»¥ä¸éœ€è¦<code>equation</code>ç¯å¢ƒåŒ…è£…ã€‚</p>
<h4 id="æ–¹ç¨‹ä¸ç¼–å·"><a href="#æ–¹ç¨‹ä¸ç¼–å·" class="headerlink" title="æ–¹ç¨‹ä¸ç¼–å·"></a>æ–¹ç¨‹ä¸ç¼–å·</h4><p>åœ¨<code>align</code>ç¯å¢ƒä¸­ï¼Œå¦‚æœæ‚¨ä¸æƒ³å¯¹æŸä¸ªæ–¹ç¨‹è¿›è¡Œç¼–å·ï¼Œåªéœ€è¦åœ¨è¿™äº›æ–¹ç¨‹åé¢åŠ ä¸Š<code>\nonumber</code>ã€‚å¦‚ä¸‹:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$$\begin&#123;align&#125;</span><br><span class="line">-4 + 5x &amp;&#x3D; 2+y \nonumber  \\</span><br><span class="line"> w+2 &amp;&#x3D; -1+w \\</span><br><span class="line"> ab &amp;&#x3D; cb</span><br><span class="line">\end&#123;align&#125;$$</span><br></pre></td></tr></table></figure>
<script type="math/tex; mode=display">\begin{align}
-4 + 5x &= 2+y \nonumber  \\
 w+2 &= -1+w \\
 ab &= cb
\end{align}</script><h4 id="ä½¿ç”¨-tagæ ‡è®°æ–¹ç¨‹"><a href="#ä½¿ç”¨-tagæ ‡è®°æ–¹ç¨‹" class="headerlink" title="ä½¿ç”¨ \tagæ ‡è®°æ–¹ç¨‹"></a>ä½¿ç”¨ <code>\tag</code>æ ‡è®°æ–¹ç¨‹</h4><p>æœ‰æ—¶ï¼Œæ‚¨å¸Œæœ›ä½¿ç”¨æ›´å¤šå¥‡ç‰¹çš„æ ·å¼æ¥å¼•ç”¨æ‚¨çš„æ–¹ç¨‹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code>\tag{}</code>æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ä¾‹å¦‚:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$$x+1\over\sqrt&#123;1-x^2&#125; \tag&#123;i&#125;\label&#123;eq_tag&#125;$$</span><br></pre></td></tr></table></figure>
<script type="math/tex; mode=display">x+1\over\sqrt{1-x^2} \tag{i}\label{eq_tag}</script><p>ç„¶åï¼Œä½ å¯ä»¥åœ¨ä½ çš„æ–‡æœ¬ä¸­å¾ˆå®¹æ˜“åœ°å¼•ç”¨è¿™ä¸ªæ–¹ç¨‹ï¼Œä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„ä¸œè¥¿:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Equation $\eqref&#123;eq_tag&#125;$ use &#96;\tag&#123;&#125;&#96; instead of automatic numbering.</span><br></pre></td></tr></table></figure>
<p>Equation (i) use <code>\tag{}</code> instead of automatic numbering.</p>
<h2 id="è¯„è®ºç³»ç»Ÿ"><a href="#è¯„è®ºç³»ç»Ÿ" class="headerlink" title="è¯„è®ºç³»ç»Ÿ"></a><a href="https://theme-next.org/docs/third-party-services/comments" target="_blank" rel="noopener">è¯„è®ºç³»ç»Ÿ</a></h2><p>LiveReæ˜¯ä¸€ä¸ªåŸºäºç¤¾äº¤ç½‘ç«™è¯„è®ºçš„å†…å®¹å¹³å°ï¼Œå¸®åŠ©ç”¨æˆ·è‡ªç”±äº¤æµã€‚</p>
<ol>
<li><a href="https://www.livere.com/" target="_blank" rel="noopener">åœ¨LiveRe</a>åˆ›å»ºä¸€ä¸ªè´¦å·ï¼Œç‚¹å‡» å®‰è£… æŒ‰é’®ï¼Œé€‰æ‹© City ç‰ˆæœ¬ï¼Œç‚¹å‡» ç°åœ¨å®‰è£… æŒ‰é’®ã€‚</li>
<li>å¤åˆ¶å®‰è£…ä»£ç ä¸­çš„data-uidå­—æ®µä»¥è·å¾—LiveRe UIDã€‚</li>
<li>æ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°livere_uidï¼Œå°†è·å¾—çš„LiveRe UIDæ·»åŠ ä¸Šã€‚<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Support for LiveRe comments system.</span><br><span class="line"># You can get your uid from https:&#x2F;&#x2F;livere.com&#x2F;insight&#x2F;myCode (General web site)</span><br><span class="line">livere_uid: your_uid</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="ä¸è’œå­ç»Ÿè®¡"><a href="#ä¸è’œå­ç»Ÿè®¡" class="headerlink" title="ä¸è’œå­ç»Ÿè®¡"></a><a href="https://theme-next.org/docs/third-party-services/statistics-and-analytics" target="_blank" rel="noopener">ä¸è’œå­ç»Ÿè®¡</a></h2><p>æ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ° busuanzi_countã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Show Views &#x2F; Visitors of the website &#x2F; page with busuanzi.</span><br><span class="line"># Get more information on http:&#x2F;&#x2F;ibruce.info&#x2F;2015&#x2F;04&#x2F;04&#x2F;busuanzi</span><br><span class="line">busuanzi_count:</span><br><span class="line">  enable: true</span><br><span class="line">  total_visitors: true</span><br><span class="line">  total_visitors_icon: user</span><br><span class="line">  total_views: true</span><br><span class="line">  total_views_icon: eye</span><br><span class="line">  post_views: true</span><br><span class="line">  post_views_icon: eye</span><br></pre></td></tr></table></figure></p>
<h2 id="æœ¬åœ°æœç´¢"><a href="#æœ¬åœ°æœç´¢" class="headerlink" title="æœ¬åœ°æœç´¢"></a><a href="https://theme-next.org/docs/third-party-services/search-services" target="_blank" rel="noopener">æœ¬åœ°æœç´¢</a></h2><p>æœ¬åœ°æœç´¢ä¸éœ€è¦ä»»ä½•å¤–éƒ¨ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œå¯ä»¥è¢«æœç´¢å¼•æ“é¢å¤–ç´¢å¼•ã€‚å¤§å¤šæ•°ç”¨æˆ·æ¨èçš„æœç´¢æ–¹æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹å®‰è£…hexo-generator-searchdb</span><br><span class="line">npm install hexo-generator-searchdb</span><br><span class="line"># ç«™ç‚¹é…ç½®æ–‡ä»¶æ·»åŠ </span><br><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br><span class="line"># ä¸»é¢˜é…ç½®æ–‡ä»¶ç¼–è¾‘</span><br><span class="line"># Local search</span><br><span class="line"># Dependencies: https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;hexo-generator-searchdb</span><br><span class="line">local_search:</span><br><span class="line">  enable: true</span><br><span class="line">  # If auto, trigger search by changing input.</span><br><span class="line">  # If manual, trigger search by pressing enter key or search button.</span><br><span class="line">  trigger: auto</span><br><span class="line">  # Show top n results per article, show all results by setting to -1</span><br><span class="line">  top_n_per_article: 1</span><br><span class="line">  # Unescape html strings to the readable one.</span><br><span class="line">  unescape: false</span><br><span class="line">  # Preload the search data when the page loads.</span><br><span class="line">  preload: false</span><br></pre></td></tr></table></figure></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åŸºäºhexoå’ŒNexTä¸»é¢˜çš„æ­å»ºåŸºæœ¬å®Œæˆï¼</p>
]]></content>
      <categories>
        <category>åšå®¢æ­å»º</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>04-Nextä¸»é¢˜ä¼˜åŒ–å››</title>
    <url>/2019/11/23/04-Next%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96%E5%9B%9B/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡ä»‹ç»å¦‚ä½•ä¿®æ”¹<code>hexo s</code>é»˜è®¤ç«¯å£ï¼Œæ¨¡æ¿ï¼Œè‰ç¨¿ç­‰é—®é¢˜ã€‚<a id="more"></a></p>
<h1 id="hexo-sé»˜è®¤ç«¯å£"><a href="#hexo-sé»˜è®¤ç«¯å£" class="headerlink" title="hexo sé»˜è®¤ç«¯å£"></a><code>hexo s</code>é»˜è®¤ç«¯å£</h1><p>æˆ‘ä»¬çŸ¥é“<code>hexo s</code>ä¼šæ‰“å¼€çš„é»˜è®¤ç«¯å£æ˜¯4000ã€‚ä½†æ˜¯åšä¸»åœ¨è¿è¡Œæœ¬åœ°åšå®¢çš„æ—¶å€™ï¼Œè®¿é—®4000ç«¯å£æœ‰æ—¶å€™å¯ä»¥æœ‰æ—¶å€™ä¸å¯ä»¥ã€‚æ‰€ä»¥å†³å®šä¿®æ”¹æ‰è¿™ä¸ªç«¯å£ã€‚ç½‘ç»œä¸Šå¤§å¤šæ¨èä½¿ç”¨ï¼š<code>hexo s -p 5000</code>è¿™ç§æ–¹å¼ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦æ¢ç«¯å£å¤ªéº»çƒ¦äº†ã€‚æ°¸ä¹…çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ‰“å¼€ ç«™ç‚¹ç›®å½•ä¸‹çš„<code>node_modules/hexo-server/index.js</code>ï¼Œä¿®æ”¹ç«¯å£ä¸º5000å³å¯ã€‚<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo.config.server &#x3D; Object.assign(&#123;</span><br><span class="line">  port: 5000,</span><br><span class="line">  log: false,</span><br><span class="line">  &#x2F;&#x2F; &#96;undefined&#96; uses Node&#39;s default (try &#96;::&#96; with fallback to &#96;0.0.0.0&#96;)</span><br><span class="line">  ip: undefined,</span><br><span class="line">  compress: false,</span><br><span class="line">  header: true</span><br><span class="line">&#125;, hexo.config.server);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="hexo-å†™ä½œ"><a href="#hexo-å†™ä½œ" class="headerlink" title="hexo å†™ä½œ"></a><a href="https://hexo.io/zh-cn/docs/writing" target="_blank" rel="noopener">hexo å†™ä½œ</a></h1><h2 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h2><p>åœ¨Hexo ä¸­ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä¸‹åˆ—å‘½ä»¤æ¥åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« æˆ–è€…æ–°çš„é¡µé¢ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure><br>æ‚¨å¯ä»¥åœ¨å‘½ä»¤ä¸­æŒ‡å®šæ–‡ç« çš„å¸ƒå±€ï¼ˆlayoutï¼‰ï¼Œé»˜è®¤ä¸º postï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ _config.yml ä¸­çš„ default_layout å‚æ•°æ¥æŒ‡å®šé»˜è®¤å¸ƒå±€ã€‚<br>Hexo æœ‰ä¸‰ç§é»˜è®¤å¸ƒå±€ï¼špostã€page å’Œ draftã€‚åœ¨åˆ›å»ºè¿™ä¸‰ç§ä¸åŒç±»å‹çš„æ–‡ä»¶æ—¶ï¼Œå®ƒä»¬å°†ä¼šè¢«ä¿å­˜åˆ°ä¸åŒçš„è·¯å¾„ã€‚</p>
<ul>
<li>é»˜è®¤postå¸ƒå±€ä¿å­˜åœ¨ source/_posts ç›®å½•ä¸‹ï¼›</li>
<li>pageå¸ƒå±€ä¿å­˜åœ¨ sourceç›®å½•ä¸‹ï¼›</li>
<li>draftå¸ƒå±€ä¿å­˜åœ¨ source/draftsç›®å½•ä¸‹ã€‚</li>
</ul>
<h3 id="è‰ç¨¿"><a href="#è‰ç¨¿" class="headerlink" title="è‰ç¨¿"></a>è‰ç¨¿</h3><p>åˆšåˆšæåˆ°äº† Hexo çš„ä¸€ç§ç‰¹æ®Šå¸ƒå±€ï¼šdraftï¼Œè¿™ç§å¸ƒå±€åœ¨å»ºç«‹æ—¶ä¼šè¢«ä¿å­˜åˆ° source/_drafts æ–‡ä»¶å¤¹ï¼Œæ‚¨å¯é€šè¿‡ <code>publish</code> å‘½ä»¤å°†è‰ç¨¿ç§»åŠ¨åˆ° source/_posts æ–‡ä»¶å¤¹ï¼Œè¯¥å‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ä¸ <code>new</code> ååˆ†ç±»ä¼¼ï¼Œæ‚¨ä¹Ÿå¯åœ¨å‘½ä»¤ä¸­æŒ‡å®š layout æ¥æŒ‡å®šå¸ƒå±€ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo publish [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure><br>è‰ç¨¿é»˜è®¤ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸­ï¼Œæ‚¨å¯åœ¨æ‰§è¡Œæ—¶åŠ ä¸Š <code>--draft</code> å‚æ•°ï¼Œæˆ–æ˜¯æŠŠ <code>render_drafts</code> å‚æ•°è®¾ä¸º true æ¥é¢„è§ˆè‰ç¨¿ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># åˆ›å»ºtestè‰ç¨¿</span><br><span class="line">hexo new draft test</span><br><span class="line"># å°†testè‰ç¨¿æ”¾ç½®åˆ° source&#x2F;_posts æ–‡ä»¶å¤¹</span><br><span class="line">hexo publish test</span><br><span class="line"># æ˜¾ç¤ºè‰ç¨¿</span><br><span class="line">hexo s --draft</span><br></pre></td></tr></table></figure></p>
<h3 id="æ¨¡æ¿-Scaffold"><a href="#æ¨¡æ¿-Scaffold" class="headerlink" title="æ¨¡æ¿(Scaffold)"></a>æ¨¡æ¿(Scaffold)</h3><p>åœ¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® <code>scaffolds</code> æ–‡ä»¶å¤¹å†…ç›¸å¯¹åº”çš„æ–‡ä»¶æ¥å»ºç«‹æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new photo &quot;My Gallery&quot;</span><br></pre></td></tr></table></figure><br>åœ¨æ‰§è¡Œè¿™è¡ŒæŒ‡ä»¤æ—¶ï¼ŒHexo ä¼šå°è¯•åœ¨ scaffolds æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾ photo.mdï¼Œå¹¶æ ¹æ®å…¶å†…å®¹å»ºç«‹æ–‡ç« ã€‚æ¯”å¦‚ï¼Œå…³äº hexo çš„åšå®¢å¯ä»¥æ–°å»º hexo.md æ¨¡æ¿ï¼Œå†…å®¹å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags:</span><br><span class="line">  - hexo</span><br><span class="line">categories:</span><br><span class="line">  - åšå®¢æ­å»º</span><br><span class="line">  - hexo</span><br></pre></td></tr></table></figure><br>ç„¶åï¼Œä½¿ç”¨<code>hexo new hexo &quot;test&quot;</code>å³å¯æ–°å»ºè‡ªå·±çš„æ¨¡æ¿ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ¬æ–‡æ˜¯å¯¹hexoçš„ä¸€äº›å°åŠŸèƒ½çš„æ€»ç»“ï¼åšä¸»çš„hexoåšå®¢æ­å»ºå°±æ­¤å‘Šä¸€æ®µè½ï¼</p>
]]></content>
      <categories>
        <category>åšå®¢æ­å»º</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>05-å­¦ä¹ å¼ºå›½ç§‘æ™®ä¸€</title>
    <url>/2019/11/24/05-%E5%AD%A6%E4%B9%A0%E5%BC%BA%E5%9B%BD%E7%A7%91%E6%99%AE%E4%B8%80/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬ç§‘çœŸçš„æ˜¯ä¸¤è€³ä¸é—»çª—å¤–äº‹ï¼Œç ”ç©¶ç”Ÿæœ‰å…¥å…šçš„æƒ³æ³•ï¼è™½ç„¶ä¸ä¸€å®šæˆåŠŸï¼Œä½†æ˜¯è®°å½•ä¸€äº›å¸¸è¯†è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼<br><a id="more"></a></p>
<h1 id="ä¸­å¤®æœºæ„"><a href="#ä¸­å¤®æœºæ„" class="headerlink" title="ä¸­å¤®æœºæ„"></a><a href="https://baike.baidu.com/item/%E4%B8%AD%E5%A4%AE%E6%9C%BA%E6%9E%84/5148517?fr=aladdin" target="_blank" rel="noopener">ä¸­å¤®æœºæ„</a></h1><p>â€œä¸­å¤®æœºæ„â€å°±æ˜¯ä¸»è¦åŒ…æ‹¬å›½å®¶æœºæ„ã€ä¸­å¤®æ”¿åºœç»„æˆéƒ¨é—¨ã€ä¸­å…±ä¸­å¤®ï¼Œä»¥åŠè¾…åŠ©æœºæ„ã€éƒ¨é—¨æœºæ„ã€ç›´å±äº‹ä¸šå•ä½ã€‚  </p>
<p>å›½å®¶æœºæ„ï¼š  </p>
<ul>
<li>å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šåŠå…¶å¸¸åŠ¡å§”å‘˜ä¼š</li>
<li><strong>ä¸­åäººæ°‘å…±å’Œå›½ä¸»å¸­</strong></li>
<li>ä¸­åäººæ°‘å…±å’Œå›½å›½åŠ¡é™¢</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½å›½å®¶ç›‘å¯Ÿå§”å‘˜ä¼š</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½æœ€é«˜äººæ°‘æ³•é™¢</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½æœ€é«˜äººæ°‘æ£€å¯Ÿé™¢</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½ä¸­å¤®å†›äº‹å§”å‘˜ä¼š</li>
</ul>
<p>ä¸­å¤®æ”¿åºœç»„æˆéƒ¨é—¨ï¼š</p>
<ul>
<li>ä¸­åäººæ°‘å…±å’Œå›½å¤–äº¤éƒ¨</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½å›½å®¶å‘å±•å’Œæ”¹é©å§”å‘˜ä¼š</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½å›½é˜²éƒ¨</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½æ•™è‚²éƒ¨</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½å·¥ä¸šå’Œä¿¡æ¯åŒ–éƒ¨</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½å…¬å®‰éƒ¨</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½è´¢æ”¿éƒ¨</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½å•†åŠ¡éƒ¨</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½å›½å®¶å«ç”Ÿå¥åº·å§”å‘˜ä¼šç­‰</li>
</ul>
<p>ä¸­å…±ä¸­å¤®ï¼š</p>
<ul>
<li>ä¸­å›½å…±äº§å…šå…¨å›½ä»£è¡¨å¤§ä¼š</li>
<li>ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼š</li>
<li>ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€åŠå…¶å¸¸åŠ¡å§”å‘˜ä¼šã€</li>
<li>ä¸­å›½å…±äº§å…šä¸­å¤®ä¹¦è®°å¤„</li>
<li>ä¸­å›½å…±äº§å…šä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼š</li>
<li>ä¸­å›½å…±äº§å…šä¸­å¤®å†›äº‹å§”å‘˜ä¼š</li>
</ul>
<p>å›½å®¶ä¸­å¤®å†›äº‹å§”å‘˜ä¼šä¸ä¸­å…±ä¸­å¤®å†›äº‹å§”å‘˜ä¼šæ˜¯åŒä¸€æœºæ„ã€‚</p>
<h1 id="å›½å®¶æœºæ„"><a href="#å›½å®¶æœºæ„" class="headerlink" title="å›½å®¶æœºæ„"></a>å›½å®¶æœºæ„</h1><h2 id="å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼š"><a href="#å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼š" class="headerlink" title="å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼š"></a><a href="https://baike.baidu.com/item/%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E5%85%A8%E5%9B%BD%E4%BA%BA%E6%B0%91%E4%BB%A3%E8%A1%A8%E5%A4%A7%E4%BC%9A" target="_blank" rel="noopener">å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼š</a></h2><p>ä¸­åäººæ°‘å…±å’Œå›½å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šæ˜¯<strong>æœ€é«˜å›½å®¶æƒåŠ›æœºå…³</strong>ã€‚å®ƒçš„å¸¸è®¾æœºå…³æ˜¯<a href="https://baike.baidu.com/item/%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E5%85%A8%E5%9B%BD%E4%BA%BA%E6%B0%91%E4%BB%A3%E8%A1%A8%E5%A4%A7%E4%BC%9A%E5%B8%B8%E5%8A%A1%E5%A7%94%E5%91%98%E4%BC%9A/5694500?fromtitle=%E5%85%A8%E5%9B%BD%E4%BA%BA%E6%B0%91%E4%BB%A3%E8%A1%A8%E5%A4%A7%E4%BC%9A%E5%B8%B8%E5%8A%A1%E5%A7%94%E5%91%98%E4%BC%9A&amp;fromid=689890&amp;fr=aladdin" target="_blank" rel="noopener">å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå¸¸åŠ¡å§”å‘˜ä¼š</a>ã€‚<strong>å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå’Œå…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå¸¸åŠ¡å§”å‘˜ä¼šè¡Œä½¿å›½å®¶ç«‹æ³•æƒ</strong>ã€‚å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šç”±çœã€è‡ªæ²»åŒºã€ç›´è¾–å¸‚ã€ç‰¹åˆ«è¡Œæ”¿åŒºå’Œå†›é˜Ÿé€‰å‡ºçš„ä»£è¡¨ç»„æˆã€‚å„å°‘æ•°æ°‘æ—éƒ½åº”å½“æœ‰é€‚å½“åé¢çš„ä»£è¡¨ã€‚</p>
<p>å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šæ¯å±Šä»»æœŸäº”å¹´ï¼Œ<strong>æ¯å¹´ä¸¾è¡Œä¸€æ¬¡ä¼šè®®</strong>ã€‚å¦‚æœå…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå¸¸åŠ¡å§”å‘˜ä¼šè®¤ä¸ºå¿…è¦ï¼Œæˆ–è€…æœ‰äº”åˆ†ä¹‹ä¸€ä»¥ä¸Šçš„å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šä»£è¡¨æè®®ï¼Œå¯ä»¥ä¸´æ—¶å¬é›†å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šä¼šè®®ã€‚</p>
<p>å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šä¼šè®®äºæ¯å¹´ç¬¬ä¸€å­£åº¦ä¸¾è¡Œï¼Œç”±å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå¸¸åŠ¡å§”å‘˜ä¼šå¬é›†ã€‚å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šä¸¾è¡Œä¼šè®®æ—¶ï¼Œé€‰ä¸¾ä¸»å¸­å›¢ä¸»æŒä¼šè®®ã€‚</p>
<p>å¸¸åŠ¡å§”å‘˜ä¼šçš„ç»„æˆäººå‘˜ç”±å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šä»å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šçš„ä»£è¡¨ä¸­é€‰ä¸¾äº§ç”Ÿã€‚å§”å‘˜é•¿ä¸»æŒå…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå¸¸åŠ¡å§”å‘˜ä¼šçš„å·¥ä½œï¼Œå¬é›†å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå¸¸åŠ¡å§”å‘˜ä¼šä¼šè®®ã€‚å‰¯å§”å‘˜é•¿ã€ç§˜ä¹¦é•¿ååŠ©å§”å‘˜é•¿å·¥ä½œã€‚  </p>
<p>å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå¸¸åŠ¡å§”å‘˜ä¼šä¼šè®®ä¸€èˆ¬æ¯ä¸¤ä¸ªæœˆä¸¾è¡Œä¸€æ¬¡ï¼›æœ‰ç‰¹æ®Šéœ€è¦çš„æ—¶å€™ï¼Œå¯ä»¥ä¸´æ—¶å¬é›†ä¼šè®®ã€‚</p>
<p><strong>æ ¹æ®ä¸­åäººæ°‘å…±å’Œå›½å®ªæ³•å’Œç›¸å…³è§„å®šï¼Œä¸­åäººæ°‘å…±å’Œå›½ç¬¬åä¸‰å±Šå…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šä»»æœŸè‡ª2018å¹´3æœˆèµ·ï¼Œè‡³2023å¹´3æœˆæ­¢ã€‚</strong></p>
<p>ç¬¬åä¸‰å±Šå…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå¸¸åŠ¡å§”å‘˜ä¼šå§”å‘˜é•¿ï¼šæ —æˆ˜ä¹¦</p>
<p>ä¸­å›½äººæ°‘æ”¿æ²»åå•†ä¼šè®®ç¬¬åä¸‰å±Šå…¨å›½å§”å‘˜ä¼šä»»æœŸè‡ª2018å¹´3æœˆèµ·ï¼Œè‡³2023å¹´3æœˆæ­¢ã€‚</p>
<p><img src="/images/05-å­¦ä¹ å¼ºå›½ç§‘æ™®ä¸€/01-äººå¤§ç»„ç»‡ç»“æ„.jpg" alt="&quot;01-äººå¤§ç»„ç»‡ç»“æ„.jpg&quot;"></p>
<h3 id="èŒè´£"><a href="#èŒè´£" class="headerlink" title="èŒè´£"></a>èŒè´£</h3><p>å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šè¡Œä½¿ä¸‹åˆ—èŒæƒï¼š</p>
<ol>
<li>ä¿®æ”¹å®ªæ³•ï¼›</li>
<li>é€‰ä¸¾ä¸­åäººæ°‘å…±å’Œå›½ä¸»å¸­ã€å‰¯ä¸»å¸­ï¼›</li>
<li>æ ¹æ®ä¸­åäººæ°‘å…±å’Œå›½ä¸»å¸­çš„æåï¼Œå†³å®šä¸­åäººæ°‘å…±å’Œå›½å›½åŠ¡é™¢æ€»ç†çš„äººé€‰ï¼›æ ¹æ®å›½åŠ¡é™¢æ€»ç†çš„æåï¼Œå†³å®šå›½åŠ¡é™¢å‰¯æ€»ç†ã€å›½åŠ¡å§”å‘˜ã€å„éƒ¨éƒ¨é•¿ã€å„å§”å‘˜ä¼šä¸»ä»»ã€å®¡è®¡é•¿ã€ç§˜ä¹¦é•¿çš„äººé€‰ï¼›</li>
<li>é€‰ä¸¾ä¸­å¤®å†›äº‹å§”å‘˜ä¼šä¸»å¸­ï¼›æ ¹æ®ä¸­å¤®å†›äº‹å§”å‘˜ä¼šä¸»å¸­çš„æåï¼Œå†³å®šä¸­å¤®å†›äº‹å§”å‘˜ä¼šå…¶ä»–ç»„æˆäººå‘˜çš„äººé€‰ï¼›</li>
<li>æ‰¹å‡†çœã€è‡ªæ²»åŒºå’Œç›´è¾–å¸‚çš„å»ºç½®ï¼›</li>
<li>å†³å®šç‰¹åˆ«è¡Œæ”¿åŒºçš„è®¾ç«‹åŠå…¶åˆ¶åº¦ï¼›</li>
<li>å†³å®šæˆ˜äº‰å’Œå’Œå¹³çš„é—®é¢˜<strong>ç­‰</strong></li>
</ol>
<p>å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šæœ‰æƒç½¢å…ä¸‹åˆ—äººå‘˜ï¼š</p>
<ol>
<li>ä¸­åäººæ°‘å…±å’Œå›½ä¸»å¸­ã€å‰¯ä¸»å¸­ï¼›</li>
<li>å›½åŠ¡é™¢æ€»ç†ã€å‰¯æ€»ç†ã€å›½åŠ¡å§”å‘˜ã€å„éƒ¨éƒ¨é•¿ã€å„å§”å‘˜ä¼šä¸»ä»»ã€å®¡è®¡é•¿ã€ç§˜ä¹¦é•¿ï¼›</li>
<li>ä¸­å¤®å†›äº‹å§”å‘˜ä¼šä¸»å¸­å’Œä¸­å¤®å†›äº‹å§”å‘˜ä¼šå…¶ä»–ç»„æˆäººå‘˜ï¼›</li>
<li>æ‰¹å‡†çœã€è‡ªæ²»åŒºã€ç›´è¾–å¸‚çš„å»ºç½®ï¼›å†³å®šç‰¹åˆ«è¡Œæ”¿åŒºçš„è®¾ç«‹åŠå…¶åˆ¶åº¦ï¼›å†³å®šæˆ˜äº‰å’Œå’Œå¹³çš„é—®é¢˜<strong>ç­‰</strong></li>
</ol>
<h2 id="ä¸­åäººæ°‘å…±å’Œå›½å›½åŠ¡é™¢"><a href="#ä¸­åäººæ°‘å…±å’Œå›½å›½åŠ¡é™¢" class="headerlink" title="ä¸­åäººæ°‘å…±å’Œå›½å›½åŠ¡é™¢"></a><a href="http://www.gov.cn/guowuyuan/zuzhi.htm" target="_blank" rel="noopener">ä¸­åäººæ°‘å…±å’Œå›½å›½åŠ¡é™¢</a></h2><p>ä¸­åäººæ°‘å…±å’Œå›½å›½åŠ¡é™¢ï¼Œå³<strong>ä¸­å¤®äººæ°‘æ”¿åºœ</strong>ï¼Œ<strong>æ˜¯æœ€é«˜å›½å®¶æƒåŠ›æœºå…³çš„æ‰§è¡Œæœºå…³ï¼Œæ˜¯æœ€é«˜å›½å®¶è¡Œæ”¿æœºå…³</strong>ï¼Œç”±æ€»ç†ã€å‰¯æ€»ç†ã€å›½åŠ¡å§”å‘˜ã€å„éƒ¨éƒ¨é•¿ã€å„å§”å‘˜ä¼šä¸»ä»»ã€å®¡è®¡é•¿ã€ç§˜ä¹¦é•¿ç»„æˆã€‚å›½åŠ¡é™¢å®è¡Œæ€»ç†è´Ÿè´£åˆ¶ã€‚(ç«‹æ³•ã€è¡Œæ”¿ã€å¸æ³•)</p>
<p>å›½åŠ¡é™¢ç»„æˆéƒ¨é—¨å³ä¸­å¤®æ”¿åºœç»„æˆéƒ¨é—¨ã€‚</p>
<h1 id="ä¸­å…±ä¸­å¤®ç»„ç»‡ç»“æ„"><a href="#ä¸­å…±ä¸­å¤®ç»„ç»‡ç»“æ„" class="headerlink" title="ä¸­å…±ä¸­å¤®ç»„ç»‡ç»“æ„"></a>ä¸­å…±ä¸­å¤®ç»„ç»‡ç»“æ„</h1><p><a href="http://www.chinanews.com/gn/z/shijiuda/19thcpccc.shtml" target="_blank" rel="noopener">ä¸­å›½å…±äº§å…šç¬¬åä¹å±Šä¸­å¤®é¢†å¯¼æœºæ„æˆå‘˜</a></p>
<h2 id="ä¸­å›½å…±äº§å…šå…¨å›½ä»£è¡¨å¤§ä¼š"><a href="#ä¸­å›½å…±äº§å…šå…¨å›½ä»£è¡¨å¤§ä¼š" class="headerlink" title="ä¸­å›½å…±äº§å…šå…¨å›½ä»£è¡¨å¤§ä¼š"></a>ä¸­å›½å…±äº§å…šå…¨å›½ä»£è¡¨å¤§ä¼š</h2><p><strong>ä¸­å›½å…±äº§å…šå…¨å›½ä»£è¡¨å¤§ä¼šå’Œå®ƒæ‰€äº§ç”Ÿçš„ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼š</strong>ä¸ºä¸­å›½å…±äº§å…š<a href="http://www.ccdi.gov.cn/tjts/ytdd/201712/t20171222_157490.html" target="_blank" rel="noopener">æœ€é«˜é¢†å¯¼æœºå…³</a>ã€‚<br>ä¸­å›½å…±äº§å…šå…¨å›½ä»£è¡¨å¤§ä¼šæ¯äº”å¹´ä¸¾è¡Œä¸€æ¬¡ï¼Œç”±ä¸­å¤®å§”å‘˜ä¼šå¬é›†ã€‚ä¸­å¤®å§”å‘˜ä¼šè®¤ä¸ºæœ‰å¿…è¦ï¼Œæˆ–è€…æœ‰ä¸‰åˆ†ä¹‹ä¸€ä»¥ä¸Šçš„çœä¸€çº§ç»„ç»‡æå‡ºè¦æ±‚ï¼Œå…¨å›½ä»£è¡¨å¤§ä¼šå¯ä»¥æå‰ä¸¾è¡Œï¼›å¦‚æ— éå¸¸æƒ…å†µï¼Œä¸å¾—å»¶æœŸä¸¾è¡Œã€‚å…¨å›½ä»£è¡¨å¤§ä¼šä»£è¡¨çš„åé¢å’Œé€‰ä¸¾åŠæ³•ï¼Œç”±ä¸­å¤®å§”å‘˜ä¼šå†³å®šã€‚ç”±<a href="http://www.81.cn/zggcdsjd/2017-10/18/content_7790061.htm" target="_blank" rel="noopener">åä¹å¤§ä»£è¡¨éƒ½æœ‰å“ªäº›äººï¼Ÿå¦‚ä½•é€‰ä¸¾äº§ç”Ÿï¼Ÿ</a>å¯çŸ¥ï¼Œåä¹å¤§é€‰ä¸¾äº§ç”Ÿäº†2287åå‡ºå¸­å…šçš„åä¹å¤§ä»£è¡¨ã€‚  </p>
<p>2017å¹´10æœˆ18æ—¥ï¼Œåä¹å¤§ï¼šä¸­å›½å…±äº§å…šç¬¬åä¹æ¬¡å…¨å›½ä»£è¡¨å¤§ä¼šã€‚ç”±æ­¤äº§ç”Ÿä¸­å›½å…±äº§å…šç¬¬åä¹å±Šä¸­å¤®å§”å‘˜ä¼šã€‚  </p>
<p><img src="/images/05-å­¦ä¹ å¼ºå›½ç§‘æ™®ä¸€/02-ä¸­å…±ä¸­å¤®ç»„ç»‡ç»“æ„.jpg" alt="&quot;02-ä¸­å…±ä¸­å¤®ç»„ç»‡ç»“æ„.jpg&quot;"></p>
<h3 id="èŒæƒ"><a href="#èŒæƒ" class="headerlink" title="èŒæƒ"></a>èŒæƒ</h3><ul>
<li>å¬å–å’Œå®¡æŸ¥ä¸­å¤®å§”å‘˜ä¼šçš„æŠ¥å‘Šï¼›</li>
<li>å¬å–å’Œå®¡æŸ¥ä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šçš„æŠ¥å‘Šï¼›</li>
<li>è®¨è®ºå¹¶å†³å®šå…šçš„é‡å¤§é—®é¢˜ï¼›</li>
<li><strong>ä¿®æ”¹å…šçš„ç« ç¨‹</strong>ï¼›</li>
<li><strong>é€‰ä¸¾ä¸­å¤®å§”å‘˜ä¼š</strong>ï¼›</li>
<li><strong>é€‰ä¸¾ä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼š</strong>ã€‚</li>
</ul>
<h2 id="ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼š"><a href="#ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼š" class="headerlink" title="ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼š"></a>ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼š</h2><p>ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼šï¼Œæ˜¯ä¸­å›½å…±äº§å…šå…¨å›½ä»£è¡¨å¤§ä¼šäº§ç”Ÿçš„ä¸­å›½å…±äº§å…šæ ¸å¿ƒæƒåŠ›æœºæ„ï¼Œç®€ç§°ä¸­å…±ä¸­å¤®ã€‚<br>ä¸­å…±ä¸­å¤®çš„é¢†å¯¼äººç°ç§°ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼šæ€»ä¹¦è®°ï¼Œç®€ç§°ä¸­å…±ä¸­å¤®æ€»ä¹¦è®°ã€‚<br>ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼šæ¯å±Šä»»æœŸäº”å¹´ã€‚å…¨å›½ä»£è¡¨å¤§ä¼šå¦‚æå‰æˆ–å»¶æœŸä¸¾è¡Œï¼Œå®ƒçš„ä»»æœŸç›¸åº”åœ°æ”¹å˜ã€‚ä¸­å¤®å§”å‘˜ä¼šå§”å‘˜å’Œå€™è¡¥å§”å‘˜å¿…é¡»æœ‰äº”å¹´ä»¥ä¸Šçš„å…šé¾„ã€‚ä¸­å¤®å§”å‘˜ä¼šå§”å‘˜å’Œå€™è¡¥å§”å‘˜çš„åé¢ï¼Œç”±å…¨å›½ä»£è¡¨å¤§ä¼šå†³å®šã€‚ä¸­å¤®å§”å‘˜ä¼šå§”å‘˜å‡ºç¼ºï¼Œç”±ä¸­å¤®å§”å‘˜ä¼šå€™è¡¥å§”å‘˜æŒ‰ç…§å¾—ç¥¨å¤šå°‘ä¾æ¬¡é€’è¡¥ã€‚  </p>
<h2 id="èŒèƒ½"><a href="#èŒèƒ½" class="headerlink" title="èŒèƒ½"></a>èŒèƒ½</h2><ul>
<li>å¬å¼€ä¸­å›½å…±äº§å…šå…¨å›½ä»£è¡¨å¤§ä¼š</li>
<li>é¢†å¯¼å…šçš„å…¨éƒ¨å·¥ä½œ<br>åœ¨å…¨å›½ä»£è¡¨å¤§ä¼šé—­ä¼šæœŸé—´ï¼Œä¸­å¤®å§”å‘˜ä¼šæ‰§è¡Œå…¨å›½ä»£è¡¨å¤§ä¼šçš„å†³è®®ï¼Œé¢†å¯¼å…šçš„å…¨éƒ¨å·¥ä½œï¼Œå¯¹å¤–ä»£è¡¨ä¸­å›½å…±äº§å…šã€‚</li>
</ul>
<h3 id="å‡ å±Šå‡ ä¸­"><a href="#å‡ å±Šå‡ ä¸­" class="headerlink" title="å‡ å±Šå‡ ä¸­"></a>å‡ å±Šå‡ ä¸­</h3><p>ä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®ç”±ä¸­å¤®æ”¿æ²»å±€å¬é›†ï¼Œæ¯å¹´è‡³å°‘ä¸¾è¡Œä¸€æ¬¡ã€‚ä¸­å¤®æ”¿æ²»å±€å‘ä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®æŠ¥å‘Šå·¥ä½œï¼Œæ¥å—ç›‘ç£ã€‚</p>
<p>2019å¹´10æœˆ28æ—¥è‡³31æ—¥ï¼Œä¸­å›½å…±äº§å…šç¬¬åä¹å±Šä¸­å¤®å§”å‘˜ä¼šç¬¬å››æ¬¡å…¨ä½“ä¼šè®®åœ¨åŒ—äº¬å¬å¼€ã€‚ç®€ç§°åä¹å±Šå››ä¸­å…¨ä¼šã€‚</p>
<h2 id="ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€åŠå…¶å¸¸åŠ¡å§”å‘˜ä¼š"><a href="#ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€åŠå…¶å¸¸åŠ¡å§”å‘˜ä¼š" class="headerlink" title="ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€åŠå…¶å¸¸åŠ¡å§”å‘˜ä¼š"></a>ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€åŠå…¶å¸¸åŠ¡å§”å‘˜ä¼š</h2><h3 id="ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€"><a href="#ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€" class="headerlink" title="ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€"></a><a href="https://baike.baidu.com/item/%E4%B8%AD%E5%9B%BD%E5%85%B1%E4%BA%A7%E5%85%9A%E4%B8%AD%E5%A4%AE%E6%94%BF%E6%B2%BB%E5%B1%80/4965426?fromtitle=%E4%B8%AD%E5%A4%AE%E6%94%BF%E6%B2%BB%E5%B1%80&amp;fromid=176901" target="_blank" rel="noopener">ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€</a></h3><p>ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€ï¼Œç®€ç§°ä¸­å…±ä¸­å¤®æ”¿æ²»å±€æˆ–ä¸­å¤®æ”¿æ²»å±€ï¼Œæ˜¯ä¸­å›½å…±äº§å…šçš„ä¸­å¤®é¢†å¯¼æœºæ„ä¹‹ä¸€ã€‚<br>å…šçš„ä¸­å¤®æ”¿æ²»å±€ã€ä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼šå’Œä¸­å¤®å§”å‘˜ä¼šæ€»ä¹¦è®°ï¼Œç”±ä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®é€‰ä¸¾ã€‚<strong>ä¸­å¤®å§”å‘˜ä¼šæ€»ä¹¦è®°</strong>å¿…é¡»ä»<strong>ä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼šå§”å‘˜</strong>ä¸­äº§ç”Ÿã€‚<br>ä¸­å¤®æ”¿æ²»å±€å’Œå®ƒçš„å¸¸åŠ¡å§”å‘˜ä¼šåœ¨ä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®é—­ä¼šæœŸé—´ï¼Œè¡Œä½¿ä¸­å¤®å§”å‘˜ä¼šçš„èŒæƒã€‚  </p>
<p>ç¬¬19å±Šä¸­å¤®æ”¿æ²»å±€å§”å‘˜25åï¼šä¸è–›ç¥¥ã€ä¹ è¿‘å¹³ã€ç‹æ™¨ã€ç‹æ²ªå®ã€åˆ˜é¹¤ã€è®¸å…¶äº®ã€å­™æ˜¥å…°ï¼ˆå¥³ï¼‰ã€æå¸Œã€æå¼ºã€æå…‹å¼ºã€æé¸¿å¿ ã€æ¨æ´ç¯ªã€æ¨æ™“æ¸¡ã€æ±ªæ´‹ã€å¼ åˆä¾ ã€é™ˆå¸Œã€é™ˆå…¨å›½ã€é™ˆæ•å°”ã€èµµä¹é™…ã€èƒ¡æ˜¥åã€æ —æˆ˜ä¹¦ã€éƒ­å£°ç¨ã€é»„å¤æ˜ã€éŸ©æ­£ã€è”¡å¥‡</p>
<h3 id="ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼š"><a href="#ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼š" class="headerlink" title="ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼š"></a><a href="https://baike.baidu.com/item/%E4%B8%AD%E5%9B%BD%E5%85%B1%E4%BA%A7%E5%85%9A%E4%B8%AD%E5%A4%AE%E6%94%BF%E6%B2%BB%E5%B1%80%E5%B8%B8%E5%8A%A1%E5%A7%94%E5%91%98%E4%BC%9A/5269848#2_15" target="_blank" rel="noopener">ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼š</a></h3><p>ä¸­å›½å…±äº§å…šä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼šï¼Œç®€ç§°â€œä¸­å…±ä¸­å¤®æ”¿æ²»å±€å¸¸å§”ä¼šâ€ï¼Œç”±ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®é€‰ä¸¾äº§ç”Ÿï¼Œä»»æœŸä¸ä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼šä¸€è‡´ã€‚å…¶æˆå‘˜ï¼ˆå§”å‘˜ï¼‰ç®€ç§°â€œä¸­å…±ä¸­å¤®æ”¿æ²»å±€å¸¸å§”â€ï¼Œæ˜¯ä¸­å›½å…±äº§å…šä¸­å¤®é¢†å¯¼é›†ä½“çš„é‡è¦æˆå‘˜ï¼Œä¹Ÿæ˜¯ä¸­åäººæ°‘å…±å’Œå›½å’Œä¸­å›½å…±äº§å…šçš„é‡è¦é¢†å¯¼äººã€‚</p>
<p>ç¬¬19å±Šä¸­å¤®æ”¿æ²»å±€å¸¸å§”ï¼šä¹ è¿‘å¹³ã€æå…‹å¼ºã€æ —æˆ˜ä¹¦ã€æ±ªæ´‹ã€ç‹æ²ªå®ã€èµµä¹é™…ã€éŸ©æ­£</p>
<h2 id="ä¸­å›½å…±äº§å…šä¸­å¤®ä¹¦è®°å¤„"><a href="#ä¸­å›½å…±äº§å…šä¸­å¤®ä¹¦è®°å¤„" class="headerlink" title="ä¸­å›½å…±äº§å…šä¸­å¤®ä¹¦è®°å¤„"></a><a href="https://baike.baidu.com/item/%E4%B8%AD%E5%9B%BD%E5%85%B1%E4%BA%A7%E5%85%9A%E4%B8%AD%E5%A4%AE%E4%B9%A6%E8%AE%B0%E5%A4%84/893913" target="_blank" rel="noopener">ä¸­å›½å…±äº§å…šä¸­å¤®ä¹¦è®°å¤„</a></h2><p>ä¸­å¤®ä¹¦è®°å¤„æ˜¯ä¸­å¤®æ”¿æ²»å±€å’Œå®ƒçš„å¸¸åŠ¡å§”å‘˜ä¼šçš„åŠäº‹æœºæ„ï¼›æˆå‘˜ç”±ä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼šæåï¼Œä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®é€šè¿‡ã€‚<br>ä¸­å¤®å§”å‘˜ä¼šæ€»ä¹¦è®°è´Ÿè´£å¬é›†ä¸­å¤®æ”¿æ²»å±€ä¼šè®®å’Œä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼šä¼šè®®ï¼Œå¹¶ä¸»æŒä¸­å¤®ä¹¦è®°å¤„çš„å·¥ä½œã€‚</p>
<p>ç¬¬19å±Šä¸­å¤®ä¹¦è®°å¤„ä¹¦è®°ï¼šç‹æ²ªå®ã€ä¸è–›ç¥¥ã€æ¨æ™“æ¸¡ã€é™ˆå¸Œã€éƒ­å£°ç¨ã€é»„å¤æ˜ã€å°¤æƒ</p>
<h2 id="ä¸­å›½å…±äº§å…šä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼š"><a href="#ä¸­å›½å…±äº§å…šä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼š" class="headerlink" title="ä¸­å›½å…±äº§å…šä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼š"></a><a href="https://baike.baidu.com/item/%E4%B8%AD%E5%9B%BD%E5%85%B1%E4%BA%A7%E5%85%9A%E4%B8%AD%E5%A4%AE%E7%BA%AA%E5%BE%8B%E6%A3%80%E6%9F%A5%E5%A7%94%E5%91%98%E4%BC%9A/5655314" target="_blank" rel="noopener">ä¸­å›½å…±äº§å…šä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼š</a></h2><p>ä¸­å›½å…±äº§å…šä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šï¼ˆç®€ç§°ä¸­å…±ä¸­å¤®çºªå§”ã€ä¸­å¤®çºªå§”æˆ–ä¸­çºªå§”ï¼‰ä¸ºä¸­å›½å…±äº§å…šä¸­å¤®å§”å‘˜ä¼šçš„æ£€æŸ¥ç›‘ç£æœºå…³ï¼Œæ‹…è´Ÿç»´æŠ¤å…šçš„ç« ç¨‹å’Œå…¶ä»–å…šå†…æ³•è§„ï¼Œæ£€æŸ¥å…šçš„è·¯çº¿ã€æ–¹é’ˆã€æ”¿ç­–å’Œå†³è®®çš„æ‰§è¡Œæƒ…å†µï¼ŒååŠ©å…šçš„å§”å‘˜ä¼šåŠ å¼ºå…šé£å»ºè®¾å’Œç»„ç»‡åè°ƒåè…è´¥å·¥ä½œçš„ä¸»è¦ä»»åŠ¡ï¼Œå®è¡Œ<strong>ä¹¦è®°</strong>è´Ÿè´£åˆ¶ã€‚  </p>
<p>å…šçš„ä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šåœ¨å…šçš„ä¸­å¤®å§”å‘˜ä¼šé¢†å¯¼ä¸‹è¿›è¡Œå·¥ä½œã€‚å…šçš„åœ°æ–¹å„çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå’ŒåŸºå±‚çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šåœ¨åŒçº§å…šçš„å§”å‘˜ä¼šå’Œä¸Šçº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šåŒé‡é¢†å¯¼ä¸‹è¿›è¡Œå·¥ä½œã€‚ä¸Šçº§å…šçš„çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šåŠ å¼ºå¯¹ä¸‹çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šçš„é¢†å¯¼ã€‚</p>
<h2 id="ä¸­å›½å…±äº§å…šä¸­å¤®å†›äº‹å§”å‘˜ä¼š"><a href="#ä¸­å›½å…±äº§å…šä¸­å¤®å†›äº‹å§”å‘˜ä¼š" class="headerlink" title="ä¸­å›½å…±äº§å…šä¸­å¤®å†›äº‹å§”å‘˜ä¼š"></a><a href="https://baike.baidu.com/item/%E4%B8%AD%E5%A4%AE%E5%86%9B%E4%BA%8B%E5%A7%94%E5%91%98%E4%BC%9A" target="_blank" rel="noopener">ä¸­å›½å…±äº§å…šä¸­å¤®å†›äº‹å§”å‘˜ä¼š</a></h2><p>ä¸­å¤®å†›äº‹å§”å‘˜ä¼šç®€ç§°â€œä¸­å¤®å†›å§”â€ã€‚ä¸­å›½å…±äº§å…šå’Œä¸­åäººæ°‘å…±å’Œå›½é¢†å¯¼å…¨å›½æ­¦è£…åŠ›é‡çš„æœ€é«˜å†›äº‹æœºæ„ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¸¤ä¼šï¼šä¸­åäººæ°‘å…±å’Œå›½å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå’Œä¸­å›½äººæ°‘æ”¿æ²»åå•†ä¼šè®®<br>å…šä»£ä¼šï¼šå¦‚ä¸­å›½å…±äº§å…šå…¨å›½ä»£è¡¨å¤§ä¼š<br>äººä»£ä¼šï¼šå¦‚å…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼š</p>
]]></content>
      <categories>
        <category>å­¦ä¹ å¼ºå›½</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ å¼ºå›½</tag>
      </tags>
  </entry>
  <entry>
    <title>06-leetcode-æ•°ç»„ä¸€</title>
    <url>/2019/11/27/06-leetcode-%E6%95%B0%E7%BB%84%E4%B8%80/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>2019.11.27å§‹ï¼</p>
<a id="more"></a>
<h1 id="ä¸¤æ•°ä¹‹å’Œ"><a href="#ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="ä¸¤æ•°ä¹‹å’Œ"></a><a href="https://leetcode-cn.com/problems/two-sum" target="_blank" rel="noopener">ä¸¤æ•°ä¹‹å’Œ</a></h1><p>ä»é¢˜ç›®å¯çŸ¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°ï¼Œè¿™ä¸¤ä¸ªæ•°ä¹‹å’Œä¸ºtargetã€‚ç„¶åï¼Œè¿”å›è¿™ä¸¤ä¸ªæ•°çš„<strong>æ•°ç»„ä¸‹æ ‡</strong>ã€‚</p>
<ul>
<li><p>é”™è¯¯è§£æ³•<br>æ²¡æœ‰æ³¨æ„åˆ°è¿”å›çš„æ˜¯æ•°ç»„çš„ä¸‹æ ‡ï¼Œæ‰€ä»¥å…ˆè¿›è¡Œäº†æ’åºã€‚è¿™é‡Œæ˜¯ä¸èƒ½è¿›è¡Œæ’åºçš„ã€‚</p>
</li>
<li><p>æš´åŠ›è§£æ³•<br>æŒ‡å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå›ºå®šå…ƒç´ ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆéå†å›ºå®šå…ƒç´ ä¹‹åå…¶ä»–æ‰€æœ‰å…ƒç´ ã€‚</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n^2) ç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Solution&#123;</span><br><span class="line">public:</span><br><span class="line">  vector&lt;int&gt; twoSum(vector&lt;int&gt; nums, int target)&#123;</span><br><span class="line">    for(int i&#x3D;0; i&lt;nums.size()-1; i++)</span><br><span class="line">      for(int j&#x3D;i+1; j&lt;nums.size(); j++)</span><br><span class="line">        if((nums.at(i)+nums.at(j)) &#x3D;&#x3D; target)</span><br><span class="line">          return &#123;i, j&#125;;</span><br><span class="line">    </span><br><span class="line">    throw invalid_argument(&quot;the input has no solution&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;    &#x2F;&#x2F; æ³¨æ„åˆ†å·</span><br></pre></td></tr></table></figure>
<h1 id="ç››æœ€å¤šæ°´çš„å®¹å™¨"><a href="#ç››æœ€å¤šæ°´çš„å®¹å™¨" class="headerlink" title="ç››æœ€å¤šæ°´çš„å®¹å™¨"></a><a href="https://leetcode-cn.com/problems/container-with-most-water" target="_blank" rel="noopener">ç››æœ€å¤šæ°´çš„å®¹å™¨</a></h1><ul>
<li>æš´åŠ›è§£æ³•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n^2) ç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;cassert&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">	int maxArea(vector&lt;int&gt;&amp; height) &#123;</span><br><span class="line">    assert(height.size() &gt;&#x3D; 2);</span><br><span class="line"></span><br><span class="line">		int maxArea &#x3D; 0;</span><br><span class="line">		for (int i &#x3D; 0; i &lt; height.size() - 1; i++) &#123;</span><br><span class="line">			for (int j &#x3D; i + 1; j &lt; height.size(); j++) &#123;</span><br><span class="line">				int area &#x3D; (j - i)*(height[i] &gt; height[j] ? height[j] : height[i]);</span><br><span class="line">				if (area &gt; maxArea)</span><br><span class="line">					maxArea &#x3D; area;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return maxArea;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>åŒæŒ‡é’ˆè§£æ³•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n) ç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;cassert&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">	int maxArea(vector&lt;int&gt;&amp; height) &#123;</span><br><span class="line"></span><br><span class="line">		assert(height.size() &gt;&#x3D; 2);</span><br><span class="line"></span><br><span class="line">		int leftp &#x3D; 0, rightp &#x3D; height.size() - 1;</span><br><span class="line">		int maxArea &#x3D; 0;</span><br><span class="line">		int area &#x3D; 0;</span><br><span class="line"></span><br><span class="line">		while (leftp &lt; rightp) &#123;</span><br><span class="line">			area &#x3D; max(area, (rightp - leftp)*min(height[leftp], height[rightp]));</span><br><span class="line">		</span><br><span class="line">			&#x2F;&#x2F; å¿…é¡»ç§»åŠ¨è¾¹è¾ƒå°çš„æŒ‡é’ˆ</span><br><span class="line">			&#x2F;&#x2F; ç§»åŠ¨è¾¹è¾ƒå¤§çš„æŒ‡é’ˆï¼Œé¢ç§¯ä¸€å®šå°äºæˆ–ç­‰äºå½“å‰çš„é¢ç§¯</span><br><span class="line">			&#x2F;&#x2F; ç§»åŠ¨è¾¹è¾ƒå°çš„æŒ‡é’ˆï¼Œé¢ç§¯æœ‰å¯èƒ½æ¯”å½“å‰é¢ç§¯å¤§</span><br><span class="line">			if (height[leftp] &gt; height[rightp])</span><br><span class="line">				rightp--;</span><br><span class="line">			else</span><br><span class="line">				leftp++;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return area;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="ä¸‰æ•°ä¹‹å’Œ"><a href="#ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="ä¸‰æ•°ä¹‹å’Œ"></a><a href="https://leetcode-cn.com/problems/3sum/" target="_blank" rel="noopener">ä¸‰æ•°ä¹‹å’Œ</a></h1><ul>
<li>æš´åŠ›è§£æ³•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n^3) ç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">	vector&lt;vector&lt;int&gt;&gt; threeSum(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">		if (nums.size() &lt; 3) return&#123;&#125;;</span><br><span class="line">		vector&lt;vector&lt;int&gt;&gt; res;</span><br><span class="line">		set&lt;vector&lt;int&gt;&gt; vset;  &#x2F;&#x2F; setå»é‡</span><br><span class="line"></span><br><span class="line">		for (int i &#x3D; 0; i &lt; nums.size() - 2; i++) &#123;</span><br><span class="line">			for (int j &#x3D; i + 1; j &lt; nums.size() - 1; j++) &#123;</span><br><span class="line">				for (int k &#x3D; j + 1; k &lt; nums.size(); k++) &#123;</span><br><span class="line">					if ((nums[i] + nums[j] + nums[k]) &#x3D;&#x3D; 0) &#123;</span><br><span class="line"></span><br><span class="line">						vector&lt;int&gt; temp;</span><br><span class="line">						int a &#x3D; min(min(nums[i], nums[j]), nums[k]);</span><br><span class="line">						int b &#x3D; max(max(nums[i], nums[j]), nums[k]);</span><br><span class="line">						int c &#x3D; 0 - a - b;</span><br><span class="line"></span><br><span class="line">						temp &#x3D; &#123;a, b, c&#125;;</span><br><span class="line">						vset.insert(temp);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		for (auto it : vset) &#123;</span><br><span class="line">			res.push_back(it);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return res;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>åŒæŒ‡é’ˆæ³•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n^2)+O(nlogn) ç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">	vector&lt;vector&lt;int&gt;&gt; threeSum(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">		int bindex, cindex;</span><br><span class="line">		vector&lt;vector&lt;int&gt;&gt; res;</span><br><span class="line">		sort(nums.begin(), nums.end());</span><br><span class="line"></span><br><span class="line">		int index &#x3D; 0;</span><br><span class="line">		while (index &lt; nums.size()) &#123;</span><br><span class="line">			if (nums[index] &gt; 0)</span><br><span class="line">				break;</span><br><span class="line"></span><br><span class="line">			bindex &#x3D; index + 1;</span><br><span class="line">			cindex &#x3D; nums.size() - 1;</span><br><span class="line"></span><br><span class="line">			while (bindex &lt; cindex) &#123;</span><br><span class="line">				if (nums[index] + nums[bindex] + nums[cindex] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">					res.push_back(&#123; nums[index], nums[bindex], nums[cindex] &#125;);</span><br><span class="line">					bindex &#x3D; next_nums_index(nums, bindex);</span><br><span class="line">					cindex &#x3D; prev_nums_index(nums, cindex);</span><br><span class="line">					&#x2F;&#x2F;break;	&#x2F;&#x2F; å›ºå®šä¸€æ•°ï¼Œå¯ä»¥æœ‰ä¸åŒçš„å…¶ä»–ä¸¤æ•°ä¸ä¹‹ç›¸åŠ ï¼Œå’Œä¸º0</span><br><span class="line">				&#125;</span><br><span class="line">				else if (nums[index] + nums[bindex] + nums[cindex] &lt; 0) &#123;</span><br><span class="line">					bindex &#x3D; next_nums_index(nums, bindex);</span><br><span class="line">				&#125;</span><br><span class="line">				else &#123;</span><br><span class="line">					cindex &#x3D; prev_nums_index(nums, cindex);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">      &#x2F;&#x2F; éœ€è¦åœ¨å‡½æ•°å†…éƒ¨å¯¹indexæ“ä½œï¼Œä¸èƒ½ä½¿ç”¨forå¾ªç¯</span><br><span class="line">			index &#x3D; next_nums_index(nums, index);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return res;</span><br><span class="line">	&#125;</span><br><span class="line">private:</span><br><span class="line">	int next_nums_index(vector&lt;int&gt;&amp; nums, int cur) &#123;</span><br><span class="line">		for (int i &#x3D; cur + 1; i &lt; nums.size(); i++) &#123;</span><br><span class="line">			if (nums[i] !&#x3D; nums[cur])</span><br><span class="line">				return i;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return nums.size();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	int prev_nums_index(vector&lt;int&gt;&amp; nums, int cur) &#123;</span><br><span class="line">		for (int i &#x3D; cur - 1; i &lt; nums.size(); i--) &#123;</span><br><span class="line">			if (nums[i] !&#x3D; nums[cur])</span><br><span class="line">				return i;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return -1;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ"><a href="#æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ"></a><a href="https://leetcode-cn.com/problems/3sum-closest/" target="_blank" rel="noopener">æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ</a></h1><ul>
<li>åŒæŒ‡é’ˆæ³•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n^2)+O(nlogn) ç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">	int threeSumClosest(vector&lt;int&gt;&amp; nums, int target) &#123;</span><br><span class="line">		sort(nums.begin(), nums.end());</span><br><span class="line"></span><br><span class="line">		int minsum &#x3D; nums[0] + nums[1] + nums[2], sum;</span><br><span class="line">		for (int index &#x3D; 0; index &lt; nums.size() - 2; index++) &#123;</span><br><span class="line">			int start &#x3D; index + 1, end &#x3D; nums.size() - 1;</span><br><span class="line"></span><br><span class="line">			while (start &lt; end) &#123;</span><br><span class="line">				sum &#x3D; nums[index] + nums[start] + nums[end];</span><br><span class="line">				if (abs(sum - target) &lt; abs(minsum - target))</span><br><span class="line">					minsum &#x3D; sum;</span><br><span class="line">				else if (sum &gt; target)</span><br><span class="line">					end--;</span><br><span class="line">				else</span><br><span class="line">					start++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return minsum;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="å››æ•°ä¹‹å’Œ"><a href="#å››æ•°ä¹‹å’Œ" class="headerlink" title="å››æ•°ä¹‹å’Œ"></a><a href="https://leetcode-cn.com/problems/4sum/" target="_blank" rel="noopener">å››æ•°ä¹‹å’Œ</a></h1><ul>
<li>åŒæŒ‡é’ˆæ³•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n^3) ç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">public:</span><br><span class="line">	vector&lt; vector&lt;int&gt; &gt; fourSum(vector&lt;int&gt;&amp; nums, int target) &#123;</span><br><span class="line">		vector&lt; vector&lt;int&gt; &gt; res;</span><br><span class="line">		int i&#x3D;0, j&#x3D;0, start&#x3D;0, end&#x3D;0, sum&#x3D;0, size &#x3D; nums.size();</span><br><span class="line">		if (size &lt; 4)</span><br><span class="line">			return res;</span><br><span class="line"></span><br><span class="line">		sort(nums.begin(), nums.end());</span><br><span class="line"></span><br><span class="line">		for (i &#x3D; 0; i &lt; size - 3; i &#x3D; next_nums_index(nums, i)) &#123;</span><br><span class="line">			for (j &#x3D; i + 1; j &lt; size - 2; j &#x3D; next_nums_index(nums, j)) &#123;</span><br><span class="line"></span><br><span class="line">				int sum_min &#x3D; nums[i] + nums[j] + nums[j + 1] + nums[j + 2];</span><br><span class="line">				int sum_max &#x3D; nums[i] + nums[j] + nums[size - 1] + nums[size - 2];</span><br><span class="line"></span><br><span class="line">				if (sum_min &gt; target)</span><br><span class="line">					break;</span><br><span class="line">				if (sum_max &lt; target)</span><br><span class="line">					continue;</span><br><span class="line"></span><br><span class="line">				start &#x3D; j + 1, end &#x3D; size - 1;</span><br><span class="line">				while (start &lt; end) &#123;</span><br><span class="line">					sum &#x3D; nums[i] + nums[j] + nums[start] + nums[end];</span><br><span class="line">					if (sum &#x3D;&#x3D; target) &#123;</span><br><span class="line">						res.push_back(&#123; nums[i], nums[j], nums[start], nums[end] &#125;);</span><br><span class="line"></span><br><span class="line">						end &#x3D; prev_nums_index(nums, end);</span><br><span class="line">						start &#x3D; next_nums_index(nums, start);</span><br><span class="line">					&#125;</span><br><span class="line">					else if (sum &gt; target) </span><br><span class="line">						end &#x3D; prev_nums_index(nums, end);</span><br><span class="line">					else</span><br><span class="line">						start &#x3D; next_nums_index(nums, start);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return res;</span><br><span class="line">	&#125;</span><br><span class="line">private:</span><br><span class="line">	int next_nums_index(const vector&lt;int&gt;&amp; nums, int index) &#123;</span><br><span class="line">		for (int i &#x3D; index + 1; i &lt; nums.size(); i++) &#123;</span><br><span class="line">			if (nums[i] !&#x3D; nums[index])</span><br><span class="line">				return i;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return nums.size();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	int prev_nums_index(const vector&lt;int&gt;&amp; nums, int index) &#123;</span><br><span class="line">		&#x2F;&#x2F;for (int i &#x3D; index - 1; index &gt;&#x3D; 0; i--) &#123;	&#x2F;&#x2F; error index&gt;&#x3D;0 forå¾ªç¯æ’æˆç«‹</span><br><span class="line">		for (int i &#x3D; index - 1; i &gt;&#x3D; 0; i--) &#123;</span><br><span class="line">			if (nums[i] !&#x3D; nums[index])</span><br><span class="line">				return i;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return -1;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"><a href="#åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹" class="headerlink" title="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"></a><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/" target="_blank" rel="noopener">åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int removeDuplicates(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        if(nums.size() &lt;&#x3D; 0) return 0;</span><br><span class="line"></span><br><span class="line">        int index &#x3D; 0;	&#x2F;&#x2F; [0, index]çš„ä¸ºæ­£ç¡®çš„æ•°ç»„å…ƒç´ </span><br><span class="line">        for(int i&#x3D;1; i&lt;nums.size(); i++)	</span><br><span class="line">            if(nums[index] !&#x3D; nums[i])</span><br><span class="line">                nums[++index] &#x3D; nums[i];</span><br><span class="line"></span><br><span class="line">        return index+1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-II"><a href="#åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-II" class="headerlink" title="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II"></a><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array-ii/" target="_blank" rel="noopener">åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int removeDuplicates(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        if(nums.size() &lt;&#x3D; 0) return 0;</span><br><span class="line">        int index &#x3D; 0;      &#x2F;&#x2F; &#x2F;&#x2F; [0, index]çš„ä¸ºæ­£ç¡®çš„æ•°ç»„å…ƒç´ </span><br><span class="line">        int k &#x3D; 1;</span><br><span class="line"></span><br><span class="line">        for(int i&#x3D;1; i&lt;nums.size(); i++)&#123;</span><br><span class="line">            if(nums[index] !&#x3D; nums[i])&#123;</span><br><span class="line">                nums[++index] &#x3D; nums[i];</span><br><span class="line">                k &#x3D; 1;</span><br><span class="line">            &#125;else if(nums[index] &#x3D;&#x3D; nums[i] &amp;&amp; k &lt; 2)&#123;</span><br><span class="line">                nums[++index] &#x3D; nums[i];</span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return index+1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="ç§»é™¤å…ƒç´ "><a href="#ç§»é™¤å…ƒç´ " class="headerlink" title="ç§»é™¤å…ƒç´ "></a><a href="https://leetcode-cn.com/problems/remove-element/" target="_blank" rel="noopener">ç§»é™¤å…ƒç´ </a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">	int removeElement(vector&lt;int&gt;&amp; nums, int val) &#123;</span><br><span class="line">		if (nums.size() &lt;&#x3D; 0) return 0;</span><br><span class="line">    	&#x2F;&#x2F;ä¸éœ€è¦è¿›è¡Œæ’åº</span><br><span class="line">		&#x2F;&#x2F;sort(nums.begin(), nums.end());</span><br><span class="line"></span><br><span class="line">		int i &#x3D; 0, k &#x3D; 0;</span><br><span class="line">		while (k &lt; nums.size()) &#123;</span><br><span class="line">			if (nums[k] !&#x3D; val) &#123;</span><br><span class="line">				nums[i++] &#x3D; nums[k++];</span><br><span class="line">			&#125;</span><br><span class="line">			else</span><br><span class="line">				k++;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return i;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="ä¸‹ä¸€ä¸ªæ’åˆ—"><a href="#ä¸‹ä¸€ä¸ªæ’åˆ—" class="headerlink" title="ä¸‹ä¸€ä¸ªæ’åˆ—"></a><a href="https://leetcode-cn.com/problems/next-permutation/" target="_blank" rel="noopener">ä¸‹ä¸€ä¸ªæ’åˆ—</a></h1><ul>
<li>å­—å…¸åº<br>åœ¨å­—å…¸åºä¸­ï¼Œé™åºæ’åˆ—æ˜¯æœ€å¤§çš„æ’åˆ—ï¼›å‡åºæ’åˆ—æ˜¯æœ€å°çš„æ’åˆ—ã€‚æ¯”å¦‚ cba &gt; abcï¼Œå°±ç›¸å½“äº 321 &gt; 123ã€‚</li>
<li>ä¸‹ä¸€ä¸ªæ’åˆ—</li>
</ul>
<ol>
<li>ä»æ’åˆ—çš„å³ä¾§å¼€å§‹ï¼Œæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„æœ€é•¿é™åºæ’åˆ—ã€‚ æ¯”å¦‚ 1 5 4 7 6 3 1ã€‚å³ä¾§å‘å·¦æœ€é•¿é™åºæ’åˆ— 7 6 3 1ã€‚åœ¨è¿™ä¸ªæœ€å¤§é™åºå­åºåˆ—ä¸Šæ‰¾ä¸‹ä¸€ä¸ªåºåˆ—ã€‚</li>
<li>å®ç°ä¸­ï¼Œnums[i] &lt; nums[i+1] æ—¶å°±å·²ç»æ˜¯æœ€é•¿é™åºæ’åˆ—ã€‚ç„¶åå°† nums[i] ä¸ æœ€é•¿é™åºæ’åˆ—ä¸­ nums[j] è¿›è¡Œäº¤æ¢ã€‚ æ»¡è¶³çš„æ¡ä»¶ä¸ºï¼šnums[j] &gt; nums[i]ã€‚å³æ›¿æ¢å‡ºå¤§çš„æ•°æ‰æœ‰å¤§çš„æ’åˆ—ã€‚</li>
<li>äº¤æ¢ä¹‹åï¼Œäº¤æ¢åçš„æœ€é•¿é™åºæ’åˆ—æ¯”äº¤æ¢å‰çš„æœ€é•¿é™åºæ’åˆ—è¦å¤§ã€‚ä½†æ˜¯ä¸æ˜¯ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚äº¤æ¢åçš„ä»æ˜¯æœ€é•¿é™åºæ’åˆ—ï¼Œæ˜¯äº¤æ¢å nums[i] ä¸‹çš„çš„æœ€å¤§æ’åˆ—ã€‚</li>
<li>å°†æœ€é•¿æ’åºæ’åˆ— ç¿»è½¬æˆ æœ€é•¿å‡åºæ’åˆ—ï¼Œæ­¤æ—¶æ˜¯äº¤æ¢å nums[i] ä¸‹çš„æœ€é•¿å‡åºæ’åˆ—ã€‚ä½†æ˜¯ä¸€å®šå¤§äºäº¤æ¢å‰ nums[i] çš„æœ€é•¿é™åºæ’åˆ—ã€‚</li>
<li>å­—å…¸åºï¼Œä½ç½®è¶Šé å‰ï¼Œæƒé‡è¶Šå¤§ã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n), ç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">	void nextPermutation(vector&lt;int&gt;&amp; nums) &#123;zui</span><br><span class="line">		if (nums.size() &lt;&#x3D; 1) return;</span><br><span class="line">		int i &#x3D; nums.size() - 2, j &#x3D; nums.size() - 1;</span><br><span class="line">		while (i &gt;&#x3D; 0) &#123;</span><br><span class="line">			if (nums[i] &gt;&#x3D; nums[i+1])</span><br><span class="line">				i--;</span><br><span class="line">			else &#123;</span><br><span class="line">				if (nums[i] &gt;&#x3D; nums[j])</span><br><span class="line">					j--;</span><br><span class="line">				else</span><br><span class="line">				&#123;</span><br><span class="line">					swap(nums[i], nums[j]);</span><br><span class="line">					break;</span><br><span class="line">				&#125;	</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		reverse(nums, i+1, nums.size()-1);</span><br><span class="line">	&#125;</span><br><span class="line">private:</span><br><span class="line">	void reverse(vector&lt;int&gt;&amp; nums, int i, int j) &#123;</span><br><span class="line">		while (i &lt; j) &#123;</span><br><span class="line">			swap(nums[i++], nums[j--]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>c++åº“å‡½æ•°è§£æ³•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; è°ƒç”¨C++ åº“å‡½æ•°next_permutation</span><br><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(n), ç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">	void nextPermutation(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">		next_permutation(nums.begin(), nums.end());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"><a href="#åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®" class="headerlink" title="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"></a><a href="https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/" target="_blank" rel="noopener">åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">	vector&lt;int&gt; searchRange(vector&lt;int&gt;&amp; nums, int target) &#123;</span><br><span class="line">		if (nums.size() &lt;&#x3D; 0|| nums[0] &gt; target || nums[nums.size() - 1] &lt; target) return &#123;-1, -1&#125;;</span><br><span class="line"></span><br><span class="line">		int lstart &#x3D; 0, lend &#x3D; nums.size() - 1, lmid,  rstart &#x3D; 0, rend &#x3D; nums.size() - 1, rmid;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; whileå¾ªç¯ç»“æŸå¿…æœ‰ï¼šlstart &#x3D; lend + 1; rstart &#x3D; rend + 1;</span><br><span class="line">		while (lstart &lt;&#x3D; lend || rstart &lt;&#x3D; rend) &#123;</span><br><span class="line">			lmid &#x3D; (lstart + lend) &#x2F; 2;</span><br><span class="line">			rmid &#x3D; (rstart + rend) &#x2F; 2;</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F; è·³å‡ºå¾ªç¯æ—¶ï¼šnums[lend] &lt; nums[lstart] </span><br><span class="line">			if (nums[lmid] &gt;&#x3D; target)</span><br><span class="line">				lend &#x3D; lmid - 1;</span><br><span class="line">			else</span><br><span class="line">				lstart &#x3D; lmid + 1;</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F; è·³å‡ºå¾ªç¯æ—¶ï¼šnums[rend] &lt; nums[rstart] </span><br><span class="line">			if (nums[rmid] &lt;&#x3D; target)</span><br><span class="line">				rstart &#x3D; rmid + 1;</span><br><span class="line">			else</span><br><span class="line">				rend &#x3D; rmid - 1;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		if (lstart &lt;&#x3D; rend)</span><br><span class="line">			return &#123; lstart, rend &#125;;</span><br><span class="line">		else</span><br><span class="line">			return &#123; -1, -1&#125;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æŒ‰ç…§leetcodeçš„æ ‡ç­¾è¿›è¡Œåˆ·é¢˜è®°å½•ï¼Œæ¯ç¯‡åšå®¢åé“é¢˜ï¼</p>
]]></content>
      <categories>
        <category>åˆ·é¢˜</category>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>07-datastructure-æ’å…¥æ’åº</title>
    <url>/2019/11/27/07-datastructure-%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æ•°æ®ç»“æ„ä¸­ï¼Œæ’åºå¯ä»¥åˆ†ä¸ºå†…éƒ¨æ’åºå’Œå¤–éƒ¨æ’åºã€‚å†…éƒ¨æ’åºå¯ä»¥åˆ’åˆ†ä¸ºæ’å…¥æ’åºã€äº¤æ¢æ’åºã€é€‰æ‹©æ’åºã€å½’å¹¶æ’åºç­‰ã€‚æœ¬æ–‡ä¸»è¦è®°å½•æ’å…¥æ’åºç®—æ³•ï¼ŒåŒ…æ‹¬<br>ç›´æ¥æ’å…¥æ’åºã€æŠ˜åŠæ’å…¥æ’åºä»¥åŠå¸Œå°”æ’åºã€‚<br><a id="more"></a></p>
<h1 id="æ’å…¥æ’åºç®—æ³•"><a href="#æ’å…¥æ’åºç®—æ³•" class="headerlink" title="æ’å…¥æ’åºç®—æ³•"></a>æ’å…¥æ’åºç®—æ³•</h1><p>æ’åºé»˜è®¤ä»å°åˆ°å¤§æ’åºã€‚</p>
<h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><p>æ’å…¥æ’åºç±»ä¼¼äºæ´—ç‰Œçš„è¿‡ç¨‹ã€‚ç¬¬ä¸€å¼ ç‰Œæ˜¯ä¸éœ€è¦è¿›è¡Œæ’å…¥æ’åºçš„ï¼Œéšåçš„ç‰Œéƒ½éœ€è¦ä¸ä¹‹å‰çš„æ‰€æœ‰å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åæ’å…¥åˆé€‚çš„ä½ç½®ã€‚<br>æ’å…¥æ’åºæ€æƒ³ï¼šå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒï¼Œå½“å‰å…ƒç´  å°äº å‰ä¸€ä¸ªå…ƒç´ ï¼Œäº¤æ¢ï¼›å¦åˆ™æ­¤è¶Ÿæ’åºç»“æŸã€‚<br>æ’å…¥æ’åºçš„ä¼˜åŒ–ï¼šä¸¤ä¸ªå…ƒç´ äº¤æ¢éœ€è¦è¿›è¡Œä¸‰æ¬¡èµ‹å€¼ï¼Œå¯ä»¥ä¼˜åŒ–ã€‚å°†å½“å‰å…ƒç´ ä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œç„¶åå½“å‰å…ƒç´  å°äº å‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œ<br>å½“å‰å…ƒç´ çš„ä½ç½® èµ‹å€¼ä¸º å‰ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åæ¯”è¾ƒå‰ä¸€ä¸ªå…ƒç´ ã€‚æœ€åä¸æ»¡è¶³å°äºæ¡ä»¶çš„æ—¶å€™ï¼Œå°†ä¿å­˜åœ¨å˜é‡ä¸­çš„å€¼ èµ‹å€¼ç»™å½“å‰ä½ç½®ã€‚<br>æ—¶é—´å¤æ‚åº¦ï¼šO(n)~O(n^2)ï¼Œæ’å…¥æ’åºæ˜¯ç¨³å®šçš„æ’åº<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">void insertSort(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size();</span><br><span class="line">    for (int i&#x3D;1; i&lt;end; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        for (int j&#x3D;i; j&gt;0; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            if (nums[j] &lt; nums[j-1])</span><br><span class="line">                swap (nums[j], nums[j-1]);</span><br><span class="line">            else</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç¬¬äºŒç§å†™æ³•</span><br><span class="line">&#x2F;&#x2F;        for (int j&#x3D;i; j&gt;0 &amp;&amp; nums[j-1]&gt;nums[j]; j--)</span><br><span class="line">&#x2F;&#x2F;            swap (nums[j], nums[j-1]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>ä¼˜åŒ–</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">void insertSortOpt(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size();</span><br><span class="line">    for (int i&#x3D;1; i&lt;end; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        T temp &#x3D; nums[i];</span><br><span class="line">        int j;</span><br><span class="line">        for (j&#x3D;i; j&gt;0; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            if(nums[j-1] &gt; temp)</span><br><span class="line">                nums[j] &#x3D; nums[j-1];</span><br><span class="line">            else</span><br><span class="line">                break;      &#x2F;&#x2F; breakä¸å¯ç¼ºå°‘</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç¬¬äºŒç§å†™æ³•</span><br><span class="line">&#x2F;&#x2F;        for (j&#x3D;i; j&gt;0 &amp;&amp; nums[j-1]&gt;temp; j--)</span><br><span class="line">&#x2F;&#x2F;            nums[j] &#x3D; nums[j-1];</span><br><span class="line"></span><br><span class="line">        nums[j] &#x3D; temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¸Œå°”æ’åºâ€”â€”æ”¹è¿›çš„æ’å…¥æ’åº"><a href="#å¸Œå°”æ’åºâ€”â€”æ”¹è¿›çš„æ’å…¥æ’åº" class="headerlink" title="å¸Œå°”æ’åºâ€”â€”æ”¹è¿›çš„æ’å…¥æ’åº"></a>å¸Œå°”æ’åºâ€”â€”æ”¹è¿›çš„æ’å…¥æ’åº</h2><p>ç›¸å¯¹äºæ™®é€šæ’å…¥æ’åºï¼Œå¸Œå°”æ’åºåœ¨é—´éš”å¤§çš„æ—¶å€™ç§»åŠ¨æ¬¡æ•°å°‘ï¼›é—´éš”å°çš„æ—¶å€™ç§»åŠ¨çš„è·ç¦»æ¯”è¾ƒçŸ­ã€‚<br>å¸Œå°”æ’åºé€šè¿‡è®¾å®šä¸åŒçš„é—´éš”å¯¹åºåˆ—è¿›è¡Œæ’åºï¼Œæ¯æ¬¡çš„é—´éš”é€æ¸å‡å°ï¼Œæœ€åä¸€æ¬¡æ’åºä¸ºæ™®é€šçš„æ’å…¥æ’åºã€‚<br>å¸Œå°”æ’åºæ¯æ¬¡æ’åºå¯ä»¥å°†è¾ƒå°çš„å…ƒç´ æ”¾åœ¨å‰é¢ï¼Œè¾ƒå¤§çš„å…ƒç´ æ”¾åœ¨åé¢ï¼Œæ‰€ä»¥ç§»åŠ¨çš„æ¬¡æ•°å’Œç§»åŠ¨çš„è·ç¦»éƒ½å°äºæ™®é€šçš„æ’å…¥æ’åºã€‚<br>ä½†æ˜¯ï¼Œå¸Œå°”æ’åºæ˜¯ä¸ç¨³å®šçš„æ’åºï¼Œå¯¹äºé‡å¤çš„å…ƒç´ ï¼Œå…¶ä½ç½®å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">void shellSort(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int h &#x3D; 1;</span><br><span class="line">    while (h &lt; nums.size() &#x2F; 3)</span><br><span class="line">        h &#x3D; 3*h + 1;</span><br><span class="line"></span><br><span class="line">    while (h &gt;&#x3D; 1)</span><br><span class="line">    &#123;</span><br><span class="line">        for (int i&#x3D;h; i&lt;nums.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            T temp &#x3D; nums[i];</span><br><span class="line">            int j;</span><br><span class="line">            for (j&#x3D;i; j&lt;nums.size(); j-&#x3D;h)</span><br><span class="line">            &#123;</span><br><span class="line">                if(nums[j-h] &gt; nums[j] )</span><br><span class="line">                nums[j] &#x3D; nums[j-h];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            nums[j] &#x3D; temp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        h &#x3D; h &#x2F; 3;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1>]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„</category>
        <category>å†…éƒ¨æ’åº</category>
      </categories>
      <tags>
        <tag>æ’å…¥æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title>08-datastructure-äº¤æ¢æ’åº</title>
    <url>/2019/11/28/08-datastructure-%E4%BA%A4%E6%8D%A2%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æ•°æ®ç»“æ„ä¸­ï¼Œæ’åºå¯ä»¥åˆ†ä¸ºå†…éƒ¨æ’åºå’Œå¤–éƒ¨æ’åºã€‚å†…éƒ¨æ’åºå¯ä»¥åˆ’åˆ†ä¸ºæ’å…¥æ’åºã€äº¤æ¢æ’åºã€é€‰æ‹©æ’åºã€å½’å¹¶æ’åºç­‰ã€‚æœ¬æ–‡ä¸»è¦è®°å½•äº¤æ¢æ’åºç®—æ³•ï¼ŒåŒ…æ‹¬<br>å†’æ³¡æ’åºã€å¿«é€Ÿæ’åºã€‚<br><a id="more"></a></p>
<h1 id="äº¤æ¢æ’åº"><a href="#äº¤æ¢æ’åº" class="headerlink" title="äº¤æ¢æ’åº"></a>äº¤æ¢æ’åº</h1><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><ul>
<li>æ¯æ¬¡æ ‡å®šæœ€å°çš„å…ƒç´ </li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">void bubbleSortMinFirst(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size() - 1;</span><br><span class="line">    for (int i&#x3D;0; i&lt;end; i++)       &#x2F;&#x2F; è¶Ÿæ•°</span><br><span class="line">    &#123;</span><br><span class="line">        bool swapFlag &#x3D; false;</span><br><span class="line">        for (int j&#x3D;end; j&gt;i; j--)   &#x2F;&#x2F; å†…å±‚å¾ªç¯åŒ…æ‹¬end</span><br><span class="line">        &#123;</span><br><span class="line">            if (nums[j-1] &gt; nums[j])</span><br><span class="line">            &#123;</span><br><span class="line">                swap (nums[j], nums[j-1]);</span><br><span class="line">                swapFlag &#x3D; true;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (!swapFlag)</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ¯æ¬¡æ ‡å®šæœ€å¤§çš„å…ƒç´ </li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">void bubbleSortMaxFirst(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size() - 1;</span><br><span class="line">    for (int i&#x3D;0; i&lt;end; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        bool swapFlag &#x3D; false;</span><br><span class="line">        for (int j&#x3D;1; j&lt;end-i+1; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            if (nums[j-1] &gt; nums[j])</span><br><span class="line">            &#123;</span><br><span class="line">                swap (nums[j], nums[j-1]);</span><br><span class="line">                swapFlag &#x3D; true;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (!swapFlag)</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ¯æ¬¡æ ‡å®šæœ€å¤§çš„å…ƒç´ ä¼˜åŒ–</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">void bubbleSortOpt(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size();</span><br><span class="line">    int swapPos;</span><br><span class="line"></span><br><span class="line">    do&#123;</span><br><span class="line">        swapPos &#x3D; 0;</span><br><span class="line">        for (int j&#x3D;1; j&lt;end; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(nums[j-1] &gt; nums[j])</span><br><span class="line">            &#123;</span><br><span class="line">                swap (nums[j-1], nums[j]);</span><br><span class="line">                swapPos &#x3D; j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        end &#x3D; swapPos;</span><br><span class="line">    &#125;while(swapPos &gt; 0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol>
<li>ä»»å–ä¸€ä¸ªå…ƒç´ ä¸ºä¸­å¿ƒ</li>
<li>æ‰€æœ‰æ¯”å®ƒå°çš„å…ƒç´ ä¸€å¾‹å‰æ–¹ï¼Œæ¯”å®ƒå¤§çš„å…ƒç´ ä¸€å¾‹åæ–¹ï¼Œå½¢æˆå·¦å³ä¸¤ä¸ªå­è¡¨</li>
<li>å¯¹å„å­è¡¨é‡æ–°é€‰æ‹©ä¸­å¿ƒå…ƒç´ å¹¶ä¾æ­¤è§„åˆ™è°ƒæ•´ï¼Œç›´åˆ°æ¯ä¸ªå­è¡¨çš„å…ƒç´ åªå‰©ä¸€ä¸ª</li>
</ol>
<ul>
<li>æ¯ä¸€è¶Ÿçš„å­è¡¨çš„å½¢æˆæ˜¯é‡‡ç”¨ä»ä¸¤å¤´å‘ä¸­é—´äº¤æ›¿å¼é€¼è¿‘æ³•</li>
<li>ç”±äºæ¯è¶Ÿä¸­å¯¹å„å­è¡¨çš„æ“ä½œéƒ½ç›¸ä¼¼ï¼Œå¯é‡‡ç”¨é€’å½’ç®—æ³•</li>
</ul>
<p>ç¼ºç‚¹ï¼šå¦‚æœåºåˆ—æ˜¯è¿‘ä¹æœ‰åºçš„åºåˆ—ï¼Œåˆ™å·¦å³ä¸¤éƒ¨åˆ†ä¼šæˆä¸ºåŠå…¶ä¸å¹³è¡¡çš„ä¸¤éƒ¨åˆ†ï¼Œåˆ™å¿«é€Ÿæ’åºé€€åŒ–æˆ$O(n^2)$çš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">int __partition(vector&lt;T&gt;&amp; nums, int left, int right)</span><br><span class="line">&#123;</span><br><span class="line">    T pivot &#x3D; nums[left];</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; jæ ‡å®šå°äºpivotçš„æœ€åä¸€ä¸ªå€¼</span><br><span class="line">	&#x2F;&#x2F; j+1æ ‡å®šå¤§äºç­‰äºpivotçš„ç¬¬ä¸€ä¸ªå€¼</span><br><span class="line">    int j &#x3D; left;   </span><br><span class="line">    for (int i&#x3D;left+1; i&lt;&#x3D;right; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        if (nums[i] &lt; pivot)</span><br><span class="line">        &#123;</span><br><span class="line">            swap(nums[++j], nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    swap(nums[j], nums[left]);</span><br><span class="line"></span><br><span class="line">    return j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void __quickSort(vector&lt;T&gt;&amp; nums, int left, int right)</span><br><span class="line">&#123;</span><br><span class="line">    if (left &gt;&#x3D; right)</span><br><span class="line">        return;</span><br><span class="line"></span><br><span class="line">    int p &#x3D; __partition(nums, left, right);</span><br><span class="line">    __quickSort(nums, left, p-1);</span><br><span class="line">    __quickSort(nums, p+1, right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void quickSort(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size()-1;</span><br><span class="line">    __quickSort(nums, start, end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¼˜åŒ–</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">int __partitionOpt(vector&lt;T&gt;&amp; nums, int left, int right)</span><br><span class="line">&#123;</span><br><span class="line">    swap (nums[left], nums[rand() % (right-left+1) + left]);</span><br><span class="line"></span><br><span class="line">    T pivot &#x3D; nums[left];</span><br><span class="line"></span><br><span class="line">    int i &#x3D; left+1, j &#x3D; right;</span><br><span class="line">    &#x2F;&#x2F; i &#x3D;&#x3D; jç”¨æ¥é™å®špivotåçš„å€¼éƒ½æ˜¯å¤§äºæˆ–è€…éƒ½æ˜¯å°äºçš„æƒ…å†µ</span><br><span class="line">    while ( i&lt;&#x3D;j )</span><br><span class="line">    &#123;</span><br><span class="line">        while (i&lt;&#x3D;j &amp;&amp; nums[i]&lt;pivot) i++;</span><br><span class="line">        while (i&lt;&#x3D;j &amp;&amp; nums[j]&gt;pivot) j--;</span><br><span class="line"></span><br><span class="line">        if (i&gt;j)</span><br><span class="line">            break;</span><br><span class="line"></span><br><span class="line">        swap(nums[i], nums[j]);</span><br><span class="line"></span><br><span class="line">        i++;</span><br><span class="line">        j--;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; jæœ€åæŒ‡å‘å°äºpivotçš„æœ€åä¸€ä¸ªå€¼</span><br><span class="line">    swap (nums[left], nums[j]);</span><br><span class="line"></span><br><span class="line">    return j;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void __quickSortOpt(vector&lt;T&gt;&amp; nums, int left, int right)</span><br><span class="line">&#123;</span><br><span class="line">    if (left &gt;&#x3D; right)</span><br><span class="line">        return;</span><br><span class="line"></span><br><span class="line">    int p &#x3D; __partitionOpt(nums, left, right);</span><br><span class="line">    __quickSortOpt(nums, left, p-1);</span><br><span class="line">    __quickSortOpt(nums, p+1, right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void quickSortOpt(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    srand(time(NULL));</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size()-1;</span><br><span class="line">    __quickSortOpt(nums, start, end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰è·¯å¿«é€Ÿæ’åº"><a href="#ä¸‰è·¯å¿«é€Ÿæ’åº" class="headerlink" title="ä¸‰è·¯å¿«é€Ÿæ’åº"></a>ä¸‰è·¯å¿«é€Ÿæ’åº</h2><p>æ­¥éª¤ï¼š</p>
<ul>
<li>ä»»å–ä¸€ä¸ªå…ƒç´ ä¸ºåŸºå‡†å€¼</li>
<li>æ‰€æœ‰æ¯”å®ƒå°çš„å…ƒç´ ä¸€å¾‹å‰æ–¹ï¼Œç­‰äºå®ƒçš„å…ƒç´ è·³è¿‡ï¼Œæ¯”å®ƒå¤§çš„å…ƒç´ ä¸€å¾‹åæ–¹ï¼Œå½¢æˆå·¦å³ä¸¤ä¸ªå­è¡¨</li>
<li>å¯¹å„å­è¡¨é‡æ–°é€‰æ‹©ä¸­å¿ƒå…ƒç´ å¹¶ä¾æ­¤è§„åˆ™è°ƒæ•´ï¼Œç›´åˆ°æ¯ä¸ªå­è¡¨çš„å…ƒç´ åªå‰©ä¸€ä¸ª</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">void __quickSort3Ways(vector&lt;T&gt;&amp; nums, int left, int right)</span><br><span class="line">&#123;</span><br><span class="line">    if (left &gt;&#x3D; right)</span><br><span class="line">        return;</span><br><span class="line"></span><br><span class="line">    swap (nums[left], nums[rand() % (right-left+1) + left]);</span><br><span class="line">    T pivot &#x3D; nums[left];</span><br><span class="line"></span><br><span class="line">    int lt &#x3D; left;      &#x2F;&#x2F; nums[left+1...lt] &lt; pivot</span><br><span class="line">    int gt &#x3D; right+1;   &#x2F;&#x2F; nums[gt...right] &gt; pivot</span><br><span class="line">    int i &#x3D; left+1;     &#x2F;&#x2F; nums[lt+1...i) &#x3D;&#x3D; pivot</span><br><span class="line">    while (i&lt;gt)</span><br><span class="line">    &#123;</span><br><span class="line">        if (nums[i] &lt; pivot)</span><br><span class="line">            swap (nums[i++], nums[++lt]);</span><br><span class="line">        else if(nums[i] &gt; pivot)</span><br><span class="line">            swap (nums[--gt], nums[i]);</span><br><span class="line">        else</span><br><span class="line">            i++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    swap (nums[lt], nums[left]);    &#x2F;&#x2F; äº¤æ¢å nums[lt] &#x3D;&#x3D; pivot</span><br><span class="line"></span><br><span class="line">    __quickSort3Ways(nums, left, lt-1);</span><br><span class="line">    __quickSort3Ways(nums, gt, right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void quickSort3Ways(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    srand(time(NULL));</span><br><span class="line">    int start&#x3D;0, end&#x3D;nums.size()-1;</span><br><span class="line">    __quickSort3Ways(nums, start, end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åº”ç”¨-æ±‚æ•°ç»„ä¸­ç¬¬Kå¤§çš„å€¼"><a href="#åº”ç”¨-æ±‚æ•°ç»„ä¸­ç¬¬Kå¤§çš„å€¼" class="headerlink" title="åº”ç”¨-æ±‚æ•°ç»„ä¸­ç¬¬Kå¤§çš„å€¼"></a>åº”ç”¨-æ±‚æ•°ç»„ä¸­ç¬¬Kå¤§çš„å€¼</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">int __findKthLargestPartition(vector&lt;T&gt;&amp; nums, int left, int right)</span><br><span class="line">&#123;</span><br><span class="line">    swap(nums[left], nums[rand()%(right-left+1) + left]);</span><br><span class="line">    T pivot &#x3D; nums[left];</span><br><span class="line">    int i&#x3D;left+1, j&#x3D;right;</span><br><span class="line">    while(i &lt;&#x3D; j)</span><br><span class="line">    &#123;</span><br><span class="line">        while(i&lt;&#x3D;j &amp;&amp; nums[i]&lt;pivot) i++;</span><br><span class="line">        while(i&lt;&#x3D;j &amp;&amp; nums[j]&gt;pivot) j--;</span><br><span class="line"></span><br><span class="line">        if(i&gt;j)</span><br><span class="line">            break;</span><br><span class="line"></span><br><span class="line">        swap(nums[i], nums[j]);</span><br><span class="line">        i++;</span><br><span class="line">        j--;</span><br><span class="line">    &#125;</span><br><span class="line">    swap(nums[left], nums[j]);</span><br><span class="line"></span><br><span class="line">    return j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">int __findKthLargest(vector&lt;T&gt;&amp; nums, int left, int right, int k)</span><br><span class="line">&#123;</span><br><span class="line">    if(left&gt;right)</span><br><span class="line">        return -1;</span><br><span class="line"></span><br><span class="line">    int p &#x3D; __findKthLargestPartition(nums, left, right);</span><br><span class="line">    if (p &#x3D;&#x3D; k)     &#x2F;&#x2F; å¦‚æœ p&#x3D;&#x3D;k, è¯¥å€¼å°±æ˜¯éœ€è¦æ‰¾çš„å€¼</span><br><span class="line">        return p;</span><br><span class="line">    else if(p &gt; k)  &#x2F;&#x2F; å¦‚æœ p&gt;k, è¯¥å€¼åœ¨[left, p-1]ä¸­</span><br><span class="line">        return __findKthLargest(nums, left, p-1, k);</span><br><span class="line">    else            &#x2F;&#x2F; å¦‚æœ p&lt;k, è¯¥å€¼åœ¨[p+1, right]ä¸­</span><br><span class="line">        return __findKthLargest(nums, p+1, right, k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å¯»æ‰¾æ•°ç»„ä¸­ç¬¬Kä¸ªæœ€å¤§çš„å…ƒç´ </span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">int findKthLargest(vector&lt;T&gt;&amp; nums, int k)</span><br><span class="line">&#123;</span><br><span class="line">    srand(time(NULL));</span><br><span class="line">    int start&#x3D;0, end&#x3D;nums.size()-1;</span><br><span class="line">    k &#x3D; nums.size()-k;  &#x2F;&#x2F; ç¬¬Kä¸ªæœ€å¤§çš„å…ƒç´ (ä»1å¼€å§‹ï¼Œå¦‚ç¬¬1ä¸ªæœ€å¤§çš„å€¼)ï¼Œç­‰åŒäºæ•°ç»„ä¸­ç´¢å¼•ä¸ºnums.size()-kçš„å€¼</span><br><span class="line">    int ret &#x3D; __findKthLargest(nums, start, end, k);</span><br><span class="line">&#x2F;&#x2F;    return nums[ret];</span><br><span class="line">    return nums[ret];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1>]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„</category>
        <category>å†…éƒ¨æ’åº</category>
      </categories>
      <tags>
        <tag>äº¤æ¢æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title>11-datastructure-æ’åºç®—æ³•æ€»ç»“</title>
    <url>/2019/11/30/11-datastructure-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="æ’åºç®—æ³•æ€»ç»“"><a href="#æ’åºç®—æ³•æ€»ç»“" class="headerlink" title="æ’åºç®—æ³•æ€»ç»“"></a>æ’åºç®—æ³•æ€»ç»“</h1><p><img src="/images/11-datastructure-æ’åºç®—æ³•æ€»ç»“/æ’åºç®—æ³•æ€»ç»“.jpg" alt="&quot;æ’åºç®—æ³•æ€»ç»“&quot;">  </p>
]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„</category>
        <category>å†…éƒ¨æ’åº</category>
      </categories>
  </entry>
  <entry>
    <title>09-datastructure-é€‰æ‹©æ’åº</title>
    <url>/2019/11/29/09-datastructure-%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æ•°æ®ç»“æ„ä¸­ï¼Œæ’åºå¯ä»¥åˆ†ä¸ºå†…éƒ¨æ’åºå’Œå¤–éƒ¨æ’åºã€‚å†…éƒ¨æ’åºå¯ä»¥åˆ’åˆ†ä¸ºæ’å…¥æ’åºã€äº¤æ¢æ’åºã€é€‰æ‹©æ’åºã€å½’å¹¶æ’åºç­‰ã€‚æœ¬æ–‡ä¸»è¦è®°å½•é€‰æ‹©æ’åºç®—æ³•ï¼ŒåŒ…æ‹¬ç®€å•é€‰æ‹©æ’åºå’Œå †æ’åºã€‚<br><a id="more"></a></p>
<h1 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h1><h2 id="ç®€å•é€‰æ‹©æ’åº"><a href="#ç®€å•é€‰æ‹©æ’åº" class="headerlink" title="ç®€å•é€‰æ‹©æ’åº"></a>ç®€å•é€‰æ‹©æ’åº</h2><ul>
<li>æ¯æ¬¡æ’åºæ ‡å®šæœ€å°çš„å…ƒç´ </li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">é€‰æ‹©æ’åº:</span><br><span class="line">1. å¤–å±‚å¾ªç¯ï¼šæŒ‡å®šæ¯æ¬¡æ’åºçš„ä½ç½®</span><br><span class="line">2. å†…å±‚å¾ªç¯ï¼šä»å¤–å±‚å¾ªç¯ä»¥å¤–çš„æ•°æ®ä¸­æ‰¾å‡ºæœ€å°å€¼ï¼Œä¸å¤–å±‚å¾ªç¯æ¯æ¬¡æ’åºçš„ä½ç½®è¿›è¡Œäº¤æ¢</span><br><span class="line">æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)</span><br><span class="line">*&#x2F;</span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void selectSort(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; é»˜è®¤ä»å°åˆ°å¤§æ’åº</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size();</span><br><span class="line">    for (int i&#x3D;0; i&lt;end; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        int minIndex &#x3D; i;</span><br><span class="line">        for (int j&#x3D;i+1; j&lt;end; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            if (nums[j] &lt; nums[minIndex])</span><br><span class="line">                minIndex &#x3D; j;</span><br><span class="line">        &#125;</span><br><span class="line">        swap (nums[i], nums[minIndex]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€‰æ‹©æ’åºæ˜¯ä¸ç¨³å®šçš„æ’åºï¼šå¦‚ï¼š2(1) 2(2) 2(3) 1 3ã€‚ç¬¬ä¸€æ¬¡ä½¿ç”¨é€‰æ‹©æ’åºï¼š1 2(2) 2(3) 2(1) 3<br>æ­¤æ—¶ä¸åŒ2çš„ä½ç½®å‘ç”Ÿå˜åŒ–ï¼Œæ•…é€‰æ‹©æ’åºæ˜¯ä¸ç¨³å®šçš„æ’åºã€‚</p>
<ul>
<li>æ¯æ¬¡æ’åºæ ‡å®šæœ€å°å’Œæœ€å¤§çš„å…ƒç´ </li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">void selectSortOpt(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size()-1;</span><br><span class="line">    while(start &lt; end)</span><br><span class="line">    &#123;</span><br><span class="line">        int minIndex &#x3D; start;</span><br><span class="line">        int maxIndex &#x3D; end;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; æ¯æ¬¡ç¡®å®šæœ€å¤§å€¼å’Œæœ€å°å€¼</span><br><span class="line">        if (nums[minIndex] &gt; nums[maxIndex])</span><br><span class="line">            swap(nums[minIndex], nums[maxIndex]);</span><br><span class="line"></span><br><span class="line">        for (int i&#x3D;start+1; i&lt;end; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            if (nums[i] &lt; nums[minIndex])</span><br><span class="line">                minIndex &#x3D; i;</span><br><span class="line">            if (nums[i] &gt; nums[maxIndex])</span><br><span class="line">                maxIndex &#x3D; i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        swap(nums[start], nums[minIndex]);</span><br><span class="line">        swap(nums[end], nums[maxIndex]);</span><br><span class="line"></span><br><span class="line">        start++;</span><br><span class="line">        end--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h2><p>å †æ’åºæ˜¯ä¸€ç§æ ‘å½¢é€‰æ‹©æ’åºæ–¹æ³•ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šåœ¨æ’åºè¿‡ç¨‹ä¸­ï¼Œå †æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘çš„é¡ºåºå­˜å‚¨ç»“æ„ï¼Œå¯ä»¥ç”¨æ•°ç»„æ–¹å¼å­˜å‚¨ã€‚å®é™…å †å…ƒç´ å¯ä»¥ä»æ•°ç»„ç´¢å¼•0å¼€å§‹å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥ä»æ•°ç»„ç´¢å¼•1å¼€å§‹å­˜å‚¨ã€‚<br>å †åˆ©ç”¨å®Œå…¨äºŒå‰æ ‘ä¸­åŒäº²ç»“ç‚¹å’Œå­©å­ç»“ç‚¹ä¹‹é—´çš„å†…åœ¨å…³ç³»ï¼Œåœ¨å½“å‰æ— åºåŒºä¸­é€‰æ‹©å…³é”®å­—æœ€å¤§(æˆ–æœ€å°çš„)å…ƒç´ ï¼Œå› æ­¤å †å¯ä»¥åˆ†ä¸ºå¤§æ ¹å †å’Œå°è·Ÿå †ã€‚å¤§æ ¹å †ä¸­æœ€å¤§å…ƒç´ å­˜æ”¾åœ¨æ ¹ç»“ç‚¹ï¼Œä¸”å¯¹å…¶ä»»ä¸€éæ ¹ç»“ç‚¹ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºåŒäº²ç»“ç‚¹ã€‚å°æ ¹å †ä¸­æœ€å°å…ƒç´ å­˜æ”¾åœ¨æ ¹ç»“ç‚¹ï¼Œä¸”å¯¹å…¶ä»»ä¸€éæ ¹ç»“ç‚¹ï¼Œå®ƒçš„å€¼å¤§äºæˆ–ç­‰äºåŒäº²ç»“ç‚¹ã€‚å †ç»å¸¸è¢«ç”¨æ¥å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚ä»¥ä¸‹ä»¥å¤§æ ¹å †ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</p>
<h3 id="å †ä»æ•°ç»„ç´¢å¼•1å¼€å§‹å­˜å‚¨"><a href="#å †ä»æ•°ç»„ç´¢å¼•1å¼€å§‹å­˜å‚¨" class="headerlink" title="å †ä»æ•°ç»„ç´¢å¼•1å¼€å§‹å­˜å‚¨"></a>å †ä»æ•°ç»„ç´¢å¼•1å¼€å§‹å­˜å‚¨</h3><p><img src="/images/09-datastructure-é€‰æ‹©æ’åº/01-å¤§æ ¹å †.png" alt="&quot;01-å¤§æ ¹å †&quot;">  </p>
<ul>
<li>å †åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼æ˜¯çº¿æ€§æ•°ç»„ï¼Œå½“å­˜å‚¨çš„ä½ç½®æ˜¯ä»ç´¢å¼•1å¼€å§‹ã€‚æ»¡è¶³ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">parent(i) &#x3D; i&#x2F;2         (ç´¢å¼•ä¸ºiçš„ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„ç´¢å¼• i&#x2F;2)</span><br><span class="line">left child(i) &#x3D; 2*i     (ç´¢å¼•ä¸ºiçš„ç»“ç‚¹çš„å·¦å­©å­çš„ç´¢å¼• 2*i)</span><br><span class="line">right child(i) &#x3D; 2*i+1  (ç´¢å¼•ä¸ºiçš„ç»“ç‚¹çš„å³å­©å­çš„ç´¢å¼• 2*i+1)</span><br><span class="line">æœ€åä¸€ä¸ªéå¶å­ç»“ç‚¹çš„ç´¢å¼•   end&#x2F;2</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸­ï¼Œå°†ä¸€ä¸ªä¸æ»¡è¶³å †ç»“æ„çš„æ•°ç»„æ„å»ºä¸ºä¸€ä¸ªæ»¡è¶³å †ç»“æ„çš„æ•°ç»„ï¼Œå«åš<font color="red">æ„å»ºåˆå§‹å †</font>ã€‚æ„å»ºåˆå§‹å †æœ‰ä¸¤ç§è°ƒæ•´æ–¹å¼ï¼Œå‘ä¸Šè°ƒæ•´å’Œå‘ä¸‹è°ƒæ•´ã€‚<br>å¦‚ä¸‹ä»£ç æ¼”ç¤ºäº†å‘ä¸Šè°ƒæ•´çš„è¿‡ç¨‹ã€‚æ¯æ¬¡å°†ä¸€ä¸ªæ•°ç»„çš„å…ƒç´ æ’å…¥å †ä¸­ï¼Œå¾…æ’å…¥å…ƒç´ ä¹‹å‰çš„å…ƒç´ éƒ½æ˜¯æ»¡è¶³å †æ¡ä»¶çš„ã€‚å‘ä¸Šè°ƒæ•´çš„è¿‡ç¨‹åªä¼šå½±å“ä¸€æ¡åˆ†æ”¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class MaxHeap</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    &#x2F;&#x2F; å †åœ¨æ•°ç»„ä¸­çš„å­˜å‚¨èŒƒå›´ï¼š[1, end]</span><br><span class="line">    MaxHeap()</span><br><span class="line">    &#123;</span><br><span class="line">        data.push_back(0);  &#x2F;&#x2F; å †å…ƒç´ ä»æ•°ç»„çš„ç´¢å¼•1å¼€å§‹å­˜å‚¨</span><br><span class="line">        end &#x3D; 0;            &#x2F;&#x2F; endæŒ‡å‘å †çš„æœ€åä¸€ä¸ªå…ƒç´ </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void insert(T t)</span><br><span class="line">    &#123;</span><br><span class="line">        data.push_back(t);</span><br><span class="line">        end++;</span><br><span class="line">        shiftUpOpt(end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ’å…¥ä¸€ä¸ªå…ƒç´ åˆ°å·²ç»æ»¡è¶³å †ç‰¹æ€§çš„å †ä¸­</span><br><span class="line">    void shiftUp(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; data[k]åªæœ‰æ¯”data[k&#x2F;2]å¤§æ—¶ï¼Œæ‰å¯ä»¥äº¤æ¢</span><br><span class="line">        while(k&gt;1 &amp;&amp; data[k]&gt;data[k&#x2F;2])</span><br><span class="line">        &#123;</span><br><span class="line">            swap(data[k], data[k&#x2F;2]);</span><br><span class="line">            k &#x3D; k&#x2F;2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftUpOpt(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        data[0] &#x3D; data[k];</span><br><span class="line">        while(k&gt;1 &amp;&amp; data[0]&gt;data[k&#x2F;2])</span><br><span class="line">        &#123;</span><br><span class="line">            data[k] &#x3D; data[k&#x2F;2];</span><br><span class="line">            k &#x3D; k&#x2F;2;</span><br><span class="line">        &#125;</span><br><span class="line">        data[k] &#x3D; data[0];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        for(T e : data)</span><br><span class="line">            cout &lt;&lt; e &lt;&lt; &quot; &quot;;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    vector&lt;T&gt; data;</span><br><span class="line">    int end;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;int&gt; nums &#x3D; &#123;15, 17, 19, 13, 22, 16, 28, 30, 41, 62&#125;;</span><br><span class="line">    MaxHeap&lt;int&gt; maxheap;</span><br><span class="line">    for(vector&lt;int&gt;::iterator it&#x3D;nums.begin(); it!&#x3D;nums.end(); it++)</span><br><span class="line">    &#123;</span><br><span class="line">        maxheap.insert(*it);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    maxheap.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹ä»£ç æ¼”ç¤ºäº†å‘ä¸‹è°ƒæ•´çš„è¿‡ç¨‹ã€‚æ¯ä¸€å±‚ä»ä¸‹å‘ä¸Šï¼Œä»å³å‘å·¦ä¾æ¬¡æ‰¾åˆ°å¯¹åº”çš„å­æ ‘ï¼Œæ„å»ºå¤§æ ¹å †ã€‚å¯¹äºæ¯ä¸€æ£µå­æ ‘ï¼Œåªä¼šå½±å“ä¸€æ¡åˆ†æ”¯ã€‚è¿™ç§æ„å»ºåˆå§‹å †çš„æ–¹å¼ç§°ä¸ºheapifyã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class MaxHeap</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    &#x2F;&#x2F; å †åœ¨æ•°ç»„ä¸­çš„å­˜å‚¨èŒƒå›´ï¼š[1, end]</span><br><span class="line">    MaxHeap(vector&lt;T&gt;&amp; nums)</span><br><span class="line">    &#123;</span><br><span class="line">        data.push_back(0);</span><br><span class="line">        end &#x3D; 0;</span><br><span class="line">        for(T e : nums)</span><br><span class="line">        &#123;</span><br><span class="line">            data.push_back(e);</span><br><span class="line">            nums.pop_back();</span><br><span class="line">            end++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        temp &#x3D; nums;</span><br><span class="line"></span><br><span class="line">        for(int i&#x3D;end&#x2F;2; i&gt;&#x3D;1; i--)</span><br><span class="line">            shiftDownOpt(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; kæ˜¯ä¸€æ£µè‡³å°‘å…·æœ‰å·¦å­©å­çš„æ ‘</span><br><span class="line">    &#x2F;&#x2F; æ¯ä¸€æ£µæ ‘å‘ä¸‹è°ƒæ•´éƒ½æ˜¯ä¸€ä¸ªå‘ä¸‹çš„åˆ†æ”¯</span><br><span class="line">    &#x2F;&#x2F; æœ€ç»ˆéƒ½ä¼šåˆ°å¶ç»“ç‚¹</span><br><span class="line">    void shiftDown(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        while(2*k&lt;&#x3D;end)</span><br><span class="line">        &#123;</span><br><span class="line">            int j &#x3D; 2*k;</span><br><span class="line">            if(j+1&lt;&#x3D;end &amp;&amp; data[j+1]&gt;data[j]) j&#x3D;j+1;</span><br><span class="line">            if(data[k] &gt; data[j]) break;</span><br><span class="line">            swap(data[k], data[j]);</span><br><span class="line">            k &#x3D; j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftDownOpt(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        data[0] &#x3D; data[k];</span><br><span class="line">        while(2*k&lt;&#x3D;end)</span><br><span class="line">        &#123;</span><br><span class="line">            int j &#x3D; 2*k;</span><br><span class="line">            if(j+1&lt;&#x3D;end &amp;&amp; data[j+1]&gt;data[j]) j&#x3D;j+1;</span><br><span class="line">            if(data[0] &gt; data[j]) break;</span><br><span class="line">            data[k] &#x3D; data[j];</span><br><span class="line">            k &#x3D; j;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        data[k] &#x3D; data[0];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        for(T e : data)</span><br><span class="line">            cout &lt;&lt; e &lt;&lt; &quot; &quot;;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    vector&lt;T&gt; data;</span><br><span class="line">    vector&lt;T&gt; temp;</span><br><span class="line">    int end;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;int&gt; nums &#x3D; &#123;15, 17, 19, 13, 22, 16, 28, 30, 41, 62&#125;;</span><br><span class="line">    MaxHeap&lt;int&gt; maxheap(nums);</span><br><span class="line"></span><br><span class="line">    maxheap.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±ä¸Šå¯çŸ¥ï¼Œå †æ’åºä¸­å­˜åœ¨å‘ä¸Šè°ƒæ•´å’Œå‘ä¸‹è°ƒæ•´ä¸¤ç§æ€è·¯ã€‚å‘ä¸Šè°ƒæ•´çš„å‡ºå‘ç‚¹æ˜¯ï¼šæ’å…¥ä¸€ä¸ªæœªè¿›è¡Œå †æ’åºçš„å…ƒç´ åˆ°æ’å¥½åºçš„å †ä¸­ã€‚å‘ä¸‹è°ƒæ•´çš„å‡ºå‘ç‚¹æ˜¯ï¼šæŸå…ƒç´ ä½œä¸ºæ ¹ç»“ç‚¹çš„æ ‘ä¸æ»¡è¶³<br>å †çš„æ¡ä»¶ï¼Œéœ€è¦å‘ä¸‹è°ƒæ•´è¯¥å…ƒç´ åˆ°åˆé€‚çš„ä½ç½®ï¼Œä¿è¯æ ‘æ»¡è¶³å †çš„ç‰¹æ€§ã€‚</p>
<p>åœ¨å®é™…æ„å»ºåˆå§‹å †çš„è¿‡ç¨‹ä¸­ï¼Œå°†nä¸ªå…ƒç´ é€ä¸ªæ’å…¥åˆ°ä¸€ä¸ªç©ºå †ä¸­ï¼Œç®—æ³•å¤æ‚åº¦O(nlogn)ï¼›è€Œheapifyçš„è¿‡ç¨‹ï¼Œç®—æ³•å¤æ‚åº¦ä¸ºO(n)ã€‚</p>
<p>é‚£ä¹ˆï¼Œå¦‚ä½•è¾“å‡ºæ­£ç¡®çš„æ’åºç»“æœå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œå¤§æ ¹å †æ ¹ç»“ç‚¹æ˜¯æ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ ï¼Œä½†æ˜¯å…¶ä»–ç»“ç‚¹å¹¶ä¸æ˜¯æ’å¥½åºçš„ã€‚æ‰€ä»¥ï¼Œä¸€æ—¦è¾“å‡ºäº†æ ¹ç»“ç‚¹çš„å€¼ï¼Œå°±éœ€è¦é‡æ–°è°ƒæ•´å †ç»“æ„ã€‚é€šå¸¸çš„åšæ³•æ˜¯ï¼Œè¾“å‡ºæ ¹ç»“ç‚¹åï¼Œå°†æ ¹ç»“ç‚¹å…ƒç´ å€¼å’Œæœ€åä¸€ä¸ªå¶å­ç»“ç‚¹çš„å€¼è¿›è¡Œäº¤æ¢ï¼Œç„¶åæŒ‰ç…§å‘ä¸‹è°ƒæ•´çš„æ€è·¯é‡æ–°æ„å»ºå¤§æ ¹å †ï¼›é‡å¤ä»¥ä¸Šè¿‡ç¨‹ï¼Œæœ€åå°±èƒ½è¾“å‡ºæ­£ç¡®æ’åºçš„æ•°ç»„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class MaxHeap</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    &#x2F;&#x2F; å †åœ¨æ•°ç»„ä¸­çš„å­˜å‚¨èŒƒå›´ï¼š[1, end]</span><br><span class="line">    MaxHeap(vector&lt;T&gt;&amp; nums):temp(nums)</span><br><span class="line">    &#123;</span><br><span class="line">        data.push_back(0);</span><br><span class="line">        end &#x3D; 0;</span><br><span class="line">        for(T e : nums)</span><br><span class="line">        &#123;</span><br><span class="line">            data.push_back(e);</span><br><span class="line">            nums.pop_back();</span><br><span class="line">            end++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; æ„å»ºåˆå§‹å † heapify</span><br><span class="line">        for(int i&#x3D;end&#x2F;2; i&gt;&#x3D;1; i--)</span><br><span class="line">            shiftDownOpt(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ’å…¥æ“ä½œ</span><br><span class="line">    void insert(T t)</span><br><span class="line">    &#123;</span><br><span class="line">        data.push_back(t);</span><br><span class="line">        end++;</span><br><span class="line">        shiftUpOpt(end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftUpOpt(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        data[0] &#x3D; data[k];</span><br><span class="line">        while(k&gt;1 &amp;&amp; data[0]&gt;data[k&#x2F;2])</span><br><span class="line">        &#123;</span><br><span class="line">            data[k] &#x3D; data[k&#x2F;2];</span><br><span class="line">            k &#x3D; k&#x2F;2;</span><br><span class="line">        &#125;</span><br><span class="line">        data[k] &#x3D; data[0];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftDownOpt(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        data[0] &#x3D; data[k];</span><br><span class="line">        while(2*k&lt;&#x3D;end)</span><br><span class="line">        &#123;</span><br><span class="line">            int j &#x3D; 2*k;</span><br><span class="line">            if(j+1&lt;&#x3D;end &amp;&amp; data[j+1]&gt;data[j]) j&#x3D;j+1;</span><br><span class="line">            if(data[0] &gt; data[j]) break;</span><br><span class="line">            data[k] &#x3D; data[j];</span><br><span class="line">            k &#x3D; j;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        data[k] &#x3D; data[0];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    T extractMax()</span><br><span class="line">    &#123;</span><br><span class="line">        T ret &#x3D; data[1];</span><br><span class="line">        swap(data[1], data[end]);</span><br><span class="line">        data.pop_back();</span><br><span class="line">        end--;</span><br><span class="line">        shiftDownOpt(1);</span><br><span class="line"></span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void sort()</span><br><span class="line">    &#123;</span><br><span class="line">        int n &#x3D; end;</span><br><span class="line">        for(int i&#x3D;0; i&lt;n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            temp.push_back(extractMax());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        for(T e : data)</span><br><span class="line">            cout &lt;&lt; e &lt;&lt; &quot;\t&quot;;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    vector&lt;T&gt; data;</span><br><span class="line">    vector&lt;T&gt; &amp;temp;    &#x2F;&#x2F; å¼•ç”¨ï¼Œéœ€è¦åœ¨æ„é€ å‡½æ•°ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–</span><br><span class="line">    int end;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;int&gt; nums &#x3D; &#123;15, 17, 19, 13, 22, 16, 28, 30, 41, 62&#125;;</span><br><span class="line">    MaxHeap&lt;int&gt; maxheap(nums);</span><br><span class="line">    maxheap.insert(25);</span><br><span class="line">    maxheap.sort(); &#x2F;&#x2F; å¤§æ ¹å †è¾“å‡ºä»å¤§åˆ°å°çš„æ’åº</span><br><span class="line"></span><br><span class="line">    for(int e : nums)</span><br><span class="line">        cout &lt;&lt; e &lt;&lt; &quot; &quot;;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ï¼ŒæŒ‰ç…§å †çš„ç‰¹æ€§ï¼Œå¯ä»¥çŸ¥é“å †å¯ä»¥è¿›è¡Œå‘ä¸Šè°ƒæ•´å’Œå‘ä¸‹è°ƒæ•´ã€‚æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ ï¼Œé‡‡ç”¨å‘ä¸Šè°ƒæ•´ï¼›åˆ é™¤æ“ä½œæ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚æœæ˜¯åˆ é™¤æ ¹ç»“ç‚¹ï¼Œè¿™ä¸ªé‡‡ç”¨å‘ä¸‹è°ƒæ•´çš„æ–¹æ¡ˆå³å¯ï¼Œå’Œä¾æ¬¡<br>è¾“å‡ºå¤§æ ¹å †çš„æœ€å¤§å€¼æ˜¯ä¸€æ ·çš„ã€‚</p>
<h3 id="å †ä»æ•°ç»„ç´¢å¼•0å¼€å§‹å­˜å‚¨"><a href="#å †ä»æ•°ç»„ç´¢å¼•0å¼€å§‹å­˜å‚¨" class="headerlink" title="å †ä»æ•°ç»„ç´¢å¼•0å¼€å§‹å­˜å‚¨"></a>å †ä»æ•°ç»„ç´¢å¼•0å¼€å§‹å­˜å‚¨</h3><p>å †ä»æ•°ç»„ç´¢å¼•0å¼€å§‹å­˜å‚¨å¯ä»¥ç”¨äºå®ç°åŸåœ°å †æ’åºã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·æä¾›çš„æ•°ç»„æ•°æ®éƒ½æ˜¯ä»0å¼€å§‹çš„ï¼Œå¦‚æœè¦æŒ‰ç…§ä¸Šä¸€éƒ¨åˆ†è¿›è¡Œå †æ’åºï¼Œå¿…é¡»é‡æ–°è®¾ç½®ä¸€ä¸ªæ•°ç»„ï¼Œå°†ç”¨æˆ·æä¾›çš„æ•°ç»„æ•°æ®ä»ç´¢å¼•1å¼€å§‹å­˜å‚¨ï¼Œè¿™æ ·å¢åŠ äº†ç©ºé—´å¤æ‚åº¦ã€‚å¦‚æœèƒ½å¤Ÿåœ¨ç”¨æˆ·æä¾›çš„æ•°ç»„æ•°æ®çš„åŸºç¡€ä¸Šï¼Œç›´æ¥è¿›è¡ŒåŸåœ°å †æ’åºï¼Œæ€§èƒ½ä¹Ÿä¼šæ›´å¥½ã€‚  </p>
<p>å¦‚ä½•è¿›è¡ŒåŸåœ°å †æ’åºå‘¢ï¼ŸæŒ‰ç…§å¤§æ ¹å †çš„åšæ³•ï¼Œæˆ‘ä»¬åœ¨å¯¹åˆå§‹åŒ–å †ä¹‹åï¼Œæ­¤æ—¶æ•°ç»„ç´¢å¼•0å­˜æ”¾çš„å°±æ˜¯æ•°ç»„æœ€å¤§å€¼ã€‚å°†ç´¢å¼•0å…ƒç´ ä¸æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œè¿™æ ·æ•°ç»„çš„æœ€å¤§å…ƒç´ å°±æ’åºå¥½äº†ï¼Œç„¶åå¯¹å‰©ä¸‹çš„å†…å®¹è¿›è¡Œå‘ä¸‹è°ƒæ•´ï¼Œé‡æ–°æ„å»ºå †ç»“æ„ã€‚ä¾æ¬¡æŒ‰ç…§ä¸Šè¿°æ­¥éª¤ï¼Œå°±å¯ä»¥åœ¨åŸåœ°è¿›è¡Œå †æ’åºäº†ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå †æ’åºçš„å‘ä¸Šå’Œå‘ä¸‹è°ƒæ•´éƒ½æ˜¯<font color="red">çˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹</font>ä¹‹é—´æ¯”è¾ƒäº¤æ¢çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ç ”ç©¶æ•°ç»„ç´¢å¼•0å¼€å§‹å­˜å‚¨æ—¶ï¼Œçˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»å¾ˆé‡è¦ã€‚</p>
<p><img src="/images/09-datastructure-é€‰æ‹©æ’åº/02-å¤§æ ¹å †.png" alt="&quot;02-å¤§æ ¹å †&quot;">  </p>
<ul>
<li>å †åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼æ˜¯çº¿æ€§æ•°ç»„ï¼Œå½“å­˜å‚¨çš„ä½ç½®æ˜¯ä»ç´¢å¼•0å¼€å§‹ã€‚æ»¡è¶³ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">parent(i) &#x3D; (i-1)&#x2F;2     (ç´¢å¼•ä¸ºiçš„ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„ç´¢å¼• (i-1)&#x2F;2)</span><br><span class="line">left child(i) &#x3D; 2*i+1   (ç´¢å¼•ä¸ºiçš„ç»“ç‚¹çš„å·¦å­©å­çš„ç´¢å¼• 2*i+1)</span><br><span class="line">right child(i) &#x3D; 2*i+2  (ç´¢å¼•ä¸ºiçš„ç»“ç‚¹çš„å³å­©å­çš„ç´¢å¼• 2*i+2)</span><br><span class="line">æœ€åä¸€ä¸ªéå¶å­ç»“ç‚¹çš„ç´¢å¼•  (end-1)&#x2F;2</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;vector&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template&lt;typename T&gt;</span><br><span class="line">void __shiftDown(vector&lt;T&gt;&amp; nums, int k, int n)</span><br><span class="line">&#123;</span><br><span class="line">    while(2*k+1 &lt;&#x3D; n)</span><br><span class="line">    &#123;</span><br><span class="line">        int j &#x3D; 2*k;</span><br><span class="line">        if(j+1&lt;&#x3D;n &amp;&amp; nums[j+1]&gt;nums[j]) j&#x3D;j+1;</span><br><span class="line">        if(nums[k] &gt;&#x3D; nums[j]) break;</span><br><span class="line">        swap(nums[k], nums[j]); &#x2F;&#x2F; äº¤æ¢æ“ä½œ</span><br><span class="line">        k &#x3D; j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template&lt;typename T&gt;</span><br><span class="line">void __shiftDownOpt(vector&lt;T&gt;&amp; nums, int k, int n)</span><br><span class="line">&#123;</span><br><span class="line">    T temp &#x3D; nums[k];</span><br><span class="line">    while(2*k+1 &lt;&#x3D; n)</span><br><span class="line">    &#123;</span><br><span class="line">        int j &#x3D; 2*k;</span><br><span class="line">        if(j+1&lt;&#x3D;n &amp;&amp; nums[j+1]&gt;nums[j]) j&#x3D;j+1;</span><br><span class="line">        if(temp &gt;&#x3D; nums[j]) break; &#x2F;&#x2F; æ³¨æ„ï¼šè¿™é‡Œæ˜¯ç”¨tempè¿›è¡Œæ¯”è¾ƒ</span><br><span class="line">        nums[k] &#x3D; nums[j];</span><br><span class="line">        k &#x3D; j;</span><br><span class="line">    &#125;</span><br><span class="line">    nums[k] &#x3D; temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template&lt;typename T&gt;</span><br><span class="line">void heapSort(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; [start, end]</span><br><span class="line">    int start&#x3D;0, end&#x3D;nums.size()-1;</span><br><span class="line">    &#x2F;&#x2F; heapify</span><br><span class="line">    for(int i&#x3D;(end-1)&#x2F;2; i&gt;&#x3D;0; i--)</span><br><span class="line">        __shiftDownOpt(nums, i, end);</span><br><span class="line"></span><br><span class="line">    for(int i&#x3D;end; i&gt;0; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        swap(nums[0], nums[i]);</span><br><span class="line">        __shiftDownOpt(nums, 0, i-1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å †æ’åºæ˜¯ä¸ç¨³å®šçš„æ’åºã€‚ç¨³å®šæ’åºï¼šå¯¹äºç›¸åŒçš„å…ƒç´ ï¼Œåœ¨æ’åºåï¼ŒåŸæ¥é å‰çš„å…ƒç´ ä¾ç„¶é å‰ã€‚ç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚æ’åºçš„ç¨³å®šæ€§å’Œä»£ç å®ç°æ˜¯ç›¸å…³çš„ï¼Œä»£ç å®ç°çš„<br>ä¸å¤Ÿå¥½ï¼Œä¹Ÿä¼šå¯¼è‡´ç¨³å®šæ’åºå˜æˆä¸ç¨³å®šæ’åºã€‚åŒæ ·ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼Œè®©æ’åºç®—æ³•ä¸å­˜åœ¨ç¨³å®šæ€§é—®é¢˜ã€‚</p>
<p>// æ¯”å¦‚ï¼šè®¡ç®—å­¦ç”Ÿæˆç»©ï¼Œå¦‚æœé‡åˆ°ç›¸åŒæˆç»©çš„å­¦ç”Ÿï¼Œä¸ºäº†ä¿è¯å­¦ç”Ÿé¡ºåºä¸å˜æ€§ï¼Œå¯ä»¥å¢åŠ å¯¹å­¦å·çš„æ¯”è¾ƒ<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bool operator&lt;(const Student&amp; otherStudent)</span><br><span class="line">&#123;</span><br><span class="line">    return score !&#x3D; otherStudent.score ? score &gt; otherStudent.score : id &lt; otherStudent.id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="ç´¢å¼•å †"><a href="#ç´¢å¼•å †" class="headerlink" title="ç´¢å¼•å †"></a>ç´¢å¼•å †</h3><p>å †ç»å¸¸ç”¨æ¥å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—åœ¨æ“ä½œç³»ç»Ÿçš„ä½œä¸šè°ƒåº¦å’Œå…¶ä»–é¢†åŸŸæœ‰å¹¿æ³›çš„åº”ç”¨ã€‚å¦‚åœ¨æ“ä½œç³»ç»Ÿçš„ä½œä¸šè°ƒåº¦ä¸­ï¼Œå¯ä»¥æƒ³è§ä¸€ä¸ªè¿›ç¨‹idå·ç»‘å®šä¸€ä¸ªè¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚</p>
<p><img src="/images/09-datastructure-é€‰æ‹©æ’åº/03-å¤§æ ¹å †.png" alt="&quot;03-å¤§æ ¹å †&quot;"><br><img src="/images/09-datastructure-é€‰æ‹©æ’åº/04-å¤§æ ¹å †.png" alt="&quot;04-å¤§æ ¹å †&quot;">  </p>
<p>ä»¥ä¸Šä¸¤å›¾è¡¨ç¤ºå¯¹ä¸æ»¡è¶³å †ç»“æ„çš„æ•°ç»„è¿›è¡Œheapifyæ“ä½œåçš„å †ç»“æ„æ•°ç»„ã€‚å¯çŸ¥å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚ï¼šå¦‚æœæ•°ç»„å…ƒç´ å¾ˆå¤æ‚ï¼Œé‚£ä¹ˆäº¤æ¢è¿™äº›æ•°ç»„å…ƒç´ å°±ä¼šæœ‰å¾ˆå¤§çš„æ€§èƒ½æŸå¤±ã€‚åœ¨æ¯”å¦‚ï¼Œå°†æ•°ç»„çš„ç´¢å¼•çœ‹åšæ˜¯è¿›ç¨‹idå·ï¼Œåˆ™å¯ä»¥çœ‹å‡ºå¯¹æ•°ç»„è¿›è¡Œheapifyä¹‹åï¼Œæ•°ç»„å…ƒç´ ä½ç½®å‘ç”Ÿäº†æ”¹å˜ã€‚è¿›ç¨‹idå·å’Œå¯¹åº”çš„ä¼˜å…ˆçº§ä¹‹é—´æ²¡æœ‰å…³è”ã€‚è¿™æ ·å¦‚æœæ“ä½œç³»ç»Ÿéœ€è¦ä¿®æ”¹å¯¹åº”è¿›ç¨‹çš„<br>ä¼˜å…ˆçº§ï¼Œå°±å¿…é¡»é€šè¿‡éå†æ•°ç»„å…ƒç´ çš„æ–¹å¼ï¼Œæ‰¾åˆ°å¯¹åº”çš„ä¼˜å…ˆçº§è¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä¸”å¦‚æœæ•°ç»„ä¸­å¤šä¸ªå…ƒç´ ä¼˜å…ˆçº§ç›¸åŒï¼Œä¿®æ”¹å¯¹åº”è¿›ç¨‹çš„ä¼˜å…ˆçº§å°±æ— æ³•å®ç°äº†ã€‚</p>
<p>ä¸ºäº†è§£å†³æ•°ç»„heapifyä¸­indexå’Œdataä¹‹é—´æ— å…³è”çš„é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥æ„å»ºç´¢å¼•å †ï¼Œindexå’Œdataéƒ½å­˜å‚¨åœ¨æ•°ç»„ä¸­ã€‚æ„å»ºå †ç»“æ„çš„æ—¶å€™æ¯”è¾ƒdataï¼Œä½†æ˜¯äº¤æ¢çš„æ˜¯indexçš„å€¼ã€‚</p>
<p><img src="/images/09-datastructure-é€‰æ‹©æ’åº/01-ç´¢å¼•å †.png" alt="&quot;01-ç´¢å¼•å †&quot;">  </p>
<p><img src="/images/09-datastructure-é€‰æ‹©æ’åº/02-ç´¢å¼•å †.png" alt="&quot;02-ç´¢å¼•å †&quot;">  </p>
<p>ä»¥ä¸Šä¸¤å›¾è¡¨ç¤ºï¼Œdataå€¼çš„é¡ºåºæ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œindexå€¼çš„é¡ºåºå‘ç”Ÿäº†æ”¹å˜ã€‚ä¸€èˆ¬ç´¢å¼•å€¼æ˜¯intå‹ï¼Œäº¤æ¢æ•ˆç‡æ˜¯å¾ˆé«˜çš„ã€‚è¿™æ ·ä¿æŒäº†è¿›ç¨‹idå·å’Œä¼˜å…ˆçº§dataä¹‹é—´çš„è”ç³»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class IndexMaxHeap</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    &#x2F;&#x2F; å †åœ¨æ•°ç»„ä¸­çš„å­˜å‚¨èŒƒå›´ï¼š[1, end]</span><br><span class="line">    IndexMaxHeap(vector&lt;T&gt;&amp; nums):temp(nums)</span><br><span class="line">    &#123;</span><br><span class="line">        index.push_back(0);</span><br><span class="line">        data.push_back(0);</span><br><span class="line">        end &#x3D; 0;</span><br><span class="line">        for(T e : nums)</span><br><span class="line">        &#123;</span><br><span class="line">            end++;</span><br><span class="line">            index.push_back(end);</span><br><span class="line">            data.push_back(e);</span><br><span class="line">            nums.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; æ„å»ºåˆå§‹å †</span><br><span class="line">        for(int i&#x3D;end&#x2F;2; i&gt;&#x3D;1; i--)</span><br><span class="line">            shiftDownOpt(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ’å…¥æ“ä½œ</span><br><span class="line">    void insert(T e)</span><br><span class="line">    &#123;</span><br><span class="line">        end++;</span><br><span class="line">        index.push_back(end);</span><br><span class="line">        data.push_back(e);</span><br><span class="line">        shiftUpOpt(end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftUp(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        while(k&gt;1 &amp;&amp; data[index[0]]&gt;data[index[k&#x2F;2]])</span><br><span class="line">        &#123;</span><br><span class="line">            swap(index[k], index[k&#x2F;2]);</span><br><span class="line">            k &#x3D; k&#x2F;2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftUpOpt(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        index[0] &#x3D; index[k];</span><br><span class="line">        while(k&gt;1 &amp;&amp; data[index[0]]&gt;data[index[k&#x2F;2]])</span><br><span class="line">        &#123;</span><br><span class="line">            index[k] &#x3D; index[k&#x2F;2];</span><br><span class="line">            k &#x3D; k&#x2F;2;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        index[k] &#x3D; index[0];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftDown(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        while(2*k &lt;&#x3D; end)</span><br><span class="line">        &#123;</span><br><span class="line">            int j &#x3D; 2*k;</span><br><span class="line">            if(j+1&lt;&#x3D;end &amp;&amp; data[index[j+1]]&gt;data[index[j]]) j&#x3D;j+1;</span><br><span class="line">            if(data[index[0]] &gt; data[index[j]]) break;</span><br><span class="line">            swap(index[k], index[j]);</span><br><span class="line"></span><br><span class="line">            k &#x3D; j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    void shiftDownOpt(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        index[0] &#x3D; index[k];</span><br><span class="line">        while(2*k&lt;&#x3D;end)</span><br><span class="line">        &#123;</span><br><span class="line">            int j &#x3D; 2*k;</span><br><span class="line">            if(j+1&lt;&#x3D;end &amp;&amp; data[index[j+1]]&gt;data[index[j]]) j&#x3D;j+1;</span><br><span class="line">            if(data[index[0]] &gt; data[index[j]]) break;</span><br><span class="line">            index[k] &#x3D; index[j];</span><br><span class="line">            k &#x3D; j;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        index[k] &#x3D; index[0];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    T extractMax()</span><br><span class="line">    &#123;</span><br><span class="line">        T ret &#x3D; data[index[1]];</span><br><span class="line">        swap(index[1], index[end]);</span><br><span class="line">        index.pop_back();</span><br><span class="line">        data.pop_back();</span><br><span class="line">        end--;</span><br><span class="line">        shiftDownOpt(1);</span><br><span class="line"></span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        for(int i&#x3D;0; i&lt;&#x3D;end; i++)</span><br><span class="line">            cout &lt;&lt; i &lt;&lt; &quot;\t&quot;;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        for(T e : index)</span><br><span class="line">            cout &lt;&lt; e &lt;&lt; &quot;\t&quot;;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        for(T e : data)</span><br><span class="line">            cout &lt;&lt; e &lt;&lt; &quot;\t&quot;;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void sort()</span><br><span class="line">    &#123;</span><br><span class="line">        int n &#x3D; end;</span><br><span class="line">        for(int i&#x3D;0; i&lt;n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            temp.push_back(extractMax());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ä¿®æ”¹æŸä¸ªç´¢å¼•å¯¹åº”çš„å€¼</span><br><span class="line">    &#x2F;&#x2F; ç”¨æˆ·æŒ‡å®šçš„ç´¢å¼•æ˜¯ä»0å¼€å§‹çš„</span><br><span class="line">    void change(int i, T e)</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; 1.ä¿®æ”¹dataå€¼</span><br><span class="line">        data[i+1] &#x3D; e;</span><br><span class="line">        &#x2F;&#x2F; 2.ä¿®æ”¹dataå¯¹åº”çš„ç´¢å¼•åœ¨å †ä¸­çš„ä½ç½®</span><br><span class="line">        &#x2F;&#x2F; é€šè¿‡éå†çš„æ–¹å¼æ‰¾åˆ°dataç´¢å¼•åœ¨ç´¢å¼•æ•°ç»„ä¸­çš„ä½ç½®</span><br><span class="line">        for(int j&#x3D;1; j&lt;&#x3D;end; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(index[j] &#x3D;&#x3D; i+1)</span><br><span class="line">            &#123;</span><br><span class="line">                shiftUpOpt(j);</span><br><span class="line">                shiftDownOpt(j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    vector&lt;T&gt; index;</span><br><span class="line">    vector&lt;T&gt; data;</span><br><span class="line">    vector&lt;T&gt; &amp;temp;    &#x2F;&#x2F; å¼•ç”¨ï¼Œéœ€è¦åœ¨æ„é€ å‡½æ•°ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–</span><br><span class="line">    int end;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;int&gt; nums &#x3D; &#123;15, 17, 19, 13, 22, 16, 28, 30, 41, 62&#125;;</span><br><span class="line">    IndexMaxHeap&lt;int&gt; indexmaxheap(nums);</span><br><span class="line">&#x2F;&#x2F;    indexmaxheap.change(9, 25);</span><br><span class="line">&#x2F;&#x2F;    indexmaxheap.print();</span><br><span class="line">    indexmaxheap.sort();</span><br><span class="line"></span><br><span class="line">    for(int e : nums)</span><br><span class="line">        cout &lt;&lt; e &lt;&lt; &quot; &quot;;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä¸ºæ„å»ºç´¢å¼•å †çš„æ–¹æ³•ï¼Œå…¶ä¸­å®ç°äº†å¯¹æ•°ç»„dataæŸä¸ªå…ƒç´ çš„ä¿®æ”¹ã€‚æ ¹æ®changeå‡½æ•°å¯ä»¥çŸ¥é“ï¼Œä¿®æ”¹æŸä¸ªdataçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ã€‚ä½†æ˜¯ï¼Œé‡æ–°æ„å»ºç´¢å¼•å †ï¼Œéœ€è¦å…ˆåœ¨indexæ•°ç»„ä¸­å˜é‡æ‰¾åˆ°å¯¹åº”çš„ç´¢å¼•ï¼Œç„¶åå°†indexè¿›è¡Œå‘ä¸Šè°ƒæ•´å’Œå‘ä¸‹è°ƒæ•´æ“ä½œã€‚éå†æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚å¦‚ä½•èƒ½å¤Ÿä½¿å¾—æ‰¾åˆ°å¯¹åº”ç´¢å¼•ä¸ºO(1)å‘¢ï¼Ÿé‚£å°±æ˜¯é‡‡ç”¨åå‘æŸ¥æ‰¾çš„æ–¹å¼ã€‚</p>
<p><img src="/images/09-datastructure-é€‰æ‹©æ’åº/03-ç´¢å¼•å †.png" alt="&quot;03-ç´¢å¼•å †&quot;">  </p>
<p>ç”±å›¾å¯çŸ¥ï¼Œindexæ ¹æ®dataæ„å»ºçš„ç´¢å¼•å †ï¼›dataæ˜¯åŸå§‹æ•°æ®ï¼›revæ˜¯dataçš„ç´¢å¼•åœ¨ç´¢å¼•å †æ•°ç»„ä¸­çš„ä½ç½®ã€‚åå‘æŸ¥æ‰¾ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä¸€ç»„ï¼škey-valueã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">index[key] &#x3D; value  &#x2F;&#x2F; index[key] è¡¨ç¤ºdataçš„ç´¢å¼•ï¼Œé€šè¿‡dataçš„ç´¢å¼•å¯ä»¥æ‰¾åˆ°data</span><br><span class="line">rev[value] &#x3D; key    &#x2F;&#x2F; rev[key] è¡¨ç¤ºindexçš„ç´¢å¼•ï¼Œé€šè¿‡indexçš„ç´¢å¼•å¯ä»¥æ‰¾åˆ°dataçš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">index[rev[key]] &#x3D; key</span><br><span class="line">rev[index[key]] &#x3D; key</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class IndexReverseMaxHeap</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    IndexReverseMaxHeap(vector&lt;T&gt;&amp; nums):temp(nums)</span><br><span class="line">    &#123;</span><br><span class="line">        index.push_back(0);</span><br><span class="line">        data.push_back(0);</span><br><span class="line">        rev.push_back(0);</span><br><span class="line">        end &#x3D; 0;</span><br><span class="line">        for(T e : nums)</span><br><span class="line">        &#123;</span><br><span class="line">            end++;</span><br><span class="line">            index.push_back(end);</span><br><span class="line">            data.push_back(e);</span><br><span class="line">            rev.push_back(end);</span><br><span class="line">            nums.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; æ„å»ºåˆå§‹å †</span><br><span class="line">        for(int i&#x3D;end&#x2F;2; i&gt;&#x3D;1; i--)</span><br><span class="line">            shiftDownOpt(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; æ’å…¥æ“ä½œ</span><br><span class="line">    void insert(T e)</span><br><span class="line">    &#123;</span><br><span class="line">        end++;</span><br><span class="line">        index.push_back(end);</span><br><span class="line">        data.push_back(e);</span><br><span class="line">        rev.push_back(end);</span><br><span class="line">        shiftUpOpt(end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftUp(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        while(k&gt;1 &amp;&amp; data[index[0]]&gt;data[index[k&#x2F;2]])</span><br><span class="line">        &#123;</span><br><span class="line">            swap(index[k], index[k&#x2F;2]);</span><br><span class="line">            rev[index[k]] &#x3D; k;</span><br><span class="line">            rev[index[k&#x2F;2]] &#x3D; k&#x2F;2;</span><br><span class="line">            k &#x3D; k&#x2F;2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftUpOpt(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        index[0] &#x3D; index[k];</span><br><span class="line">        while(k&gt;1 &amp;&amp; data[index[0]]&gt;data[index[k&#x2F;2]])</span><br><span class="line">        &#123;</span><br><span class="line">            index[k] &#x3D; index[k&#x2F;2];</span><br><span class="line">            rev[index[k]] &#x3D; k;</span><br><span class="line">            k &#x3D; k&#x2F;2;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        index[k] &#x3D; index[0];</span><br><span class="line">        rev[index[k]] &#x3D; k;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftDown(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        while(2*k &lt;&#x3D; end)</span><br><span class="line">        &#123;</span><br><span class="line">            int j &#x3D; 2*k;</span><br><span class="line">            if(j+1&lt;&#x3D;end &amp;&amp; data[index[j+1]]&gt;data[index[j]]) j&#x3D;j+1;</span><br><span class="line">            if(data[index[0]] &gt; data[index[j]]) break;</span><br><span class="line">            swap(index[k], index[j]);</span><br><span class="line"></span><br><span class="line">            rev[index[k]] &#x3D; k;</span><br><span class="line">            rev[index[j]] &#x3D; j;</span><br><span class="line"></span><br><span class="line">            k &#x3D; j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void shiftDownOpt(int k)</span><br><span class="line">    &#123;</span><br><span class="line">        index[0] &#x3D; index[k];</span><br><span class="line">        while(2*k&lt;&#x3D;end)</span><br><span class="line">        &#123;</span><br><span class="line">            int j &#x3D; 2*k;</span><br><span class="line">            if(j+1&lt;&#x3D;end &amp;&amp; data[index[j+1]]&gt;data[index[j]]) j&#x3D;j+1;</span><br><span class="line">            if(data[index[0]] &gt; data[index[j]]) break;</span><br><span class="line">            index[k] &#x3D; index[j];</span><br><span class="line">            rev[index[k]] &#x3D; k;</span><br><span class="line">            k &#x3D; j;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        index[k] &#x3D; index[0];</span><br><span class="line">        rev[index[k]] &#x3D; k;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    T extractMax()</span><br><span class="line">    &#123;</span><br><span class="line">        T ret &#x3D; data[index[1]];</span><br><span class="line"></span><br><span class="line">        swap(index[1], index[end]);</span><br><span class="line">        rev[index[1]] &#x3D; 1;</span><br><span class="line">        rev[index[end]] &#x3D; end;</span><br><span class="line"></span><br><span class="line">        index.pop_back();</span><br><span class="line">        data.pop_back();</span><br><span class="line">        rev.pop_back();</span><br><span class="line">        end--;</span><br><span class="line">        shiftDownOpt(1);</span><br><span class="line"></span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        for(int i&#x3D;0; i&lt;&#x3D;end; i++)</span><br><span class="line">            cout &lt;&lt; i &lt;&lt; &quot;\t&quot;;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        for(T e : index)</span><br><span class="line">            cout &lt;&lt; e &lt;&lt; &quot;\t&quot;;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        for(T e : data)</span><br><span class="line">            cout &lt;&lt; e &lt;&lt; &quot;\t&quot;;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        for(T e : rev)</span><br><span class="line">            cout &lt;&lt; e &lt;&lt; &quot;\t&quot;;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void sort()</span><br><span class="line">    &#123;</span><br><span class="line">        int n &#x3D; end;</span><br><span class="line">        for(int i&#x3D;0; i&lt;n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            temp.push_back(extractMax());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ä¿®æ”¹æŸä¸ªç´¢å¼•å¯¹åº”çš„å€¼</span><br><span class="line">    &#x2F;&#x2F; ç”¨æˆ·æŒ‡å®šçš„ç´¢å¼•æ˜¯ä»0å¼€å§‹çš„</span><br><span class="line">    void change(int i, T e)</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; 1.ä¿®æ”¹dataå€¼</span><br><span class="line">        data[i+1] &#x3D; e;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 2.æ‰¾åˆ°dataåœ¨ç´¢å¼•å †ä¸­ç´¢å¼•çš„ä½ç½®</span><br><span class="line">        shiftUp(rev[i+1]);</span><br><span class="line">        shiftDown(rev[i+1]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    vector&lt;T&gt; index;</span><br><span class="line">    vector&lt;T&gt; data;</span><br><span class="line">    vector&lt;T&gt; rev;</span><br><span class="line">    vector&lt;T&gt; &amp;temp;    &#x2F;&#x2F; å¼•ç”¨ï¼Œéœ€è¦åœ¨æ„é€ å‡½æ•°ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–</span><br><span class="line">    int end;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;int&gt; nums &#x3D; &#123;15, 17, 19, 13, 22, 16, 28, 30, 41, 62&#125;;</span><br><span class="line">    IndexReverseMaxHeap&lt;int&gt; indexrevrsemaxheap(nums);</span><br><span class="line">&#x2F;&#x2F;    indexrevrsemaxheap.change(9, 25);</span><br><span class="line">&#x2F;&#x2F;    indexrevrsemaxheap.print();</span><br><span class="line">    indexrevrsemaxheap.sort();</span><br><span class="line"></span><br><span class="line">    for(int e : nums)</span><br><span class="line">        cout &lt;&lt; e &lt;&lt; &quot; &quot;;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä½¿ç”¨å †å®ç°ä¼˜å…ˆé˜Ÿåˆ—ã€‚æ¯”å¦‚åœ¨1000000ä¸ªå…ƒç´ ä¸­é€‰å‡ºå‰100åï¼Œå°±å¯ä»¥é€šè¿‡å †çš„æ–¹å¼ï¼Œå…ˆä»æ‰€æœ‰1000000ä¸ªå…ƒç´ ä¸­é€‰æ‹©100ä¸ªå…ƒç´ æ„å»ºå †ï¼Œç„¶åä¾æ¬¡å°†å‰©ä¸‹çš„å…ƒç´ æ”¾å…¥è¿™ä¸ª100ä¸ªå…ƒç´ çš„å †ä¸­ï¼Œè¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(NlogM)ã€‚<br>ä½¿ç”¨å †å®ç°å¤šè·¯å½’å¹¶æ’åºã€‚å¤šè·¯å½’å¹¶æ—¶ï¼Œå°†å¤šè·¯å…ƒç´ æ”¾å…¥å †ä¸­é€‰å‡ºæœ€å¤§æˆ–è€…æœ€å°çš„å…ƒç´ ã€‚<br>å®ç°då‰å †å…¶å®å’ŒäºŒå‰å †æ˜¯ä¸€æ ·çš„æ“ä½œã€‚åŸå› åœ¨äºå‘ä¸Šè°ƒæ•´å’Œå‘ä¸‹è°ƒæ•´éƒ½åªå½±å“ä¸€ä¸ªåˆ†æ”¯ã€‚</p>
]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„</category>
        <category>å†…éƒ¨æ’åº</category>
      </categories>
      <tags>
        <tag>é€‰æ‹©æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title>10-datastructure-å½’å¹¶æ’åº</title>
    <url>/2019/11/30/10-datastructure-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æ•°æ®ç»“æ„ä¸­ï¼Œæ’åºå¯ä»¥åˆ†ä¸ºå†…éƒ¨æ’åºå’Œå¤–éƒ¨æ’åºã€‚å†…éƒ¨æ’åºå¯ä»¥åˆ’åˆ†ä¸ºæ’å…¥æ’åºã€äº¤æ¢æ’åºã€é€‰æ‹©æ’åºã€å½’å¹¶æ’åºç­‰ã€‚æœ¬æ–‡ä¸»è¦è®°å½•å½’å¹¶æ’åºç®—æ³•ã€‚<br><a id="more"></a></p>
<h1 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h1><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><p>å½’å¹¶æ“ä½œåŸç†(å¯¹åº”_mergeå‡½æ•°)ï¼š</p>
<ol>
<li>ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—</li>
<li>è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®</li>
<li>æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®<br>é‡å¤æ­¥éª¤3ç›´åˆ°æŸä¸€æŒ‡é’ˆè¶…å‡ºåºåˆ—å°¾ï¼Œæœ€åå°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ã€‚</li>
</ol>
<h2 id="é€’å½’æ–¹æ³•"><a href="#é€’å½’æ–¹æ³•" class="headerlink" title="é€’å½’æ–¹æ³•"></a>é€’å½’æ–¹æ³•</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; å½’å¹¶æ’åº</span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void __merge(vector&lt;T&gt;&amp; nums, int left, int mid, int right)</span><br><span class="line">&#123;</span><br><span class="line">    int i &#x3D; left, j &#x3D; mid+1;</span><br><span class="line">    vector&lt;T&gt; temp;</span><br><span class="line">    &#x2F;&#x2F; å¤åˆ¶å’Œæ¯”è¾ƒæ•°ç»„ä¸­çš„å…ƒç´ </span><br><span class="line">    for (int i&#x3D;left; i&lt;&#x3D;right; i++)</span><br><span class="line">        temp.push_back(nums[i]);</span><br><span class="line"></span><br><span class="line">    for (int k&#x3D;left; k&lt;&#x3D;right; k++) &#x2F;&#x2F; ä¿®æ”¹åŸæ•°ç»„ä¸­çš„å€¼</span><br><span class="line">    &#123;</span><br><span class="line">        if (i &gt; mid)</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k] &#x3D; temp[j-left];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        else if (j &gt; right)</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k] &#x3D; temp[i-left];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        else if (temp[i-left] &lt; temp[j-left])</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k] &#x3D; temp[i-left];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k] &#x3D; temp[j-left];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void __mergeSort(vector&lt;T&gt;&amp; nums, int left, int right)</span><br><span class="line">&#123;</span><br><span class="line">    if (left &gt;&#x3D; right)</span><br><span class="line">        return;</span><br><span class="line">    int mid &#x3D; (right-left)&#x2F;2 + left;</span><br><span class="line">    __mergeSort(nums, left, mid);</span><br><span class="line">    __mergeSort(nums, mid+1, right);</span><br><span class="line">    __merge(nums, left, mid, right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void mergeSort(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size()-1;</span><br><span class="line">    __mergeSort(nums, start, end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¼˜åŒ–</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">void __merge(vector&lt;T&gt;&amp; nums, int left, int mid, int right)</span><br><span class="line">&#123;</span><br><span class="line">    int i &#x3D; left, j &#x3D; mid+1;</span><br><span class="line">    vector&lt;T&gt; temp;</span><br><span class="line">    &#x2F;&#x2F; å¤åˆ¶å’Œæ¯”è¾ƒæ•°ç»„ä¸­çš„å…ƒç´ </span><br><span class="line">    for (int i&#x3D;left; i&lt;&#x3D;right; i++)</span><br><span class="line">        temp.push_back(nums[i]);</span><br><span class="line"></span><br><span class="line">    for (int k&#x3D;left; k&lt;&#x3D;right; k++) &#x2F;&#x2F; ä¿®æ”¹åŸæ•°ç»„ä¸­çš„å€¼</span><br><span class="line">    &#123;</span><br><span class="line">        if (i &gt; mid)</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k] &#x3D; temp[j-left];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        else if (j &gt; right)</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k] &#x3D; temp[i-left];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        else if (temp[i-left] &lt; temp[j-left])</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k] &#x3D; temp[i-left];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k] &#x3D; temp[j-left];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void __mergeInsertSortOpt(vector&lt;T&gt;&amp; nums, int left, int right)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; left, end &#x3D; right+1;</span><br><span class="line">    for (int i&#x3D;1; i&lt;end; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        T temp &#x3D; nums[i];</span><br><span class="line">        int j;</span><br><span class="line"></span><br><span class="line">        for (j&#x3D;i; j&gt;0 &amp;&amp; nums[j-1]&gt;temp; j--)</span><br><span class="line">            nums[j] &#x3D; nums[j-1];</span><br><span class="line"></span><br><span class="line">        nums[j] &#x3D; temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void __mergeSortOpt(vector&lt;T&gt;&amp; nums, int left, int right)</span><br><span class="line">&#123;</span><br><span class="line">    if (right-left &lt;&#x3D; 15)</span><br><span class="line">    &#123;</span><br><span class="line">        __mergeInsertSortOpt(nums, left, right);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int mid &#x3D; (right-left)&#x2F;2 + left;</span><br><span class="line">    __mergeSort(nums, left, mid);</span><br><span class="line">    __mergeSort(nums, mid+1, right);</span><br><span class="line">    if (nums[mid] &gt; nums[mid+1])</span><br><span class="line">        __merge(nums, left, mid, right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void mergeSortOpt(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size()-1;</span><br><span class="line">    __mergeSortOpt(nums, start, end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h2><p>æ ¹æ®æ¯æ¬¡å½’å¹¶1ï¼Œ2ï¼Œ4ï¼Œ8ï¼Œâ€¦è‡ªåº•å‘ä¸Šçš„ç¼–ç¨‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">void mergeSortBU(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size();</span><br><span class="line">    &#x2F;&#x2F; å¤–å±‚å¾ªç¯æ¯æ‰§è¡Œä¸€æ¬¡ä¸ºåŸæ¥çš„ä¸¤å€ï¼›æ­¤æ—¶å¦‚æœinterval &gt; endå°±é€€å‡ºå¾ªç¯</span><br><span class="line">    for (int interval&#x3D;1; interval&lt;end; interval+&#x3D;interval)</span><br><span class="line">        &#x2F;&#x2F; å·¦è¾¹ç•Œ i &lt;&#x3D; end-1</span><br><span class="line">		&#x2F;&#x2F; ä¸­å€¼ i+interval-1 &lt; end-1 --&gt; i &lt; end-interval è¿™æ ·è‡³å°‘ end-1 å±äºright</span><br><span class="line">		&#x2F;&#x2F; å³è¾¹ç•Œé€šè¿‡min(i+interval+interval-1, end-1) é™å®š</span><br><span class="line">        for (int i&#x3D;0; i&lt;end-interval; i+&#x3D;(interval+interval))</span><br><span class="line">            __merge(nums, i, i+interval-1, min(i+interval+interval-1, end-1));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åº”ç”¨-æ±‚é€†åºå¯¹"><a href="#åº”ç”¨-æ±‚é€†åºå¯¹" class="headerlink" title="åº”ç”¨-æ±‚é€†åºå¯¹"></a>åº”ç”¨-æ±‚é€†åºå¯¹</h2><ol>
<li>å½’å¹¶æ’åºé€’å½’</li>
<li>åœ¨åˆå¹¶å½’å¹¶æ’åºåçš„ä¸¤éƒ¨åˆ†æ—¶ï¼Œä¼šæ¯”è¾ƒå·¦å³ä¸¤éƒ¨åˆ†çš„å€¼çš„å¤§å°ï¼Œç”±æ­¤å¯ä»¥ç¡®å®šé€†åºå¯¹çš„æ•°ç›®</li>
<li>é€†åºå¯¹çš„æ•°ç›®ç­‰äºï¼šå·¦è¾¹æ’åºå¥½éƒ¨åˆ†çš„é€†åºæ•° + å³è¾¹æ’åºå¥½éƒ¨åˆ†çš„é€†åºæ•° + å·¦å³éƒ¨åˆ†åˆå¹¶éƒ¨åˆ†çš„é€†åºæ•°</li>
<li>å¦‚æœå·¦ä¾§éƒ¨åˆ†çš„å€¼nums[left]å¤§äºå³ä¾§éƒ¨åˆ†çš„å€¼nums[right]ï¼Œåˆ™å·¦è¾¹æ’åºä¸­nums[left]ä¹‹åçš„æ•°éƒ½ä¸nums[right]æ„æˆé€†åºå¯¹</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;typename T&gt;</span><br><span class="line">long long __inversionMerge(vector&lt;T&gt;&amp; nums, int left, int mid, int right)</span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;T&gt; temp;</span><br><span class="line">    for(int i&#x3D;left; i&lt;&#x3D;right; i++)</span><br><span class="line">        temp.push_back(nums[i]);</span><br><span class="line"></span><br><span class="line">    long long ret &#x3D; 0;</span><br><span class="line">    int i&#x3D;left, j&#x3D;mid+1;</span><br><span class="line">    for(int k&#x3D;left; k&lt;&#x3D;right; k++)</span><br><span class="line">    &#123;</span><br><span class="line">        if(i&gt;mid)</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k]&#x3D;temp[j-left];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        else if(j&gt;right)</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k]&#x3D;temp[i-left];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        else if(temp[i-left]&lt;&#x3D;temp[j-left])</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k] &#x3D; temp[i-left];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            nums[k] &#x3D; temp[j-left];</span><br><span class="line">            j++;</span><br><span class="line"></span><br><span class="line">            ret +&#x3D; (long long)(mid-i+1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">long long __inversionCount(vector&lt;T&gt;&amp; nums, int left, int right)</span><br><span class="line">&#123;</span><br><span class="line">    if (left &gt;&#x3D; right)</span><br><span class="line">        return 0;</span><br><span class="line"></span><br><span class="line">    int mid &#x3D; (right-left)&#x2F;2 + left;</span><br><span class="line">    long long lret &#x3D; __inversionCount(nums, left, mid);</span><br><span class="line">    long long rret &#x3D; __inversionCount(nums, mid+1, right);</span><br><span class="line"></span><br><span class="line">    return lret+rret+__inversionMerge(nums, left, mid, right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">long long inversionCount(vector&lt;T&gt;&amp; nums)</span><br><span class="line">&#123;</span><br><span class="line">    int start&#x3D;0, end&#x3D;nums.size()-1;</span><br><span class="line">    long long ret &#x3D; __inversionCount(nums, start, end);</span><br><span class="line">    return ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1>]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„</category>
        <category>å†…éƒ¨æ’åº</category>
      </categories>
      <tags>
        <tag>å½’å¹¶æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title>12-leetcode-æ•°ç»„äºŒ</title>
    <url>/2019/11/30/12-leetcode-%E6%95%B0%E7%BB%84%E4%BA%8C/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="æ—‹è½¬æ’åºæ•°ç»„"><a href="#æ—‹è½¬æ’åºæ•°ç»„" class="headerlink" title="æ—‹è½¬æ’åºæ•°ç»„"></a>æ—‹è½¬æ’åºæ•°ç»„</h1><h2 id="æ—‹è½¬æ’åºæ•°ç»„çš„æ€§è´¨"><a href="#æ—‹è½¬æ’åºæ•°ç»„çš„æ€§è´¨" class="headerlink" title="æ—‹è½¬æ’åºæ•°ç»„çš„æ€§è´¨"></a>æ—‹è½¬æ’åºæ•°ç»„çš„æ€§è´¨</h2><ul>
<li>äºŒåˆ†ä¹‹åä¸€å®šæ˜¯ä¸€åŠæœ‰åºï¼Œä¸€åŠæ— åº</li>
</ul>
<h2 id="æœç´¢æ—‹è½¬æ’åºæ•°ç»„"><a href="#æœç´¢æ—‹è½¬æ’åºæ•°ç»„" class="headerlink" title="æœç´¢æ—‹è½¬æ’åºæ•°ç»„"></a><a href="https://leetcode-cn.com/problems/search-in-rotated-sorted-array/" target="_blank" rel="noopener">æœç´¢æ—‹è½¬æ’åºæ•°ç»„</a></h2><ul>
<li>æ•°ç»„ä¸­ä¸å­˜åœ¨é‡å¤å…ƒç´ ã€‚è¿›è¡ŒäºŒåˆ†çš„æ—¶å€™ï¼Œæ•°ç»„ä¸€å®šæ˜¯ä¸€åŠæœ‰åºçš„ï¼Œä¸€åŠæ— åºã€‚<br>æ ¹æ® æœ‰åºéƒ¨åˆ†çš„ start å’Œ end åˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨æœ‰åºéƒ¨åˆ†ï¼Œå¦åˆ™åœ¨æ— åºéƒ¨åˆ†ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ—¶é—´å¤æ‚åº¦ O(logn) ç©ºé—´å¤æ‚åº¦ O(1)</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int search(vector&lt;int&gt;&amp; nums, int target) &#123;</span><br><span class="line">        int start &#x3D; 0, end &#x3D; nums.size() - 1, mid;</span><br><span class="line">        while (start &lt;&#x3D; end) &#123;</span><br><span class="line">            mid &#x3D; (start + end) &#x2F; 2;</span><br><span class="line">            if (nums[mid] &#x3D;&#x3D; target)</span><br><span class="line">                return mid;</span><br><span class="line">            else if (nums[start] &lt;&#x3D; nums[mid])	&#x2F;&#x2F; å‰åŠæ®µé€’å¢ æ³¨æ„ç­‰å·(ç­‰å·ä¸å·¦åŠéƒ¨åˆ†ç»“åˆ)</span><br><span class="line">            &#123;</span><br><span class="line">                if (nums[start] &lt;&#x3D; target &amp;&amp; nums[mid] &gt; target)</span><br><span class="line">                    end &#x3D; mid - 1;</span><br><span class="line">                else</span><br><span class="line">                    start &#x3D; mid + 1;</span><br><span class="line">            &#125;</span><br><span class="line">            else &#123;</span><br><span class="line">                if (nums[end] &gt;&#x3D; target &amp;&amp; nums[mid] &lt; target)	&#x2F;&#x2F; ååŠæ®µé€’å¢</span><br><span class="line">                    start &#x3D; mid + 1;</span><br><span class="line">                else</span><br><span class="line">                    end &#x3D; mid - 1;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="æœç´¢æ—‹è½¬æ’åºæ•°ç»„-II"><a href="#æœç´¢æ—‹è½¬æ’åºæ•°ç»„-II" class="headerlink" title="æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II"></a><a href="https://leetcode-cn.com/problems/search-in-rotated-sorted-array-ii/" target="_blank" rel="noopener">æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II</a></h2><ul>
<li>æ•°ç»„ä¸­å­˜åœ¨é‡å¤å…ƒç´ ï¼Œè¿›è¡ŒäºŒåˆ†çš„æ—¶å€™ï¼Œæ•°ç»„ä¸€å®šæ˜¯ä¸€åŠæœ‰åºçš„ï¼Œä¸€åŠæ— åºã€‚<br>æ ¹æ® æœ‰åºéƒ¨åˆ†çš„ start å’Œ end åˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨æœ‰åºéƒ¨åˆ†ï¼Œå¦åˆ™åœ¨æ— åºéƒ¨åˆ†ã€‚å­˜åœ¨ä¸€ç§ç‰¹æ®Šæƒ…å†µ<br>å¦‚æœ num[start] = nums[mid] = nums[end]ï¼Œæ­¤æ—¶æ— æ³•åˆ¤æ–­æ•°ç»„å“ªè¾¹æ˜¯å‡åºï¼Œå“ªè¾¹æ˜¯é™åºã€‚æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<br>å¯ä»¥ ç ´ç¯è¿™ä¸ªçŠ¶æ€ï¼Œnum[start] = nums[mid] å¿…å®šæœ‰äºŒåˆ†çš„ä¸¤éƒ¨åˆ†æ•°ç»„ä¸­ï¼Œæœ‰ä¸€éƒ¨åˆ†å€¼å…¨éƒ¨ç›¸ç­‰ï¼Œ<br>è€Œå¦ä¸€éƒ¨åˆ†å­˜åœ¨ ç›®æ ‡å€¼ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    bool search(vector&lt;int&gt;&amp; nums, int target) &#123;</span><br><span class="line">        if(nums.size() &#x3D;&#x3D; 0) return false;</span><br><span class="line"></span><br><span class="line">        int start &#x3D; 0, end &#x3D; nums.size() - 1;</span><br><span class="line">        int mid &#x3D; 0;</span><br><span class="line"></span><br><span class="line">        while(start &lt;&#x3D; end)&#123;</span><br><span class="line">            mid &#x3D; (start + end) &#x2F; 2;</span><br><span class="line">            if(nums[mid] &#x3D;&#x3D; target)</span><br><span class="line">                return true;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; å»é‡ ç»è¿‡è¿™ä¸ªåˆ¤æ–­ï¼Œä¸€å®šå¯ä»¥çŸ¥é“å“ªä¸€æ–¹æœ‰åº</span><br><span class="line">            &#x2F;&#x2F; ç”±ä¸Šå¯çŸ¥ num[mid] &#x3D;&#x3D; nums[start] éƒ½ä¸æ˜¯ target å¯ä»¥èˆå»</span><br><span class="line">            &#x2F;&#x2F; nums[mid] &#x3D;&#x3D; nums[start] &#x3D; nums[end]æ—¶æ— æ³•åˆ¤æ–­å“ªè¾¹æœ‰åº</span><br><span class="line">            if(nums[mid] &#x3D;&#x3D; nums[start])&#123;</span><br><span class="line">                start++;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if(nums[mid] &gt; nums[start])&#123;  &#x2F;&#x2F; å¦‚æœå¤§äºæˆç«‹ï¼Œè¯´æ˜å·¦åŠé€’å¢ï¼›å¦‚æœç­‰äºä¸ä¸€å®šæˆç«‹</span><br><span class="line">                if(nums[mid] &gt; target &amp;&amp; nums[start] &lt;&#x3D; target)</span><br><span class="line">                    end &#x3D; mid - 1;</span><br><span class="line">                else</span><br><span class="line">                    start &#x3D; mid + 1;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                if(nums[mid] &lt; target &amp;&amp; nums[end] &gt;&#x3D; target)</span><br><span class="line">                    start &#x3D; mid + 1;</span><br><span class="line">                else</span><br><span class="line">                    end &#x3D; mid - 1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼"><a href="#å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼" class="headerlink" title="å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼"></a><a href="https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/" target="_blank" rel="noopener">å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</a></h2><ul>
<li>æ—‹è½¬ä¹‹åï¼Œæœ€å°å€¼ä¹‹åçš„å…ƒç´ éƒ½å°äºæ•°ç»„æœ€åçš„å…ƒç´ ã€‚å¦‚æœæ•°ç»„æ²¡æœ‰æ—‹è½¬ä¹Ÿæˆç«‹ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int findMin(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        if(nums.size() &#x3D;&#x3D; 0)    return -1;</span><br><span class="line">        int start &#x3D; 0, end &#x3D; nums.size() - 1;</span><br><span class="line">        int mid &#x3D; 0;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ä¸¤è¾¹é€¼è¿‘ï¼Œæœ€åä¸€å®šä¼šæœ‰ start &#x3D; end</span><br><span class="line">        while(start &lt; end)&#123;</span><br><span class="line">            mid &#x3D; start + (end - start) &#x2F; 2;</span><br><span class="line">            if(nums[mid] &lt; nums[end])</span><br><span class="line">                end &#x3D; mid;</span><br><span class="line">            else</span><br><span class="line">                start &#x3D; mid + 1;</span><br><span class="line">        &#125;</span><br><span class="line">        return nums[start];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ—‹è½¬ä¹‹åï¼Œæœ€å°å€¼ä¹‹åçš„æ‰€æœ‰å…ƒç´ éƒ½å°äºç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæ•°ç»„æ²¡æœ‰æ—‹è½¬ï¼Œè¯¥æ€§è´¨ä¸æˆç«‹ï¼Œéœ€è¦ç‰¹åˆ¤</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int findMin(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        if(nums.size() &#x3D;&#x3D; 0)    return -1;</span><br><span class="line">        if(nums.front() &lt; nums.back()) return nums.front();</span><br><span class="line">        int start &#x3D; 0, end &#x3D; nums.size() - 1;</span><br><span class="line">        int mid &#x3D; 0;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ä¸¤è¾¹é€¼è¿‘ï¼Œæœ€åä¸€å®šä¼šæœ‰ start &#x3D; end</span><br><span class="line">        while(start &lt; end)&#123;</span><br><span class="line">            mid &#x3D; start + (end - start) &#x2F; 2;</span><br><span class="line">            if(nums[mid] &lt; nums.front())</span><br><span class="line">                end &#x3D; mid;</span><br><span class="line">            else</span><br><span class="line">                start &#x3D; mid + 1;</span><br><span class="line">        &#125;</span><br><span class="line">        return nums[start];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼-II"><a href="#å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼-II" class="headerlink" title="å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ II"></a><a href="https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/" target="_blank" rel="noopener">å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ II</a></h2><ul>
<li>å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„çš„æ—‹è½¬ç‚¹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int findMin(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        if(nums.size() &#x3D;&#x3D; 0)    return -1;</span><br><span class="line">        int start &#x3D; 0, end &#x3D; nums.size() - 1;</span><br><span class="line">        int mid &#x3D; 0;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ä¸¤è¾¹é€¼è¿‘ï¼Œæœ€åä¸€å®šä¼šæœ‰ start &#x3D; end</span><br><span class="line">        while(start &lt; end)&#123;</span><br><span class="line">            mid &#x3D; start + (end - start) &#x2F; 2;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; nums[start] &#x3D;&#x3D; nums[mid] å¯èƒ½å°±æ˜¯æœ€å°å€¼</span><br><span class="line">            &#x2F;&#x2F; å¦‚æœæ²¡æœ‰ start !&#x3D; mid ä¼šæŠŠè¿™ä¸ªæœ€å°å€¼è·³è¿‡</span><br><span class="line">            if(nums[start] &#x3D;&#x3D; nums[mid] &amp;&amp; start !&#x3D; mid)&#123;</span><br><span class="line">                start++;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; ç¨‹åºè¿è¡Œåˆ°è¿™é‡Œï¼Œnums[mid] &#x3D;&#x3D; nums[end]æ—¶</span><br><span class="line">            &#x2F;&#x2F; mid å’Œ end ä¹‹é—´çš„æ•°éƒ½ç›¸ç­‰ </span><br><span class="line">            if(nums[mid] &lt;&#x3D; nums[end])</span><br><span class="line">                end &#x3D; mid;</span><br><span class="line">            else</span><br><span class="line">                start &#x3D; mid + 1;</span><br><span class="line">        &#125;</span><br><span class="line">        return nums[start];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ—‹è½¬æ’åºæ•°ç»„é—®é¢˜ä¸»è¦è¦æŠ“ä½äºŒåˆ†æŸ¥æ‰¾åä¸€åŠæœ‰åºï¼Œä¸€åŠæ— åºçš„ç‰¹ç‚¹ã€‚ä»¥åŠæ—‹è½¬ç‚¹å…·æœ‰çš„ç‰¹æ®Šæ€§è´¨ã€‚</p>
<h1 id="ç§»åŠ¨é›¶"><a href="#ç§»åŠ¨é›¶" class="headerlink" title="ç§»åŠ¨é›¶"></a><a href="https://leetcode-cn.com/problems/move-zeroes/" target="_blank" rel="noopener">ç§»åŠ¨é›¶</a></h1><ul>
<li>åŒæŒ‡é’ˆ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    void moveZeroes(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        int prev &#x3D; 0, next &#x3D; 0;</span><br><span class="line">        int k &#x3D; 0;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; prevæŒ‡å‘éœ€è¦èµ‹å€¼å†…å­˜ç©ºé—´</span><br><span class="line">        while( next &lt;&#x3D; nums.size()-1)&#123;</span><br><span class="line">            if(nums[next] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">                next++;</span><br><span class="line">                k++;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                nums[prev++] &#x3D; nums[next++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;  for(int i&#x3D;0; i&lt;&#x3D;k; i++)&#123;      &#x2F;&#x2F; è¶Šç•Œ</span><br><span class="line">        for(int i&#x3D;0; i&lt;k; i++)&#123;</span><br><span class="line">            nums[prev+i] &#x3D; 0;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>åŒæŒ‡é’ˆä¼˜åŒ–ä¸€</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    void moveZeroes(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        int index &#x3D; 0;      &#x2F;&#x2F; nums ä¸­ï¼Œ[0...index)ä¹‹é—´çš„å…ƒç´ ä¸ºéé›¶å…ƒç´ </span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; éå†åˆ°ç¬¬iä¸ªå…ƒç´ ï¼Œä¿è¯[0...i]ä¸­æ‰€æœ‰é0å…ƒç´ </span><br><span class="line">        &#x2F;&#x2F; éƒ½æŒ‰ç…§é¡ºåºæ’åˆ—åœ¨[0...index)ä¸­</span><br><span class="line">        for(int i&#x3D;0; i&lt;nums.size(); i++)</span><br><span class="line">            if(nums[i] !&#x3D; 0)</span><br><span class="line">                nums[index++] &#x3D; nums[i];</span><br><span class="line"></span><br><span class="line">        for(int i&#x3D;index; i&lt;nums.size(); i++)</span><br><span class="line">            nums[i] &#x3D; 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>åŒæŒ‡é’ˆä¼˜åŒ–äºŒ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    void moveZeroes(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        int index &#x3D; 0;      &#x2F;&#x2F; nums ä¸­ï¼Œ[0...index)ä¹‹é—´çš„å…ƒç´ ä¸ºéé›¶å…ƒç´ </span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; éå†åˆ°ç¬¬iä¸ªå…ƒç´ ï¼Œä¿è¯[0...i]ä¸­æ‰€æœ‰é0å…ƒç´ </span><br><span class="line">        &#x2F;&#x2F; éƒ½æŒ‰ç…§é¡ºåºæ’åˆ—åœ¨[0...index)ä¸­</span><br><span class="line">        &#x2F;&#x2F; åŒæ—¶ [index...i]ä¸º0</span><br><span class="line">        for(int i&#x3D;0; i&lt;nums.size(); i++)</span><br><span class="line">            if(nums[i] !&#x3D; 0)</span><br><span class="line">                if(index !&#x3D; i)    &#x2F;&#x2F; è€ƒè™‘æ•°ç»„ä¸­éƒ½æ˜¯éé›¶å…ƒç´ </span><br><span class="line">                    swap(nums[index++], nums[i]);</span><br><span class="line">                else</span><br><span class="line">                    index++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="é¢œè‰²åˆ†ç±»"><a href="#é¢œè‰²åˆ†ç±»" class="headerlink" title="é¢œè‰²åˆ†ç±»"></a><a href="https://leetcode-cn.com/problems/sort-colors/" target="_blank" rel="noopener">é¢œè‰²åˆ†ç±»</a></h1><ul>
<li>æš´åŠ›è§£æ³•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    void sortColors(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        int count[3] &#x3D; &#123;0&#125;;</span><br><span class="line">        for(int i&#x3D;0; i&lt;nums.size(); i++)&#123;</span><br><span class="line">            assert( nums[i] &gt;&#x3D; 0 &amp;&amp; nums[i] &lt;&#x3D; 2);</span><br><span class="line">            count[nums[i]]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        int index &#x3D; 0;</span><br><span class="line">        for(int i&#x3D;0; i&lt;count[0]; i++)&#123;</span><br><span class="line">            nums[index++] &#x3D; 0; </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        for(int i&#x3D;0; i&lt;count[1]; i++)&#123;</span><br><span class="line">            nums[index++] &#x3D; 1; </span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        for(int i&#x3D;0; i&lt;count[2]; i++)&#123;</span><br><span class="line">            nums[index++] &#x3D; 2; </span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸‰è·¯å¿«æ’<br>ç›´æ¥ä½¿ç”¨ä¸‰è·¯å¿«æ’</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    void sortColors(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        int start &#x3D; 0, end &#x3D; nums.size() - 1;</span><br><span class="line"></span><br><span class="line">        _sortColors(nums, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void _sortColors(vector&lt;int&gt;&amp; nums, int left, int right)&#123;</span><br><span class="line">        if(left &gt;&#x3D; right)   return;</span><br><span class="line"></span><br><span class="line">        int lt &#x3D; left, gt &#x3D; right + 1;</span><br><span class="line">        int i &#x3D; left + 1;</span><br><span class="line">        int pivotValue &#x3D; nums[left];</span><br><span class="line">        &#x2F;&#x2F; [left+1, lt] &lt;ã€€pivotValue [lt+1, gt-1] &#x3D;&#x3D; pivotValue [gt, right] &gt; pivotValue</span><br><span class="line">        while( i &lt; gt )&#123;</span><br><span class="line">            if( nums[i] &lt; pivotValue )</span><br><span class="line">                swap( nums[++lt], nums[i++] );</span><br><span class="line">            else if( nums[i] &#x3D;&#x3D; pivotValue )</span><br><span class="line">                i++;</span><br><span class="line">            else</span><br><span class="line">                swap( nums[i], nums[--gt] );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; [left, lt-1] &lt;ã€€pivotValue [lt, gt-1] &#x3D;&#x3D; pivotValue [gt, right] &gt; pivotValue</span><br><span class="line">        swap( nums[left], nums[lt] );</span><br><span class="line">        _sortColors(nums, left, lt-1);</span><br><span class="line">        _sortColors(nums, gt, right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ä¸‰è·¯å¿«æ’å¼•ç”³ï¼Œä¸‰è·¯å¿«æ’çš„æ€æƒ³å°±æ˜¯æ ¹æ®ä¸€ä¸ªåŸºå‡†å€¼ï¼Œå°†æ•°ç»„åˆ†ä¸ºå¤§äºåŸºå‡†å€¼å’Œå°äºåŸºå‡†å€¼ä¸¤éƒ¨åˆ†ã€‚ç”±äºæœ¬é¢˜ä¸­åªæœ‰ 0,1,2 ä¸‰ä¸ªæ•°å­—ï¼Œ<br>ä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬æŒ‡å®šåŸºå‡†å€¼ä¸º 1ï¼Œå°±å¯ä»¥ä¸€æ¬¡å°†æ•°ç»„æ’åºå¥½ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    void sortColors(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        int zero &#x3D; -1, two &#x3D; nums.size();   &#x2F;&#x2F; zero å’Œ two å¼€å§‹æ˜¯ç©ºé›†</span><br><span class="line">        int i &#x3D; 0;</span><br><span class="line">        while( i &lt; two )&#123;   &#x2F;&#x2F; i å’Œ two é€¼è¿‘ [zero+1, two-1]ä¸º 1, [two, nums.size()]ä¸º 2</span><br><span class="line">            if( nums[i] &lt; 1 )</span><br><span class="line">                swap( nums[++zero], nums[i++] );</span><br><span class="line">            else if( nums[i] &#x3D;&#x3D; 1 )</span><br><span class="line">                i++;</span><br><span class="line">            else</span><br><span class="line">                swap( nums[i], nums[--two] );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„"><a href="#åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„"></a><a href="https://leetcode-cn.com/problems/merge-sorted-array/" target="_blank" rel="noopener">åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    void merge(vector&lt;int&gt;&amp; nums1, int m, vector&lt;int&gt;&amp; nums2, int n) &#123;</span><br><span class="line">        int index &#x3D; m + n - 1, index1 &#x3D; m - 1, index2 &#x3D; n - 1;</span><br><span class="line">        while(index1 &gt;&#x3D; 0 &amp;&amp; index2 &gt;&#x3D; 0)</span><br><span class="line">            nums1[index--] &#x3D; nums1[index1] &gt; nums2[index2] ? nums1[index1--] : nums2[index2--];</span><br><span class="line"></span><br><span class="line">        while(index2 &gt;&#x3D; 0)</span><br><span class="line">            nums1[index--] &#x3D; nums2[index2--];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>åˆ·é¢˜</category>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>14-datastructure-äºŒå‰æ ‘</title>
    <url>/2019/12/02/14-datastructure-%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="äºŒå‰æ’åº-æœç´¢-æ ‘-BSTæ ‘"><a href="#äºŒå‰æ’åº-æœç´¢-æ ‘-BSTæ ‘" class="headerlink" title="äºŒå‰æ’åº(æœç´¢)æ ‘(BSTæ ‘)"></a>äºŒå‰æ’åº(æœç´¢)æ ‘(BSTæ ‘)</h1><p>æ ‘æ˜¯N(Nâ‰¥0)ä¸ªç»“ç‚¹çš„æœ‰é™é›†åˆï¼ŒN=0æ—¶ï¼Œç§°ä¸ºç©ºæ ‘ã€‚åœ¨ä»»æ„ä¸€æ£µéç©ºæ ‘ä¸­åº”æ»¡è¶³ï¼š</p>
<ul>
<li>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç‰¹å®šçš„ç§°ä¸ºæ ¹çš„ç»“ç‚¹</li>
<li>å½“N&gt;1æ—¶ï¼Œå…¶ä½™ç»“ç‚¹å¯åˆ†ä¸ºm(m&gt;0)ä¸ªäº’ä¸ç›¸äº¤çš„æœ‰é™é›†åˆï¼Œå…¶ä¸­æ¯ä¸€ä¸ªé›†åˆæœ¬èº«åˆæ˜¯ä¸€æ£µæ ‘ï¼Œå¹¶ä¸”æˆä¸ºæ ¹ç»“ç‚¹çš„å­æ ‘ã€‚</li>
</ul>
<p>ç”±ä¸Šå¯çŸ¥ï¼Œæ ‘çš„å®šä¹‰æ˜¯é€’å½’çš„ï¼Œæ˜¯ä¸€ç§é€’å½’çš„æ•°æ®ç»“æ„ã€‚æ ‘ä½œä¸ºä¸€ç§é€»è¾‘ç»“æ„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§åˆ†å±‚ç»“æ„ï¼Œå…·æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ ‘çš„æ ¹ç»“ç‚¹æ²¡æœ‰å‰é©±ç»“ç‚¹ï¼Œé™¤æ ¹ç»“ç‚¹ä¹‹å¤–çš„æ‰€æœ‰ç»“ç‚¹æœ‰ä¸”åªæœ‰ä¸€ä¸ªå‰é©±ç»“ç‚¹ã€‚</li>
<li>æ ‘ä¸­æ‰€æœ‰ç»“ç‚¹å¯ä»¥æœ‰é›¶ä¸ªæˆ–è€…å¤šä¸ªåç»§ç»“ç‚¹ã€‚</li>
</ul>
<p>æ ‘é€‚åˆè¡¨ç¤ºå…·æœ‰å±‚æ¬¡ç»“æ„çš„æ•°æ®ã€‚æ ‘ä¸­çš„æŸä¸ªç»“ç‚¹(é™¤æ ¹ç»“ç‚¹å¤–)æœ€å¤šåªå’Œä¸Šä¸€å±‚çš„ä¸€ä¸ªç»“ç‚¹(å³å…¶çˆ¶èŠ‚ç‚¹)æœ‰ç›´æ¥å…³ç³»ï¼Œæ ¹ç»“ç‚¹æ²¡æœ‰ä¸Šå±‚ç»“ç‚¹ã€‚å› æ­¤åœ¨nä¸ªç»“ç‚¹çš„æ ‘ä¸­æœ‰n-1æ¡è¾¹ã€‚è€Œæ ‘ä¸­æ¯ä¸ªç»“ç‚¹ä¸å…¶ä¸‹ä¸€å±‚çš„é›¶ä¸ªæˆ–è€…å¤šä¸ªç»“ç‚¹(å³å…¶å­å¥³ç»“ç‚¹)æœ‰ç›´æ¥å…³ç³»ã€‚</p>
<p>æ ‘ä¸­ä¸€ä¸ªç»“ç‚¹çš„å­ç»“ç‚¹ä¸ªæ•°ç§°ä¸ºè¯¥ç»“ç‚¹çš„åº¦ï¼Œæ ‘ä¸­ç»“ç‚¹çš„æœ€å¤§åº¦æ•°ç§°ä¸ºæ ‘çš„åº¦ã€‚</p>
<p>äºŒå‰æ ‘æ˜¯æ¯ä¸ªç»“ç‚¹è‡³å¤šåªæœ‰ä¸¤æ£µå­æ ‘(å³äºŒå‰æ ‘ä¸­ä¸å­˜åœ¨åº¦å¤§äº2çš„ç»“ç‚¹)ï¼ŒäºŒå‰æ ‘çš„å­æ ‘æœ‰å·¦å³ä¹‹åˆ†ï¼Œå…¶æ¬¡åºä¸èƒ½é¢ å€’ã€‚</p>
<p><img src="/images/14-datastructure-äºŒå‰æ ‘/01-äºŒå‰æ ‘.png" alt="&quot;01-äºŒå‰æ ‘&quot;"></p>
<p>äºŒå‰æ ‘æ˜¯æœ‰åºæ ‘ï¼Œè‹¥å°†å…¶å·¦å³å­æ ‘é¢ å€’ï¼Œå°±æˆä¸ºå¦ä¸€æ£µä¸åŒçš„äºŒå‰æ ‘ã€‚ç‰¹æ®Šçš„äºŒå‰æ ‘åŒ…æ‹¬ï¼šæ»¡äºŒå‰æ ‘ï¼Œå®Œå…¨äºŒå‰æ ‘ï¼ŒäºŒå‰æ’åºæ ‘(BST)ï¼Œå¹³è¡¡äºŒå‰æ ‘(AVL)ï¼Œçº¢é»‘æ ‘ç­‰ã€‚    </p>
<p>äºŒå‰æ ‘ä¸åº¦ä¸º2çš„æœ‰åºæ ‘çš„åŒºåˆ«ï¼š</p>
<ul>
<li>åº¦ä¸º2çš„æ ‘è‡³å°‘æœ‰3ä¸ªç»“ç‚¹ï¼Œè€ŒäºŒå‰æ ‘å¯ä»¥ä¸ºç©ºï¼›</li>
<li>åº¦ä¸º2çš„æœ‰åºæ ‘çš„å­©å­ç»“ç‚¹çš„å·¦å³æ¬¡åºæ˜¯ç›¸å¯¹äºå¦ä¸€ä¸ªå­©å­ç»“ç‚¹çš„ï¼Œå¦‚æœæŸä¸ªç»“ç‚¹åªæœ‰ä¸€ä¸ªå­©å­ç»“ç‚¹ï¼Œè¿™ä¸ªå­©å­ç»“ç‚¹æ— é¡»åŒºåˆ†å…¶å·¦å³æ¬¡åºã€‚è€ŒäºŒå‰æ ‘éœ€è¦åŒºåˆ†å·¦å³æ¬¡åºã€‚</li>
</ul>
<p>äºŒå‰æ ‘å¯ä»¥é‡‡ç”¨é¡ºåºå­˜å‚¨ç»“æ„ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨é“¾å¼å­˜å‚¨ç»“æ„ã€‚å¯¹äºæ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘ï¼Œé‡‡ç”¨é¡ºåºå­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡é«˜ï¼Œè€Œä¸”å¯ä»¥æ ¹æ®æ•°ç»„ä¸‹æ ‡åæ˜ äºŒå‰æ ‘ä¸­ç»“ç‚¹ä¹‹é—´çš„é€»è¾‘å…³ç³»ã€‚<br>ä½†æ˜¯å¯¹äºä¸€èˆ¬çš„äºŒå‰æ ‘ï¼Œä¸ºä½¿æ•°ç»„ä¸‹æ ‡åæ˜ äºŒå‰æ ‘ä¸­ç»“ç‚¹ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œåªèƒ½æ·»åŠ ä¸€äº›å¹¶ä¸å­˜åœ¨çš„ç©ºç»“ç‚¹è®©å…¶æ¯ä¸ªç»“ç‚¹ä¸å®Œå…¨äºŒå‰æ ‘ä¸Šçš„ç»“ç‚¹ç›¸å¯¹ç…§ï¼Œåœ¨å­˜å‚¨åˆ°ä¸€ç»´æ•°ç»„çš„ç›¸åº”åˆ†é‡ä¸­ï¼Œè¿™æ ·çš„ç©ºé—´åˆ©ç”¨ç‡ä¸é«˜ã€‚<br>äºŒå‰æ ‘æ›´é€šç”¨çš„æ–¹å¼æ˜¯é‡‡ç”¨é“¾å¼å­˜å‚¨ç»“æ„ã€‚é“¾å¼ç»“æ„æŒ‡ç”¨ä¸€ä¸ªé“¾è¡¨æ¥å­˜å‚¨ä¸€æ£µäºŒå‰æ ‘ï¼ŒäºŒå‰æ ‘ä¸­æ¯ä¸€ä¸ªç»“ç‚¹ç”¨é“¾è¡¨çš„ä¸€ä¸ªé“¾æ¥ç‚¹æ¥å­˜å‚¨ã€‚åœ¨äºŒå‰æ ‘ä¸­ï¼Œç»“ç‚¹ç»“æ„é€šå¸¸åŒ…æ‹¬è‹¥å¹²æ•°æ®åŸŸå’Œè‹¥å¹²æŒ‡é’ˆåŸŸã€‚äºŒå‰é“¾è¡¨è‡³å°‘åŒ…å«3ä¸ªåŸŸï¼šæ•°æ®åŸŸdataã€å·¦æŒ‡é’ˆåŸŸlchildå’Œå³æŒ‡é’ˆåŸŸrchildã€‚å¦‚æœç”¨äºŒå‰æ ‘å­˜å‚¨å­—å…¸æ•°æ®ç»“æ„ï¼Œæ­¤æ—¶æ•°æ®åŸŸåŒ…æ‹¬key-valueã€‚</p>
<ul>
<li>å †å’ŒäºŒå‰æ ‘çš„åŒºåˆ«ï¼š<br>ä»¥å°æ ¹å †ä¸ºä¾‹ï¼Œå †çš„ç‰¹ç‚¹æ˜¯åŒäº²ç»“ç‚¹çš„å…³é”®å­—å¿…ç„¶å°äºç­‰äºå­©å­ç»“ç‚¹çš„å…³é”®å­—ï¼Œè€Œä¸¤ä¸ªå­©å­ç»“ç‚¹çš„å…³é”®å­—æ²¡æœ‰æ¬¡åºè§„å®šï¼Œè€ŒäºŒå‰æ’åºæ•°ä¸­ï¼Œæ¯ä¸ªåŒäº²ç»“ç‚¹çš„å…³é”®å­—å‡å¤§äºå·¦å­æ ‘ç»“ç‚¹çš„å…³é”®å­—ï¼Œå‡å°äºå³å­æ ‘jç»“ç‚¹çš„å…³é”®å­—ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªåŒäº²ç»“ç‚¹çš„å·¦å³å­©å­çš„å…³é”®å­—æœ‰æ¬¡åºå…³ç³»ï¼Œè¿™æ ·ï¼Œå½“å¯¹ä¸¤ç§æ ‘æ‰§è¡Œä¸­åºéå†åï¼ŒäºŒå‰æ ‘ä¼šå¾—åˆ°ä¸€ä¸ªæœ‰åºçš„åºåˆ—ï¼Œè€Œå †ä¸ä¸€å®šã€‚</li>
</ul>
<h2 id="äºŒå‰æ’åº-æœç´¢-æ ‘çš„éå†"><a href="#äºŒå‰æ’åº-æœç´¢-æ ‘çš„éå†" class="headerlink" title="äºŒå‰æ’åº(æœç´¢)æ ‘çš„éå†"></a>äºŒå‰æ’åº(æœç´¢)æ ‘çš„éå†</h2><p>äºŒå‰æ ‘çš„éå†ï¼Œæ˜¯æŒ‡æŒ‰æŸæ¡æœç´¢è·¯å¾„è®¿é—®æ ‘ä¸­çš„æ¯ä¸ªç»“ç‚¹ï¼Œä½¿å¾—æ¯ä¸ªç»“ç‚¹å‡è¢«è®¿é—®ä¸€æ¬¡ï¼Œè€Œä¸”ä»…è¢«è®¿é—®ä¸€æ¬¡ã€‚ç”±äºŒå‰æ ‘çš„é€’å½’å®šä¹‰ï¼Œéå†ä¸€æ£µäºŒå‰æ ‘ä¾¿è¦å†³å®šå¯¹æ ¹ç»“ç‚¹(N)ã€å·¦å­æ ‘(L)ã€å³å­æ ‘(R)çš„è®¿é—®é¡ºåºã€‚æŒ‰ç…§å…ˆéå†å·¦å­æ ‘å†éå†å³å­æ ‘çš„åŸåˆ™ï¼Œå¸¸è§çš„éå†æ¬¡åºæœ‰å…ˆåº(NLR)ã€ä¸­åº(LNR)å’Œååº(LRN)ä¸‰ç§ã€‚<font color="red">å…¶ä¸­ï¼ŒåºæŒ‡çš„æ˜¯æ ¹ç»“ç‚¹åœ¨ä½•æ—¶è¢«è®¿é—®</font>ã€‚</p>
<p>å…ˆåºéå†æ–¹å¼ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯æ·±åº¦ä¼˜å…ˆéå†æ–¹å¼ã€‚æ·±åº¦ä¼˜å…ˆéå†æ–¹å¼çš„åŸºæœ¬æ€æƒ³å¦‚ä¸‹ï¼šé¦–å…ˆè®¿é—®å›¾ä¸­æŸä¸€èµ·å§‹é¡¶ç‚¹v,ç„¶åç”±vå‡ºå‘ï¼Œè®¿é—®ä¸vé‚»æ¥ä¸”æœªè¢«è®¿é—®çš„ä»»ä¸€é¡¶ç‚¹$w_1$ï¼Œå†è®¿é—®ä¸$w_1$é‚»æ¥ä¸”æœªè¢«è®¿é—®çš„ä»»ä¸€é¡¶ç‚¹$w_2$ï¼Œâ€¦ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚å½“ä¸èƒ½å†ç»§ç»­å‘ä¸‹è®¿é—®æ—¶ï¼Œä¾æ¬¡é€€å›åˆ°æœ€è¿‘è¢«è®¿é—®çš„é¡¶ç‚¹ï¼Œè‹¥å®ƒè¿˜æœ‰é‚»æ¥é¡¶ç‚¹æœªè¢«è®¿é—®è¿‡ï¼Œåˆ™ä»è¯¥ç‚¹å¼€å§‹ç»§ç»­ä¸Šè¿°æœç´¢è¿‡ç¨‹ï¼Œç›´åˆ°å›¾ä¸­æ‰€æœ‰é¡¶ç‚¹å‡è¢«è®¿é—®è¿‡ä¸ºæ­¢ã€‚</p>
<h3 id="å…ˆåºéå†"><a href="#å…ˆåºéå†" class="headerlink" title="å…ˆåºéå†"></a>å…ˆåºéå†</h3><p>å…ˆåºéå†æ“ä½œè¿‡ç¨‹ï¼š<br>å¦‚æœäºŒå‰æ ‘ä¸ºç©ºï¼Œä»€ä¹ˆä¹Ÿä¸åšã€‚å¦åˆ™ï¼š</p>
<ul>
<li>è®¿é—®æ ¹ç»“ç‚¹</li>
<li>å…ˆåºéå†å·¦å­æ ‘</li>
<li>å…ˆåºéå†å³å­æ ‘</li>
</ul>
<h3 id="ä¸­åºéå†"><a href="#ä¸­åºéå†" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h3><p>ä¸­åºéå†æ“ä½œè¿‡ç¨‹ï¼š<br>å¦‚æœäºŒå‰æ ‘ä¸ºç©ºï¼Œä»€ä¹ˆä¹Ÿä¸åšã€‚å¦åˆ™ï¼š</p>
<ul>
<li>ä¸­åºéå†å·¦å­æ ‘</li>
<li>è®¿é—®æ ¹ç»“ç‚¹</li>
<li>ä¸­åºéå†å³å­æ ‘</li>
</ul>
<h3 id="ååºéå†"><a href="#ååºéå†" class="headerlink" title="ååºéå†"></a>ååºéå†</h3><p>ååºéå†æ“ä½œè¿‡ç¨‹ï¼š<br>å¦‚æœäºŒå‰æ ‘ä¸ºç©ºï¼Œä»€ä¹ˆä¹Ÿä¸åšã€‚å¦åˆ™ï¼š</p>
<ul>
<li>ååºéå†å·¦å­æ ‘</li>
<li>ååºéå†å³å­æ ‘</li>
<li>è®¿é—®æ ¹ç»“ç‚¹</li>
</ul>
<p>ä¸‰ç§éå†ç®—æ³•ä¸­é€’å½’éå†å·¦å³å­æ ‘çš„é¡ºåºéƒ½æ˜¯å›ºå®šçš„ï¼Œåªæ˜¯è®¿é—®æ ¹ç»“ç‚¹çš„é¡ºåºä¸åŒã€‚ä¸ç®¡é‡‡ç”¨é‚£ç§éå†ç®—æ³•ï¼Œæ¯ä¸ªç»“ç‚¹éƒ½è®¿é—®ä¸€æ¬¡ä¸”ä»…è®¿é—®ä¸€æ¬¡ï¼Œæ•…æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(n)ã€‚</p>
<h2 id="äºŒå‰æ’åº-æœç´¢-æ ‘çš„æŸ¥æ‰¾ä¸åˆ é™¤"><a href="#äºŒå‰æ’åº-æœç´¢-æ ‘çš„æŸ¥æ‰¾ä¸åˆ é™¤" class="headerlink" title="äºŒå‰æ’åº(æœç´¢)æ ‘çš„æŸ¥æ‰¾ä¸åˆ é™¤"></a>äºŒå‰æ’åº(æœç´¢)æ ‘çš„æŸ¥æ‰¾ä¸åˆ é™¤</h2><h3 id="æœ€å¤§å€¼å’Œæœ€å°å€¼"><a href="#æœ€å¤§å€¼å’Œæœ€å°å€¼" class="headerlink" title="æœ€å¤§å€¼å’Œæœ€å°å€¼"></a>æœ€å¤§å€¼å’Œæœ€å°å€¼</h3><p>äºŒå‰æ ‘çš„æœ€å°å€¼æ˜¯å·¦å­æ ‘æœ€å·¦ä¾§åˆ†æ”¯ä¸­æ²¡æœ‰å·¦å­©å­çš„ç»“ç‚¹ã€‚<br>äºŒå‰æ ‘çš„æœ€å¤§å€¼æ˜¯å³å­æ ‘æœ€å³ä¾§åˆ†æ”¯ä¸­æ²¡æœ‰å³å­©å­çš„ç»“ç‚¹ã€‚</p>
<h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><ol>
<li>å¦‚æœè¢«åˆ é™¤ç»“ç‚¹æ˜¯å¶ç»“ç‚¹ï¼Œåˆ™ç›´æ¥åˆ é™¤ã€‚</li>
<li>å¦‚æœè¢«åˆ é™¤ç»“ç‚¹Zåªæœ‰ä¸€æ£µå·¦å­æ ‘æˆ–å³å­æ ‘ï¼Œåˆ™è®©Zçš„å­æ ‘ç§°ä¸ºZçˆ¶ç»“ç‚¹çš„å­æ ‘ï¼Œä»£æ›¿Zçš„ä½ç½®ã€‚</li>
<li>å¦‚æœè¢«åˆ é™¤ç»“ç‚¹Zæœ‰å·¦ã€å³ä¸¤æ£µå­æ ‘ï¼Œåˆ™ä»¤Zçš„ç›´æ¥åç»§(æˆ–è€…ç›´æ¥å‰é©±)æ›¿ä»£Zï¼Œç„¶åä»äºŒå‰æ ‘ä¸­åˆ é™¤è¿™ä¸ªç›´æ¥åç»§(æˆ–ç›´æ¥å‰é©±)ï¼Œè¿™æ ·å°±è½¬æ¢æˆäº†ç¬¬ä¸€æˆ–ç¬¬äºŒç§æƒ…å†µã€‚<br>ç›´æ¥åç»§å°±æ˜¯åˆ é™¤ç»“ç‚¹å³å­æ ‘ä¸­çš„æœ€å°å€¼ï¼›ç›´æ¥å‰é©±å°±æ˜¯åˆ é™¤ç»“ç‚¹å·¦å­æ ‘ä¸­çš„æœ€å¤§å€¼ã€‚</li>
</ol>
<h2 id="äºŒå‰æ ‘çš„å…¶ä»–æ“ä½œ"><a href="#äºŒå‰æ ‘çš„å…¶ä»–æ“ä½œ" class="headerlink" title="äºŒå‰æ ‘çš„å…¶ä»–æ“ä½œ"></a>äºŒå‰æ ‘çš„å…¶ä»–æ“ä½œ</h2><h3 id="ceilå’Œfloor"><a href="#ceilå’Œfloor" class="headerlink" title="ceilå’Œfloor"></a>ceilå’Œfloor</h3><h3 id="rankå’Œceil"><a href="#rankå’Œceil" class="headerlink" title="rankå’Œceil"></a>rankå’Œceil</h3>]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„</category>
        <category>æŸ¥æ‰¾</category>
      </categories>
      <tags>
        <tag>äºŒå‰æ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title>13-datastructure-äºŒåˆ†æŸ¥æ‰¾</title>
    <url>/2019/12/01/13-datastructure-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æŸ¥æ‰¾ç®—æ³•æœ‰å¾ˆå¤šç§ï¼Œå¸¸ç”¨çš„æœ‰é¡ºåºæŸ¥æ‰¾ï¼ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œåˆ†å—æŸ¥æ‰¾ï¼Œæ ‘è¡¨æŸ¥æ‰¾ï¼Œå“ˆå¸ŒæŸ¥æ‰¾ç­‰ã€‚æœ¬æ–‡ä»‹ç»äºŒåˆ†æŸ¥æ‰¾ã€‚<br><a id="more"></a></p>
<h1 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h1><h2 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h2><ul>
<li>åŒºé—´ä¸º[start, end]</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; éé€’å½’æ–¹å¼</span><br><span class="line">int binarySearch(vector&lt;int&gt;&amp; nums, int target) &#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size() - 1, mid;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; äºŒåˆ†æŸ¥æ‰¾ midå‘å·¦å–æ•´	</span><br><span class="line">    while (start &lt;&#x3D; end) &#123;		&#x2F;&#x2F; [start, end]</span><br><span class="line">        &#x2F;&#x2F;mid &#x3D; (start + end) &#x2F; 2;	&#x2F;&#x2F; start å’Œ end è¶³å¤Ÿå¤§çš„è¯ä¼šäº§ç”Ÿæº¢å‡º</span><br><span class="line">        mid &#x3D; start + (end - start) &#x2F; 2;</span><br><span class="line"></span><br><span class="line">        if (nums[mid] &#x3D;&#x3D; target)</span><br><span class="line">            return mid;</span><br><span class="line">        else if (nums[mid] &gt; target)</span><br><span class="line">            end &#x3D; mid - 1;</span><br><span class="line">        else</span><br><span class="line">            start &#x3D; mid + 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é€’å½’æ–¹å¼</span><br><span class="line">&#x2F;&#x2F; ä¸‰è¦ç´ ï¼šæ˜ç¡®å‡½æ•°åŠŸèƒ½ï¼›å¯»æ‰¾é€’å½’ç»“æŸæ¡ä»¶ï¼›æ‰¾å‡ºå‡½æ•°çš„ç­‰ä»·å…³ç³»å¼ï¼Œä¸æ–­ç¼©å°å‚æ•°èŒƒå›´</span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">int __binarySearchWithRecursion(vector&lt;T&gt;&amp; nums, int left, int right, T target)</span><br><span class="line">&#123;</span><br><span class="line">    if(left &gt; right)    &#x2F;&#x2F; å¾ªç¯ç»ˆæ­¢æ¡ä»¶</span><br><span class="line">        return -1;</span><br><span class="line"></span><br><span class="line">    int mid &#x3D; left + (right-left) &#x2F; 2;</span><br><span class="line">    if(nums[mid] &#x3D;&#x3D; target)</span><br><span class="line">        return mid;</span><br><span class="line">    else if(nums[mid] &gt; target)</span><br><span class="line">        return __binarySearchWithRecursion(nums, left, mid-1, target);  &#x2F;&#x2F; ä¸æ–­ç¼©å°å‚æ•°èŒƒå›´</span><br><span class="line">    else</span><br><span class="line">        return __binarySearchWithRecursion(nums, mid+1, right, target);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">int binarySearchWithRecursion(vector&lt;T&gt;&amp; nums, T target)</span><br><span class="line">&#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size()-1;</span><br><span class="line"></span><br><span class="line">    return __binarySearchWithRecursion(nums, start, end, target);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åŒºé—´ä¸º[start, end)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int binarySearch(vector&lt;int&gt;&amp; nums, int target) &#123;</span><br><span class="line">    int start &#x3D; 0, end &#x3D; nums.size(), mid;</span><br><span class="line">    &#x2F;&#x2F; äºŒåˆ†æŸ¥æ‰¾ midå‘å·¦å–æ•´	</span><br><span class="line">    while (start &lt; end) &#123;		&#x2F;&#x2F; [start, endï¼‰</span><br><span class="line">        &#x2F;&#x2F;mid &#x3D; (start + end) &#x2F; 2;	&#x2F;&#x2F; start å’Œ end è¶³å¤Ÿå¤§çš„è¯ä¼šäº§ç”Ÿæº¢å‡º</span><br><span class="line">        mid &#x3D; start + (end - start) &#x2F; 2;</span><br><span class="line">        if (nums[mid] &#x3D;&#x3D; target)</span><br><span class="line">            return mid;</span><br><span class="line">        else if (nums[mid] &gt; target)	</span><br><span class="line">            end &#x3D; mid;			&#x2F;&#x2F; [start, end)</span><br><span class="line">        else</span><br><span class="line">            start &#x3D; mid + 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return -1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äºŒåˆ†æŸ¥æ‰¾è§„å¾‹æ€»ç»“"><a href="#äºŒåˆ†æŸ¥æ‰¾è§„å¾‹æ€»ç»“" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾è§„å¾‹æ€»ç»“"></a>äºŒåˆ†æŸ¥æ‰¾è§„å¾‹æ€»ç»“</h2><ol>
<li><p>å¥‡æ•°åˆ—ï¼šmid ä¸ºæ•´æ•°; å¶åºåˆ—ï¼šmid å‘å·¦å–æ•´<br>å¦‚æœæ˜¯å¥‡åºåˆ—ï¼Œlen(å·¦ä¾§åºåˆ—) = len(å³ä¾§åºåˆ—)ã€‚<br>å¦‚æœæ˜¯å¶åºåˆ—ï¼Œlen(å·¦ä¾§åºåˆ—) + 1 = len(å³ä¾§åºåˆ—)ã€‚<br>æ¯”å¦‚ï¼š<br>å¥‡åºåˆ—ï¼š1 2 3 4 5 6 7 8 9 â€”-&gt; ä¸­é—´æ•°ä¸º5 å·¦ä¾§åºåˆ— 1 2 3 4 å³ä¾§åºåˆ— 6 7 8 9<br>å¶åºåˆ—ï¼š1 2 3 4 5 6 7 8 â€”â€”&gt; ä¸­é—´æ•°ä¸º4 å·¦ä¾§åºåˆ— 1 2 3 å³ä¾§åºåˆ— 5 6 7 8</p>
</li>
<li><p>ä¸ºä»€ä¹ˆäºŒåˆ†æŸ¥æ‰¾ç»“æŸæ¡ä»¶ä¸ºï¼šstart &lt;= end<br>åˆå§‹ [start, end] = [0, nums.size()-1], ä¹Ÿå°±æ˜¯äºŒåˆ†æŸ¥æ‰¾åŒºé—´ä¸º<strong>é—­åŒºé—´</strong>ã€‚<br>å½“ start &lt; end æ—¶ï¼Œç¨‹åº start = end æ—¶é€€å‡ºå¾ªç¯ã€‚æ­¤æ—¶é—­åŒºé—´ä¸­ è¿˜æœ‰ä¸€ä¸ªå…ƒç´  nums[start]=nums[end] æ²¡æœ‰åšåˆ¤æ–­ï¼Œæ•…äºŒåˆ†æŸ¥æ‰¾æœ‰é—æ¼ã€‚æ‰€ä»¥äºŒåˆ†æŸ¥æ‰¾ç»“æŸæ¡ä»¶ä¸ºï¼šstart &lt;= endã€‚<br>æ—¢ç„¶ç»“æŸæ¡ä»¶ä¸ºï¼šstart &lt;= endã€‚å¦‚æœä¸æ»¡è¶³æ¡ä»¶ï¼Œä¸€å®šæ˜¯ start = end + 1ã€‚ä¹Ÿå°±æ˜¯ç»“æŸçš„æ—¶å€™ start &gt; endã€‚<br>æ¯”å¦‚ï¼š<br>å¥‡åºåˆ—ï¼š10 11 12 13 14 15 16 17 18  ç›®æ ‡å€¼ä¸º19ï¼›ç”±äºè¯¥å¥‡åºåˆ—ä¸­æ²¡æœ‰ç¬¦åˆè¦æ±‚çš„å€¼ï¼Œstart ä¼šä¸æ–­å‘ end é è¿‘ã€‚å¾ªç¯ç»“æŸæ—¶ï¼Œstart = end + 1;  æ­¤æ—¶ start = 9ï¼Œend = 8ã€‚(startå’Œendä¸ºåºåˆ—ä¸‹æ ‡ï¼Œä» 0 å¼€å§‹)<br>å¶åºåˆ—ï¼š10 11 12 13 14 15 16 17    ç›®æ ‡å€¼ä¸º9ï¼›ç”±äºè¯¥å¶åºåˆ—ä¸­æ²¡æœ‰ç¬¦åˆè¦æ±‚çš„å€¼ï¼Œend ä¼šä¸æ–­å‘ start é è¿‘ã€‚å¾ªç¯ç»“æŸæ—¶ï¼Œend = start - 1; æ­¤æ—¶ start = 0, end = -1ã€‚(startå’Œendä¸ºåºåˆ—ä¸‹æ ‡ï¼Œä» 0 å¼€å§‹)</p>
</li>
<li><p>ç»“æŸæ¡ä»¶ start = end+1;<br>å¦‚æœäºŒåˆ†æŸ¥æ‰¾æ²¡æœ‰æŸ¥æ‰¾åˆ°é€‚åˆ targetï¼Œæœ€ç»ˆæ»¡è¶³ start = end+1ã€‚<br>å¦‚<a href="https://leetcode-cn.com/problems/search-insert-position/" target="_blank" rel="noopener">æœç´¢æ’å…¥ä½ç½®</a>è¿™é“é¢˜ä¸­ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ° targetï¼Œé‚£ä¹ˆæ’å…¥ä½ç½®ä¸€å®šæ˜¯åœ¨ start ä½ç½®ä¸Šã€‚<br>å¯ä»¥åˆ†ä¸ºä¸‰ç§æƒ…å†µè®¨è®ºï¼š</p>
</li>
</ol>
<ul>
<li>å¦‚æœ target å¯ä»¥æ’å…¥åºåˆ—ä¸­ï¼Œnums[end] &lt; target &lt; nums[start]ã€‚</li>
<li>å¦‚æœ target å°äºåºåˆ—æ‰€æœ‰å…ƒç´ ã€‚target &lt; nums[start]ï¼›</li>
<li>å¦‚æœ target å¤§äºåºåˆ—æ‰€æœ‰å…ƒç´ ï¼Œtarget &gt; nums[end]ï¼Œtarget æ’å…¥ä½ç½®ä¸º end+1 = start</li>
</ul>
<p>æ€»ä¹‹ï¼Œå¯¹äºæœ‰åºåºåˆ— target æ’å…¥ä½ç½®ä¸º startã€‚</p>
<ol>
<li>äºŒåˆ†æŸ¥æ‰¾æœ€åä¸€å®šæ˜¯å‰©ä¸‹ä¸¤ä¸ªå…ƒç´ <br>äºŒåˆ†æŸ¥æ‰¾å¿«å®Œæˆçš„æ—¶å€™ï¼Œstart æŒ‡å‘ä¸¤ä¸ªå…ƒç´ çš„å·¦ä¾§å…ƒç´ ï¼Œend æŒ‡å‘ä¸¤ä¸ªå…ƒç´ çš„å³ä¾§å…ƒç´ ã€‚å½“å‰©ä½™ä¸¤ä¸ªå…ƒç´ æ—¶ï¼Œmid ä¸€å®šæŒ‡å‘ startæ‰€æŒ‡å‘çš„å…ƒç´ ã€‚<br>ä¹‹åå¾—åˆ°ç»“æœ <strong>ç»“æŸæ¡ä»¶ start = end+1;</strong>ã€‚</li>
</ol>
<h1 id="leetcode-äºŒåˆ†æŸ¥æ‰¾"><a href="#leetcode-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="leetcode äºŒåˆ†æŸ¥æ‰¾"></a>leetcode äºŒåˆ†æŸ¥æ‰¾</h1><h2 id="æœç´¢æ’å…¥ä½ç½®"><a href="#æœç´¢æ’å…¥ä½ç½®" class="headerlink" title="æœç´¢æ’å…¥ä½ç½®"></a><a href="https://leetcode-cn.com/problems/search-insert-position/" target="_blank" rel="noopener">æœç´¢æ’å…¥ä½ç½®</a></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int searchInsert(vector&lt;int&gt;&amp; nums, int target) &#123;</span><br><span class="line">        int start &#x3D; 0, end &#x3D; nums.size() - 1;</span><br><span class="line">        int mid &#x3D; 0;</span><br><span class="line">        while(start &lt;&#x3D; end)&#123;</span><br><span class="line">            mid &#x3D; (start + end) &#x2F; 2;</span><br><span class="line">            if(nums[mid] &#x3D;&#x3D; target)</span><br><span class="line">                return mid;</span><br><span class="line">            else if(nums[mid] &gt; target)</span><br><span class="line">                end &#x3D; mid - 1;</span><br><span class="line">            else</span><br><span class="line">                start &#x3D; mid + 1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return start;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é€’å½’</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int __searchInsert(vector&lt;int&gt;&amp; nums, int left, int right, int target)</span><br><span class="line">    &#123;</span><br><span class="line">        if(left&gt;right)</span><br><span class="line">            return left;</span><br><span class="line"></span><br><span class="line">        int mid &#x3D; left+(right-left)&#x2F;2;</span><br><span class="line">        if(nums[mid] &#x3D;&#x3D; target)</span><br><span class="line">            return mid;</span><br><span class="line">        else if(nums[mid] &gt; target)</span><br><span class="line">            return __searchInsert(nums, left, mid-1, target);</span><br><span class="line">        else</span><br><span class="line">            return __searchInsert(nums, mid+1, right, target);</span><br><span class="line">    &#125;</span><br><span class="line">    int searchInsert(vector&lt;int&gt;&amp; nums, int target) &#123;</span><br><span class="line">        int start&#x3D;0, end&#x3D;nums.size()-1;</span><br><span class="line"></span><br><span class="line">        return __searchInsert(nums, start, end, target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="æœç´¢äºŒç»´çŸ©é˜µ"><a href="#æœç´¢äºŒç»´çŸ©é˜µ" class="headerlink" title="æœç´¢äºŒç»´çŸ©é˜µ"></a><a href="https://leetcode-cn.com/problems/search-a-2d-matrix/" target="_blank" rel="noopener">æœç´¢äºŒç»´çŸ©é˜µ</a></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    bool searchMatrix(vector&lt;vector&lt;int&gt;&gt;&amp; matrix, int target) &#123;</span><br><span class="line">        if(matrix.size() &#x3D;&#x3D; 0) return false;</span><br><span class="line">        int m &#x3D; matrix.size();</span><br><span class="line">        int n &#x3D; matrix[0].size();</span><br><span class="line"></span><br><span class="line">        int start &#x3D; 0, end &#x3D; m * n - 1;</span><br><span class="line">        int mid &#x3D; 0;</span><br><span class="line">        while(start &lt;&#x3D; end)&#123;</span><br><span class="line">            mid &#x3D; (start + end) &#x2F; 2;</span><br><span class="line">            &#x2F;&#x2F; æ³¨æ„ï¼šæ˜¯å¯¹æ•´é™¤ nï¼Œä¸æ˜¯æ•´é™¤ m</span><br><span class="line">            if(matrix[mid &#x2F; n][mid % n] &#x3D;&#x3D; target)</span><br><span class="line">                return true;</span><br><span class="line">            else if(matrix[mid &#x2F; n][mid % n] &gt; target)</span><br><span class="line">                end &#x3D; mid - 1;</span><br><span class="line">            else</span><br><span class="line">                start &#x3D; mid + 1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Pow-x-n"><a href="#Pow-x-n" class="headerlink" title="Pow(x, n)"></a><a href="https://leetcode-cn.com/problems/powx-n/" target="_blank" rel="noopener">Pow(x, n)</a></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;limits.h&gt;</span><br><span class="line"></span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    double myPow(double x, int n) &#123;</span><br><span class="line">        double result &#x3D; 0;</span><br><span class="line">        int flag &#x3D; 0;</span><br><span class="line"></span><br><span class="line">        if (n &lt; 0) &#123;</span><br><span class="line">            if (n !&#x3D; INT_MIN) &#123;</span><br><span class="line">                x &#x3D; 1 &#x2F; x;</span><br><span class="line">                n &#x3D; -n;</span><br><span class="line">            &#125;</span><br><span class="line">            else &#123;</span><br><span class="line">                x &#x3D; 1 &#x2F; x;</span><br><span class="line">                n &#x3D; -(n + 1);</span><br><span class="line">                flag &#x3D; 1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        result &#x3D; binaryPow(x, n);</span><br><span class="line"></span><br><span class="line">        if (flag &#x3D;&#x3D; 1) &#123;</span><br><span class="line">            result &#x3D; result * x;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	double binaryPow(double x, int n) &#123;</span><br><span class="line">        double result &#x3D; 0;</span><br><span class="line"></span><br><span class="line">        if (n &#x3D;&#x3D; 0)</span><br><span class="line">            return 1;</span><br><span class="line">        result &#x3D; binaryPow(x, n&#x2F;2);</span><br><span class="line"></span><br><span class="line">        if (n % 2 &#x3D;&#x3D; 0)</span><br><span class="line">            return result * result;</span><br><span class="line">        else</span><br><span class="line">            return result * result * x;</span><br><span class="line"></span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="x-çš„å¹³æ–¹æ ¹"><a href="#x-çš„å¹³æ–¹æ ¹" class="headerlink" title="x çš„å¹³æ–¹æ ¹"></a><a href="https://leetcode-cn.com/problems/sqrtx/" target="_blank" rel="noopener">x çš„å¹³æ–¹æ ¹</a></h2><ul>
<li>ç‰›é¡¿è¿­ä»£æ³•<br><img src="/images/13-datastructure-äºŒåˆ†æŸ¥æ‰¾/01-ç‰›é¡¿è¿­ä»£æ³•.gif" alt="&quot;01-ç‰›é¡¿è¿­ä»£æ³•&quot;"></li>
</ul>
<p>æœ¬å›¾æ¥è‡ª<a href="https://blog.csdn.net/batuwuhanpei/article/details/51979831" target="_blank" rel="noopener">ç‰›é¡¿æ³•ä¸æ‹Ÿç‰›é¡¿æ³•</a><br>åœ¨æœ¬é¢˜ä¸­ï¼Œå°±è¦æ±‚è¿™æ ·çš„ <script type="math/tex">\ x: x^2 - a = 0</script>ã€‚å³æ›²çº¿ <script type="math/tex">f(x) = x^2 - a</script> ä¸ <script type="math/tex">x</script> è½´çš„äº¤ç‚¹(aä¸ºéœ€è¦å¼€æ–¹çš„å€¼)ã€‚<br>ç‰›é¡¿è¿­ä»£æ³•ï¼šå°±æ˜¯æ±‚åœ¨ <script type="math/tex">f(x)</script> ä¸Šçš„ç‚¹<script type="math/tex">(x_0, f(x_0))</script>çš„åˆ‡çº¿ä¸ <script type="math/tex">x</script> è½´çš„äº¤ç‚¹ï¼Œç»è¿‡è‹¥å¹²æ¬¡è¿­ä»£ï¼Œåˆ‡çº¿ä¸ <script type="math/tex">x</script> è½´çš„äº¤ç‚¹å€¼å°±ç­‰äº <script type="math/tex">f(x)</script> ä¸ <script type="math/tex">x</script> è½´çš„äº¤ç‚¹å€¼ã€‚  </p>
<p>æ¯æ¬¡çš„åˆ‡çº¿ä¸ <script type="math/tex">x</script> çš„äº¤ç‚¹å€¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">\begin{equation}
f^{'}(x) = 2x \nonumber
\end{equation}</script><p>è®¾ <script type="math/tex">f(x)</script> ä¸Šçš„ç‚¹ <script type="math/tex">(x_0, f(x_0))</script>ã€‚è¿™è¿™ä¸€ç‚¹çš„åˆ‡çº¿æ–¹ç¨‹ä¸ºï¼š</p>
<script type="math/tex; mode=display">\begin{equation}
f(x) - f(x_0) = f^{'}(x_0)(x - x_0) \nonumber
\end{equation}</script><p>ä»¤<script type="math/tex">f(x)=0</script>ï¼Œå¾—åˆ‡çº¿ä¸ <script type="math/tex">x</script>è½´çš„äº¤ç‚¹ä¸º:</p>
<script type="math/tex; mode=display">\begin{equation}
f(x) - f(x_0) = f^{'}(x_0)(x - x_0) \nonumber
\end{equation}</script><p>æœ¬é¢˜ä¸­ï¼Œæ¯æ¬¡åšåˆ‡çº¿ä¸ <script type="math/tex">x</script> è½´çš„äº¤ç‚¹ä¸ºï¼š</p>
<script type="math/tex; mode=display">\begin{equation}
x = \frac{1}{2}(x_0 + \frac{a}{x_0}) \nonumber
\end{equation}</script><p>ç”±äºå¯¹ æ•´æ•° å¼€æ–¹çš„ç»“æœä¸€å®šä¸ºæ•´æ•°ï¼Œæ‰€ä»¥ <script type="math/tex">x>0</script>ã€‚ç‰›é¡¿æ³•è¿­ä»£çš„ç»“æœå°±æ˜¯ <script type="math/tex">f(x)</script> çš„åˆ‡ç‚¹çš„ <script type="math/tex">x</script> åæ ‡å’Œ åˆ‡ç‚¹çš„åˆ‡çº¿ä¸ <script type="math/tex">x</script> çš„åæ ‡ç›¸åŒã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int mySqrt(int x) &#123;</span><br><span class="line">        double result &#x3D; 2.0;</span><br><span class="line"></span><br><span class="line">        if (x &#x3D;&#x3D; 0)	return 0;</span><br><span class="line">        return (int)NewtonMethod(x, result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    double NewtonMethod(double x, double result) &#123;</span><br><span class="line">        &#x2F;&#x2F; å¦‚æœresultæ¥è¿‘äº0æ—¶ ä¼šå‡ºç°é™¤æ•°ä¸º0çš„æƒ…å†µ</span><br><span class="line">        &#x2F;&#x2F; æ•…è¦æ’é™¤ x &#x3D; 0 çš„æƒ…å†µ</span><br><span class="line">        double temp_result &#x3D; (result + x &#x2F; result) &#x2F; 2;</span><br><span class="line"></span><br><span class="line">        if (temp_result &#x3D;&#x3D; result)</span><br><span class="line">            return temp_result;</span><br><span class="line">        else</span><br><span class="line">        return NewtonMethod(x, temp_result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>äºŒåˆ†æŸ¥æ‰¾</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int mySqrt(int x) &#123;</span><br><span class="line">        int start &#x3D; 0, end &#x3D; x;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ä¸ºäº†é˜²æ­¢è¶Šç•Œ é‡‡ç”¨ long long ç±»å‹</span><br><span class="line">        long long mid &#x3D; 0;</span><br><span class="line">        while (start &lt;&#x3D; end) &#123;</span><br><span class="line">            mid &#x3D; (start + end) &#x2F; 2;</span><br><span class="line">            if (pow(mid, 2) &#x3D;&#x3D; x)</span><br><span class="line">                return mid;</span><br><span class="line">            else if (pow(mid, 2) &gt; x)</span><br><span class="line">                end &#x3D; mid - 1;</span><br><span class="line">            else</span><br><span class="line">                start &#x3D; mid + 1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return end;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å¯¹äº å¼€å¹³æ–¹ äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼æ˜¯å¯ä»¥è§£å†³çš„ï¼Œä½†æ˜¯å¯¹äº å¼€næ¬¡æ–¹ çš„é—®é¢˜å°±ä¸å¥½è§£å†³äº†ï¼ä½†æ˜¯ç‰›é¡¿è¿­ä»£æ³•å¯¹äº å¼€næ¬¡æ–¹ åŒæ ·é€‚ç”¨ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>äºŒåˆ†æŸ¥æ‰¾éƒ½å¯ä»¥å†™æˆé€’å½’çš„å½¢å¼ã€‚é€’å½’ä¸‰è¦ç´ ï¼šæ˜ç¡®å‡½æ•°åŠŸèƒ½ï¼›å¯»æ‰¾é€’å½’ç»“æŸæ¡ä»¶ï¼›æ‰¾å‡ºå‡½æ•°çš„ç­‰ä»·å…³ç³»å¼ï¼Œä¸æ–­ç¼©å°å‚æ•°èŒƒå›´ã€‚</p>
]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„</category>
        <category>æŸ¥æ‰¾</category>
      </categories>
      <tags>
        <tag>äºŒåˆ†æŸ¥æ‰¾</tag>
      </tags>
  </entry>
  <entry>
    <title>15-datastructure-å¹¶æŸ¥é›†</title>
    <url>/2019/12/03/15-datastructure-%E5%B9%B6%E6%9F%A5%E9%9B%86/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h1><p>å¹¶æŸ¥é›†æ˜¯ä¸€ç§å¯ä»¥åŠ¨æ€ç»´æŠ¤è‹¥å¹²ä¸ªä¸é‡å çš„é›†åˆï¼Œå¹¶æ”¯æŒåˆå¹¶ä¸æŸ¥è¯¢ä¸¤ç§æ“ä½œçš„ä¸€ç§æ•°æ®ç»“æ„ã€‚åŸºæœ¬æ“ä½œåŒ…æ‹¬åˆå¹¶å’ŒæŸ¥è¯¢ã€‚</p>
<h2 id="å¹¶æŸ¥é›†çš„ç®€å•å®ç°"><a href="#å¹¶æŸ¥é›†çš„ç®€å•å®ç°" class="headerlink" title="å¹¶æŸ¥é›†çš„ç®€å•å®ç°"></a>å¹¶æŸ¥é›†çš„ç®€å•å®ç°</h2><p>å¹¶æŸ¥é›†ä¸»è¦åŒ…æ‹¬åˆå¹¶å’ŒæŸ¥è¯¢ä¸¤ä¸ªæ“ä½œã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;cassert&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class UnionFind</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    UnionFind(int n):parent(n)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;n &#x3D; n;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int find(int p)</span><br><span class="line">    &#123;</span><br><span class="line">        assert(p&gt;&#x3D;0 &amp;&amp; p&lt;n);</span><br><span class="line">        return parent[p];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bool isConnected(int p, int q)</span><br><span class="line">    &#123;</span><br><span class="line">        return find(p) &#x3D;&#x3D; find(q);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void unionElements(int p, int q)</span><br><span class="line">    &#123;</span><br><span class="line">        int pParent &#x3D; find(p);</span><br><span class="line">        int qParent &#x3D; find(q);</span><br><span class="line"></span><br><span class="line">        if(pParent &#x3D;&#x3D; qParent)</span><br><span class="line">            return;</span><br><span class="line"></span><br><span class="line">        for(int i&#x3D;0; i&lt;n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(parent[i] &#x3D;&#x3D; pParent)</span><br><span class="line">                parent[i] &#x3D; qParent;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        for(int elem : parent)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; elem &lt;&lt; &quot; &quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    void init()</span><br><span class="line">    &#123;</span><br><span class="line">        for(int i&#x3D;0; i&lt;n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            parent[i] &#x3D; i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    vector&lt;int&gt; parent;</span><br><span class="line">    int n;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„</category>
        <category>å¹¶æŸ¥é›†</category>
      </categories>
      <tags>
        <tag>å¹¶æŸ¥é›†</tag>
      </tags>
  </entry>
  <entry>
    <title>16-leetcode-å¯¹æ’æŒ‡é’ˆ</title>
    <url>/2020/01/17/16-leetcode-%E5%AF%B9%E6%92%9E%E6%8C%87%E9%92%88/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="c-ä¸­å­—æ¯å’Œæ•°å­—ç›¸å…³çš„å‡½æ•°"><a href="#c-ä¸­å­—æ¯å’Œæ•°å­—ç›¸å…³çš„å‡½æ•°" class="headerlink" title="c++ä¸­å­—æ¯å’Œæ•°å­—ç›¸å…³çš„å‡½æ•°"></a>c++ä¸­å­—æ¯å’Œæ•°å­—ç›¸å…³çš„å‡½æ•°</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> cout &lt;&lt; isalpha(&#39;b&#39;) &lt;&lt; endl;   &#x2F;&#x2F; å°å†™å­—æ¯è¿”å›   2</span><br><span class="line">cout &lt;&lt; isalpha(&#39;1&#39;) &lt;&lt; endl;   &#x2F;&#x2F; éå­—æ¯è¿”å› 0</span><br><span class="line">&#x2F;&#x2F; åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºå­—æ¯æˆ–æ•°å­— isalnum();</span><br><span class="line"> cout &lt;&lt; isalnum(&#39;b&#39;) &lt;&lt; endl; &#x2F;&#x2F; å­—æ¯è¿”å›   2</span><br><span class="line">cout &lt;&lt; isalnum(&#39;1&#39;) &lt;&lt; endl;   &#x2F;&#x2F; æ•°å­—è¿”å›   4</span><br><span class="line">cout &lt;&lt; isalnum(&#39;.&#39;) &lt;&lt; endl;   &#x2F;&#x2F; éå­—æ¯æ•°å­—è¿”å› 0</span><br><span class="line">&#x2F;&#x2F; åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºå°å†™å­—æ¯</span><br><span class="line"> cout &lt;&lt; islower(&#39;b&#39;) &lt;&lt; endl; &#x2F;&#x2F; å°å†™å­—æ¯è¿”å›   2</span><br><span class="line">cout &lt;&lt; islower(&#39;2&#39;) &lt;&lt; endl;   &#x2F;&#x2F; éå°å†™å­—æ¯è¿”å› 0</span><br><span class="line">cout &lt;&lt; islower(&#39;A&#39;) &lt;&lt; endl;   &#x2F;&#x2F; éå°å†™å­—æ¯è¿”å› 0</span><br><span class="line">&#x2F;&#x2F; åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºå¤§å†™å­—æ¯</span><br><span class="line">cout &lt;&lt; isupper(&#39;a&#39;) &lt;&lt; endl;   &#x2F;&#x2F; éå¤§å†™å­—æ¯è¿”å› 0</span><br><span class="line">cout &lt;&lt; isupper(&#39;2&#39;) &lt;&lt; endl;   &#x2F;&#x2F; éå¤§å†™å­—æ¯è¿”å› 0</span><br><span class="line">cout &lt;&lt; isupper(&#39;A&#39;) &lt;&lt; endl;   &#x2F;&#x2F; å¤§å†™å­—æ¯è¿”å› 1</span><br><span class="line"> &#x2F;&#x2F; å¤§å†™è½¬å°å†™</span><br><span class="line"> cout &lt;&lt; (char)tolower(&#39;A&#39;) &lt;&lt; endl;</span><br><span class="line"> &#x2F;&#x2F; å°å†™è½¬å¤§å†™</span><br><span class="line"> cout &lt;&lt; (char)toupper(&#39;a&#39;) &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bool myIsAlpha(char c)</span><br><span class="line">&#123;</span><br><span class="line">    if(c&gt;&#x3D;&#39;A&#39;&amp;&amp; c&lt;&#x3D;&#39;Z&#39; || c&gt;&#x3D;&#39;a&#39;&amp;&amp; c&lt;&#x3D;&#39;z&#39;)</span><br><span class="line">        return 1;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool myIsAlnum(char c)</span><br><span class="line">&#123;</span><br><span class="line">    if(c&gt;&#x3D;&#39;A&#39;&amp;&amp; c&lt;&#x3D;&#39;Z&#39; || c&gt;&#x3D;&#39;a&#39;&amp;&amp; c&lt;&#x3D;&#39;z&#39; || c&gt;&#x3D;&#39;0&#39;&amp;&amp; c&lt;&#x3D;&#39;9&#39;)</span><br><span class="line">        return 1;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool myIsLower(char c)</span><br><span class="line">&#123;</span><br><span class="line">    if(c&gt;&#x3D;&#39;a&#39;&amp;&amp; c&lt;&#x3D;&#39;z&#39;)</span><br><span class="line">        return 1;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool myIsUpper(char c)</span><br><span class="line">&#123;</span><br><span class="line">    if(c&gt;&#x3D;&#39;A&#39;&amp;&amp; c&lt;&#x3D;&#39;Z&#39;)</span><br><span class="line">        return 1;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">char myToLower(char c)</span><br><span class="line">&#123;</span><br><span class="line">    if(c&gt;&#x3D;&#39;A&#39;&amp;&amp; c&lt;&#x3D;&#39;Z&#39;)</span><br><span class="line">        return c+(&#39;a&#39;-&#39;A&#39;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">char myToUpper(char c)</span><br><span class="line">&#123;</span><br><span class="line">    if(c&gt;&#x3D;&#39;a&#39;&amp;&amp; c&lt;&#x3D;&#39;z&#39;)</span><br><span class="line">        return c-(&#39;a&#39;-&#39;A&#39;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="éªŒè¯å›æ–‡ä¸²"><a href="#éªŒè¯å›æ–‡ä¸²" class="headerlink" title="éªŒè¯å›æ–‡ä¸²"></a><a href="https://leetcode-cn.com/problems/valid-palindrome/" target="_blank" rel="noopener">éªŒè¯å›æ–‡ä¸²</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    bool isPalindrome(string s) &#123;</span><br><span class="line">        if(s.size() &#x3D;&#x3D; 1)</span><br><span class="line">            return true;</span><br><span class="line"></span><br><span class="line">        int i&#x3D;nextAlnums(s, 0);</span><br><span class="line">        int j&#x3D;prevAlnums(s, s.size()-1);</span><br><span class="line"></span><br><span class="line">        while(i&lt;&#x3D;j)</span><br><span class="line">        &#123;</span><br><span class="line">            if (tolower(s[i]) !&#x3D; tolower(s[j]))</span><br><span class="line">                return false;</span><br><span class="line">            i&#x3D;nextAlnums(s, i+1);</span><br><span class="line">            j&#x3D;prevAlnums(s, j-1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int nextAlnums(const string&amp; s, int index)</span><br><span class="line">    &#123;</span><br><span class="line">        for(int k&#x3D;index; k&lt;s.size(); k++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(isalnum(s[k]))</span><br><span class="line">                return k;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return s.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int prevAlnums(const string&amp; s, int index)</span><br><span class="line">    &#123;</span><br><span class="line">        for(int k&#x3D;index; k&gt;&#x3D;0; k--)</span><br><span class="line">        &#123;</span><br><span class="line">            if(isalnum(s[k]))</span><br><span class="line">                return k;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="é”™è¯¯å†™æ³•"><a href="#é”™è¯¯å†™æ³•" class="headerlink" title="é”™è¯¯å†™æ³•"></a>é”™è¯¯å†™æ³•</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bool isPalindrome(string s) &#123;</span><br><span class="line">    int i&#x3D;0, j&#x3D;s.size()-1;</span><br><span class="line"></span><br><span class="line">    while(i&lt;&#x3D;j)</span><br><span class="line">    &#123;</span><br><span class="line">        i &#x3D; nextAlnums(s, i);</span><br><span class="line">        j &#x3D; prevAlnums(s, j);</span><br><span class="line">        if (i&gt;j || tolower(s[i]) !&#x3D; tolower(s[j])) &#x2F;&#x2F; &quot; &quot;</span><br><span class="line">            return false;</span><br><span class="line">        i++;</span><br><span class="line">        j--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åè½¬å­—ç¬¦ä¸²"><a href="#åè½¬å­—ç¬¦ä¸²" class="headerlink" title="åè½¬å­—ç¬¦ä¸²"></a><a href="https://leetcode-cn.com/problems/reverse-string/" target="_blank" rel="noopener">åè½¬å­—ç¬¦ä¸²</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    void reverseString(vector&lt;char&gt;&amp; s) &#123;</span><br><span class="line">        int i&#x3D;0, j&#x3D;s.size()-1;</span><br><span class="line">        while(i&lt;&#x3D;j)</span><br><span class="line">        &#123;</span><br><span class="line">            swap(s[i], s[j]);</span><br><span class="line">            i++;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—æ¯"><a href="#åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—æ¯" class="headerlink" title="åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—æ¯"></a><a href="https://leetcode-cn.com/problems/reverse-vowels-of-a-string/" target="_blank" rel="noopener">åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—æ¯</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    string reverseVowels(string s) &#123;</span><br><span class="line">        int i &#x3D; nextVowel(s, 0);</span><br><span class="line">        int j &#x3D; prevVowel(s, s.size()-1);</span><br><span class="line">        while(i&lt;&#x3D;j)</span><br><span class="line">        &#123;</span><br><span class="line">            swap(s[i], s[j]);</span><br><span class="line">            i &#x3D; nextVowel(s, i+1);</span><br><span class="line">            j &#x3D; prevVowel(s, j-1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int nextVowel(const string&amp; s, int index)</span><br><span class="line">    &#123;</span><br><span class="line">        for(int i&#x3D;index; i&lt;s.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(isVowel(s[i]))</span><br><span class="line">                return i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return s.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int prevVowel(const string&amp; s, int index)</span><br><span class="line">    &#123;</span><br><span class="line">        for(int i&#x3D;index; i&gt;&#x3D;0; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            if(isVowel(s[i]))</span><br><span class="line">                return i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bool isVowel(char c)</span><br><span class="line">    &#123;</span><br><span class="line">        if(c&#x3D;&#x3D;&#39;a&#39; || c&#x3D;&#x3D;&#39;e&#39; || c&#x3D;&#x3D;&#39;i&#39; || c&#x3D;&#x3D;&#39;o&#39; || c&#x3D;&#x3D;&#39;u&#39; ||</span><br><span class="line">           c&#x3D;&#x3D;&#39;A&#39; || c&#x3D;&#x3D;&#39;E&#39; || c&#x3D;&#x3D;&#39;I&#39; || c&#x3D;&#x3D;&#39;O&#39; || c&#x3D;&#x3D;&#39;U&#39;)</span><br><span class="line">            return true;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="ç››æœ€å¤šæ°´çš„å®¹å™¨-https-leetcode-cn-com-problems-container-with-most-water"><a href="#ç››æœ€å¤šæ°´çš„å®¹å™¨-https-leetcode-cn-com-problems-container-with-most-water" class="headerlink" title="[ç››æœ€å¤šæ°´çš„å®¹å™¨]{https://leetcode-cn.com/problems/container-with-most-water/}"></a>[ç››æœ€å¤šæ°´çš„å®¹å™¨]{<a href="https://leetcode-cn.com/problems/container-with-most-water/}" target="_blank" rel="noopener">https://leetcode-cn.com/problems/container-with-most-water/}</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int maxArea(vector&lt;int&gt;&amp; height) &#123;</span><br><span class="line">        int i&#x3D;0, j&#x3D;height.size()-1;</span><br><span class="line">        int maxValue &#x3D; area(height, i, j);</span><br><span class="line"></span><br><span class="line">        while(i&lt;j)</span><br><span class="line">        &#123;</span><br><span class="line">            if(height[i] &gt; height[j])</span><br><span class="line">                j &#x3D; prevHeight(height, j-1);</span><br><span class="line">            else</span><br><span class="line">                i &#x3D; nextHeight(height, i+1);</span><br><span class="line"></span><br><span class="line">            int areaValue &#x3D; area(height, i, j);</span><br><span class="line">            if(maxValue &lt; areaValue)</span><br><span class="line">                maxValue &#x3D; areaValue;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return maxValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int area(const vector&lt;int&gt;&amp; height, int i, int j)</span><br><span class="line">    &#123;</span><br><span class="line">        if (i&gt;&#x3D;j) return 0;   &#x2F;&#x2F; ä¸å¯ç¼ºå°‘</span><br><span class="line">        return (j-i)*min(height[i], height[j]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int prevHeight(const vector&lt;int&gt;&amp; height, int index)</span><br><span class="line">    &#123;</span><br><span class="line">        int pivot &#x3D; height[index+1];</span><br><span class="line">        for(int i&#x3D;index; i&gt;&#x3D;0; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            if(height[i]&gt;pivot)</span><br><span class="line">                return i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int nextHeight(const vector&lt;int&gt;&amp; height, int index)</span><br><span class="line">    &#123;</span><br><span class="line">        int pivot &#x3D; height[index-1];</span><br><span class="line">        for(int i&#x3D;index; i&lt;height.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(height[i]&gt;pivot)</span><br><span class="line">                return i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return height.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¯¹æ’æŒ‡é’ˆè¦æ³¨æ„è·³å‡ºå¾ªç¯çš„æ¡ä»¶ï¼Œé˜²æ­¢åœ¨ä½¿ç”¨å¯¹æ’æŒ‡é’ˆçš„è¿‡ç¨‹ä¸­å‡ºç°è¶Šç•Œçš„ç°è±¡ã€‚</p>
]]></content>
      <categories>
        <category>åˆ·é¢˜</category>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>18-cpp-#define-const-static-sizeof</title>
    <url>/2020/02/09/18-cpp-const-static-sizeof/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="const"><a href="#const" class="headerlink" title="const"></a>const</h1><h2 id="constä¿®é¥°æ™®é€šç±»å‹å˜é‡"><a href="#constä¿®é¥°æ™®é€šç±»å‹å˜é‡" class="headerlink" title="constä¿®é¥°æ™®é€šç±»å‹å˜é‡"></a>constä¿®é¥°æ™®é€šç±»å‹å˜é‡</h2><ul>
<li>constä¿®é¥°æ™®é€šç±»å‹çš„å˜é‡ï¼Œæ”¾åœ¨ç±»å‹å‰åæ²¡åŒºåˆ«ã€‚å³const int a å’Œ int const a æ•ˆæœç›¸åŒã€‚</li>
<li>constä¿®é¥°çš„æ™®é€šç±»å‹å˜é‡ï¼Œä¸å¯ä»¥é€šè¿‡æŒ‡é’ˆçš„æ–¹å¼é—´æ¥ä¿®æ”¹å†…å­˜ç©ºé—´ä¸­çš„å€¼ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œä¼šæŠŠå¸¸é‡æ”¾å…¥ä¸€ä¸ªç¬¦å·è¡¨ï¼Œç¼–è¯‘çš„æ—¶å€™æ›¿æ¢ç¬¦åˆè¦æ±‚çš„å¸¸é‡ã€‚å³ç¼–è¯‘å™¨è¿›è¡Œä¼˜åŒ–ã€‚</span><br><span class="line">    &#x2F;&#x2F; cè¯­è¨€ä¸­ç¼–è¯‘å™¨ä¸ä¼šè¿›è¡Œä¼˜åŒ–</span><br><span class="line">&#x2F;&#x2F;    const int  a &#x3D; 7;</span><br><span class="line">    int const a &#x3D; 7;</span><br><span class="line">    int *p &#x3D; (int*)&amp;a;</span><br><span class="line">    *p &#x3D; 8;</span><br><span class="line">    cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; &quot;,*p&#x3D;&quot; &lt;&lt; *p &lt;&lt; endl;  &#x2F;&#x2F; a&#x3D;7 *p&#x3D;8</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>constä¿®é¥°çš„æ™®é€šç±»å‹å˜é‡ï¼Œå¦‚æœåŠ ä¸Švolatileï¼Œå¯ä»¥é€šè¿‡æŒ‡é’ˆçš„æ–¹å¼é—´æ¥ä¿®æ”¹å†…å­˜ç©ºé—´ä¸­çš„å€¼ã€‚volatileä¿®é¥°çš„å˜é‡ä¸ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int test()</span><br><span class="line">&#123;</span><br><span class="line">    volatile int const a &#x3D; 7;</span><br><span class="line">    int *p &#x3D; (int*)&amp;a;</span><br><span class="line">    *p &#x3D; 8;</span><br><span class="line">    cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; &quot;,*p&#x3D;&quot; &lt;&lt; *p &lt;&lt; endl;  &#x2F;&#x2F; a&#x3D;8 *p&#x3D;8</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="constä¿®é¥°æŒ‡é’ˆå˜é‡"><a href="#constä¿®é¥°æŒ‡é’ˆå˜é‡" class="headerlink" title="constä¿®é¥°æŒ‡é’ˆå˜é‡"></a>constä¿®é¥°æŒ‡é’ˆå˜é‡</h2><ul>
<li>constä¿®é¥°æŒ‡é’ˆå˜é‡æŒ‡å‘çš„å†…å­˜ç©ºé—´</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int test()</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 10, b &#x3D; 20;</span><br><span class="line">	&#x2F;&#x2F; å°†const int *p1çœ‹ä½œä¸¤éƒ¨åˆ† const int å’Œ *p1 å³æŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´ä¸ºconst</span><br><span class="line">	const int *p1 &#x3D; &amp;a;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;    *p1 &#x3D; b;		&#x2F;&#x2F; *p1ä¸ºå¸¸é‡ error</span><br><span class="line">	p1 &#x3D; &amp;b;		&#x2F;&#x2F; p1æ˜¯å¯å˜çš„æŒ‡é’ˆå˜é‡</span><br><span class="line">	cout &lt;&lt; *p1 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>constä¿®é¥°æŒ‡é’ˆå˜é‡</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int test()</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 10, b &#x3D; 20;</span><br><span class="line">	&#x2F;&#x2F; å°†int* const p2çœ‹ä½œä¸¤éƒ¨åˆ† int* å’Œ const p2</span><br><span class="line">	int* const p2 &#x3D; &amp;a;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; constä¿®é¥°æŒ‡é’ˆå˜é‡</span><br><span class="line">	*p2 &#x3D; b;</span><br><span class="line">&#x2F;&#x2F;	p2 &#x3D; &amp;b;		&#x2F;&#x2F; p2æ˜¯ä¸å˜çš„æŒ‡é’ˆå˜é‡ error</span><br><span class="line">	cout &lt;&lt; *p2 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>constä¿®é¥°æŒ‡é’ˆå˜é‡å’ŒæŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´<br>æŒ‡é’ˆå˜é‡æ˜¯å¸¸é‡ï¼ŒæŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´ä¹Ÿæ˜¯å¸¸é‡</li>
</ul>
<p>å‚è€ƒ<a href="https://www.runoob.com/w3cnote/cpp-const-keyword.html" target="_blank" rel="noopener">C++ const å…³é”®å­—å°ç»“</a></p>
<h2 id="C-ä¸­constçš„ä½œç”¨"><a href="#C-ä¸­constçš„ä½œç”¨" class="headerlink" title="C++ä¸­constçš„ä½œç”¨"></a>C++ä¸­constçš„ä½œç”¨</h2><ol>
<li>ç”¨äºå®šä¹‰å¸¸é‡ï¼šconstå®šä¹‰çš„å¸¸é‡ç¼–è¯‘å™¨å¯ä»¥å¯¹å…¶è¿›è¡Œæ•°æ®é™æ€ç±»å‹å®‰å…¨æ£€æŸ¥</li>
<li>constä¿®é¥°å‡½æ•°å½¢å‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void func(A a);     &#x2F;&#x2F; å­˜åœ¨ä¸´æ—¶å¯¹è±¡çš„æ„é€ ã€å¤åˆ¶ã€ææ„ï¼Œæ•ˆç‡ä½</span><br><span class="line">void func(A const &amp;a);  &#x2F;&#x2F; å¼•ç”¨ä¼ é€’ä¸äº§ç”Ÿä¸´æ—¶å¯¹è±¡ï¼Œconstä¿è¯å¼•ç”¨å¯¹è±¡ä¸å¯ä¿®æ”¹</span><br><span class="line">&#x2F;&#x2F; A const &amp;a; æ­¤æ—¶constä¿®é¥°çš„æ˜¯æ™®é€šå˜é‡ï¼Œä¸æ˜¯æŒ‡é’ˆå˜é‡ã€‚æ‰€ä»¥constæ”¾ç½®åœ¨Açš„å‰åè¡¨ç¤ºçš„å«ä¹‰ä¸€æ ·</span><br><span class="line">&#x2F;&#x2F; ä½†æ˜¯Aå¦‚æœæ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œæ¯”å¦‚ç±»ç±»å‹ã€‚éœ€è¦ä¿è¯åœ¨functå‡½æ•°ä¸­è°ƒç”¨çš„ç±»æˆå‘˜å‡½æ•°ä¸ä¼šä¿®æ”¹açš„å€¼</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Teacher</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Teacher(string name, int age)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;name &#x3D; name;</span><br><span class="line">        this-&gt;age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Teacher(const Teacher&amp; obj)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;æ‹·è´æ„é€ å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    void setName(string name)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line">    void setAge(int age)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line">    string getName()</span><br><span class="line">    &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line">    int getAge()</span><br><span class="line">    &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å¿…é¡»ç”¨constä¿®é¥°</span><br><span class="line">    void print() const</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;name&#x3D;&quot; &lt;&lt; name &lt;&lt; &quot;,age&#x3D;&quot; &lt;&lt; age &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    string name;</span><br><span class="line">    int age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å¼•ç”¨ä¿®é¥°ï¼Œä¿è¯å¯¹è±¡tä¸ä¼šè¢«ä¿®æ”¹</span><br><span class="line">void func(const Teacher &amp;t)</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;    t.setAge(35); &#x2F;&#x2F; error</span><br><span class="line">    t.print();  &#x2F;&#x2F; ç”±äºå¼•ç”¨ç”¨constä¿®é¥°ï¼Œå¿…é¡»ä¿è¯å¼•ç”¨ä¸ä¼šè¢«ä¿®æ”¹ï¼Œæ‰€ä»¥è°ƒç”¨çš„ç±»æˆå‘˜å‡½æ•°å¿…é¡»ç”¨constä¿®é¥°</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Teacher t(&quot;simon&quot;, 25);</span><br><span class="line">    func(t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>constä¿®é¥°å‡½æ•°è¿”å›å€¼</li>
<li>constä¿®é¥°ç±»æˆå‘˜å‡½æ•°</li>
</ol>
<h1 id="define"><a href="#define" class="headerlink" title="define"></a>define</h1><p>å®å®šä¹‰åœ¨é¢„å¤„ç†é˜¶æ®µç”±é¢„å¤„ç†å™¨è¿›è¡Œæ›¿æ¢ï¼Œåªæ˜¯å•çº¯çš„è¿›è¡Œæ–‡æœ¬æ›¿æ¢ã€‚ä¸€ä¸ªå®Œæ•´çš„å®å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#define å®å å®ä½“</span><br><span class="line">&#x2F;&#x2F; æ— å‚å®</span><br><span class="line">#define SEC_PER_YEAR (365*24*60UL)</span><br><span class="line">&#x2F;&#x2F; å¸¦å‚å®</span><br><span class="line">#define SQR(x) ((x)*(x))</span><br></pre></td></tr></table></figure>
<h2 id="å®å®šä¹‰çš„ä½¿ç”¨"><a href="#å®å®šä¹‰çš„ä½¿ç”¨" class="headerlink" title="å®å®šä¹‰çš„ä½¿ç”¨"></a>å®å®šä¹‰çš„ä½¿ç”¨</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">#define Sqr(x) (x*x)</span><br><span class="line">#define SQR(x) ((x)*(x))</span><br><span class="line"></span><br><span class="line">int test()</span><br><span class="line">&#123;</span><br><span class="line">	int a, b &#x3D; 3;</span><br><span class="line"></span><br><span class="line">	a &#x3D; Sqr(b+2);   &#x2F;&#x2F; åŸåœ°æ›¿æ¢ a &#x3D; (b+2*b+2)</span><br><span class="line">	cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;  &#x2F;&#x2F; a&#x3D;11</span><br><span class="line"></span><br><span class="line">    a &#x3D; SQR(b+2);   &#x2F;&#x2F; åŸåœ°æ›¿æ¢ a &#x3D; ((b+2)*(b+2))</span><br><span class="line">    cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;  &#x2F;&#x2F; a&#x3D;25</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="defineçš„æ›¿ä»£æ–¹æ¡ˆ"><a href="#defineçš„æ›¿ä»£æ–¹æ¡ˆ" class="headerlink" title="#defineçš„æ›¿ä»£æ–¹æ¡ˆ"></a>#defineçš„æ›¿ä»£æ–¹æ¡ˆ</h2><h2 id="defineæ— å‚å®çš„æ›¿ä»£æ–¹æ¡ˆ-const"><a href="#defineæ— å‚å®çš„æ›¿ä»£æ–¹æ¡ˆ-const" class="headerlink" title="#defineæ— å‚å®çš„æ›¿ä»£æ–¹æ¡ˆ-const"></a>#defineæ— å‚å®çš„æ›¿ä»£æ–¹æ¡ˆ-const</h2><h1 id="defineå’Œconstéƒ½å¯ä»¥å®šä¹‰å¸¸é‡ã€‚ä¸¤è€…çš„ä¸åŒä¹‹å¤„ï¼š"><a href="#defineå’Œconstéƒ½å¯ä»¥å®šä¹‰å¸¸é‡ã€‚ä¸¤è€…çš„ä¸åŒä¹‹å¤„ï¼š" class="headerlink" title="defineå’Œconstéƒ½å¯ä»¥å®šä¹‰å¸¸é‡ã€‚ä¸¤è€…çš„ä¸åŒä¹‹å¤„ï¼š"></a>defineå’Œconstéƒ½å¯ä»¥å®šä¹‰å¸¸é‡ã€‚ä¸¤è€…çš„ä¸åŒä¹‹å¤„ï¼š</h1><ul>
<li>å®å®šä¹‰ç”±é¢„å¤„ç†å™¨å¤„ç†åªæ˜¯å•çº¯çš„æ–‡æœ¬æ›¿æ¢ï¼Œæ²¡æœ‰ç±»å‹æ£€æŸ¥å’Œä½œç”¨åŸŸæ£€æŸ¥</li>
<li>constç”±ç¼–è¯‘å™¨è¿›è¡Œå¤„ç†ï¼Œæœ‰ç±»å‹æ£€æŸ¥å’Œä½œç”¨åŸŸæ£€æŸ¥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;#define N 10  &#x2F;&#x2F; é¢„å¤„ç†é˜¶æ®µ</span><br><span class="line"></span><br><span class="line">int test()</span><br><span class="line">&#123;</span><br><span class="line">    const int N &#x3D; 10; &#x2F;&#x2F; ç¼–è¯‘é˜¶æ®µ</span><br><span class="line">    int array[N] &#x3D; &#123; 1, 2, 3 &#125;;</span><br><span class="line"></span><br><span class="line">    for (int i &#x3D; 0; i &lt; N; i++) &#123;</span><br><span class="line">        cout &lt;&lt; array[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½œç”¨åŸŸä¸¾ä¾‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">void func() &#123;</span><br><span class="line">#define a 10	&#x2F;&#x2F; å¯¹äºæ–‡ä»¶ä¸­æ‰€æœ‰çš„aéƒ½ä¼šè¿›è¡Œæ›¿æ¢</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;#undef a	  &#x2F;&#x2F; åªæœ‰å¸è½½è¿™ä¸ªå®ï¼Œæ‰ä¸ä¼šå½±å“åˆ°å…¶ä»–å‡½æ•°</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test() &#123;</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; endl;  &#x2F;&#x2F; a &#x3D; 10</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>constç”±ç¼–è¯‘å™¨å¤„ç† ç”±ç±»å‹æ£€æŸ¥å’Œä½œç”¨åŸŸæ£€æŸ¥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line"> </span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">void func() &#123;</span><br><span class="line">  const int a &#x3D; 10;   &#x2F;&#x2F; aè¿™ä¸ªå¸¸é‡çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å†…</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test() &#123;</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; endl;  &#x2F;&#x2F; error,aæ²¡æœ‰å®šä¹‰</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="defineæœ‰å‚å®çš„æ›¿ä»£æ–¹æ¡ˆ-å†…è”å‡½æ•°"><a href="#defineæœ‰å‚å®çš„æ›¿ä»£æ–¹æ¡ˆ-å†…è”å‡½æ•°" class="headerlink" title="#defineæœ‰å‚å®çš„æ›¿ä»£æ–¹æ¡ˆ-å†…è”å‡½æ•°"></a>#defineæœ‰å‚å®çš„æ›¿ä»£æ–¹æ¡ˆ-å†…è”å‡½æ•°</h2><p>C++ä¸­ å¯ä»¥ä½¿ç”¨ å†…è”å‡½æ•° æ›¿ä»£æœ‰å‚å®ã€‚å†…è”å‡½æ•°å£°æ˜æ—¶ inline å…³é”®å­—å¿…é¡»å’Œå‡½æ•°å®šä¹‰ç»“åˆåœ¨ä¸€èµ·ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šç›´æ¥å¿½ç•¥å†…è”è¯·æ±‚ã€‚</p>
<ul>
<li>æœ‰å‚å®ä¸¾ä¾‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">#define MYFUNC(a, b) ((a) &lt; (b) ? (a) : (b))</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 1, b &#x3D; 3;</span><br><span class="line">	int c &#x3D; MYFUNC(a++, b);</span><br><span class="line">	&#x2F;&#x2F; ç­‰ä»·äº int c &#x3D; ((a++) &lt; (b) ? (a++) : (b))</span><br><span class="line">	&#x2F;&#x2F; (a++) &lt; (b) --&gt; 1&lt;3  a&#x3D;2 c&#x3D;((a++)) c&#x3D;2 a&#x3D;3</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;      &#x2F;&#x2F; 3</span><br><span class="line">	cout &lt;&lt; &quot;b&#x3D;&quot; &lt;&lt; b &lt;&lt; endl;      &#x2F;&#x2F; 3</span><br><span class="line">	cout &lt;&lt; &quot;c&#x3D;&quot; &lt;&lt; c &lt;&lt; endl;      &#x2F;&#x2F; 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å†…è”å‡½æ•°ä¸¾ä¾‹</li>
</ul>
<p>å†…è”å‡½æ•°é€‚ç”¨äºä»£ç é‡å°çš„å‡½æ•°å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">inline int myfunc(int a, int b)</span><br><span class="line">&#123;</span><br><span class="line">	return ((a) &lt; (b) ? (a) : (b));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 1, b &#x3D; 3;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; C++ç¼–è¯‘å™¨ç›´æ¥å°†å‡½æ•°ä½“æ’å…¥åœ¨å‡½æ•°è°ƒç”¨çš„åœ°æ–¹</span><br><span class="line">	&#x2F;&#x2F; åœ¨ a++ ä¹‹å‰ï¼Œå…ˆå°† a çš„å€¼å¤åˆ¶åˆ°myfuncå‡½æ•°çš„å½¢å‚aä¸­ï¼Œç„¶åè‡ªå¢1</span><br><span class="line">	int c &#x3D; myfunc(a++, b);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;      &#x2F;&#x2F; 2</span><br><span class="line">	cout &lt;&lt; &quot;b&#x3D;&quot; &lt;&lt; b &lt;&lt; endl;      &#x2F;&#x2F; 3</span><br><span class="line">	cout &lt;&lt; &quot;c&#x3D;&quot; &lt;&lt; c &lt;&lt; endl;      &#x2F;&#x2F; 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="static"><a href="#static" class="headerlink" title="static"></a>static</h1><h2 id="é™æ€æˆå‘˜ç‰¹ç‚¹"><a href="#é™æ€æˆå‘˜ç‰¹ç‚¹" class="headerlink" title="é™æ€æˆå‘˜ç‰¹ç‚¹"></a>é™æ€æˆå‘˜ç‰¹ç‚¹</h2><ul>
<li>é™æ€æˆå‘˜æ˜¯å±äºç±»çš„ï¼Œä¸å±äºå¯¹è±¡ï¼Œä¸å ç”¨å¯¹è±¡çš„å†…å­˜ç©ºé—´ã€‚</li>
<li>å¯ä»¥é€šè¿‡ ç±»å::æˆå‘˜/ å¯¹è±¡.æˆå‘˜ çš„æ–¹å¼è°ƒç”¨ã€‚é™æ€æˆå‘˜åœ¨ ç±»å¯¹è±¡ä¹‹é—´ å…±äº«ã€‚</li>
<li>åœ¨ç±»ä¸­å£°æ˜æˆå‘˜å‡½æ•°ä¸ºé™æ€éœ€è¦åŠ  staticï¼Œé™æ€æˆå‘˜å­˜å‚¨äºé™æ€å­˜å‚¨åŒºï¼Œå¿…é¡»å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–ã€‚</li>
<li>åŸºç±»å®šä¹‰çš„é™æ€æˆå‘˜è¢«æ‰€æœ‰æ´¾ç”Ÿç±»å…±äº«ï¼Œå¹¶éµå¾ªç±»å±‚æ¬¡ä½“ç³»çš„è®¿é—®æ§åˆ¶ã€‚</li>
<li>é™æ€æˆå‘˜å‡½æ•°ä¸­åªèƒ½è°ƒç”¨é™æ€æˆå‘˜å˜é‡ã€‚åŸå› åœ¨äºï¼šé™æ€æˆå‘˜å‡½æ•°å±äºç±»ï¼Œæ™®é€šæˆå‘˜å˜é‡åœ¨å¯¹è±¡æ²¡æœ‰å®šä¹‰ä¹‹å‰æ²¡æœ‰å®šä¹‰ã€‚</li>
<li>é™æ€æˆå‘˜å‡½æ•°ä¸­ä¸éœ€è¦thisæŒ‡é’ˆï¼ŒåŸå› åœ¨äºé™æ€æˆå‘˜å‡½æ•°æœ‰æ˜ç¡®çš„å½’å±ï¼›æ™®é€šæˆå‘˜å‡½æ•°éœ€è¦thisæŒ‡é’ˆï¼Œä»¥åŒºåˆ†ä¸åŒçš„å¯¹è±¡ã€‚</li>
<li>é™æ€æˆå‘˜å±äºç±»æœ¬èº«ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±ä¼šåˆ†é…å†…å­˜ï¼›ç±»å¯¹è±¡åªæœ‰åˆ›å»ºæ—¶æ‰ä¼šåˆ†é…å†…å­˜ã€‚</li>
</ul>
<p>é™æ€æˆå‘˜çš„åˆå§‹åŒ–æ ¼å¼ï¼š<br>  &lt;æ•°æ®ç±»å‹&gt; &lt;ç±»å&gt;::&lt;é™æ€æ•°æ®æˆå‘˜å&gt; = &lt;å€¼&gt;;<br>æ³¨æ„ï¼š</p>
<ol>
<li>åˆå§‹åŒ–åœ¨ç±»å¤–è¿›è¡Œï¼Œå‰é¢ä¸åŠ staticå…³é”®å­—ï¼Œä»¥å…ä¸åœ¨ç±»å¤–å®šä¹‰çš„é™æ€å˜é‡æ··æ·†ã€‚</li>
<li>åˆå§‹åŒ–ä¸åŠ è¯¥æˆå‘˜çš„è®¿é—®æ§åˆ¶ç¬¦</li>
<li>åˆå§‹åŒ–ç”¨ä½œç”¨åŸŸè¿ç®—ç¬¦æ ‡å®šè¯¥å˜é‡æ‰€å±ç±»</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Parent</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    static int num;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    &#x2F;&#x2F; é™æ€æˆå‘˜å‡½æ•°å¯ä»¥ä¿®æ”¹é™æ€æˆå‘˜å˜é‡çš„å€¼</span><br><span class="line">    static void add()</span><br><span class="line">    &#123;</span><br><span class="line">        num++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ™®é€šæˆå‘˜å‡½æ•°å¯ä»¥ä¿®æ”¹é™æ€æˆå‘˜å˜é‡çš„å€¼</span><br><span class="line">    void set(int i)</span><br><span class="line">    &#123;</span><br><span class="line">        num &#x3D; i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ™®é€šæˆå‘˜å‡½æ•°å¯ä»¥è¾“å‡ºé™æ€æˆå‘˜å˜é‡çš„å€¼</span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;num &#x3D; &quot; &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; &lt;æ•°æ®ç±»å‹&gt; &lt;ç±»å&gt;::&lt;é™æ€æ•°æ®æˆå‘˜å&gt; &#x3D; &lt;å€¼&gt;;</span><br><span class="line">int Parent::num &#x3D; 0;</span><br><span class="line">&#x2F;&#x2F; åˆå§‹åŒ–åœ¨ç±»å¤–è¿›è¡Œï¼Œå‰é¢ä¸åŠ staticå…³é”®å­—ï¼Œä»¥å…ä¸åœ¨ç±»å¤–å®šä¹‰çš„é™æ€å˜é‡æ··æ·†</span><br><span class="line">static int a;</span><br><span class="line"></span><br><span class="line">class Child : public Parent</span><br><span class="line">&#123;</span><br><span class="line">    int c;  &#x2F;&#x2F; é»˜è®¤æ˜¯ç§æœ‰çš„</span><br><span class="line">public:</span><br><span class="line">    &#x2F;&#x2F; é™æ€æˆå‘˜å‡½æ•°ä¸ä¾èµ–äºç±»æ•°æ®ç»“æ„çš„å…±åŒæ“ä½œ,æ²¡æœ‰thisæŒ‡é’ˆ</span><br><span class="line">    &#x2F;&#x2F; é™æ€æˆå‘˜å‡½æ•°ä¸­åªèƒ½è°ƒç”¨é™æ€æˆå‘˜å˜é‡</span><br><span class="line">    &#x2F;&#x2F; åŸå› ï¼šé™æ€æˆå‘˜å‡½æ•°å±äºç±»,åœ¨æ²¡æœ‰å¯¹è±¡ä¹‹å‰,æ™®é€šæˆå‘˜å˜é‡æ˜¯æ²¡æœ‰å®šä¹‰çš„</span><br><span class="line">    static void add()</span><br><span class="line">    &#123;</span><br><span class="line">&#x2F;&#x2F;        c++;  &#x2F;&#x2F; error</span><br><span class="line">        num++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void set(int i)</span><br><span class="line">    &#123;</span><br><span class="line">        num &#x3D; i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;num &#x3D; &quot; &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Parent p;</span><br><span class="line">    Child c;</span><br><span class="line"></span><br><span class="line">    p.add();</span><br><span class="line">    p.print();</span><br><span class="line">    c.print();</span><br><span class="line"></span><br><span class="line">    c.add();</span><br><span class="line">    p.print();</span><br><span class="line">    c.print();</span><br><span class="line"></span><br><span class="line">    p.set(10);</span><br><span class="line">    p.print();</span><br><span class="line">    c.print();</span><br><span class="line"></span><br><span class="line">    c.set(20);</span><br><span class="line">    p.print();</span><br><span class="line">    c.print();</span><br><span class="line"></span><br><span class="line">    Parent::num++;</span><br><span class="line">    p.print();</span><br><span class="line">    c.print();</span><br><span class="line"></span><br><span class="line">    Child::Parent::num++;</span><br><span class="line">    p.print();</span><br><span class="line">    c.print();</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é™æ€æˆå‘˜å˜é‡ä¸å ç”¨ç±»å¯¹è±¡çš„å†…å­˜ç©ºé—´"><a href="#é™æ€æˆå‘˜å˜é‡ä¸å ç”¨ç±»å¯¹è±¡çš„å†…å­˜ç©ºé—´" class="headerlink" title="é™æ€æˆå‘˜å˜é‡ä¸å ç”¨ç±»å¯¹è±¡çš„å†…å­˜ç©ºé—´"></a>é™æ€æˆå‘˜å˜é‡ä¸å ç”¨ç±»å¯¹è±¡çš„å†…å­˜ç©ºé—´</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class c1</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int i;</span><br><span class="line">protected:</span><br><span class="line">    int j;</span><br><span class="line">private:</span><br><span class="line">    int k;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class c2</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int i;</span><br><span class="line">protected:</span><br><span class="line">    int j;</span><br><span class="line">private:</span><br><span class="line">    int k;</span><br><span class="line">    static int m;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    void set(int i, int j, int k)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;i &#x3D; i;</span><br><span class="line">        this-&gt;j &#x3D; j;</span><br><span class="line">        this-&gt;k &#x3D; k;</span><br><span class="line">        cout &lt;&lt; &quot;this is c2&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int c2::m &#x3D; 0;</span><br><span class="line"></span><br><span class="line">struct s1</span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line">	int j;</span><br><span class="line">	int k;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct s2</span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line">	int j;</span><br><span class="line">	int k;</span><br><span class="line">	static int m;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; ç±»çš„å†…å­˜å¤§å°ç­‰äºç±»ä¸­éé™æ€æˆå‘˜å˜é‡çš„å†…å­˜å¤§å°æ€»å’Œ</span><br><span class="line">    cout &lt;&lt; &quot;sizeof(c1) &#x3D; &quot; &lt;&lt; sizeof(c1) &lt;&lt; endl;  &#x2F;&#x2F; 12</span><br><span class="line">    cout &lt;&lt; &quot;sizeof(c2) &#x3D; &quot; &lt;&lt; sizeof(c2) &lt;&lt; endl;  &#x2F;&#x2F; 12</span><br><span class="line">    &#x2F;&#x2F; ç»“æ„ä½“çš„å†…å­˜å¤§å°ç­‰äºç±»çš„å†…å­˜å¤§å°</span><br><span class="line">    cout &lt;&lt; &quot;sizeof(s1) &#x3D; &quot; &lt;&lt; sizeof(s1) &lt;&lt; endl;  &#x2F;&#x2F; 12</span><br><span class="line">    cout &lt;&lt; &quot;sizeof(s2) &#x3D; &quot; &lt;&lt; sizeof(s2) &lt;&lt; endl;  &#x2F;&#x2F; 12</span><br><span class="line">    &#x2F;&#x2F; ç±»çš„å¤§å°ä¸åŒ…æ‹¬thisæŒ‡é’ˆ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><ul>
<li>æ•°æ®ç±»å‹å®šä¹‰<br>æ•°æ®ç±»å‹æ˜¯å›ºå®šå†…å­˜å¤§å°çš„åˆ«åï¼Œç¼–è¯‘å™¨æ ¹æ®æ•°æ®ç±»å‹é¢„ç®—éœ€è¦åˆ†é…å†…å­˜ç©ºé—´çš„å¤§å°ã€‚</li>
</ul>
<h3 id="æ•°æ®ç±»å‹åˆ«åï¼š-define-å’Œ-typedef-çš„åŒºåˆ«"><a href="#æ•°æ®ç±»å‹åˆ«åï¼š-define-å’Œ-typedef-çš„åŒºåˆ«" class="headerlink" title="æ•°æ®ç±»å‹åˆ«åï¼š#define å’Œ typedef çš„åŒºåˆ«"></a>æ•°æ®ç±»å‹åˆ«åï¼š#define å’Œ typedef çš„åŒºåˆ«</h3><p><code>#define</code> å’Œ typedeféƒ½å¯ä»¥ç»™ç°æœ‰ç±»å‹èµ·åˆ«åã€‚ä½†æ˜¯ #define åªæ˜¯åœ¨é¢„ç¼–è¯‘çš„æ—¶å€™è¿›è¡Œæ–‡æœ¬æ›¿æ¢ï¼Œè€Œ typedef æ˜¯åœ¨ç¼–è¯‘æ—¶è¿›è¡Œå¤„ç†ã€‚<br><code>#define</code> å®å éœ€è¦æ›¿æ¢çš„å®é™…å‚æ•°<br>typedef åŸæ•°æ®ç±»å‹ æ•°æ®ç±»å‹çš„åˆ«å</p>
<ul>
<li><h1 id="define-1"><a href="#define-1" class="headerlink" title="define"></a>define</h1></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">struct teacher&#123;</span><br><span class="line">	char name[40];</span><br><span class="line">	int age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; #defineåªæ˜¯å•çº¯çš„æ–‡æœ¬æ›¿æ¢</span><br><span class="line">#define teacher struct teacher</span><br><span class="line">&#x2F;&#x2F; ä»¥ä¸‹ä¼šå°† æ–‡æœ¬ä¸­çš„ teacher ç›´æ¥æ›¿æ¢æˆ struct teacher&#123; char name[40]; int age; &#125;;</span><br><span class="line">&#x2F;&#x2F; #define teacher struct teacher&#123; char name[40]; int age; &#125;;	</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	teacher t &#x3D; &#123;&quot;savana&quot;, 30 &#125;; </span><br><span class="line">	cout &lt;&lt; t.name &lt;&lt; &quot; &quot; &lt;&lt; t.age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>typedef</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">typedef struct teacher &#123; </span><br><span class="line">	char name[40]; </span><br><span class="line">	int age; </span><br><span class="line">&#125;teacher;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	teacher t &#x3D; &#123;&quot;savana&quot;, 30 &#125;;	</span><br><span class="line">	cout &lt;&lt; t.name &lt;&lt; &quot; &quot; &lt;&lt; t.age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åŒºåˆ«</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#define dpchar char*</span><br><span class="line">&#x2F;&#x2F; typdefå¿…é¡»ä»¥åˆ†å·ç»“å°¾</span><br><span class="line">typedef char* tpchar;</span><br><span class="line"> </span><br><span class="line">dpchar p1, p2;	&#x2F;&#x2F; é¢„ç¼–è¯‘å™¨æ–‡æœ¬æ›¿æ¢ char* p1, p2; p1 æ˜¯æŒ‡é’ˆå˜é‡ p2 æ˜¯char</span><br><span class="line">tpchar p1, p2;	&#x2F;&#x2F; ç¼–è¯‘å™¨ tpchar p1, tpchar p2; p1 å’Œ p2éƒ½æ˜¯æŒ‡é’ˆå˜é‡</span><br></pre></td></tr></table></figure>
<ul>
<li>å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç±»å‹</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>17-cpp-æŒ‡é’ˆä¸å¼•ç”¨</title>
    <url>/2020/02/07/17-cpp-%E6%8C%87%E9%92%88-const-%E5%BC%95%E7%94%A8/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æŒ‡é’ˆå’Œå¼•ç”¨å­¦ä¹ ã€‚<br><a id="more"></a></p>
<h1 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h1><h2 id="æŒ‡é’ˆçš„æœ¬è´¨"><a href="#æŒ‡é’ˆçš„æœ¬è´¨" class="headerlink" title="æŒ‡é’ˆçš„æœ¬è´¨"></a>æŒ‡é’ˆçš„æœ¬è´¨</h2><p>æŒ‡é’ˆæ˜¯ä¸€ç§å˜é‡ï¼Œå 4å­—èŠ‚å†…å­˜ç©ºé—´ï¼Œç”¨äºä¿å­˜æ‰€æŒ‡å‘å†…å­˜ç©ºé—´çš„<strong>å†…å­˜åœ°å€</strong>ã€‚æŒ‡é’ˆåŠ 1,ç»“æœæ˜¯åŠ ä¸ŠæŒ‡é’ˆ æ‰€æŒ‡å‘å†…å­˜ç©ºé—´çš„æ•°æ®ç±»å‹ çš„æ­¥é•¿ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Type a;</span><br><span class="line">Type* p &#x3D; &amp;a;</span><br><span class="line">&#x2F;&#x2F; p++ -&gt; (unsigned int)p + sizeof(Type)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>*p++ (*p)++ ++*p *++p</code>çš„åŒºåˆ«</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int a[10] &#x3D; &#123; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 &#125;;</span><br><span class="line">	int* p &#x3D; &amp;a[0];</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; å++ï¼šå…ˆè®¡ç®—*pï¼Œç„¶åcoutè¾“å‡ºï¼Œæœ€åpåŠ 1(æŒ‡é’ˆå˜é‡åŠ 1)</span><br><span class="line">	cout &lt;&lt; *p++ &lt;&lt; endl;		&#x2F;&#x2F; 0	p &#x3D; p + 1</span><br><span class="line">	&#x2F;&#x2F; å++ï¼šå…ˆè®¡ç®—*pï¼Œç„¶åcoutè¾“å‡ºï¼Œæœ€å*påŠ 1(æŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´åŠ 1)</span><br><span class="line">	cout &lt;&lt; (*p)++ &lt;&lt; endl;		&#x2F;&#x2F; 1</span><br><span class="line">	&#x2F;&#x2F; å‰++ï¼šå…ˆè®¡ç®—påŠ 1ï¼Œç„¶åè®¡ç®—*(++p)ï¼Œæœ€åcoutè¾“å‡º(æŒ‡é’ˆåŠ 1)</span><br><span class="line">	cout &lt;&lt; *++p &lt;&lt; endl;		&#x2F;&#x2F; p &#x3D; p + 1	2</span><br><span class="line">	&#x2F;&#x2F; å‰++ï¼šå…ˆè®¡ç®—*pï¼Œç„¶å*påŠ 1ï¼Œæœ€åcoutè¾“å‡º1(æŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´åŠ 1)</span><br><span class="line">	cout &lt;&lt; ++(*p) &lt;&lt; endl;		&#x2F;&#x2F; 3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é‡æŒ‡é’ˆ"><a href="#é‡æŒ‡é’ˆ" class="headerlink" title="é‡æŒ‡é’ˆ"></a>é‡æŒ‡é’ˆ</h2><p>é‡æŒ‡é’ˆäº§ç”Ÿçš„åŸå› ï¼šæŒ‡é’ˆå˜é‡å’ŒæŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚æŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´é‡Šæ”¾ï¼Œå¹¶ä¸ä»£è¡¨æŒ‡é’ˆå˜é‡è®¾ç½®ä¸ºNullã€‚<br>æŒ‡é’ˆå˜é‡å­˜å‚¨çš„æ˜¯å†…å­˜ç©ºé—´çš„åœ°å€ï¼Œå’Œå†…å­˜ç©ºé—´çš„å˜åŒ–æ— å…³ã€‚<br>é¿å…é‡æŒ‡é’ˆçš„æ–¹æ³•ï¼š</p>
<ol>
<li>å®šä¹‰æŒ‡é’ˆå˜é‡çš„æ—¶å€™åˆå§‹åŒ–ä¸º NULLã€‚</li>
<li>ä½¿ç”¨æŒ‡é’ˆå˜é‡å‰ï¼Œå°†æŒ‡é’ˆå˜é‡ä¸æœ‰æ•ˆå†…å­˜ç©ºé—´çš„åœ°å€ç»‘å®šã€‚</li>
<li>å†…å­˜ç©ºé—´ä½¿ç”¨å®Œæ¯•åï¼Œè¦å°† æŒ‡é’ˆå˜é‡ è®¾ç½®ä¸º NULLã€‚</li>
</ol>
<p>æ€»ä¹‹ï¼šæŒ‡é’ˆè¦æŒ‡å‘ä¸€ä¸ªç¡®å®š(æŒ‡å‘çš„å†…å­˜ç©ºé—´è¦æ˜¯æœ‰æ•ˆçš„)çš„æœ‰è®¿é—®æƒé™(å¦‚ä¸èƒ½ä¿®æ”¹åªè¯»æƒé™çš„å†…å­˜ç©ºé—´)çš„å†…å­˜ç©ºé—´ã€‚</p>
<h2 id="void-å’Œ-void"><a href="#void-å’Œ-void" class="headerlink" title="void å’Œ void*"></a>void å’Œ void*</h2><p>åœ¨Cè¯­è¨€ä¸­ï¼Œä¸å­˜åœ¨<strong>å˜é‡æ²¡æœ‰æ•°æ®ç±»å‹</strong>ã€‚ç¼–è¯‘å™¨ç¼–è¯‘çš„æ—¶å€™ï¼Œè¦æ ¹æ®å˜é‡çš„ç±»å‹æ¥ç¡®å®šè¿™ä¸ªå˜é‡å ç”¨å†…å­˜çš„å­—èŠ‚æ•°å’Œè¿™ä¸€æ®µå†…å­˜çš„è§£ææ–¹æ³•ã€‚<br>è™½ç„¶å˜é‡å¿…é¡»æœ‰æ•°æ®ç±»å‹ï¼Œä½†æ˜¯å†…å­˜å¯ä»¥æ— ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å˜é‡å’Œå†…å­˜åœ¨æ²¡æœ‰å…³è”ä¹‹å‰æ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚æœ¬è´¨ä¸Šå†…å­˜å°±æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œå†…å­˜åªæ˜¯å› ä¸ºå’Œ<br>å…·ä½“çš„å˜é‡ç›¸å…³è”åæ‰æœ‰äº†ç¡®å®šçš„ç±»å‹(å…¶å®å†…å­˜åªæ˜¯å­˜å‚¨é¢—ç²’ï¼Œæ˜¯ç¼–è¯‘å™¨å¯¹ç‰¹å®šçš„å†…å­˜åšå‡ºäº†åˆ’åˆ†å’Œè§£é‡Š)ã€‚<br>void<em> æŒ‡å‘çš„å†…å­˜ç©ºé—´è¿˜æ²¡æœ‰åˆ†é…æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢å°†è¿™æ®µå†…å­˜ç©ºé—´æŒ‡å®šä¸ºæŸç§æ•°æ®ç±»å‹ã€‚<br>void</em> åšå·¦å€¼çš„æ—¶å€™ç”¨äºæ¥æ”¶ä»»æ„ç±»å‹çš„æŒ‡é’ˆï¼Œåšå³å€¼çš„æ—¶å€™èµ‹å€¼ç»™å…¶ä»–æŒ‡é’ˆå‰éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p>
<h2 id="å­—é¢é‡"><a href="#å­—é¢é‡" class="headerlink" title="å­—é¢é‡"></a>å­—é¢é‡</h2><p>å­—é¢é‡å°±æ˜¯ç±»ä¼¼ 0 1 2 3 â€˜aâ€™ ç­‰æ•°å­—ã€‚è¿™äº›å­—é¢é‡æ˜¯æ²¡æœ‰å†…å­˜åœ°å€çš„ï¼Œä¹Ÿå°±æ˜¯ä¸å­˜åœ¨ä¸å †æ ˆè¿™æ ·çš„æ•°æ®ç»“æ„ä¸­ã€‚</p>
<h2 id="å‡½æ•°è°ƒç”¨å½¢å‚é—®é¢˜"><a href="#å‡½æ•°è°ƒç”¨å½¢å‚é—®é¢˜" class="headerlink" title="å‡½æ•°è°ƒç”¨å½¢å‚é—®é¢˜"></a>å‡½æ•°è°ƒç”¨å½¢å‚é—®é¢˜</h2><p>æœ¬è´¨ä¸Šï¼Œè°ƒç”¨å‡½æ•°æ—¶ä¼ é€’å®å‚éƒ½ä¼šå¤åˆ¶ä¸€ä»½ç»™å‡½æ•°çš„å½¢å‚ã€‚ä¸ç®¡æ˜¯æ™®é€šå˜é‡è¿˜æ˜¯æŒ‡é’ˆå˜é‡ã€‚<br>ä»¥ä¸‹ä¾‹å­ä¸­ï¼Œå¯çŸ¥åœ¨ main å‡½æ•°ä¸­çš„æŒ‡é’ˆå˜é‡ p çš„åœ°å€å’Œ func å‡½æ•°ä¸­æŒ‡é’ˆå˜é‡ p çš„åœ°å€æ˜¯ä¸åŒçš„ã€‚<br>ä¹Ÿå°±æ˜¯ç¼–è¯‘å™¨åˆ†é…äº†ä¸¤ä¸ªå†…å­˜ç©ºé—´ï¼Œè¿™ä¸¤ä¸ªå†…å­˜ç©ºé—´ä¸­éƒ½å­˜å‚¨äº† p çš„å€¼(ä¹Ÿå°±æ˜¯açš„åœ°å€)ã€‚æ‰€ä»¥åœ¨ func å‡½æ•°ä¸­<br>å¯ä»¥é—´æ¥åœ°ä¿®æ”¹ main å‡½æ•°ä¸­çš„açš„å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">é—´æ¥èµ‹å€¼ï¼š</span><br><span class="line">1. ä¸¤ä¸ªå˜é‡ï¼šä¸€ä¸ªå®å‚aï¼Œä¸€ä¸ªå½¢å‚p(å®å‚æ•°æ®ç±»å‹çš„æŒ‡é’ˆç±»å‹)</span><br><span class="line">2. å»ºç«‹å…³è”ï¼šå®å‚ å–åœ°å€èµ‹å€¼ç»™ å½¢å‚</span><br><span class="line">3. é€šè¿‡ *p é—´æ¥ä¿®æ”¹å®å‚çš„å€¼</span><br><span class="line">ä¹Ÿå°±æ˜¯é€šè¿‡nçº§æŒ‡é’ˆ(å½¢å‚)å¯ä»¥é—´æ¥ä¿®æ”¹n-1çº§æŒ‡é’ˆ(å®å‚)çš„å€¼ã€‚</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">void func(int* p)</span><br><span class="line">&#123;</span><br><span class="line">	cout &lt;&lt; *p &lt;&lt; &quot; &quot; &lt;&lt; &amp;p &lt;&lt; endl;     </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 10;</span><br><span class="line">	int *p &#x3D; &amp;a;</span><br><span class="line">	cout &lt;&lt; *p &lt;&lt; &quot; &quot; &lt;&lt; &amp;p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	func(p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>å®šä¹‰ï¼šæ•°ç»„ä¸­å…ƒç´ ç±»å‹ æ•°ç»„å[æ•°ç»„å…ƒç´ ä¸ªæ•°];<br>æœ¬è´¨ä¸Šï¼Œæ•°ç»„ä¹Ÿæ˜¯ä¸€ä¸ªå˜é‡ï¼Œæ•°ç»„åå°±æ˜¯å˜é‡åã€‚å˜é‡çš„æœ¬è´¨å°±æ˜¯ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œä¼šå°†ä¸€ä¸ªå˜é‡åå’Œè¿™æ®µå†…å­˜ç©ºé—´çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åœ°å€ç»‘å®šï¼Œ<br>å˜é‡ç±»å‹å†³å®šè¿™æ®µå†…å­˜ç©ºé—´çš„å­—èŠ‚æ•°ã€‚</p>
<h3 id="ä»¥-int-buf-100-ä¸ºä¾‹ï¼ŒåŒºåˆ†-bufã€buf-0-ã€-amp-buf-0-ã€-amp-buf"><a href="#ä»¥-int-buf-100-ä¸ºä¾‹ï¼ŒåŒºåˆ†-bufã€buf-0-ã€-amp-buf-0-ã€-amp-buf" class="headerlink" title="ä»¥ int buf[100] ä¸ºä¾‹ï¼ŒåŒºåˆ† bufã€buf[0]ã€&amp;buf[0]ã€&amp;buf"></a>ä»¥ int buf[100] ä¸ºä¾‹ï¼ŒåŒºåˆ† bufã€buf[0]ã€&amp;buf[0]ã€&amp;buf</h3><ul>
<li>buf çš„ä¸¤å±‚å«ä¹‰</li>
</ul>
<ol>
<li>å˜é‡å(æ•°ç»„å)â€”&gt;æ—¢ç„¶æ˜¯å˜é‡åï¼Œå°±å¯ä»¥å¯¹å˜é‡åå–åœ°å€<br>é€šè¿‡ sizeof(buf) å¯ä»¥çŸ¥é“æ•°ç»„æ‰€å çš„å†…å­˜ç©ºé—´çš„å¤§å°ã€‚<br>ä»å˜é‡åçš„è§’åº¦è®²ï¼Œbufä¸èƒ½ä½œä¸ºå·¦å€¼ã€‚ä½œä¸ºå·¦å€¼ç»™bufèµ‹å€¼çš„æ—¶å€™ï¼Œç›¸å¯¹äºå¯¹æ•°ç»„æ•´ä½“èµ‹å€¼(ä¸åŒäºæ•°ç»„çš„åˆå§‹åŒ–)ã€‚</li>
<li>ç­‰ä»·äº &amp;buf[0]â€”&gt;ä¹Ÿå°±æ˜¯æ•°ç»„é¦–å…ƒç´ çš„é¦–åœ°å€ï¼Œ<strong>æ˜¯ä¸€ä¸ªå¸¸é‡å€¼</strong>ã€‚<br>ä»åœ°å€å¸¸é‡çš„è§’åº¦è®²ï¼Œå¸¸é‡ä¸å…è®¸è¢«å†™ï¼Œä¹Ÿå°±æ˜¯ ++bufã€buf++ éƒ½æ˜¯é”™è¯¯çš„ã€‚</li>
</ol>
<ul>
<li><p>&amp;buf[0]<br>æ•°ç»„é¦–å…ƒç´ çš„é¦–åœ°å€ï¼Œç­‰ä»·äº bufï¼Œæ˜¯ä¸€ä¸ªåœ°å€å¸¸é‡ã€‚å¯¹bufåŠ 1å°±æ˜¯ åŠ æ•°ç»„ä¸­å…ƒç´  æ•°æ®ç±»å‹çš„å­—èŠ‚æ•°(å…ƒç´ ç©ºé—´å¤§å°)ã€‚</p>
</li>
<li><p>&amp;buf<br>æ•°ç»„çš„åœ°å€ï¼Œæ˜¯ä¸€ä¸ªåœ°å€å¸¸é‡ã€‚å¯¹ &amp;buf åŠ 1å°±æ˜¯ åŠ æ•°ç»„ç±»å‹çš„å­—èŠ‚æ•°(æ•°ç»„ç©ºé—´å¤§å°)ã€‚</p>
</li>
</ul>
<h3 id="æŒ‡é’ˆæ•°ç»„ä¸æ•°ç»„æŒ‡é’ˆ"><a href="#æŒ‡é’ˆæ•°ç»„ä¸æ•°ç»„æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆæ•°ç»„ä¸æ•°ç»„æŒ‡é’ˆ"></a>æŒ‡é’ˆæ•°ç»„ä¸æ•°ç»„æŒ‡é’ˆ</h3><p>æŒ‡é’ˆæ•°ç»„å°±æ˜¯ç”±æŒ‡é’ˆæ„æˆçš„æ•°ç»„ã€‚æŒ‡é’ˆæ•°ç»„å°±æ˜¯ä¸€ä¸ªæ™®é€šæ•°ç»„ï¼Œåªæ˜¯æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯æŒ‡é’ˆå˜é‡ã€‚<br>æ•°ç»„æŒ‡é’ˆå°±æ˜¯æ•°ç»„çš„æŒ‡é’ˆã€‚æ•°ç»„æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ•°ç»„ã€‚</p>
<p>ç±»æ¯”ï¼š<br>    int <em>pï¼šç¼–è¯‘å™¨çœ‹åˆ°</em>på°±è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæŒ‡é’ˆ;<br>    int p[100]: ç¼–è¯‘å™¨çœ‹åˆ° p[100] å°±è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ•°ç»„<br>    ä¼˜å…ˆçº§ï¼š() &gt; [] &gt; *</p>
<ul>
<li>int (*p)[100];  </li>
</ul>
<ol>
<li>æ‰¾æ ¸å¿ƒâ€”-&gt;p  </li>
<li>æ‰¾ç»“åˆâ€”-&gt;ç”±äºåŠ äº†( )â€”-&gt;*pâ€”-&gt;æŒ‡é’ˆ  </li>
<li>æ‰¾ç±»å‹â€”â€”&gt;int (*)[100] çš„æ•°ç»„æŒ‡é’ˆç±»å‹<br>æ•…pæ˜¯ä¸€ä¸ªæŒ‡å‘æ•°ç»„ç±»å‹çš„æŒ‡é’ˆ</li>
</ol>
<ul>
<li>int *p[100];  </li>
</ul>
<ol>
<li>æ‰¾æ ¸å¿ƒâ€”-&gt;p  </li>
<li>æ‰¾ç»“åˆâ€”-&gt;p[100]â€”-&gt;æ•°ç»„  </li>
<li>æ‰¾ç±»å‹â€”-&gt;int*â€”-&gt;æ•°ç»„å…ƒç´ ç±»å‹ä¸ºint8<br>æ•…pæ˜¯ä¸€ä¸ªæ•°ç»„å</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int buf[10] &#x3D; &#123; &#125;;</span><br><span class="line">	&#x2F;&#x2F; bufæ˜¯æ•°ç»„å ç­‰ä»·äº&amp;buf[0]ï¼›æ˜¯ä¸€ä¸ªå¸¸é‡å€¼</span><br><span class="line">	&#x2F;&#x2F; buf+1 ---&gt; buf+sizeof(int)</span><br><span class="line">	int *p1 &#x3D; buf, *p2 &#x3D; &amp;buf[0];</span><br><span class="line">	&#x2F;&#x2F; &amp;bufæ˜¯æ•°ç»„è¿™ä¸ªå˜é‡çš„åœ°å€ï¼›æ˜¯ä¸€ä¸ªå¸¸é‡å€¼</span><br><span class="line">	&#x2F;&#x2F; &amp;buf+1 ---&gt; &amp;buf+sizeof(buf)</span><br><span class="line">    int (*p3)[10] &#x3D; &amp;buf;</span><br><span class="line">    &#x2F;&#x2F; p4æ˜¯æ•°ç»„å</span><br><span class="line">    int *p4[10];</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°çš„é€€åŒ–é—®é¢˜"><a href="#æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°çš„é€€åŒ–é—®é¢˜" class="headerlink" title="æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°çš„é€€åŒ–é—®é¢˜"></a>æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°çš„é€€åŒ–é—®é¢˜</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ•°ç»„åšå‡½æ•°å½¢å‚ï¼Œä¼šé€€åŒ–ä¸ºä¸€ä¸ªæŒ‡é’ˆ</span><br><span class="line">void func(int a[], int num)&#123;</span><br><span class="line">    cout &lt;&lt; sizeof(a)&#x2F;sizeof(a[0]) &lt;&lt; endl;     &#x2F;&#x2F; 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int buf[3] &#x3D; &#123;0, 1, 2&#125;;</span><br><span class="line">    cout &lt;&lt; sizeof(buf)&#x2F;sizeof(buf[0]) &lt;&lt; endl; &#x2F;&#x2F; 3</span><br><span class="line">    func(buf, sizeof(buf)&#x2F;sizeof(buf[0]));</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šå¸¸é‡ä¸èƒ½ä½œä¸ºå·¦å€¼!</p>
<h1 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h1><p>å˜é‡å¯ä»¥çœ‹ä½œæ˜¯ä¸€å—å­˜å‚¨æ•°æ®çš„å†…å­˜ç©ºé—´çš„åå­—ï¼Œ<font color="red">å¼•ç”¨å°±æ˜¯è¿™å—å†…å­˜ç©ºé—´çš„åˆ«å</font>ã€‚ç±»ä¼¼äºäººçš„åå­—ï¼Œäººæœ¬èº«æ˜¯æ²¡æœ‰åå­—çš„ï¼Œä½†æ˜¯ä¸ºäº†è¯†åˆ«ä¸åŒçš„äººï¼Œæ‰€ä»¥æœ‰äº†åå­—ã€‚ä¹Ÿå°±æ˜¯å°†æŸä¸ªå˜é‡åä¸å†…å­˜ç©ºé—´ç»‘å®šäº†ã€‚</p>
<h2 id="å¼•ç”¨æœ¬è´¨æ¢ç©¶"><a href="#å¼•ç”¨æœ¬è´¨æ¢ç©¶" class="headerlink" title="å¼•ç”¨æœ¬è´¨æ¢ç©¶"></a>å¼•ç”¨æœ¬è´¨æ¢ç©¶</h2><ul>
<li>æ™®é€šå¼•ç”¨åœ¨å£°æ˜æ—¶å¿…é¡»ç”¨å…¶ä»–çš„å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œç±»æ¯”å¸¸é‡ä¹Ÿå¿…é¡»åˆå§‹åŒ–ï¼Œå¦‚ const int a;</li>
<li>å¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°å£°æ˜æ—¶ä¸éœ€è¦è¿›è¡Œåˆå§‹åŒ–  </li>
</ul>
<p>ç”±ä¸‹ç¨‹åºå¯çŸ¥ï¼Œdouble &amp;a å 4ä¸ªå­—èŠ‚ï¼Œè¯´æ˜ double&amp; ç±»ä¼¼äºæŒ‡é’ˆç±»å‹(æŒ‡é’ˆç±»å‹ä¸º4å­—èŠ‚)ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">struct teacher &#123;</span><br><span class="line">	char name[64];</span><br><span class="line">	double &amp;a;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">	cout &lt;&lt; sizeof(teacher) &lt;&lt; endl;	&#x2F;&#x2F; 64</span><br><span class="line">	cout &lt;&lt; sizeof(double*) &lt;&lt; endl;	&#x2F;&#x2F; 4</span><br><span class="line">	cout &lt;&lt; sizeof(double);				&#x2F;&#x2F; 8</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»¼ä¸Šå¯çŸ¥ï¼ŒType &amp;a ç­‰åŒäº Type <em> const a(aæ˜¯ä¸å˜çš„æŒ‡é’ˆå˜é‡ï¼Œ</em>aæ˜¯å¯å˜çš„å†…å­˜ç©ºé—´)ã€‚Type &amp;aæœ‰è‡ªå·±çš„å­˜å‚¨ç©ºé—´ï¼Œä¸º4å­—èŠ‚ã€‚</p>
<ul>
<li>ä½¿ç”¨æŒ‡é’ˆæ–¹å¼é—´æ¥èµ‹å€¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">é—´æ¥èµ‹å€¼ï¼š</span><br><span class="line">1. ä¸¤ä¸ªå˜é‡ï¼šä¸€ä¸ªå®å‚aï¼Œä¸€ä¸ªå½¢å‚p(å®å‚æ•°æ®ç±»å‹çš„æŒ‡é’ˆç±»å‹)</span><br><span class="line">2. å»ºç«‹å…³è”ï¼šå®å‚ å–åœ°å€èµ‹å€¼ç»™ å½¢å‚</span><br><span class="line">3. é€šè¿‡ *p é—´æ¥ä¿®æ”¹å®å‚çš„å€¼</span><br><span class="line">ä¹Ÿå°±æ˜¯é€šè¿‡nçº§æŒ‡é’ˆ(å½¢å‚)å¯ä»¥é—´æ¥ä¿®æ”¹n-1çº§æŒ‡é’ˆ(å®å‚)çš„å€¼ã€‚</span><br><span class="line">*&#x2F;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">void func(int* p)</span><br><span class="line">&#123;</span><br><span class="line">	*p &#x3D; 20;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 10;</span><br><span class="line">	int *p &#x3D; &amp;a;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	func(p);</span><br><span class="line">	cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ä½¿ç”¨æŒ‡é’ˆæ–¹å¼ï¼Œç¬¬1æ­¥å’Œç¬¬2æ­¥åœ¨ ä¸»å‡½æ•° ä¸­å®Œæˆï¼Œç¬¬3æ­¥åœ¨è¢«è°ƒå‡½æ•°ä¸­å®Œæˆã€‚</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨å¼•ç”¨æ–¹å¼é—´æ¥èµ‹å€¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">é—´æ¥èµ‹å€¼ï¼š</span><br><span class="line">1. ä¸¤ä¸ªå˜é‡ï¼šä¸€ä¸ªå®å‚aï¼Œä¸€ä¸ªå½¢å‚p(å®å‚æ•°æ®ç±»å‹çš„æŒ‡é’ˆç±»å‹)</span><br><span class="line">2. å»ºç«‹å…³è”ï¼šå®å‚ å–åœ°å€èµ‹å€¼ç»™ å½¢å‚</span><br><span class="line">3. é€šè¿‡ *p é—´æ¥ä¿®æ”¹å®å‚çš„å€¼</span><br><span class="line">ä¹Ÿå°±æ˜¯é€šè¿‡nçº§æŒ‡é’ˆ(å½¢å‚)å¯ä»¥é—´æ¥ä¿®æ”¹n-1çº§æŒ‡é’ˆ(å®å‚)çš„å€¼ã€‚</span><br><span class="line">*&#x2F;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">void func(int &amp;a)&#123;</span><br><span class="line">	a &#x3D; 20;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; constä¿®é¥°æ™®é€šç±»å‹å˜é‡,æ”¾åœ¨ç±»å‹å‰åæ²¡åŒºåˆ«ã€‚</span><br><span class="line">&#x2F;&#x2F; æ­¤æ—¶ä¿®é¥°çš„å˜é‡ä¸ºå¸¸é‡</span><br><span class="line">void func1(const int &amp;a)</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;    a &#x3D; 20;   &#x2F;&#x2F; error</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test()&#123;</span><br><span class="line">    int a &#x3D; 10;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    func(a);</span><br><span class="line">    cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">&#x2F;&#x2F;    func1(a);</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; ä½¿ç”¨å¼•ç”¨æ–¹å¼ï¼Œç¼–è¯‘å™¨å°†ç¬¬2æ­¥å’Œç¬¬3æ­¥ç»“åˆåœ¨ä¸€èµ·ï¼Œfunc(a)ä¼ é€’ä¸€ä¸ª int* const p çš„æŒ‡é’ˆå˜é‡ã€‚</span><br><span class="line">&#x2F;&#x2F; ä¹‹åé—´æ¥èµ‹å€¼çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨è¿›è¡Œ è§£å¼•ç”¨ èµ‹å€¼ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="å‡½æ•°è¿”å›å€¼æ˜¯å¼•ç”¨"><a href="#å‡½æ•°è¿”å›å€¼æ˜¯å¼•ç”¨" class="headerlink" title="å‡½æ•°è¿”å›å€¼æ˜¯å¼•ç”¨"></a>å‡½æ•°è¿”å›å€¼æ˜¯å¼•ç”¨</h2><p>å½“å‡½æ•°è¿”å›å€¼ä¸ºå¼•ç”¨æ—¶ï¼š</p>
<ul>
<li>è‹¥è¿”å›æ ˆå˜é‡ï¼Œä¸èƒ½ä½œä¸ºå³å€¼ï¼Œä¹Ÿä¸èƒ½ä½œä¸ºå·¦å€¼ã€‚</li>
<li>è‹¥è¿”å›é™æ€å˜é‡æˆ–å…¨å±€å˜é‡ï¼Œå¯ä»¥ä½œä¸ºå³å€¼ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå·¦å€¼ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int&amp; func()&#123;</span><br><span class="line">    static int a &#x3D; 10;</span><br><span class="line"></span><br><span class="line">    a++;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    return a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    func() &#x3D; 100;	&#x2F;&#x2F; å‡½æ•°è¿”å›å€¼å¼•ç”¨ ä¸ºå·¦å€¼	&#x2F;&#x2F; a &#x3D; 11</span><br><span class="line">    func();			&#x2F;&#x2F; a &#x3D; 101</span><br><span class="line"></span><br><span class="line">	int &amp;i &#x3D; func();	&#x2F;&#x2F; å‡½æ•°è¿”å›å€¼å¼•ç”¨ ä¸ºå³å€¼	&#x2F;&#x2F; a &#x3D; 102</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æŒ‡é’ˆå¼•ç”¨"><a href="#æŒ‡é’ˆå¼•ç”¨" class="headerlink" title="æŒ‡é’ˆå¼•ç”¨"></a>æŒ‡é’ˆå¼•ç”¨</h2><ul>
<li>äºŒçº§æŒ‡é’ˆé—´æ¥èµ‹å€¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">struct Teacher</span><br><span class="line">&#123;</span><br><span class="line">	char name[64];</span><br><span class="line">	int age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int getTe(Teacher **myp)</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F; å¯¹ p æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´èµ‹å€¼</span><br><span class="line">	Teacher *p &#x3D; (Teacher *)malloc(sizeof(Teacher));</span><br><span class="line">	if (p &#x3D;&#x3D; NULL)&#123;</span><br><span class="line">		return -1;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	memset(p, 0, sizeof(Teacher));</span><br><span class="line">	p-&gt;age &#x3D; 33;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; ä¿®æ”¹ä¸»è°ƒå‡½æ•°ä¸­pçš„å€¼</span><br><span class="line">	*myp &#x3D; p;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Teacher *p &#x3D; NULL;</span><br><span class="line"></span><br><span class="line">	getTe(&amp;p);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;age&#x3D;&quot; &lt;&lt; p-&gt;age &lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆå§‹ p æ˜¯ä¸€çº§ç©ºæŒ‡é’ˆï¼Œå¦‚æœè¦æƒ³ä¿®æ”¹ä¸€çº§ç©ºæŒ‡é’ˆçš„å€¼ï¼Œéœ€è¦ä½¿ç”¨äºŒçº§æŒ‡é’ˆã€‚</p>
<ul>
<li>æŒ‡é’ˆå¼•ç”¨é—´æ¥èµ‹å€¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">struct Teacher</span><br><span class="line">&#123;</span><br><span class="line">	char name[64];</span><br><span class="line">	int age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int getTe(Teacher* &amp;myp)</span><br><span class="line">&#123;</span><br><span class="line">	myp &#x3D; (Teacher *)malloc(sizeof(Teacher));</span><br><span class="line">	if (myp &#x3D;&#x3D; NULL)&#123;</span><br><span class="line">		return -1;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	memset(myp, 0, sizeof(Teacher));</span><br><span class="line">	myp-&gt;age &#x3D; 34;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Teacher *p &#x3D; NULL;</span><br><span class="line"></span><br><span class="line">	getTe(p);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;age&#x3D;&quot; &lt;&lt; p-&gt;age &lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆå§‹ p æ˜¯ä¸€çº§ç©ºæŒ‡é’ˆå¼•ç”¨ã€‚</p>
<h2 id="å¸¸å¼•ç”¨"><a href="#å¸¸å¼•ç”¨" class="headerlink" title="å¸¸å¼•ç”¨"></a>å¸¸å¼•ç”¨</h2><h3 id="å˜é‡åˆå§‹åŒ–å¸¸å¼•ç”¨"><a href="#å˜é‡åˆå§‹åŒ–å¸¸å¼•ç”¨" class="headerlink" title="å˜é‡åˆå§‹åŒ–å¸¸å¼•ç”¨"></a>å˜é‡åˆå§‹åŒ–å¸¸å¼•ç”¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int a &#x3D; 100;</span><br><span class="line">	const int &amp; b &#x3D; &amp;a;		&#x2F;&#x2F; ç­‰ä»·äº const int * const b åªè¯» ä¸èƒ½ä¿®æ”¹</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;b &#x3D; 200;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;b&#x3D;&quot; &lt;&lt; b &lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å­—é¢é‡åˆå§‹åŒ–å¸¸å¼•ç”¨"><a href="#å­—é¢é‡åˆå§‹åŒ–å¸¸å¼•ç”¨" class="headerlink" title="å­—é¢é‡åˆå§‹åŒ–å¸¸å¼•ç”¨"></a>å­—é¢é‡åˆå§‹åŒ–å¸¸å¼•ç”¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F; æ™®é€šå¼•ç”¨ ç­‰åŒäº int* const a è€Œå­—é¢é‡ 100 æ˜¯æ²¡æœ‰åœ°å€çš„</span><br><span class="line">	&#x2F;&#x2F;int&amp; a &#x3D; 100;		</span><br><span class="line">	&#x2F;&#x2F;cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;	&#x2F;&#x2F; error</span><br><span class="line"></span><br><span class="line">	const int&amp; b &#x3D; 100;			&#x2F;&#x2F; ä¼šé¢å¤–åˆ†é…å†…å­˜ç©ºé—´</span><br><span class="line">	cout &lt;&lt; &quot;b&#x3D;&quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¼•ç”¨æ˜¯ä¸€ä¸ªC++ç‰¹æœ‰çš„è¯­æ³•ç°è±¡ï¼ç›¸å½“äºC++ç¼–è¯‘å™¨å¯¹æŒ‡é’ˆå†æ¬¡å°è£…ï¼Œå¯ä»¥ç®€åŒ–æŒ‡é’ˆæ“ä½œã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>cpp</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>20-cpp-ç»†èŠ‚è¯­æ³•äºŒ</title>
    <url>/2020/02/12/20-cpp-%E7%BB%86%E8%8A%82%E8%AF%AD%E6%B3%95%E4%BA%8C/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>Cè¯­è¨€å­—ç¬¦ä¸²ç±»å‹ã€å‹å…ƒ å­¦ä¹ ; åŸç ã€åç å’Œè¡¥ç å­¦ä¹ ã€‚<br><a id="more"></a></p>
<h1 id="C-è¯­æ³•ç»†èŠ‚"><a href="#C-è¯­æ³•ç»†èŠ‚" class="headerlink" title="C++è¯­æ³•ç»†èŠ‚"></a>C++è¯­æ³•ç»†èŠ‚</h1><h2 id="é»˜è®¤å‚æ•°"><a href="#é»˜è®¤å‚æ•°" class="headerlink" title="é»˜è®¤å‚æ•°"></a>é»˜è®¤å‚æ•°</h2><p>C++å¯ä»¥åœ¨å‡½æ•°å£°æ˜æ—¶ä¸ºå‚æ•°æä¾›ä¸€ä¸ªé»˜è®¤å€¼ã€‚å½“å‡½æ•°è°ƒç”¨æ²¡æœ‰æŒ‡å®šè¿™ä¸ªå‚æ•°å€¼å¾—æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”¨é»˜è®¤å€¼æ›¿ä»£ã€‚</p>
<ul>
<li>é»˜è®¤å‚æ•°å†™åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨çš„åé¢éƒ¨åˆ†ï¼Œåœ¨é»˜è®¤å‚æ•°ä¹‹åä¸èƒ½å®šä¹‰æ™®é€šå‚æ•°ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤å‚æ•°åçš„æ‰€æœ‰å‚æ•°éƒ½æ˜¯é»˜è®¤å‚æ•°ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int func(int a, int b &#x3D; 3, int c &#x3D; 6)</span><br><span class="line">&#123;</span><br><span class="line">	cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &quot;b&#x3D;&quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &quot;c&#x3D;&quot; &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 1;</span><br><span class="line">	int b &#x3D; 2;</span><br><span class="line">	int c &#x3D; 3;</span><br><span class="line"></span><br><span class="line">	func(a++, b, c);    &#x2F;&#x2F; 1 2 3</span><br><span class="line">	func(a++);          &#x2F;&#x2F; 2 3 6</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å ä½å‚æ•°"><a href="#å ä½å‚æ•°" class="headerlink" title="å ä½å‚æ•°"></a>å ä½å‚æ•°</h2><p>å ä½å‚æ•°åªæœ‰å‚æ•°ç±»å‹å£°æ˜ï¼Œè€Œæ²¡æœ‰å‚æ•°åå£°æ˜ã€‚ä¹Ÿå°±æ˜¯å‡½æ•°ä½“å†…éƒ¨æ— æ³•ä½¿ç”¨å ä½å‚æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç¬¬äºŒä¸ªå‚æ•°æ²¡æœ‰å˜é‡å</span><br><span class="line">int func(int a, int , int b)</span><br><span class="line">&#123;</span><br><span class="line">	return a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;    func(1, 2); &#x2F;&#x2F; error: too few arguments to function &#39;int func(int, int, int)&#39;|</span><br><span class="line">	cout &lt;&lt; &quot;func(1, 2, 3)&#x3D;&quot; &lt;&lt; func(1, 2, 3) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line">&#x2F;&#x2F; ç¬¬äºŒä¸ªå‚æ•°æ²¡æœ‰å˜é‡åï¼Œä½†æ˜¯æœ‰é»˜è®¤å‚æ•°</span><br><span class="line">int func(int a, int &#x3D;0, int b&#x3D;3)</span><br><span class="line">&#123;</span><br><span class="line">	return a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;    func(1, 2); &#x2F;&#x2F; error: too few arguments to function &#39;int func(int, int, int)&#39;|</span><br><span class="line">	cout &lt;&lt; &quot;func(1, 2, 3)&#x3D;&quot; &lt;&lt; func(1, 2, 3) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å‡½æ•°æŒ‡é’ˆ"><a href="#å‡½æ•°æŒ‡é’ˆ" class="headerlink" title="å‡½æ•°æŒ‡é’ˆ"></a>å‡½æ•°æŒ‡é’ˆ</h2><p>å‡½æ•°æŒ‡é’ˆæœ¬è´¨ä¸Šè¿˜æ˜¯æŒ‡é’ˆã€‚å‡½æ•°åçš„æ˜¯æŒ‡å°±æ˜¯å‡½æ•°è¿™æ®µä»£ç çš„é¦–åœ°å€ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int func(int x)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;x&#x3D;&quot; &lt;&lt; x &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int (*pFunc)(int);    &#x2F;&#x2F; å®šä¹‰å‡½æ•°æŒ‡é’ˆ</span><br><span class="line">    &#x2F;&#x2F; å‡½æ•°ååšå³å€¼æ—¶åŠ ä¸åŠ &amp;æ•ˆæœä¸€æ ·</span><br><span class="line">    &#x2F;&#x2F; æ•°ç»„ååšå³å€¼æ˜¯ä¸åŠ &amp;è¡¨ç¤ºæ•°ç»„é¦–å…ƒç´ é¦–åœ°å€ åŠ &amp;è¡¨ç¤ºæ•°ç»„åœ°å€</span><br><span class="line">&#x2F;&#x2F;    pFunc &#x3D; func;</span><br><span class="line">    pFunc &#x3D; &amp;func;</span><br><span class="line"></span><br><span class="line">    pFunc(2);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="typedefåˆæ­¥"><a href="#typedefåˆæ­¥" class="headerlink" title="typedefåˆæ­¥"></a>typedefåˆæ­¥</h2><ul>
<li>typedef åŸæ•°æ®ç±»å‹ æ•°æ®ç±»å‹çš„åˆ«å<br>C/c++ä¸­æœ‰ä¸¤ç§æ•°æ®ç±»å‹ï¼šä¸€ç§æ˜¯ç¼–è¯‘å™¨å®šä¹‰çš„åŸç”Ÿæ•°æ®ç±»å‹ï¼›ä¸€ç§æ˜¯ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ï¼Œæ¯”å¦‚æ•°ç»„ç±»å‹ã€ç»“æ„ä½“ç±»å‹ã€å‡½æ•°ç±»å‹ã€‚<br>ç”±äºè¿™äº›ç±»å‹å¾€å¾€æ¯”è¾ƒé•¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡typedefçš„æ–¹å¼è¿›è¡Œé‡å‘½åã€‚<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int func(int x)</span><br><span class="line">&#123;</span><br><span class="line">	return x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int func(int a, int b)</span><br><span class="line">&#123;</span><br><span class="line">	return a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int func(const char* s)</span><br><span class="line">&#123;</span><br><span class="line">	return strlen(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; PFUNCå°±æ˜¯ int (*)(int , int)ç±»å‹</span><br><span class="line">&#x2F;&#x2F; è¿™é‡Œé‡å‘½åç±»å‹çš„æ–¹å¼æœ‰ç‚¹ä¸ä¸€æ ·</span><br><span class="line">typedef int(*PFUNC)(int , int);</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int c &#x3D; 0;</span><br><span class="line">	PFUNC p &#x3D; func;</span><br><span class="line"></span><br><span class="line">	c &#x3D; p(1, 2);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;c &#x3D; &quot; &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å¯¹è±¡çš„åŠ¨æ€å»ºç«‹å’Œé‡Šæ”¾"><a href="#å¯¹è±¡çš„åŠ¨æ€å»ºç«‹å’Œé‡Šæ”¾" class="headerlink" title="å¯¹è±¡çš„åŠ¨æ€å»ºç«‹å’Œé‡Šæ”¾"></a>å¯¹è±¡çš„åŠ¨æ€å»ºç«‹å’Œé‡Šæ”¾</h2><h3 id="new-å’Œ-deleteçš„è¯­æ³•"><a href="#new-å’Œ-deleteçš„è¯­æ³•" class="headerlink" title="new å’Œ deleteçš„è¯­æ³•"></a>new å’Œ deleteçš„è¯­æ³•</h3><p>ä½¿ç”¨å½¢å¼ï¼š<br>æŒ‡é’ˆå˜é‡ = new ç±»å‹(å¸¸é‡);    </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int *p1 &#x3D; new int;</span><br><span class="line">delete p1;</span><br><span class="line"></span><br><span class="line">int *p2 &#x3D; new int(10);	&#x2F;&#x2F; åŠ¨æ€åˆ†é…intç±»å‹ç©ºé—´ï¼Œå¹¶åˆå§‹åŒ–ä¸º10</span><br><span class="line">delete p2;</span><br></pre></td></tr></table></figure>
<p>æŒ‡é’ˆå˜é‡ = new ç±»å‹[è¡¨è¾¾å¼];</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int *p &#x3D; new int[10];	&#x2F;&#x2F; åŠ¨æ€åˆ†é…10ä¸ªintç±»å‹çš„ç©ºé—´</span><br><span class="line">delete p[];</span><br></pre></td></tr></table></figure>
<h3 id="å‹å…ƒå‡½æ•°"><a href="#å‹å…ƒå‡½æ•°" class="headerlink" title="å‹å…ƒå‡½æ•°"></a>å‹å…ƒå‡½æ•°</h3><p>å‹å…ƒå‡½æ•°ç ´åäº†ç±»çš„å°è£…æ€§ã€‚é€šè¿‡åœ¨ç±»ä¸­è®¾ç½®å‡½æ•°ä¸ºå‹å…ƒï¼Œå¯ä»¥åœ¨å‹å…ƒå‡½æ•°ä¸­ä¿®æ”¹ç±»çš„ç§æœ‰å±æ€§ã€‚å‹å…ƒå‡½æ•°é‡è¦çš„åº”ç”¨åœºæ™¯åœ¨äºå¯¹è¾“å…¥è¾“å‡ºè¿ç®—ç¬¦çš„é‡è½½ã€‚</p>
<h1 id="leetcodeçŸ¥è¯†"><a href="#leetcodeçŸ¥è¯†" class="headerlink" title="leetcodeçŸ¥è¯†"></a>leetcodeçŸ¥è¯†</h1><h2 id="ä¸¤æ•°ç›¸é™¤"><a href="#ä¸¤æ•°ç›¸é™¤" class="headerlink" title="ä¸¤æ•°ç›¸é™¤"></a><a href="https://leetcode-cn.com/problems/divide-two-integers/" target="_blank" rel="noopener">ä¸¤æ•°ç›¸é™¤</a></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">	int divide(int dividend, int divisor) &#123;</span><br><span class="line">		&#x2F;&#x2F; å¼‚æˆ–ï¼šç›¸åŒä¸º0 ç›¸å¼‚ä¸º1</span><br><span class="line">		int flag &#x3D; (dividend &gt; 0) ^ (divisor &gt; 0);</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; é™¤æ•°ä¸ä¸º0,æ•…ä¸éœ€è¦åˆ¤æ–­ç­‰äºé™¤æ•°ç­‰äº0çš„æƒ…å†µ</span><br><span class="line">		&#x2F;&#x2F; é™¤æ•°ä¸º -2^31 æ—¶éœ€è¦å•ç‹¬åˆ¤æ–­  </span><br><span class="line">		if (divisor &#x3D;&#x3D; pow(-2, 31)) &#123;</span><br><span class="line">			if (dividend &#x3D;&#x3D; divisor)</span><br><span class="line">				return 1;</span><br><span class="line">			else</span><br><span class="line">				return 0;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		&#x2F;*</span><br><span class="line">		è´Ÿè¾¹ç•Œè®¡ç®—</span><br><span class="line">		-2^31   &#x2F; -1 å‡ºé”™   &#x2F;&#x2F; éœ€è¦å•ç‹¬è®¡ç®—è¿™ç§æƒ…å†µ</span><br><span class="line">		-2^31   &#x2F;  1 æ­£ç¡®</span><br><span class="line"></span><br><span class="line">		-2^31+1 &#x2F; -1 æ­£ç¡®   &#x2F;&#x2F; è€ƒè™‘å°† -2^31+1 è®¡ç®—å•†ï¼Œç„¶åå‡1</span><br><span class="line">		-2^31+1 &#x2F;  1 æ­£ç¡®</span><br><span class="line"></span><br><span class="line">		æ­£è¾¹ç•Œè®¡ç®—</span><br><span class="line">		2^31-1  &#x2F; -1 æ­£ç¡®</span><br><span class="line">		2^31-1  &#x2F;  1 æ­£ç¡®</span><br><span class="line">		*&#x2F;</span><br><span class="line">		int nflag &#x3D; 0;</span><br><span class="line">		int result &#x3D; 0, absdividend &#x3D; 0, absdivisor &#x3D; 0;</span><br><span class="line"></span><br><span class="line">		if (dividend &#x3D;&#x3D; pow(-2, 31)) &#123;</span><br><span class="line">			dividend &#x3D; pow(-2, 31) + 1;</span><br><span class="line">			nflag &#x3D; 1;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		absdividend &#x3D; abs(dividend);</span><br><span class="line">		absdivisor &#x3D; abs(divisor);</span><br><span class="line"></span><br><span class="line">		while (absdividend &gt;&#x3D; absdivisor) &#123;</span><br><span class="line">			int temp_divisor &#x3D; absdivisor;</span><br><span class="line">			int temp_result &#x3D; 1;</span><br><span class="line"></span><br><span class="line">			while (absdividend &gt;&#x3D; (temp_divisor &lt;&lt; 1)) &#123;</span><br><span class="line">        &#x2F;&#x2F; å¯¹äºå·¦ç§»æ¥è®²ï¼Œpow(2, 30)æ˜¯æœ€å¤§çš„é™¤æ•° ä»»ä½•é™¤æ•°å¤§äºç­‰äº pow(2, 30) éƒ½æ²¡æœ‰æ„ä¹‰</span><br><span class="line">        &#x2F;&#x2F; å½“ temp_divisor &lt; pow(2, 30) æ—¶ï¼Œ temp_divisor &lt;&lt; 1 ä¸€å®šå°äº pow(2, 31)</span><br><span class="line">				if (temp_divisor &gt;&#x3D; pow(2, 30))</span><br><span class="line">					break;</span><br><span class="line"></span><br><span class="line">				temp_result &#x3D; temp_result &lt;&lt; 1;</span><br><span class="line">				temp_divisor &#x3D; temp_divisor &lt;&lt; 1;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			absdividend &#x3D; absdividend - temp_divisor;</span><br><span class="line">			result +&#x3D; temp_result;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		if (nflag &#x3D;&#x3D; 1) &#123;</span><br><span class="line">			absdividend &#x3D; -absdividend - 1;</span><br><span class="line">			if (absdividend &#x3D;&#x3D; divisor &amp;&amp; (divisor &#x3D;&#x3D; -1))</span><br><span class="line">				return pow(2, 31) - 1;</span><br><span class="line">			else if (absdividend &#x3D;&#x3D; divisor &amp;&amp; (divisor !&#x3D; -1))</span><br><span class="line">				result++;</span><br><span class="line">			else if (absdividend &#x3D;&#x3D; -divisor &amp;&amp; (dividend &lt; 0))</span><br><span class="line">				return -result - 1;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		if (flag)</span><br><span class="line">			result &#x3D; -result;</span><br><span class="line"></span><br><span class="line">		return result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="å®šç‚¹æ•°è¡¨ç¤º"><a href="#å®šç‚¹æ•°è¡¨ç¤º" class="headerlink" title="å®šç‚¹æ•°è¡¨ç¤º"></a>å®šç‚¹æ•°è¡¨ç¤º</h2><h3 id="æ— ç¬¦å·æ•°"><a href="#æ— ç¬¦å·æ•°" class="headerlink" title="æ— ç¬¦å·æ•°"></a>æ— ç¬¦å·æ•°</h3><p>æ•´ä¸ªæœºå™¨å­—é•¿çš„å…¨éƒ¨äºŒè¿›åˆ¶ä½å‡ä¸ºæ•°å€¼ä½ï¼Œæ²¡æœ‰ç¬¦å·ä½ï¼ŒåŸç è¡¨ç¤ºå³å¯ã€‚ </p>
<h3 id="æœ‰ç¬¦å·æ•°"><a href="#æœ‰ç¬¦å·æ•°" class="headerlink" title="æœ‰ç¬¦å·æ•°"></a>æœ‰ç¬¦å·æ•°</h3><p>æœ€é«˜ä½ 0 è¡¨ç¤ºæ­£å·ï¼Œ1 è¡¨ç¤ºè´Ÿå·ã€‚</p>
<h4 id="åŸç "><a href="#åŸç " class="headerlink" title="åŸç "></a>åŸç </h4><p>nä½æœºå™¨å­é•¿ï¼ŒåŸç æ•´æ•°å–å€¼èŒƒå›´ [-(2^n-1), (2^n-1)]<br>+0 çš„åŸç ï¼š0000 0000<br>-0 çš„åŸç ï¼š1000 0000  </p>
<p>åŸç éœ€è¦å•ç‹¬è®¡ç®—ç¬¦å·ä½ï¼Œå¹¶å¼•å…¥ç»å¯¹å€¼ï¼Œè¿›è¡ŒåŠ å‡æ³•è¿ç®—ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚</p>
<h4 id="åç "><a href="#åç " class="headerlink" title="åç "></a>åç </h4><p>æ­£æ•°åç å’ŒåŸç ç›¸åŒï¼›è´Ÿæ•°åç ç”± åŸç  ç¬¦å·ä½ä¸å˜ï¼Œå…¶ä»–ä½æŒ‰ä½å–åã€‚<br>nä½æœºå™¨å­é•¿ï¼Œè¡¥ç æ•´æ•°çš„è¡¨ç¤ºèŒƒå›´ï¼š[-(2^n-1), (2^n-1)]<br>+0 çš„åç ï¼š0111 1111<br>-0 çš„åç ï¼š1111 1111</p>
<h4 id="è¡¥ç "><a href="#è¡¥ç " class="headerlink" title="è¡¥ç "></a>è¡¥ç </h4><p>æ­£æ•°è¡¥ç  å’ŒåŸç ç›¸åŒï¼›è´Ÿæ•°è¡¥ç  ç¬¦å·ä½ä¸åŸç ç›¸åŒï¼Œæ•°å€¼ä½ç”±åŸç å–ååŠ 1å¾—åˆ°ã€‚<br>è¡¥ç çš„å‡ºç°æ˜¯è®©è®¡ç®—æœºåªéœ€è¦åšåŠ æ³•å°±å¯ä»¥å®ŒæˆåŠ å‡è¿ç®—ã€‚<br>nä½æœºå™¨å­é•¿ï¼Œè¡¥ç æ•´æ•°çš„è¡¨ç¤ºèŒƒå›´ï¼š[-2^n, 2^n-1]<br>+0 çš„è¡¥ç ï¼š0000 0000<br>-0 çš„è¡¥ç ï¼š0000 0000 </p>
<p><img src="/images/20-cpp-ç»†èŠ‚è¯­æ³•äºŒ/01-8ä½åŸç åç è¡¥ç å–å€¼èŒƒå›´.jpg" alt="&quot;01-8ä½åŸç åç è¡¥ç å–å€¼èŒƒå›´&quot;"></p>
<p>ç”±äºåŸç å’Œåç éƒ½éœ€è¦ç”¨ä¸¤ä¸ªæ•°è¡¨ç¤º +0 å’Œ -0ï¼Œè€Œè¡¥ç åªéœ€è¦ä¸€ä¸ªæ•°å°±å¯ä»¥è¡¨ç¤º +0 å’Œ -0ã€‚æ‰€ä»¥å¯ä»¥å¤šè¡¨ç¤ºä¸€ä¸ªæ•°ã€‚</p>
<h2 id="Cè¯­è¨€æ•°æ®ç±»å‹å¤§å°å’Œå–å€¼èŒƒå›´"><a href="#Cè¯­è¨€æ•°æ®ç±»å‹å¤§å°å’Œå–å€¼èŒƒå›´" class="headerlink" title="Cè¯­è¨€æ•°æ®ç±»å‹å¤§å°å’Œå–å€¼èŒƒå›´"></a>Cè¯­è¨€æ•°æ®ç±»å‹å¤§å°å’Œå–å€¼èŒƒå›´</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;limits.h&gt;</span><br><span class="line">&#x2F;&#x2F; å–å€¼èŒƒå›´å¯ä»¥ç”¨æé™å€¼ç¬¦å·(å®šä¹‰åœ¨imits.hå¤´æ–‡ä»¶ä¸­)</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;CHAR_MIN &#x3D; &quot; &lt;&lt; CHAR_MIN &lt;&lt; &quot; &quot; &lt;&lt; &quot;CHAR_MAX &#x3D; &quot; &lt;&lt; CHAR_MAX &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;INT_MIN &#x3D; &quot; &lt;&lt; INT_MIN &lt;&lt; &quot; &quot; &lt;&lt; &quot;INT_MAX &#x3D; &quot; &lt;&lt; INT_MAX &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;LONG_MIN &#x3D; &quot; &lt;&lt;  LONG_MIN &lt;&lt; &quot; &quot; &lt;&lt; &quot;LONG_MAX &#x3D; &quot; &lt;&lt; LONG_MAX &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; &quot;UCHAR_MAX &#x3D; &quot; &lt;&lt; UCHAR_MAX &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;UINT_MAX &#x3D; &quot; &lt;&lt; UINT_MAX &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;UINT_MAX &#x3D; &quot; &lt;&lt; ULONG_MAX &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/images/20-cpp-ç»†èŠ‚è¯­æ³•äºŒ/02-Cè¯­è¨€æ•°æ®ç±»å‹å–å€¼èŒƒå›´.jpg" alt="&quot;02-Cè¯­è¨€æ•°æ®ç±»å‹å–å€¼èŒƒå›´&quot;"></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è®¡ç®—æœºä¸­æ— ç¬¦å·æ•°ç”¨åŸç å­˜å³å¯(å…¶å®å› ä¸ºéƒ½æ˜¯æ•´æ•°ï¼ŒåŸç ã€åç ã€è¡¥ç éƒ½ä¸€æ ·)ï¼›æœ‰ç¬¦å·æ•°ç”¨è¡¥ç å­˜ã€‚<br>å…¶å®åŸç ã€åç å’Œè¡¥ç éƒ½åªæ˜¯çœŸå€¼çš„è¡¨ç¤ºå½¢å¼è€Œå·²ï¼Œåªæ˜¯è¡¥ç åªéœ€è¦åšåŠ æ³•ï¼Œè€Œå…¶ä»–ä¸¤ç§æ²¡æœ‰è¿™ä¹ˆæ–¹ä¾¿ã€‚æ‰€ä»¥è®¡ç®—æœºä½¿ç”¨è¡¥ç å­˜æœ‰ç¬¦å·æ•°ï¼Œå¹¶ä¸”è¡¥ç è¿˜å¯ä»¥å¤šè¡¨ç¤ºä¸€ä¸ªæ•°ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>cpp</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>21-cpp-æ„é€ ææ„-æ·±æµ…æ‹·è´</title>
    <url>/2020/02/13/21-cpp-%E6%9E%84%E9%80%A0%E6%9E%90%E6%9E%84-%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ç±»æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€ç±»åšå‡½æ•°å‚æ•°å’Œå‡½æ•°è¿”å›å€¼ã€æ·±æ‹·è´ã€æµ…æ‹·è´ å­¦ä¹ ã€‚<br><a id="more"></a></p>
<h1 id="ç±»å‡½æ•°"><a href="#ç±»å‡½æ•°" class="headerlink" title="ç±»å‡½æ•°"></a>ç±»å‡½æ•°</h1><p>C++ç±»ä¸­ä¸ç±»åç›¸åŒçš„æˆå‘˜å‡½æ•°å«åšæ„é€ å‡½æ•°ï¼Œæ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼ŒC++é»˜è®¤æä¾›æ— å‚æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•°ã€‚<br>ä»¥ä¸‹ä»¥ Teacher ç±»å¯¹ç±»çš„æ€§è´¨è¿›è¡Œè¯´æ˜ã€‚  </p>
<p>public:ä¿®é¥°æˆå‘˜å˜é‡å’Œå‡½æ•°ï¼Œå¯ä»¥åœ¨ç±»çš„å†…éƒ¨å’Œç±»çš„å¤–éƒ¨è®¿é—®<br>protected:ä¿®é¥°çš„æˆå‘˜å˜é‡å’Œå‡½æ•° åªèƒ½åœ¨ç±»çš„å†…éƒ¨è¢«è®¿é—®,ä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨è®¿é—® å­ç±»å¯ä»¥è®¿é—®<br>private:ä¿®é¥°çš„æˆå‘˜å˜é‡å’Œå‡½æ•° åªèƒ½åœ¨ç±»çš„å†…éƒ¨è¢«è®¿é—®,ä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨è®¿é—® å­ç±»ä¸å¯ä»¥è®¿é—®</p>
<ol>
<li>ç±»çš„æˆå‘˜å‡½æ•°å’Œæˆå‘˜å˜é‡é»˜è®¤æ˜¯ç§æœ‰å±æ€§</li>
<li>ç±»çš„æˆå‘˜å‡½æ•°çš„é»˜è®¤å‚æ•°åªéœ€è¦å£°æ˜ä¸­å®šä¹‰å³å¯ï¼Œä¸éœ€è¦å†æ¬¡åœ¨å‡½æ•°å®šä¹‰ä¸­å†å†™ä¸€æ¬¡ã€‚å¦åˆ™é€ æˆé»˜è®¤å‚æ•°åˆå§‹åŒ–ä¸¤æ¬¡é”™è¯¯ã€‚</li>
<li>åœ¨å‡½æ•°ä¸­åˆ›å»ºåŒ¿åå¯¹è±¡æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ„é€ å®Œåå°±ä¼šç«‹å³ææ„ã€‚</li>
</ol>
<h2 id="æ— å‚æ„é€ å‡½æ•°"><a href="#æ— å‚æ„é€ å‡½æ•°" class="headerlink" title="æ— å‚æ„é€ å‡½æ•°"></a>æ— å‚æ„é€ å‡½æ•°</h2><p>C++é»˜è®¤æä¾›æ— å‚æ„é€ å‡½æ•°ï¼Œå¦‚æœç¨‹åºå‘˜æ‰‹åŠ¨å®šä¹‰äº†æœ‰å‚æ„é€ å‡½æ•°ï¼Œå¿…é¡»åŒæ—¶æä¾›æ— å‚æ„é€ å‡½æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Teacher::Teacher()</span><br><span class="line">&#123;</span><br><span class="line">    this-&gt;name &#x3D; &quot;&quot;;</span><br><span class="line">    this-&gt;age &#x3D; -1;</span><br><span class="line">    this-&gt;pContent &#x3D; NULL;</span><br><span class="line">    cout &lt;&lt; &quot;Teacher:Teacher()æ„é€ å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ— å‚å¯¹è±¡åˆ›å»ºçš„æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Teacher t1;</span><br><span class="line">    Teacher t2 &#x3D; &#123;&#125;;</span><br><span class="line">    Teacher t3 &#x3D; Teacher(); &#x2F;&#x2F; ä¸åˆ›å»ºåŒ¿åå¯¹è±¡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æœ‰å‚æ„é€ å‡½æ•°"><a href="#æœ‰å‚æ„é€ å‡½æ•°" class="headerlink" title="æœ‰å‚æ„é€ å‡½æ•°"></a>æœ‰å‚æ„é€ å‡½æ•°</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; å®šä¹‰ä¸­ä¸è®¾ç½®é»˜è®¤å‚æ•°</span><br><span class="line">Teacher::Teacher(string name, int age, const char* p)</span><br><span class="line">&#123;</span><br><span class="line">	if (p &#x3D;&#x3D; NULL)</span><br><span class="line">		this-&gt;pContent &#x3D; NULL;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		clen &#x3D; strlen(p);</span><br><span class="line">		&#x2F;&#x2F; å †ä¸­ç”³è¯·ç©ºé—´</span><br><span class="line">		this-&gt;pContent &#x3D; new char[clen + 1];</span><br><span class="line">		strcpy(this-&gt;pContent, p);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	this-&gt;name &#x3D; name;</span><br><span class="line">	this-&gt;age &#x3D; age;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„Teacher(int age, string name, char* p)æ„é€ å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰å‚å¯¹è±¡åˆ›å»ºçš„ä¸‰ç§æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; å…ˆåˆ›å»ºçš„å¯¹è±¡æœ€åé‡Šæ”¾</span><br><span class="line">    Teacher t1(&quot;Lucy&quot;, 28);</span><br><span class="line">    Teacher t2 &#x3D; &#123;&quot;Sara&quot;, 28&#125;;</span><br><span class="line">    Teacher t3 &#x3D; Teacher(&quot;Bob&quot;, 28);	&#x2F;&#x2F; ä¸åˆ›å»ºåŒ¿åå¯¹è±¡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ‹·è´æ„é€ å‡½æ•°"><a href="#æ‹·è´æ„é€ å‡½æ•°" class="headerlink" title="æ‹·è´æ„é€ å‡½æ•°"></a>æ‹·è´æ„é€ å‡½æ•°</h2><p>æ‹·è´æ„é€ å‡½æ•°é»˜è®¤æ˜¯æµ…æ‹·è´ï¼Œæ‰€æœ‰çš„æˆå‘˜å˜é‡éƒ½ä¼šæ‹·è´ä¸€ä»½å€¼ã€‚å¦‚æœåœ¨å¤åˆ¶çš„è¿‡ç¨‹ä¸­å­˜åœ¨æŒ‡é’ˆæŒ‡å‘æŸä¸€ä¸ªåŠ¨æ€åˆ†é…çš„å†…å­˜ç©ºé—´ï¼Œåˆ™ä¼šæœ‰ä¸¤ä¸ªæŒ‡é’ˆåŒæ—¶æŒ‡å‘åŒä¸€å—å†…å­˜ç©ºé—´ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ææ„ï¼Œä¼šå¯¼è‡´åŠ¨æ€åˆ†é…çš„å†…å­˜ç©ºé—´è¢«ææ„ã€‚åˆ™å¦ä¸€ä¸ªå¯¹è±¡è®¿é—®è¯¥å†…å­˜ç©ºé—´çš„æ—¶å€™å°±ä¼šå‡ºç°æ®µé”™è¯¯æˆ–è€…ä¹±ç ã€‚</p>
<ul>
<li>æµ…æ‹·è´</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Teacher::Teacher(const Teacher&amp; obj)</span><br><span class="line">&#123;</span><br><span class="line">    this-&gt;age &#x3D; obj.age;</span><br><span class="line">    this-&gt;name &#x3D; obj.name;</span><br><span class="line">    this-&gt;pContent &#x3D; obj.pContent;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„Teacher(const Teacher&amp; obj)æ‹·è´æ„é€ å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; å…ˆåˆ›å»ºçš„å¯¹è±¡æœ€åé‡Šæ”¾</span><br><span class="line">    Teacher t1(&quot;Lucy&quot;, 28, &quot;this is lucy&quot;);</span><br><span class="line">    Teacher t2 &#x3D; t1;    &#x2F;&#x2F; æ­¤æ—¶,æ‹·è´æ„é€ å‡½æ•°æ‰§è¡Œæµ…æ‹·è´</span><br><span class="line">    t1.~Teacher();      &#x2F;&#x2F; ææ„åä¼šé‡Šæ”¾ç©ºé—´</span><br><span class="line">    cout &lt;&lt; t2.getContent() &lt;&lt; endl;    &#x2F;&#x2F; &#x2F;&#x2F; codeblockä¹±ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ·±æ‹·è´</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Teacher::Teacher(const Teacher&amp; obj)</span><br><span class="line">&#123;</span><br><span class="line">	this-&gt;name &#x3D; obj.name;</span><br><span class="line">	this-&gt;age &#x3D; obj.age;</span><br><span class="line"></span><br><span class="line">	if (obj.pContent &#x3D;&#x3D; NULL)</span><br><span class="line">		this-&gt;pContent &#x3D; NULL;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		clen &#x3D; strlen(obj.pContent);</span><br><span class="line">		&#x2F;&#x2F; å †ä¸­ç”³è¯·ç©ºé—´</span><br><span class="line">		this-&gt;pContent &#x3D; new char[clen + 1];</span><br><span class="line">		strcpy(this-&gt;pContent, obj.pContent);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„Teacher(const Teacher&amp; obj)æ‹·è´æ„é€ å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; å…ˆåˆ›å»ºçš„å¯¹è±¡æœ€åé‡Šæ”¾</span><br><span class="line">    Teacher t1(&quot;Lucy&quot;, 28, &quot;this is lucy&quot;);</span><br><span class="line">    Teacher t2 &#x3D; t1;    &#x2F;&#x2F; æ­¤æ—¶,æ‹·è´æ„é€ å‡½æ•°æ‰§è¡Œæµ…æ‹·è´</span><br><span class="line">    t1.~Teacher();      &#x2F;&#x2F; ææ„åä¼šé‡Šæ”¾ç©ºé—´</span><br><span class="line">    cout &lt;&lt; t2.getContent() &lt;&lt; endl;    &#x2F;&#x2F; this is lucy</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç­‰å·æ“ä½œç¬¦"><a href="#ç­‰å·æ“ä½œç¬¦" class="headerlink" title="ç­‰å·æ“ä½œç¬¦"></a>ç­‰å·æ“ä½œç¬¦</h2><p>ç­‰å·æ“ä½œç¬¦C++é»˜è®¤æä¾›æµ…æ‹·è´ã€‚</p>
<ul>
<li>æµ…æ‹·è´</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Teacher&amp; Teacher::operator&#x3D;(Teacher&amp; obj)</span><br><span class="line">&#123;</span><br><span class="line">	this-&gt;name &#x3D; obj.name;</span><br><span class="line">	this-&gt;age &#x3D; obj.age;</span><br><span class="line">    this-&gt;pContent &#x3D; obj.pContent;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„operator&#x3D;(Teacher&amp; obj)ç­‰å·æ“ä½œç¬¦é‡è½½å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Teacher t1 &#x3D; Teacher(&quot;Lucy&quot;, 28, &quot;this is lucy&quot;);	&#x2F;&#x2F; åˆå§‹åŒ–ï¼Œè°ƒç”¨æœ‰å‚æ„é€ å‡½æ•°</span><br><span class="line">    Teacher t2;</span><br><span class="line"></span><br><span class="line">    t2 &#x3D; t1;</span><br><span class="line">    t1.~Teacher();</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; t2.getContent() &lt;&lt; endl;		&#x2F;&#x2F; codeblockä¹±ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ·±æ‹·è´</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; é‡è½½ç­‰å·æ“ä½œç¬¦ï¼Œè¿›è¡Œæ·±æ‹·è´</span><br><span class="line">Teacher&amp; Teacher::operator&#x3D;(Teacher&amp; obj)</span><br><span class="line">&#123;</span><br><span class="line">	this-&gt;name &#x3D; obj.name;</span><br><span class="line">	this-&gt;age &#x3D; obj.age;</span><br><span class="line"></span><br><span class="line">    if (obj.pContent &#x3D;&#x3D; NULL)</span><br><span class="line">		this-&gt;pContent &#x3D; NULL;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		clen &#x3D; strlen(obj.pContent);</span><br><span class="line">		&#x2F;&#x2F; å †ä¸­ç”³è¯·ç©ºé—´</span><br><span class="line">		this-&gt;pContent &#x3D; new char[clen + 1];</span><br><span class="line">		strcpy(this-&gt;pContent, obj.pContent);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„operator&#x3D;(Teacher&amp; obj)ç­‰å·æ“ä½œç¬¦é‡è½½å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>void test()<br>{<br>    Teacher t1 = Teacher(â€œLucyâ€, 28, â€œthis is lucyâ€);    // åˆå§‹åŒ–ï¼Œè°ƒç”¨æœ‰å‚æ„é€ å‡½æ•°<br>    Teacher t2;        // è°ƒç”¨æ— å‚æ„é€ å‡½æ•°</p>
<pre><code>// éåˆå§‹åŒ–ï¼Œè°ƒç”¨ç­‰å·æ“ä½œç¬¦æ“ä½œ
t2 = t1;
t1.~Teacher();

cout &lt;&lt; t2.getContent() &lt;&lt; endl;    // this is lucy
</code></pre><p>}</p>
<h2 id="é‡è½½-lt-lt-æ“ä½œç¬¦"><a href="#é‡è½½-lt-lt-æ“ä½œç¬¦" class="headerlink" title="é‡è½½&lt;&lt;æ“ä½œç¬¦"></a>é‡è½½&lt;&lt;æ“ä½œç¬¦</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ostream&amp; operator&lt;&lt;(ostream&amp; out, const Teacher&amp; obj)</span><br><span class="line">&#123;</span><br><span class="line">    out &lt;&lt; &quot;name&#x3D;&quot; &lt;&lt; obj.name &lt;&lt; &quot;,age&#x3D;&quot; &lt;&lt; obj.age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Teacher t &#x3D; &#123;&quot;simon&quot;, 25&#125;;</span><br><span class="line">    cout &lt;&lt; t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ææ„å‡½æ•°"><a href="#ææ„å‡½æ•°" class="headerlink" title="ææ„å‡½æ•°"></a>ææ„å‡½æ•°</h2><p>C++ç±»ä¸­ä¸ç±»åç›¸åŒï¼Œå¹¶ä¸”ç±»åå‰æœ‰~çš„æˆå‘˜å‡½æ•°å«åšææ„å‡½æ•°ã€‚ææ„å‡½æ•°æ²¡æœ‰å‚æ•°ä¹Ÿæ²¡æœ‰ä»»ä½•è¿”å›å€¼ã€‚<br>åœ¨ç±»å¯¹è±¡é”€æ¯æ—¶è‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Teacher::~Teacher()</span><br><span class="line">&#123;</span><br><span class="line">    if(this-&gt;pContent !&#x3D; NULL)</span><br><span class="line">        delete[] this-&gt;pContent;    &#x2F;&#x2F; ææ„åŠ¨æ€åˆ†é…çš„å†…å­˜ç©ºé—´</span><br><span class="line"></span><br><span class="line">    if(this-&gt;name &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">        cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; &quot;~Teacher()ææ„å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">    else</span><br><span class="line">        cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„~Teacher()çš„ææ„å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ„é€ å‡½æ•°åˆå§‹åŒ–æ–¹æ³•"><a href="#æ„é€ å‡½æ•°åˆå§‹åŒ–æ–¹æ³•" class="headerlink" title="æ„é€ å‡½æ•°åˆå§‹åŒ–æ–¹æ³•"></a>æ„é€ å‡½æ•°åˆå§‹åŒ–æ–¹æ³•</h2><p>æœ¬èŠ‚é€šè¿‡studentç±»è¯´æ˜æ„é€ å‡½æ•°çš„åˆå§‹åŒ–æ–¹æ³•ã€‚</p>
<ol>
<li>å¸¸é‡éœ€è¦åœ¨å®šä¹‰ç±»å¯¹è±¡çš„æ—¶å€™åˆå§‹åŒ–ï¼Œå£°æ˜çš„æ—¶å€™ä¸èƒ½åˆå§‹åŒ–ã€‚</li>
<li>é»˜è®¤å‚æ•°å†™åœ¨å£°æ˜ä¸­ï¼Œä¸è¦å†™åœ¨å®šä¹‰ä¸­ã€‚</li>
<li>åˆå§‹åŒ–åˆ—è¡¨å†™åœ¨å®šä¹‰ä¸­ï¼Œä¸è¦å†™åœ¨å£°æ˜ä¸­ã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &quot;teacher.h&quot;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Student</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	&#x2F;&#x2F; é»˜è®¤å‚æ•°å†™åœ¨å£°æ˜ä¸­ï¼Œä¸è¦å†™åœ¨å®šä¹‰ä¸­</span><br><span class="line">	Student(string name&#x3D;&quot;&quot;, int age&#x3D;-1);</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; åˆå§‹åŒ–åˆ—è¡¨å†™åœ¨å®šä¹‰ä¸­ï¼Œä¸è¦å†™åœ¨å£°æ˜ä¸­</span><br><span class="line">	Student(string name, int age, string m_name, int m_age, string e_name, int e_age);</span><br><span class="line">	virtual ~Student();</span><br><span class="line"></span><br><span class="line">	string getSchoolName();</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    string name;</span><br><span class="line">	int age;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Studentç±»ä¸­åŒ…å«Teacherç±»</span><br><span class="line">	Teacher englishTeacher;</span><br><span class="line">	Teacher mathTeacher;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; å¸¸é‡</span><br><span class="line">	const string schoolName;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>student.cpp</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; å¸¸é‡éœ€è¦åœ¨å®šä¹‰ç±»å¯¹è±¡çš„æ—¶å€™åˆå§‹åŒ–ï¼Œå£°æ˜çš„æ—¶å€™ä¸èƒ½åˆå§‹åŒ–</span><br><span class="line">&#x2F;&#x2F; é»˜è®¤å‚æ•°å†™åœ¨å£°æ˜ä¸­ï¼Œä¸è¦å†™åœ¨å®šä¹‰ä¸­ã€‚</span><br><span class="line">Student::Student(string name, int age) : schoolName(&quot;HIT&quot;)</span><br><span class="line">&#123;</span><br><span class="line">    this-&gt;name &#x3D; name;</span><br><span class="line">    this-&gt;age &#x3D; age;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;Student æ— å‚æ„é€ å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; åˆå§‹åŒ–åˆ—è¡¨å†™åœ¨å®šä¹‰ä¸­ï¼Œä¸è¦å†™åœ¨å£°æ˜ä¸­</span><br><span class="line">&#x2F;&#x2F; Student ç±»ä¸­åŒ…å«Teacher ç±»å¯¹è±¡çš„åˆå§‹åŒ–ï¼ŒTeacher ç±»å¯¹è±¡æŒ‰ç…§å®šä¹‰é¡ºåºè¿›è¡Œåˆå§‹åŒ–ï¼Œæœ€ååˆå§‹åŒ–Student ç±»å¯¹è±¡</span><br><span class="line">&#x2F;&#x2F; ææ„çš„é¡ºåºä¸æ„é€ çš„é¡ºåºç›¸åï¼Œå…ˆææ„Student ç±»å¯¹è±¡ï¼Œç„¶åææ„Teacher ç±»å¯¹è±¡(å…ˆåˆå§‹åŒ–çš„ç±»å¯¹è±¡å…ˆææ„ï¼Œååˆå§‹åŒ–çš„å¯¹è±¡åææ„)</span><br><span class="line">Student::Student(string name, int age, string m_name, int m_age, string e_name, int e_age) : mathTeacher(m_name, m_age), englishTeacher(e_name, e_age), schoolName(&quot;HIT&quot;)</span><br><span class="line">&#123;</span><br><span class="line">    this-&gt;name &#x3D; name;</span><br><span class="line">	this-&gt;age &#x3D; age;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;Student:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;æœ‰å‚æ„é€ å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student::~Student()</span><br><span class="line">&#123;</span><br><span class="line">    if(this-&gt;name &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">        cout &lt;&lt; &quot;Student çš„ææ„å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">    else</span><br><span class="line">        cout &lt;&lt; &quot;Student:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„ææ„å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string Student::getSchoolName()</span><br><span class="line">&#123;</span><br><span class="line">    return this-&gt;schoolName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">	Student student(&quot;Simon&quot;, 25, &quot;Lucy&quot;, 35, &quot;Bob&quot;, 32);</span><br><span class="line">	cout &lt;&lt; student.getSchoolName() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç±»åšå‡½æ•°å‚æ•°ä¸å‡½æ•°è¿”å›å€¼"><a href="#ç±»åšå‡½æ•°å‚æ•°ä¸å‡½æ•°è¿”å›å€¼" class="headerlink" title="ç±»åšå‡½æ•°å‚æ•°ä¸å‡½æ•°è¿”å›å€¼"></a>ç±»åšå‡½æ•°å‚æ•°ä¸å‡½æ•°è¿”å›å€¼</h1><h2 id="ç±»åšå‡½æ•°å‚æ•°è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°"><a href="#ç±»åšå‡½æ•°å‚æ•°è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°" class="headerlink" title="ç±»åšå‡½æ•°å‚æ•°è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°"></a>ç±»åšå‡½æ•°å‚æ•°è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span><br><span class="line">void classAsFormalParameter(Teacher t)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; t.getContent() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ä¸æ„æˆå‡½æ•°é‡è½½</span><br><span class="line">void classAsFormalParameter(Teacher &amp;t)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; t.getContent() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">	Teacher t &#x3D; Teacher(&quot;lucy&quot;, 28, &quot;this is lucy&quot;);   &#x2F;&#x2F; è°ƒç”¨æœ‰å‚æ„é€ å‡½æ•°</span><br><span class="line">	classAsFormalParameter(t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç±»åšå‡½æ•°è¿”å›å€¼è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°"><a href="#ç±»åšå‡½æ•°è¿”å›å€¼è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°" class="headerlink" title="ç±»åšå‡½æ•°è¿”å›å€¼è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°"></a>ç±»åšå‡½æ•°è¿”å›å€¼è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</h2><p>ç±»åšå‡½æ•°è¿”å›å€¼è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°æˆ–ç­‰å·æ“ä½œç¬¦å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªåŒ¿åå¯¹è±¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; ä¸ºä»€ä¹ˆå½¢å‚ä¸èƒ½æ˜¯å¼•ç”¨ï¼ŸåŸå› æ˜¯åŒ¿åå¯¹è±¡æ²¡æœ‰åå­—ï¼Œä¹Ÿå°±æ²¡æœ‰åˆ«å</span><br><span class="line">&#x2F;&#x2F; Teacher&amp; Teacher::operator&#x3D;(Teacher&amp; obj)</span><br><span class="line">Teacher&amp; Teacher::operator&#x3D;(Teacher obj)</span><br><span class="line">&#123;</span><br><span class="line">	this-&gt;name &#x3D; obj.name;</span><br><span class="line">	this-&gt;age &#x3D; obj.age;</span><br><span class="line"></span><br><span class="line">    if (obj.pContent &#x3D;&#x3D; NULL)</span><br><span class="line">		this-&gt;pContent &#x3D; NULL;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		clen &#x3D; strlen(obj.pContent);</span><br><span class="line">		&#x2F;&#x2F; å †ä¸­ç”³è¯·ç©ºé—´</span><br><span class="line">		this-&gt;pContent &#x3D; new char[clen + 1];</span><br><span class="line">		strcpy(this-&gt;pContent, obj.pContent);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„operator&#x3D;(Teacher&amp; obj)ç­‰å·æ“ä½œç¬¦é‡è½½å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Teacher ClassAsReturnValue()</span><br><span class="line">&#123;</span><br><span class="line">	Teacher t &#x3D; &#123;&quot;simon&quot;, 25&#125;;        &#x2F;&#x2F; è°ƒç”¨æœ‰å‚æ„é€ å‡½æ•°</span><br><span class="line"></span><br><span class="line">	return t;                           &#x2F;&#x2F; è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œäº§ç”ŸåŒ¿åå¯¹è±¡</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">	Teacher t1 &#x3D; Teacher(&quot;Lucy&quot;, 28);   &#x2F;&#x2F; è°ƒç”¨æœ‰å‚æ„é€ å‡½æ•°</span><br><span class="line">	t1 &#x3D; ClassAsReturnValue();          &#x2F;&#x2F; è°ƒç”¨ç­‰å·æ“ä½œç¬¦ï¼ŒåŒ¿åå¯¹è±¡è¢«ææ„</span><br><span class="line"></span><br><span class="line">	Teacher t2 &#x3D; ClassAsReturnValue();    &#x2F;&#x2F; ä¸è°ƒç”¨ç­‰å·æ“ä½œç¬¦ï¼ŒåŒ¿åå¯¹è±¡ç›´æ¥ä½œä¸ºt2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- teacher.h</span><br></pre></td></tr></table></figure>
<h1 id="include"><a href="#include" class="headerlink" title="include "></a>include <iostream></h1><h1 id="include-1"><a href="#include-1" class="headerlink" title="include "></a>include <string.h></h1><p>using namespace std;</p>
<p>class Teacher   // Teacheræ˜¯ç±» ç±»å‹<br>{<br>public:<br>    Teacher();<br>    Teacher(string name, int age, const char* p = NULL);<br>    Teacher(const Teacher&amp; obj);<br>    //Teacher&amp; operator=(Teacher obj);<br>    Teacher&amp; operator=(Teacher&amp; obj);<br>    ~Teacher();</p>
<pre><code>char* getContent();
void setContent(const char* p);
</code></pre><p>private:<br>    int age;<br>    string name;<br>    char* pContent;<br>    int clen;<br>};</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- teacher.cpp</span><br></pre></td></tr></table></figure>
<h1 id="include-â€œteacher-hâ€"><a href="#include-â€œteacher-hâ€" class="headerlink" title="include â€œteacher.hâ€"></a>include â€œteacher.hâ€</h1><p>Teacher::Teacher()<br>{<br>    this-&gt;name = â€œâ€;<br>    this-&gt;age = -1;<br>    this-&gt;pContent = NULL;<br>    cout &lt;&lt; â€œTeacher:Teacher()æ„é€ å‡½æ•°â€ &lt;&lt; endl;<br>}</p>
<p>// å®šä¹‰ä¸­ä¸è®¾ç½®é»˜è®¤å‚æ•°<br>Teacher::Teacher(string name, int age, const char* p)<br>{<br>    this-&gt;name = name;<br>    this-&gt;age = age;</p>
<pre><code>if (p == NULL)
    this-&gt;pContent = NULL;
else
{
    clen = strlen(p);
    // å †ä¸­ç”³è¯·ç©ºé—´
    this-&gt;pContent = new char[clen + 1];
    strcpy(this-&gt;pContent, p);
}

cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„Teacher(int age, string name, char* p)æ„é€ å‡½æ•°&quot; &lt;&lt; endl;
</code></pre><p>}</p>
<p>//Teacher::Teacher(const Teacher&amp; obj)<br>//{<br>//    this-&gt;age = obj.age;<br>//    this-&gt;name = obj.name;<br>//    this-&gt;pContent = obj.pContent;<br>//<br>//    cout &lt;&lt; â€œTeacher:â€ &lt;&lt; this-&gt;name &lt;&lt; â€œçš„Teacher(const Teacher&amp; obj)æ‹·è´æ„é€ å‡½æ•°â€ &lt;&lt; endl;<br>//}</p>
<p>Teacher::Teacher(const Teacher&amp; obj)<br>{<br>    this-&gt;name = obj.name;<br>    this-&gt;age = obj.age;</p>
<pre><code>if (obj.pContent == NULL)
    this-&gt;pContent = NULL;
else
{
    clen = strlen(obj.pContent);
    // å †ä¸­ç”³è¯·ç©ºé—´
    this-&gt;pContent = new char[clen + 1];
    strcpy(this-&gt;pContent, obj.pContent);
}

cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„Teacher(const Teacher&amp; obj)æ‹·è´æ„é€ å‡½æ•°&quot; &lt;&lt; endl;
</code></pre><p>}</p>
<p>//Teacher&amp; Teacher::operator=(Teacher&amp; obj)<br>//{<br>//    this-&gt;name = obj.name;<br>//    this-&gt;age = obj.age;<br>//    this-&gt;pContent = obj.pContent;<br>//<br>//    cout &lt;&lt; â€œTeacher:â€ &lt;&lt; this-&gt;name &lt;&lt; â€œçš„operator=(Teacher&amp; obj)ç­‰å·æ“ä½œç¬¦é‡è½½å‡½æ•°â€ &lt;&lt; endl;<br>//<br>//    return *this;<br>//}</p>
<p>//Teacher&amp; Teacher::operator=(Teacher obj)<br>Teacher&amp; Teacher::operator=(Teacher&amp; obj)<br>{<br>    this-&gt;name = obj.name;<br>    this-&gt;age = obj.age;</p>
<pre><code>if (obj.pContent == NULL)
    this-&gt;pContent = NULL;
else
{
    clen = strlen(obj.pContent);
    // å †ä¸­ç”³è¯·ç©ºé—´
    this-&gt;pContent = new char[clen + 1];
    strcpy(this-&gt;pContent, obj.pContent);
}

cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„operator=(Teacher&amp; obj)ç­‰å·æ“ä½œç¬¦é‡è½½å‡½æ•°&quot; &lt;&lt; endl;

return *this;
</code></pre><p>}</p>
<p>Teacher::~Teacher()<br>{<br>    if(this-&gt;pContent != NULL)<br>        delete[] this-&gt;pContent;    // ææ„åŠ¨æ€åˆ†é…çš„å†…å­˜ç©ºé—´</p>
<pre><code>if(this-&gt;name == &quot;&quot;)
    cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; &quot;~Teacher()ææ„å‡½æ•°&quot; &lt;&lt; endl;
else
    cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„~Teacher()çš„ææ„å‡½æ•°&quot; &lt;&lt; endl;
</code></pre><p>}</p>
<p>char* Teacher::getContent()<br>{<br>    return this-&gt;pContent;<br>}</p>
<p>void Teacher::setContent(const char* p)<br>{<br>    if (p == NULL)<br>        this-&gt;pContent = NULL;<br>    else<br>    {<br>        clen = strlen(p);<br>        // å †ä¸­ç”³è¯·ç©ºé—´<br>        this-&gt;pContent = new char[clen + 1];<br>        strcpy(this-&gt;pContent, p);<br>    }<br>}</p>
<p>// è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°<br>void classAsFormalParameter(Teacher t)<br>{<br>    cout &lt;&lt; t.getContent() &lt;&lt; endl;<br>}</p>
<p>//void classAsFormalParameter(Teacher &amp;t)<br>//{<br>//    cout &lt;&lt; t.getContent() &lt;&lt; endl;<br>//}</p>
<p>Teacher ClassAsReturnValue()<br>{<br>    Teacher t = {â€œsimonâ€, 25};        // è°ƒç”¨æœ‰å‚æ„é€ å‡½æ•°</p>
<pre><code>return t;                          // è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œäº§ç”ŸåŒ¿åå¯¹è±¡
</code></pre><p>}</p>
<p>ostream&amp; operator&lt;&lt;(ostream&amp; out, const Teacher&amp; obj)<br>{<br>    out &lt;&lt; â€œname=â€ &lt;&lt; obj.name &lt;&lt; â€œ,age=â€ &lt;&lt; obj.age &lt;&lt; endl;<br>}<br><code>
</code></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ææ„å‡½æ•°è¿˜å­˜åœ¨è™šææ„å‡½æ•°çš„é—®é¢˜ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>cpp</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>22-cpp-é‡è½½</title>
    <url>/2020/02/14/22-cpp-%E9%87%8D%E8%BD%BD/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="å‡½æ•°é‡è½½"><a href="#å‡½æ•°é‡è½½" class="headerlink" title="å‡½æ•°é‡è½½"></a>å‡½æ•°é‡è½½</h1><h2 id="å‡½æ•°é‡è½½çš„æ¡ä»¶"><a href="#å‡½æ•°é‡è½½çš„æ¡ä»¶" class="headerlink" title="å‡½æ•°é‡è½½çš„æ¡ä»¶"></a>å‡½æ•°é‡è½½çš„æ¡ä»¶</h2><p>å‡½æ•°é‡è½½å°±æ˜¯ä½¿ç”¨åŒä¸€ä¸ªå‡½æ•°åå®šä¹‰ä¸åŒçš„å‡½æ•°ã€‚å‡½æ•°é‡è½½å’Œå½¢å‚æœ‰å…³ï¼Œ<font color="red">ä¸è¿”å›å€¼æ— å…³</font>ã€‚<br>å½¢å‚çš„ä¸‰ä¸ªæ¡ä»¶å¯ä»¥äº§ç”Ÿå‡½æ•°é‡è½½ï¼š</p>
<ul>
<li>å‚æ•°ä¸ªæ•°ä¸åŒ</li>
<li>å‚æ•°ç±»å‹ä¸åŒ</li>
<li>å‚æ•°é¡ºåºä¸åŒ</li>
</ul>
<p>é‡è½½å‡½æ•°çš„å‡½æ•°ç±»å‹ä¸åŒï¼Œæœ¬è´¨ä¸Šæ˜¯ç›¸äº’ç‹¬ç«‹çš„ä¸åŒå‡½æ•°ã€‚è®¾è®¡å‡½æ•°é‡è½½æ—¶ï¼Œæ³¨æ„ä¸è¦äº§ç”ŸäºŒä¹‰æ€§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int func(int x)</span><br><span class="line">&#123;</span><br><span class="line">	return x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;é»˜è®¤å‚æ•°å¯¼è‡´äºŒä¹‰æ€§äº§ç”Ÿ</span><br><span class="line">&#x2F;&#x2F;int func(int a, int b&#x3D;0)</span><br><span class="line">&#x2F;&#x2F;&#123;</span><br><span class="line">&#x2F;&#x2F;	return a + b;</span><br><span class="line">&#x2F;&#x2F;&#125;</span><br><span class="line"></span><br><span class="line">int func(int a, int b)</span><br><span class="line">&#123;</span><br><span class="line">	return a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int func(const char* s)</span><br><span class="line">&#123;</span><br><span class="line">	return strlen(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int c &#x3D; 0;</span><br><span class="line"></span><br><span class="line">	c &#x3D; func(1);</span><br><span class="line">	cout &lt;&lt; &quot;c&#x3D;&quot; &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	c &#x3D; func(1, 2);</span><br><span class="line">	cout &lt;&lt; &quot;c&#x3D;&quot; &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	c &#x3D; func(&quot;12345&quot;);</span><br><span class="line">	cout &lt;&lt; &quot;c&#x3D;&quot; &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è¿ç®—ç¬¦é‡è½½"><a href="#è¿ç®—ç¬¦é‡è½½" class="headerlink" title="è¿ç®—ç¬¦é‡è½½"></a>è¿ç®—ç¬¦é‡è½½</h1><p>è¿ç®—ç¬¦é‡è½½æœ¬è´¨ä¸Šå°±æ˜¯å‡½æ•°ï¼Œå¯ä»¥å†™æˆå…¨å±€å‡½æ•°çš„å½¢å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; è¿ç®—ç¬¦æœ¬è´¨ä¸Šæ˜¯å‡½æ•°ï¼Œé€šè¿‡å‡½æ•°å½¢å¼ä¹Ÿå¯ä»¥è°ƒç”¨</span><br><span class="line">&#x2F;&#x2F; operator+ç»è¿‡å˜æˆç±»çš„æˆå‘˜å‡½æ•°æˆ–è€…å‹å…ƒå‡½æ•°å°±å¯ä»¥é€šè¿‡è¿ç®—ç¬¦çš„å½¢å¼è®¿é—®</span><br><span class="line">Complexes operator+(Complexes &amp;c1, Complexes &amp;c2) &#123;</span><br><span class="line"></span><br><span class="line">	Complexes tmp(c1.getA() + c2.getA(), c1.getB() + c2.getB());</span><br><span class="line"></span><br><span class="line">	return tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æˆå‘˜å‡½æ•°å½¢å¼ï¼š</span><br><span class="line">Complexes operator-(Complexes&amp; c) &#123;</span><br><span class="line">	return Complexes(this-&gt;a - c.a, this-&gt;b - c.b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å‹å…ƒå‡½æ•°å£°æ˜</span><br><span class="line">friend Complexes operator*(Complexes&amp; c1, Complexes&amp; c2);</span><br><span class="line">&#x2F;&#x2F; å‹å…ƒå‡½æ•°</span><br><span class="line">Complexes operator*(Complexes&amp; c1, Complexes&amp; c2) &#123;</span><br><span class="line">	return Complexes((c1.a*c2.a - c1.b*c2.b), </span><br><span class="line">		(c1.a*c2.b + c2.a*c1.b));</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; ä¸å…¨å±€å‡½æ•°å¯¹æ¯”å¯çŸ¥ï¼Œå…¨å±€å‡½æ•°ä¸èƒ½ç›´æ¥è®¿é—®ç±»çš„ç§æœ‰å±æ€§ï¼Œä½†æ˜¯å‹å…ƒå‡½æ•°å¯ä»¥</span><br></pre></td></tr></table></figure>
<h2 id="è¿ç®—ç¬¦é‡è½½ï¼š-lt-lt-gt-gt-lt-gt"><a href="#è¿ç®—ç¬¦é‡è½½ï¼š-lt-lt-gt-gt-lt-gt" class="headerlink" title="è¿ç®—ç¬¦é‡è½½ï¼š&lt;&lt; &gt;&gt; == != [] &lt; &gt;"></a>è¿ç®—ç¬¦é‡è½½ï¼š&lt;&lt; &gt;&gt; == != [] &lt; &gt;</h2><p>è¿ç®—ç¬¦é‡è½½æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚è¿ç®—ç¬¦é‡è½½æœ‰ä¸¤ç§æ–¹å¼ï¼šå‹å…ƒå‡½æ•°å½¢å¼å’Œæˆå‘˜å‡½æ•°å½¢å¼ã€‚<br>ä¸€èˆ¬é‡è½½ è¾“å…¥å’Œè¾“å‡ºæ“ä½œç¬¦ ä½¿ç”¨å‹å…ƒå‡½æ•°ï¼Œé‡è½½å…¶ä»–æ“ä½œç¬¦ä½¿ç”¨æˆå‘˜å‡½æ•°ã€‚</p>
<p>å¯ä»¥é‡è½½çš„è¿ç®—ç¬¦<br><img src="/images/29-cpp-é‡è½½/01-å¯é‡è½½çš„è¿ç®—ç¬¦.png" alt="&quot;01-å¯é‡è½½çš„è¿ç®—ç¬¦&quot;"></p>
<p>é‡è½½è¿ç®—ç¬¦å‡½æ•°å¯ä»¥å¯¹è¿ç®—ç¬¦åšå‡ºæ–°çš„è§£é‡Šï¼Œä½†åŸæœ‰åŸºæœ¬è¯­ä¹‰ä¸å˜ï¼š</p>
<ul>
<li>ä¸æ”¹å˜è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§</li>
<li>ä¸æ”¹å˜è¿ç®—ç¬¦çš„ç»“åˆæ€§</li>
<li>ä¸æ”¹å˜è¿ç®—ç¬¦æ‰€éœ€è¦çš„æ“ä½œæ•°</li>
<li>ä¸èƒ½åˆ›å»ºæ–°çš„è¿ç®—ç¬¦</li>
</ul>
<p>è¿ç®—ç¬¦ä¸ç»“åˆæ€§ï¼š<br><img src="/images/29-cpp-é‡è½½/02-è¿ç®—ç¬¦å’Œç»“åˆæ€§ä¸€.png" alt="&quot;02-è¿ç®—ç¬¦å’Œç»“åˆæ€§ä¸€&quot;"><br><img src="/images/29-cpp-é‡è½½/03-è¿ç®—ç¬¦å’Œç»“åˆæ€§äºŒ.png" alt="&quot;03-è¿ç®—ç¬¦å’Œç»“åˆæ€§äºŒ&quot;"></p>
<h3 id="MyStringé‡è½½æ¡ˆä¾‹"><a href="#MyStringé‡è½½æ¡ˆä¾‹" class="headerlink" title="MyStringé‡è½½æ¡ˆä¾‹"></a>MyStringé‡è½½æ¡ˆä¾‹</h3><ul>
<li>MyString</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#pragma once</span><br><span class="line"></span><br><span class="line">#define _CRT_SECURE_NO_WARNINGS</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class MyString</span><br><span class="line">&#123;</span><br><span class="line">	friend ostream&amp; operator&lt;&lt;(ostream&amp; out, MyString&amp; s);</span><br><span class="line">	friend istream&amp; operator&gt;&gt;(istream&amp; in, MyString&amp; s);</span><br><span class="line">public:</span><br><span class="line">	MyString(int len &#x3D; 0);</span><br><span class="line">	MyString(const char* p);</span><br><span class="line">	MyString(const MyString&amp; s);</span><br><span class="line">	~MyString();</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; é‡è½½ç­‰å·æ“ä½œç¬¦</span><br><span class="line">	MyString&amp; operator&#x3D;(MyString&amp; s);</span><br><span class="line">	MyString&amp; operator&#x3D;(const char* p);</span><br><span class="line">	&#x2F;&#x2F; é‡è½½[] æ“ä½œç¬¦</span><br><span class="line">	char&amp; operator[](int index);</span><br><span class="line">	&#x2F;&#x2F; é‡è½½ &#x3D;&#x3D; æ“ä½œç¬¦</span><br><span class="line">	&#x2F;&#x2F; constè¡¨ç¤º thiså¸¸é‡æŒ‡é’ˆæ‰€æŒ‡å‘çš„ç©ºé—´ä¸ºå¸¸é‡ï¼Œä¸å¯ä¿®æ”¹</span><br><span class="line">	bool operator&#x3D;&#x3D;(const MyString&amp; s) const;</span><br><span class="line">	&#x2F;&#x2F; é‡è½½ !&#x3D; æ“ä½œç¬¦</span><br><span class="line">	bool operator!&#x3D;(const MyString&amp; s) const;</span><br><span class="line">	&#x2F;&#x2F; é‡è½½ &gt; æ“ä½œç¬¦</span><br><span class="line">	int operator&gt;(const MyString&amp; s) const;</span><br><span class="line">	&#x2F;&#x2F; é‡è½½ &lt; æ“ä½œç¬¦</span><br><span class="line">	int operator&lt;(const MyString&amp; s) const;</span><br><span class="line"></span><br><span class="line">	int getLength();</span><br><span class="line">	void setLength(int len);</span><br><span class="line">	</span><br><span class="line">private:</span><br><span class="line">	int len;</span><br><span class="line">	char* p;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>MyString.cpp</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &quot;pch.h&quot;</span><br><span class="line">#include &quot;MyString.h&quot;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; è¿”å›å¼•ç”¨ä»¥ä¾¿ è¿ç»­è¾“å‡º</span><br><span class="line">ostream&amp; operator&lt;&lt;(ostream&amp; out, MyString&amp; s) &#123;</span><br><span class="line">	cout &lt;&lt; s.p;</span><br><span class="line"></span><br><span class="line">	return out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">istream&amp; operator&gt;&gt;(istream&amp; in, MyString&amp; s) &#123;</span><br><span class="line">	cin &gt;&gt; s.p;</span><br><span class="line"></span><br><span class="line">	return in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyString::MyString(int len)&#123;</span><br><span class="line">	if (len &#x3D;&#x3D; 0) &#123;</span><br><span class="line">		this-&gt;len &#x3D; 0;</span><br><span class="line">		this-&gt;p &#x3D; new char[this-&gt;len + 1];</span><br><span class="line">		strcpy(this-&gt;p, &quot;&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	else &#123;</span><br><span class="line">		this-&gt;len &#x3D; len;</span><br><span class="line">		this-&gt;p &#x3D; new char[this-&gt;len + 1];</span><br><span class="line">		memset(this-&gt;p, 0, this-&gt;len);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyString::MyString(const char* p)&#123;</span><br><span class="line">	if (p &#x3D;&#x3D; NULL) &#123;</span><br><span class="line">		this-&gt;len &#x3D; 0;</span><br><span class="line">		this-&gt;p &#x3D; new char[this-&gt;len + 1];</span><br><span class="line">		strcpy(this-&gt;p, &quot;&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	else &#123;</span><br><span class="line">		this-&gt;len &#x3D; strlen(p);</span><br><span class="line">		this-&gt;p &#x3D; new char[this-&gt;len + 1];</span><br><span class="line">		strcpy(this-&gt;p, p);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyString::MyString(const MyString&amp; s) &#123;</span><br><span class="line">	this-&gt;len &#x3D; s.len;</span><br><span class="line">	this-&gt;p &#x3D; new char[this-&gt;len + 1];</span><br><span class="line">	strcpy(this-&gt;p, s.p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; è¿”å›å¼•ç”¨ä»¥ä¾¿è¿ç»­èµ‹å€¼</span><br><span class="line">MyString&amp; MyString::operator&#x3D;(MyString&amp; s)&#123;</span><br><span class="line">	if (this-&gt;p !&#x3D; NULL) &#123;</span><br><span class="line">		delete[] this-&gt;p;</span><br><span class="line">		this-&gt;p &#x3D; NULL;</span><br><span class="line">		this-&gt;len &#x3D; 0;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	this-&gt;len &#x3D; s.len;</span><br><span class="line">	this-&gt;p &#x3D; new char[this-&gt;len + 1];</span><br><span class="line">	strcpy(this-&gt;p, s.p);</span><br><span class="line"></span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyString&amp; MyString::operator&#x3D;(const char* p)&#123;</span><br><span class="line">	if (this-&gt;p !&#x3D; NULL) &#123;</span><br><span class="line">		delete[] this-&gt;p;</span><br><span class="line">		this-&gt;p &#x3D; NULL;</span><br><span class="line">		this-&gt;len &#x3D; 0;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	this-&gt;len &#x3D; strlen(p);</span><br><span class="line">	this-&gt;p &#x3D; new char[this-&gt;len + 1];</span><br><span class="line">	strcpy(this-&gt;p, p);</span><br><span class="line"></span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">char&amp; MyString::operator[](int index) &#123;</span><br><span class="line">	return this-&gt;p[index];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool MyString::operator&#x3D;&#x3D;(const MyString&amp; s) const &#123;</span><br><span class="line">	if (this-&gt;len !&#x3D; s.len)</span><br><span class="line">		return false;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; strcmpç›¸ç­‰è¿”å›0 å¤§äºè¿”å›1 å°äºè¿”å›-1</span><br><span class="line">	return !strcmp(this-&gt;p, s.p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool MyString::operator!&#x3D;(const MyString&amp; s) const</span><br><span class="line">&#123;</span><br><span class="line">	return !(*this &#x3D;&#x3D; s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int MyString::operator&gt;(const MyString&amp; s) const &#123;</span><br><span class="line">	return strcmp(this-&gt;p, s.p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int MyString::operator&lt;(const MyString&amp; s) const &#123;</span><br><span class="line">	return strcmp(s.p, this-&gt;p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyString::~MyString()&#123;</span><br><span class="line">	if (this-&gt;p !&#x3D; NULL) &#123;</span><br><span class="line">		delete[] this-&gt;p;</span><br><span class="line">		this-&gt;len &#x3D; 0;</span><br><span class="line">		this-&gt;p &#x3D; NULL;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void MyString::setLength(int len)</span><br><span class="line">&#123;</span><br><span class="line">	this-&gt;len &#x3D; len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int MyString::getLength()</span><br><span class="line">&#123;</span><br><span class="line">	return this-&gt;len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å‰ç½®-åç½®-å’Œâ€”çš„é‡è½½"><a href="#å‰ç½®-åç½®-å’Œâ€”çš„é‡è½½" class="headerlink" title="å‰ç½®/åç½®++å’Œâ€”çš„é‡è½½"></a>å‰ç½®/åç½®++å’Œâ€”çš„é‡è½½</h2><p>å‰ç½®/åç½®++å’Œâ€”çš„è¿ç®—ç¬¦é‡è½½å‡½æ•°çš„å‡½æ•°åå’Œå‚æ•°ç›¸åŒï¼Œä¸ºäº†åŒºåˆ†å‰ç½®/åç½®ã€‚å‰ç½®â€”éœ€è¦åŠ ä¸Šå ä½å‚æ•°ã€‚<br>å¹¶ä¸”å‰ç½®â€”è¿”å›å€¼å¼•ç”¨ï¼ŒåŸå› æ˜¯â€”c1 æ˜¯å…ˆå¯¹ c1 çš„å€¼å‡1ï¼Œç„¶åè¿”å›ã€‚åç½®â€”è¿”å›æ™®é€šå˜é‡ï¼ŒåŸå› æ˜¯åç½®â€”æ˜¯å…ˆè¿”å›å€¼ï¼Œç„¶åå‡1ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; c1--;	&#x2F;&#x2F; å--</span><br><span class="line">Complexes operator--(int) &#123;</span><br><span class="line">	Complexes tmp &#x3D; *this;</span><br><span class="line">	this-&gt;a--;</span><br><span class="line">	this-&gt;b--;</span><br><span class="line"></span><br><span class="line">	return tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; --c1;	&#x2F;&#x2F; å‰--</span><br><span class="line">Complexes&amp; operator--() &#123;</span><br><span class="line">	this-&gt;a--;</span><br><span class="line">	this-&gt;b--;</span><br><span class="line"></span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; c2++;	&#x2F;&#x2F; å++</span><br><span class="line">Complexes operator++(int) &#123;</span><br><span class="line">	Complexes tmp &#x3D; *this;</span><br><span class="line">	this-&gt;a++;</span><br><span class="line">	this-&gt;b++;</span><br><span class="line"></span><br><span class="line">	return tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ++c2;	&#x2F;&#x2F; å‰++	</span><br><span class="line">&#x2F;&#x2F; æ³¨æ„ï¼šå‰++è¿”å›çš„æ˜¯å˜é‡ï¼Œä¸æ˜¯å¼•ç”¨</span><br><span class="line">Complexes&amp; operator++() &#123;</span><br><span class="line">	this-&gt;a++;</span><br><span class="line">	this-&gt;b++;</span><br><span class="line"></span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Complexes.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#pragma once</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Complexes</span><br><span class="line">&#123;</span><br><span class="line">	friend Complexes operator*(Complexes&amp; c1, Complexes&amp; c2);</span><br><span class="line">public:</span><br><span class="line">	Complexes(int a &#x3D; 0, int b &#x3D; 0);</span><br><span class="line">	~Complexes();</span><br><span class="line"></span><br><span class="line">	int getA();</span><br><span class="line">	int getB();</span><br><span class="line">	void getComplexes();</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; å˜æˆæˆå‘˜å‡½æ•°</span><br><span class="line">	Complexes operator-(Complexes&amp; c);</span><br><span class="line">	&#x2F;&#x2F; c1--;	&#x2F;&#x2F; å--</span><br><span class="line">	Complexes operator--(int);</span><br><span class="line">	&#x2F;&#x2F; --c1;	&#x2F;&#x2F; å‰--</span><br><span class="line">	Complexes&amp; operator--();</span><br><span class="line">	&#x2F;&#x2F; c2++;	&#x2F;&#x2F; å++</span><br><span class="line">	Complexes operator++(int);</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; ++c2;	&#x2F;&#x2F; å‰++	</span><br><span class="line">	&#x2F;&#x2F; æ³¨æ„ï¼šå‰++è¿”å›çš„æ˜¯å˜é‡ï¼Œä¸æ˜¯å¼•ç”¨</span><br><span class="line">	Complexes&amp; operator++();</span><br><span class="line">private:</span><br><span class="line">	int a;</span><br><span class="line">	int b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Complexes operator+(Complexes &amp;c1, Complexes &amp;c2);</span><br></pre></td></tr></table></figure>
<ul>
<li>Complexes.cpp</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &quot;pch.h&quot;</span><br><span class="line">#include &quot;Complexes.h&quot;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; è¿ç®—ç¬¦æœ¬è´¨ä¸Šæ˜¯å‡½æ•°ï¼Œé€šè¿‡å‡½æ•°å½¢å¼ä¹Ÿå¯ä»¥è°ƒç”¨</span><br><span class="line">&#x2F;&#x2F; operator+ç»è¿‡å˜æˆç±»çš„æˆå‘˜å‡½æ•°æˆ–è€…å‹å…ƒå‡½æ•°å°±å¯ä»¥é€šè¿‡è¿ç®—ç¬¦çš„å½¢å¼è®¿é—®</span><br><span class="line">Complexes operator+(Complexes &amp;c1, Complexes &amp;c2) &#123;</span><br><span class="line"></span><br><span class="line">	Complexes tmp(c1.getA() + c2.getA(), c1.getB() + c2.getB());</span><br><span class="line"></span><br><span class="line">	return tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Complexes operator*(Complexes&amp; c1, Complexes&amp; c2) &#123;</span><br><span class="line">	return Complexes((c1.a*c2.a - c1.b*c2.b),</span><br><span class="line">		(c1.a*c2.b + c2.a*c1.b));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Complexes::Complexes(int a &#x3D; 0, int b &#x3D; 0) &#123;</span><br><span class="line">	this-&gt;a &#x3D; a;</span><br><span class="line">	this-&gt;b &#x3D; b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int Complexes::getA() &#123;</span><br><span class="line">	return this-&gt;a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int Complexes::getB() &#123;</span><br><span class="line">	return this-&gt;b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Complexes::getComplexes() &#123;</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; &quot;+&quot; &lt;&lt; b &lt;&lt; &quot;i&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å˜æˆæˆå‘˜å‡½æ•°</span><br><span class="line">Complexes Complexes::operator-(Complexes&amp; c) &#123;</span><br><span class="line">	return Complexes(this-&gt;a - c.a, this-&gt;b - c.b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; c1--;	&#x2F;&#x2F; å--</span><br><span class="line">Complexes Complexes::operator--(int) &#123;</span><br><span class="line">	Complexes tmp &#x3D; *this;</span><br><span class="line">	this-&gt;a--;</span><br><span class="line">	this-&gt;b--;</span><br><span class="line"></span><br><span class="line">	return tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Complexes&amp; Complexes::operator--() &#123;</span><br><span class="line">	this-&gt;a--;</span><br><span class="line">	this-&gt;b--;</span><br><span class="line"></span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; c2++;	&#x2F;&#x2F; å++</span><br><span class="line">Complexes Complexes::operator++(int) &#123;</span><br><span class="line">	Complexes tmp &#x3D; *this;</span><br><span class="line">	this-&gt;a++;</span><br><span class="line">	this-&gt;b++;</span><br><span class="line"></span><br><span class="line">	return tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Complexes&amp; Complexes::operator++() &#123;</span><br><span class="line">	this-&gt;a++;</span><br><span class="line">	this-&gt;b++;</span><br><span class="line"></span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Complexes::~Complexes()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é€»è¾‘è¿ç®—ç¬¦-amp-amp-å’Œ-çš„é‡è½½"><a href="#é€»è¾‘è¿ç®—ç¬¦-amp-amp-å’Œ-çš„é‡è½½" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦&amp;&amp;å’Œ||çš„é‡è½½"></a>é€»è¾‘è¿ç®—ç¬¦&amp;&amp;å’Œ||çš„é‡è½½</h2><p>é€»è¾‘è¿ç®—ç¬¦çš„çŸ­è·¯è§„åˆ™é‡è½½ä¹‹åä¸èµ·ä½œç”¨ã€‚çŸ­è·¯è§„åˆ™æ˜¯æŒ‡ä¸¤ä¸ªå…ƒç´ åšé€»è¾‘è¿ç®—ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ å°±ä¸æ»¡è¶³é€»è¾‘è¿ç®—å°±ä¼šç›´æ¥è¾“å‡ºç»“æœã€‚<br>å¦‚ a=0, b=1ã€‚a &amp;&amp; b ä¸ä¼šè®¡ç®— bï¼Œå› ä¸º a=0 è¡¨ç¤ºé€»è¾‘ä¸çš„ç»“æœä¸º0ï¼›<br>åœ¨å¦‚ a=1, b=0ã€‚a || b ä¸ä¼šè®¡ç®— bï¼Œå› ä¸º a=1 è¡¨ç¤ºé€»è¾‘æˆ–çš„ç»“æœä¸º1ã€‚<br>ä½†æ˜¯é‡è½½ä¹‹åï¼ŒçŸ­è·¯è§„åˆ™å¤±æ•ˆã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Test &#123;</span><br><span class="line">public:</span><br><span class="line">	Test(int i&#x3D;0) &#123;</span><br><span class="line">		this-&gt;i &#x3D; i;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	Test operator+(const Test&amp; obj) &#123;</span><br><span class="line">		Test tmp;</span><br><span class="line"></span><br><span class="line">		cout &lt;&lt; &quot;operator+è¢«æ‰§è¡Œ&quot; &lt;&lt; endl;</span><br><span class="line">		return Test(this-&gt;i + obj.i);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	bool operator&amp;&amp;(const Test&amp; obj) &#123;</span><br><span class="line">		cout &lt;&lt; &quot;operator&amp;&amp;è¢«æ‰§è¡Œ&quot; &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">		return this-&gt;i &amp;&amp; obj.i;</span><br><span class="line">	&#125;</span><br><span class="line">private:</span><br><span class="line">	int i;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Test t1, t2(0);</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; + çš„ä¼˜å…ˆçº§ é«˜äº &amp;&amp;</span><br><span class="line">	if (t2 &amp;&amp; t1 + t2)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; &quot;&amp;&amp;çš„é‡è½½æ— æ³•å®ç°çŸ­è·¯è§„åˆ™&quot; &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é‡è½½ã€é‡å†™ã€é‡å®šä¹‰"><a href="#é‡è½½ã€é‡å†™ã€é‡å®šä¹‰" class="headerlink" title="é‡è½½ã€é‡å†™ã€é‡å®šä¹‰"></a>é‡è½½ã€é‡å†™ã€é‡å®šä¹‰</h1><p>å‡½æ•°é‡è½½ï¼šå¿…é¡»åœ¨åŒä¸€ä¸ªç±»ä¸­è¿›è¡Œï¼Œå­ç±»æ— æ³•é‡è½½çˆ¶ç±»çš„å‡½æ•°ï¼Œçˆ¶ç±»åŒåå‡½æ•°å°†è¢«<font color="red">åç§°è¦†ç›–</font>ï¼Œé‡è½½æ˜¯åœ¨ç¼–è¯‘æœŸé—´æ ¹æ®å‚æ•°ç±»å‹å’Œä¸ªæ•°å†³å®šå‡½æ•°è°ƒç”¨ã€‚<br>å‡½æ•°é‡å†™ï¼šå‘ç”Ÿåœ¨çˆ¶ç±»å’Œå­ç±»ä¹‹é—´ï¼Œå¹¶ä¸”çˆ¶ç±»å’Œå­ç±»çš„å‡½æ•°å¿…é¡»åç§°ç›¸åŒã€‚<br>è‹¥çˆ¶ç±»å’Œå­ç±»ä¹‹é—´åç§°ç›¸åŒçš„å‡½æ•°æ²¡æœ‰åŠ virtualå…³é”®å­—ï¼Œåˆ™ç§°ä¸ºé‡å®šä¹‰ã€‚<br>è‹¥çˆ¶ç±»å’Œå­ç±»ä¹‹é—´åç§°ç›¸åŒçš„å‡½æ•°æœ‰åŠ ä¸Švirtualå…³é”®å­—ï¼Œåˆ™æ„æˆå¤šæ€ã€‚</p>
<ul>
<li>overLoadAndoverWrite.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Parent()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Parent(int i)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent()&quot; &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; åŒä¸ªç±»ä¸­å‡½æ•°åç§°ç›¸åŒçš„å‡½æ•°æ„æˆå‡½æ•°é‡è½½</span><br><span class="line">    void func()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent::func()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    virtual void func(int i)    &#x2F;&#x2F; æ„æˆå¤šæ€</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent::func(int)&quot; &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void func(int i, int j)     &#x2F;&#x2F; æ„æˆå‡½æ•°é‡å®šä¹‰</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent::func(int, int)&quot; &lt;&lt; i &lt;&lt; &quot; &quot; &lt;&lt; j &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Child() &#x2F;&#x2F; é»˜è®¤è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•°</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; çˆ¶ç±»å’Œå­ç±»ä¸­å‡½æ•°åç§°ç›¸åŒçš„å‡½æ•°æ„æˆå‡½æ•°é‡å†™</span><br><span class="line">    virtual void func(int i)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child::func(int)&quot; &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void func(int i, int j)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child::func(int, int)&quot; &lt;&lt; i &lt;&lt; &quot; &quot; &lt;&lt; j &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void run(Parent* p)</span><br><span class="line">&#123;</span><br><span class="line">    p-&gt;func(1);     &#x2F;&#x2F; æœ‰virtualå…³é”®å­—,å¤šæ€</span><br><span class="line">    p-&gt;func(1, 2);  &#x2F;&#x2F; ä¸æ„æˆå¤šæ€,ä¼šä¸€ç›´è°ƒç”¨çˆ¶ç±»çš„void func(int, int)å‡½æ•°</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Parent p &#x3D; Parent();</span><br><span class="line">    Child c &#x3D; Child();  &#x2F;&#x2F; ä¼šè°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•°</span><br><span class="line">&#x2F;&#x2F;    c.func();   &#x2F;&#x2F; error,ç”±äºçˆ¶ç±»å’Œå­ç±»ä¹‹é—´æ˜¯å‡½æ•°é‡å†™,</span><br><span class="line">&#x2F;&#x2F; å­ç±»é‡å†™çˆ¶ç±»åŒåç§°çš„å‡½æ•°ï¼Œæ­¤æ—¶çˆ¶ç±»çš„åŒåç§°å‡½æ•°éœ€è¦åŠ ä¸Šçˆ¶ç±»æ ‡è¯†æ‰å¯ä»¥è°ƒç”¨</span><br><span class="line">    c.Parent::func();</span><br><span class="line"></span><br><span class="line">    run(&amp;p);</span><br><span class="line">    run(&amp;c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é‡è½½éœ€è¦æŒæ¡ï¼šå‡½æ•°é‡è½½çš„æ¡ä»¶ï¼›è¿ç®—ç¬¦é‡è½½ï¼›é‡è½½ã€é‡å†™å’Œé‡å®šä¹‰çš„åŒºåˆ«ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>cpp</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>23-cpp-ç»§æ‰¿</title>
    <url>/2020/02/14/23-cpp-%E7%BB%A7%E6%89%BF/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h1><h2 id="ç»§æ‰¿çš„å®šä¹‰"><a href="#ç»§æ‰¿çš„å®šä¹‰" class="headerlink" title="ç»§æ‰¿çš„å®šä¹‰"></a>ç»§æ‰¿çš„å®šä¹‰</h2><p>è‹¥ç±»Bç»§æ‰¿è‡ªç±»Aï¼Œåˆ™ç§°ç±»Bä¸ºæ´¾ç”Ÿç±»(å­ç±»)ï¼Œç±»Aä¸ºåŸºç±»(çˆ¶ç±»)ã€‚<br>æ´¾ç”Ÿç±»çš„å®šä¹‰:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class æ´¾ç”Ÿç±»å : åŸºç±»åè¡¨</span><br><span class="line">&#123;</span><br><span class="line">  æ•°æ®æˆå‘˜å’Œæˆå‘˜å‡½æ•°å£°æ˜</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">åŸºç±»åè¡¨æ„æˆ:</span><br><span class="line">  è®¿é—®æ§åˆ¶ åŸºç±»å1, è®¿é—®æ§åˆ¶ åŸºç±»å2, ... , è®¿é—®æ§åˆ¶ åŸºç±»ån</span><br><span class="line">è®¿é—®æ§åˆ¶:</span><br><span class="line">  public&#x2F;protected&#x2F;private</span><br></pre></td></tr></table></figure>
<h2 id="ç»§æ‰¿çš„è¯´æ˜"><a href="#ç»§æ‰¿çš„è¯´æ˜" class="headerlink" title="ç»§æ‰¿çš„è¯´æ˜"></a>ç»§æ‰¿çš„è¯´æ˜</h2><ol>
<li>å­ç±»æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°</li>
<li>å­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»æ²¡æœ‰çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°</li>
<li>å­ç±»å¯¹è±¡å¯ä»¥å½“ä½œçˆ¶ç±»å¯¹è±¡ä½¿ç”¨</li>
</ol>
<h2 id="ä¸åŒè®¿é—®æ§åˆ¶çš„ç»§æ‰¿æ–¹å¼è§£æ"><a href="#ä¸åŒè®¿é—®æ§åˆ¶çš„ç»§æ‰¿æ–¹å¼è§£æ" class="headerlink" title="ä¸åŒè®¿é—®æ§åˆ¶çš„ç»§æ‰¿æ–¹å¼è§£æ"></a>ä¸åŒè®¿é—®æ§åˆ¶çš„ç»§æ‰¿æ–¹å¼è§£æ</h2><ul>
<li>publicInherit.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Parent</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    int a;</span><br><span class="line">protected:</span><br><span class="line">    int b;</span><br><span class="line">private:</span><br><span class="line">    int c;</span><br><span class="line">public:</span><br><span class="line">    Parent(int a&#x3D;0, int b&#x3D;0, int c&#x3D;0)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;a &#x3D; a;</span><br><span class="line">        this-&gt;b &#x3D; b;</span><br><span class="line">        this-&gt;c &#x3D; c;</span><br><span class="line">        cout &lt;&lt; &quot;Parent(int a&#x3D;0, int b&#x3D;0, int c&#x3D;0)&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void set(int a, int b, int c)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;a &#x3D; a;</span><br><span class="line">        this-&gt;b &#x3D; b;</span><br><span class="line">        this-&gt;c &#x3D; c;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; &quot;c &#x3D; &quot; &lt;&lt; c &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Child() &#x2F;&#x2F; é»˜è®¤è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•°</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">&#x2F;&#x2F;        Parent::print();</span><br><span class="line">      cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;    &#x2F;&#x2F; å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„å…¬æœ‰æˆå‘˜</span><br><span class="line">		  cout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;    &#x2F;&#x2F; å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„ä¿æŠ¤æˆå‘˜</span><br><span class="line">&#x2F;&#x2F;		cout &lt;&lt; &quot;c &#x3D; &quot; &lt;&lt; c &lt;&lt; endl;    &#x2F;&#x2F; å­ç±»ä¸èƒ½è®¿é—®çˆ¶ç±»çš„ç§æœ‰æˆå‘˜</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Parent p;</span><br><span class="line">    Child c;</span><br><span class="line"></span><br><span class="line">    p.a &#x3D; 100;  &#x2F;&#x2F; publicåœ¨ç±»çš„å¤–éƒ¨å¯ä»¥è®¿é—®</span><br><span class="line">    &#x2F;&#x2F;p.b &#x3D; 200;  &#x2F;&#x2F; protectedåœ¨ç±»çš„å¤–éƒ¨ä¸èƒ½è®¿é—®</span><br><span class="line">    &#x2F;&#x2F;p.c &#x3D; 300;  &#x2F;&#x2F; privateåœ¨ç±»çš„å¤–éƒ¨ä¸èƒ½è®¿é—®</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å…¬æœ‰ç»§æ‰¿ä¼šä¿æŒçˆ¶ç±»åŸæœ‰çš„è®¿é—®æ§åˆ¶,åœ¨ç±»å¤–çš„è®¿é—®ç»“æœåŒä¸Š</span><br><span class="line">    c.a &#x3D; 100;    &#x2F;&#x2F; public</span><br><span class="line">&#x2F;&#x2F;    c.b &#x3D; 200;    &#x2F;&#x2F; protected</span><br><span class="line">&#x2F;&#x2F;    c.c &#x3D; 300;    &#x2F;&#x2F; private</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å…¬æœ‰ç»§æ‰¿ä¼šä¿æŒçˆ¶ç±»åŸæœ‰çš„è®¿é—®æ§åˆ¶,å­ç±»ä¸èƒ½è®¿é—®çˆ¶ç±»çš„privateæˆå‘˜</span><br><span class="line">    c.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>protectedInherit.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Parent</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    int a;</span><br><span class="line">protected:</span><br><span class="line">    int b;</span><br><span class="line">private:</span><br><span class="line">    int c;</span><br><span class="line">public:</span><br><span class="line">    Parent(int a&#x3D;0, int b&#x3D;0, int c&#x3D;0)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;a &#x3D; a;</span><br><span class="line">        this-&gt;b &#x3D; b;</span><br><span class="line">        this-&gt;c &#x3D; c;</span><br><span class="line">        cout &lt;&lt; &quot;Parent(int a&#x3D;0, int b&#x3D;0, int c&#x3D;0)&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void set(int a, int b, int c)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;a &#x3D; a;</span><br><span class="line">        this-&gt;b &#x3D; b;</span><br><span class="line">        this-&gt;c &#x3D; c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; &quot;c &#x3D; &quot; &lt;&lt; c &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : protected Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Child() &#x2F;&#x2F; é»˜è®¤è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•°</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">      cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;    &#x2F;&#x2F; å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„ä¿æŠ¤æˆå‘˜</span><br><span class="line">		  cout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;    &#x2F;&#x2F; å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„ä¿æŠ¤æˆå‘˜</span><br><span class="line">&#x2F;&#x2F;		cout &lt;&lt; &quot;c &#x3D; &quot; &lt;&lt; c &lt;&lt; endl;    &#x2F;&#x2F; å­ç±»ä¸èƒ½è®¿é—®çˆ¶ç±»çš„ç§æœ‰æˆå‘˜</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Parent p;</span><br><span class="line">    Child c;</span><br><span class="line"></span><br><span class="line">    p.a &#x3D; 100;  &#x2F;&#x2F; publicåœ¨ç±»çš„å¤–éƒ¨å¯ä»¥è®¿é—®</span><br><span class="line">    &#x2F;&#x2F;p.b &#x3D; 200;  &#x2F;&#x2F; protectedåœ¨ç±»çš„å¤–éƒ¨ä¸èƒ½è®¿é—®</span><br><span class="line">    &#x2F;&#x2F;p.c &#x3D; 300;  &#x2F;&#x2F; privateåœ¨ç±»çš„å¤–éƒ¨ä¸èƒ½è®¿é—®</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ä¿æŠ¤ç»§æ‰¿ä¼šå°†çˆ¶ç±»publicç»§æ‰¿çš„æˆå‘˜è®¿é—®æ§åˆ¶å±æ€§æ”¹ä¸ºprotected</span><br><span class="line">    &#x2F;&#x2F; å…¶ä»–è®¿é—®æ§åˆ¶å±æ€§ä¸å˜</span><br><span class="line">&#x2F;&#x2F;    c.a &#x3D; 100;    &#x2F;&#x2F; protected</span><br><span class="line">&#x2F;&#x2F;    c.b &#x3D; 200;    &#x2F;&#x2F; protected</span><br><span class="line">&#x2F;&#x2F;    c.c &#x3D; 300;    &#x2F;&#x2F; private</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ä¿æŠ¤ç»§æ‰¿ä¼šå°†çˆ¶ç±»publicç»§æ‰¿çš„æˆå‘˜è®¿é—®æ§åˆ¶å±æ€§æ”¹ä¸ºprotected</span><br><span class="line">    &#x2F;&#x2F; å…¶ä»–è®¿é—®æ§åˆ¶å±æ€§ä¸å˜.å­ç±»ä¸èƒ½è®¿é—®çˆ¶ç±»çš„privateæˆå‘˜</span><br><span class="line">    c.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>privateInherit.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Parent</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    int a;</span><br><span class="line">protected:</span><br><span class="line">    int b;</span><br><span class="line">private:</span><br><span class="line">    int c;</span><br><span class="line">public:</span><br><span class="line">    Parent(int a&#x3D;0, int b&#x3D;0, int c&#x3D;0)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;a &#x3D; a;</span><br><span class="line">        this-&gt;b &#x3D; b;</span><br><span class="line">        this-&gt;c &#x3D; c;</span><br><span class="line">        cout &lt;&lt; &quot;Parent(int a&#x3D;0, int b&#x3D;0, int c&#x3D;0)&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void set(int a, int b, int c)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;a &#x3D; a;</span><br><span class="line">        this-&gt;b &#x3D; b;</span><br><span class="line">        this-&gt;c &#x3D; c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; &quot;c &#x3D; &quot; &lt;&lt; c &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : private Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Child() &#x2F;&#x2F; é»˜è®¤è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•°</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">      cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;    &#x2F;&#x2F; å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„ç§æœ‰ç»§æ‰¿çš„æˆå‘˜</span><br><span class="line">		  cout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;    &#x2F;&#x2F; å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„ç§æœ‰ç»§æ‰¿çš„æˆå‘˜</span><br><span class="line">&#x2F;&#x2F;		cout &lt;&lt; &quot;c &#x3D; &quot; &lt;&lt; c &lt;&lt; endl;    &#x2F;&#x2F; å­ç±»ä¸èƒ½è®¿é—®çˆ¶ç±»çš„ç§æœ‰æˆå‘˜</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Parent p;</span><br><span class="line">    Child c;</span><br><span class="line"></span><br><span class="line">    p.a &#x3D; 100;  &#x2F;&#x2F; publicåœ¨ç±»çš„å¤–éƒ¨å¯ä»¥è®¿é—®</span><br><span class="line">    &#x2F;&#x2F;p.b &#x3D; 200;  &#x2F;&#x2F; protectedåœ¨ç±»çš„å¤–éƒ¨ä¸èƒ½è®¿é—®</span><br><span class="line">    &#x2F;&#x2F;p.c &#x3D; 300;  &#x2F;&#x2F; privateåœ¨ç±»çš„å¤–éƒ¨ä¸èƒ½è®¿é—®</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ç§æœ‰ç»§æ‰¿ä¼šå°†çˆ¶ç±»æˆå‘˜çš„è®¿é—®æ§åˆ¶æƒé™éƒ½ä¿®æ”¹ä¸ºprivate</span><br><span class="line">&#x2F;&#x2F;    c.a &#x3D; 100;    &#x2F;&#x2F; private</span><br><span class="line">&#x2F;&#x2F;    c.b &#x3D; 200;    &#x2F;&#x2F; private</span><br><span class="line">&#x2F;&#x2F;    c.c &#x3D; 300;    &#x2F;&#x2F; private</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ç§æœ‰ç»§æ‰¿ä¼šå°†çˆ¶ç±»æˆå‘˜çš„è®¿é—®æ§åˆ¶æƒé™éƒ½ä¿®æ”¹ä¸ºprivate</span><br><span class="line">    c.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ï¼š</p>
<ol>
<li>åœ¨ç±»çš„å¤–éƒ¨ï¼Œåªæœ‰å…¬æœ‰ç»§æ‰¿çš„å…¬æœ‰æˆå‘˜å¯ä»¥è®¿é—®</li>
<li>åœ¨ç±»çš„å†…éƒ¨ï¼Œåªæœ‰(å…¬æœ‰/ä¿æŠ¤/ç§æœ‰)ç»§æ‰¿çš„ç§æœ‰æˆå‘˜ä¸å¯ä»¥è®¿é—®</li>
</ol>
<p>é—®é¢˜ï¼š<br>å­ç±»çš„ç§æœ‰ç»§æ‰¿å’Œä¿æŠ¤ç»§æ‰¿ï¼Œåœ¨å­ç±»å†…éƒ¨å¯ä»¥è®¿é—®çš„å†…å®¹å’Œåœ¨å­ç±»å¤–éƒ¨å¯ä»¥è®¿é—®çš„å†…å®¹ä¸€æ ·ï¼Œé‚£ä¿æŠ¤ç»§æ‰¿æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ</p>
<h2 id="ç±»å‹å…¼å®¹æ€§åŸåˆ™"><a href="#ç±»å‹å…¼å®¹æ€§åŸåˆ™" class="headerlink" title="ç±»å‹å…¼å®¹æ€§åŸåˆ™"></a>ç±»å‹å…¼å®¹æ€§åŸåˆ™</h2><p>ç±»å‹å…¼å®¹æ€§åŸåˆ™ï¼šéœ€è¦åŸºç±»å¯¹è±¡çš„ä»»ä½•åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨<font color="red">å…¬æœ‰æ´¾ç”Ÿç±»çš„å¯¹è±¡</font>æ¥ä»£æ›¿ã€‚<br>é€šè¿‡å…¬æœ‰ç»§æ‰¿ï¼Œæ´¾ç”Ÿç±»å¾—åˆ°åŸºç±»ä¸­é™¤æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ä»¥å¤–çš„æ‰€æœ‰æˆå‘˜ã€‚æ›¿ä»£ä¹‹åï¼Œæ´¾ç”Ÿç±»ä½œä¸ºåŸºç±»å¯¹è±¡ä½¿ç”¨ï¼Œä½†æ˜¯åªèƒ½ä½¿ç”¨<br>ä»åŸºç±»ç»§æ‰¿çš„æˆå‘˜ã€‚<br>é€‚ç”¨æƒ…å†µï¼š</p>
<ul>
<li>å­ç±»å¯¹è±¡å¯ä»¥å½“ä½œçˆ¶ç±»å¯¹è±¡ä½¿ç”¨</li>
<li>å­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥èµ‹å€¼ç»™çˆ¶ç±»å¯¹è±¡</li>
<li>å­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥åˆå§‹åŒ–çˆ¶ç±»å¯¹è±¡</li>
<li>çˆ¶ç±»æŒ‡é’ˆå¯ä»¥ç›´æ¥æŒ‡å‘å­ç±»å¯¹è±¡</li>
<li><p>çˆ¶ç±»å¼•ç”¨å¯ä»¥ç›´æ¥å¼•ç”¨å­ç±»å¯¹è±¡</p>
</li>
<li><p>childAsParent.h</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Parent</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    string name;</span><br><span class="line">public:</span><br><span class="line">    Parent()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Parent(const string name)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;name &#x3D; name;</span><br><span class="line">        cout &lt;&lt; &quot;Parent(const string name)&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;    Parent(const Parent&amp; obj)</span><br><span class="line">&#x2F;&#x2F;    &#123;</span><br><span class="line">&#x2F;&#x2F;        this-&gt;name &#x3D; obj.name;</span><br><span class="line">&#x2F;&#x2F;        cout &lt;&lt; &quot;Parent(const Parent&amp; obj)&quot; &lt;&lt; endl;</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;name &#x3D; &quot; &lt;&lt; name &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; &quot;Parent print()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Parent()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;~Parent()&quot;  &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public Parent     &#x2F;&#x2F; å¿…é¡»æ˜¯å…¬æœ‰ç»§æ‰¿</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int age;</span><br><span class="line">public:</span><br><span class="line">    Child()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Child(const string name, int age) : Parent(name) &#x2F;&#x2F;é»˜è®¤è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•°</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;age &#x3D; age;</span><br><span class="line">        cout &lt;&lt; &quot;Child(const string name, int age)&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;name &#x3D; &quot; &lt;&lt; name &lt;&lt; &quot; &quot; &lt;&lt; &quot;age &#x3D; &quot; &lt;&lt; age&lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; &quot;Child print()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Child()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;~Child()&quot;  &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; æ„é€ æ—¶:å…ˆæ„é€ çˆ¶ç±»,å†æ„é€ å­ç±»</span><br><span class="line">    &#x2F;&#x2F; ææ„æ—¶:å…ˆææ„å­ç±»,åææ„çˆ¶ç±»</span><br><span class="line">    Child c(&quot;simonXi-tech&quot;, 25);</span><br><span class="line">    c.print();</span><br><span class="line"></span><br><span class="line">    Parent p1 &#x3D; c;  &#x2F;&#x2F; å­ç±»åˆå§‹åŒ–çˆ¶ç±»</span><br><span class="line">    p1.print();</span><br><span class="line"></span><br><span class="line">    Parent* p2 &#x3D; &amp;c;    &#x2F;&#x2F; çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡</span><br><span class="line">    p2-&gt;print();</span><br><span class="line"></span><br><span class="line">    Parent&amp; p3 &#x3D; c;     &#x2F;&#x2F; çˆ¶ç±»å¼•ç”¨å­ç±»å¯¹è±¡</span><br><span class="line">    p3.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç»§æ‰¿ä¸ç»„åˆæ„é€ å’Œææ„é¡ºåº"><a href="#ç»§æ‰¿ä¸ç»„åˆæ„é€ å’Œææ„é¡ºåº" class="headerlink" title="ç»§æ‰¿ä¸ç»„åˆæ„é€ å’Œææ„é¡ºåº"></a>ç»§æ‰¿ä¸ç»„åˆæ„é€ å’Œææ„é¡ºåº</h2><p>å½“å­ç±»ä¸­æœ‰å®šä¹‰ç±»æˆå‘˜å˜é‡æ—¶:<br>  æ„é€ æ—¶ï¼šå…ˆæ„é€ çˆ¶ç±»ï¼Œåœ¨æ„é€ ç±»æˆå‘˜å˜é‡ï¼Œæœ€åæ„é€ å­ç±»<br>  ææ„æ—¶ï¼šå…ˆææ„å­ç±»ï¼Œåœ¨ææ„ç±»æˆå‘˜å˜é‡ï¼Œæœ€åææ„çˆ¶ç±»</p>
<ul>
<li>destructorSequence.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Obj</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">    int i;</span><br><span class="line">public:</span><br><span class="line">    Obj()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Obj()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Obj(int i)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;i &#x3D; i;</span><br><span class="line">        cout &lt;&lt; &quot;Obj()&quot; &lt;&lt; &quot; &quot; &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Obj()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;~Obj()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    string name;</span><br><span class="line">public:</span><br><span class="line">    Parent()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Parent(const string name)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;name &#x3D; name;</span><br><span class="line">        cout &lt;&lt; &quot;Parent(const string name)&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Parent()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;~Parent()&quot;  &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public Parent     &#x2F;&#x2F; å¿…é¡»æ˜¯å…¬æœ‰ç»§æ‰¿</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int age;</span><br><span class="line">public:</span><br><span class="line">    Child()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; è°ƒç”¨çˆ¶ç±»çš„æœ‰å‚æ„é€ å‡½æ•°ï¼Œéœ€è¦åœ¨å­ç±»çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­æ˜¾ç¤ºè°ƒç”¨</span><br><span class="line">    Child(const string name, int age) : Parent(name)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;age &#x3D; age;</span><br><span class="line">        cout &lt;&lt; &quot;Child(const string name, int age)&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Child(const string name, int age, int i) : Parent(name), obj2(i)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;age &#x3D; age;</span><br><span class="line">        cout &lt;&lt; &quot;Child(const string name, int age)&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    ~Child()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;~Child()&quot;  &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    Obj obj1;</span><br><span class="line">    Obj obj2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; æ„é€ æ—¶:å…ˆæ„é€ çˆ¶ç±»,å†æ„é€ å­ç±»</span><br><span class="line">    &#x2F;&#x2F; ææ„æ—¶:å…ˆææ„å­ç±»,åææ„çˆ¶ç±»</span><br><span class="line">    Child c1(&quot;simonXi-tech&quot;, 25);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å½“å­ç±»ä¸­æœ‰å®šä¹‰ç±»æˆå‘˜å˜é‡æ—¶</span><br><span class="line">    &#x2F;&#x2F; æ„é€ æ—¶ï¼šå…ˆæ„é€ çˆ¶ç±»ï¼Œåœ¨æ„é€ ç±»æˆå‘˜å˜é‡ï¼Œæœ€åæ„é€ å­ç±»</span><br><span class="line">    &#x2F;&#x2F; ææ„æ—¶ï¼šå…ˆææ„å­ç±»ï¼Œåœ¨ææ„ç±»æˆå‘˜å˜é‡ï¼Œæœ€åææ„çˆ¶ç±»</span><br><span class="line">    Child c2(&quot;simonXi&quot;, 25, 1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å­ç±»å’Œçˆ¶ç±»åŒåæˆå‘˜"><a href="#å­ç±»å’Œçˆ¶ç±»åŒåæˆå‘˜" class="headerlink" title="å­ç±»å’Œçˆ¶ç±»åŒåæˆå‘˜"></a>å­ç±»å’Œçˆ¶ç±»åŒåæˆå‘˜</h2><p>å­ç±»å’Œçˆ¶ç±»åŒåæˆå‘˜ï¼Œå­ç±»ä¾ç„¶å†²çˆ¶ç±»ç»§æ‰¿åŒåæˆå‘˜ã€‚<br>å­ç±»å’Œçˆ¶ç±»åŒåæˆå‘˜ï¼šé»˜è®¤ä½¿ç”¨å­ç±»çš„æˆå‘˜ï¼Œéœ€è¦ä½¿ç”¨çˆ¶ç±»æˆå‘˜æ—¶éœ€è¦é€šè¿‡ä½œç”¨åŸŸåˆ†è¾¨ç¬¦::è¿›è¡ŒåŒååŒºåˆ†</p>
<ul>
<li>samePropInInherit.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Parent</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    int a;</span><br><span class="line">    int b;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    Parent(int a&#x3D;0, int b&#x3D;0)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;a &#x3D; a;</span><br><span class="line">        this-&gt;b &#x3D; b;</span><br><span class="line">        cout &lt;&lt; &quot;Parent(int a&#x3D;0, int b&#x3D;0)&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int b;</span><br><span class="line">public:</span><br><span class="line">    Child()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Child(int b):Parent(1, 2)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;b &#x3D; b;</span><br><span class="line">        cout &lt;&lt; &quot;Child()&quot; &lt;&lt; &quot; &quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Child c(25);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; c.a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; c.b &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; c.Parent::b &lt;&lt; endl;</span><br><span class="line">    c.print();</span><br><span class="line">    c.Parent::print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¤šç»§æ‰¿"><a href="#å¤šç»§æ‰¿" class="headerlink" title="å¤šç»§æ‰¿"></a>å¤šç»§æ‰¿</h2><p>å¤šç»§æ‰¿çš„äºŒä¹‰æ€§</p>
<ul>
<li>multiInherit.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Base</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Parent1 : public Base</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">    int p1;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Parent2 : public Base</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">    int p2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public Parent1, public Parent2</span><br><span class="line">&#123;</span><br><span class="line"> private:</span><br><span class="line">     int c;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Child c;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å¤šç»§æ‰¿äº§ç”ŸäºŒä¹‰æ€§</span><br><span class="line">&#x2F;&#x2F;    cout &lt;&lt; c.b &lt;&lt; endl;</span><br><span class="line">    &#x2F;&#x2F; ä¸ºäº†é˜²æ­¢äºŒä¹‰æ€§,éœ€è¦æ˜¾å¼æŒ‡å®šä»Baseç±»ç»§æ‰¿çš„ä¸¤ä¸ªb</span><br><span class="line">    cout &lt;&lt; c.Parent1::b &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; c.Parent2::b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†é˜²æ­¢ä¸€ä¸ªå­ç±»ç»§æ‰¿ä¸¤ä¸ªçˆ¶ç±»æ—¶ï¼Œè¿™ä¸¤ä¸ªçˆ¶ç±»åˆæœ‰ç›¸åŒçš„åŸºç±»æ—¶å¯èƒ½äº§ç”Ÿçš„äºŒä¹‰æ€§ï¼Œæ­¤æ—¶éœ€è¦è¿›è¡Œè™šç»§æ‰¿(virtualå…³é”®å­—)ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Base</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Parent1 : virtual public Base</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">    int p1;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Parent2 : virtual public Base</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">    int p2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public Parent1, public Parent2</span><br><span class="line">&#123;</span><br><span class="line"> private:</span><br><span class="line">     int c;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Child c;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; c.b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ç»§æ‰¿ä¸»è¦æŠŠæ¡çˆ¶ç±»çš„æˆå‘˜æ˜¯å­˜åœ¨äºå­ç±»ä¹‹ä¸­çš„ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>cpp</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>19-cpp-ç»†èŠ‚è¯­æ³•</title>
    <url>/2020/02/10/19-cpp-%E7%BB%86%E8%8A%82%E8%AF%AD%E6%B3%95%E4%B8%80/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‘½åç©ºé—´ã€structç±»å‹åŠ å¼ºã€ä¸‰ç›®è¿ç®—ç¬¦å¢å¼ºã€‚<br><a id="more"></a></p>
<h1 id="C-å¯¹Cçš„åŠ å¼º"><a href="#C-å¯¹Cçš„åŠ å¼º" class="headerlink" title="C++å¯¹Cçš„åŠ å¼º"></a>C++å¯¹Cçš„åŠ å¼º</h1><h2 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h2><p>namespace å°±æ˜¯æ ‡è¯†ç¬¦çš„å¯è§èŒƒå›´ã€‚ä½¿ç”¨ <code>#include &lt;iostream&gt;</code>æ—¶ï¼Œè¯¥å¤´æ–‡ä»¶ä¸­æ²¡æœ‰å®šä¹‰å…¨å±€å‘½åç©ºé—´ï¼Œæ‰€ä»¥ std è¿™ä¸ªå‘½åç©ºé—´ä¸­çš„æ ‡è¯†ç¬¦æ—¶ä¸å¯ä»¥ä½¿ç”¨çš„ï¼Œå¿…é¡»ä½¿ç”¨ <code>using namespace std</code> æ‰å¯ä»¥å¼•å…¥å‘½åç©ºé—´ã€‚å…¨å±€å‘½åç©ºé—´ç±»ä¼¼å…¨å±€å˜é‡ï¼Œå®¹æ˜“å¯¼è‡´å˜é‡å†²çªé—®é¢˜ã€‚std æ˜¯C++æ ‡å‡†å‘½åç©ºé—´ï¼ŒC++æ ‡å‡†ç¨‹åºåº“ä¸­çš„æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½è¢«å®šä¹‰åœ¨ std ä¸­ã€‚</p>
<h3 id="å‘½åç©ºé—´çš„å®šä¹‰"><a href="#å‘½åç©ºé—´çš„å®šä¹‰" class="headerlink" title="å‘½åç©ºé—´çš„å®šä¹‰"></a>å‘½åç©ºé—´çš„å®šä¹‰</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">namespace name &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">namespace name</span><br></pre></td></tr></table></figure>
<ul>
<li>ç¤ºä¾‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">namespace NameSpaceA</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">namespace NameSpaceB</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 1;</span><br><span class="line"></span><br><span class="line">	namespace NameSpaceC</span><br><span class="line">	&#123;</span><br><span class="line">		struct Teacher</span><br><span class="line">		&#123;</span><br><span class="line">			char name[10];</span><br><span class="line">			int age;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    using namespace std;</span><br><span class="line">	using namespace NameSpaceA;     &#x2F;&#x2F; å‡½æ•°ä¸­ä½¿ç”¨å‘½åç©ºé—´NameSpaceAçš„a</span><br><span class="line">&#x2F;&#x2F;	using namespace NameSpaceB;     &#x2F;&#x2F; åŒæ—¶ä½¿ç”¨å‘½åç©ºé—´NameSpaceBä¼šé€ æˆäºŒä¹‰æ€§</span><br><span class="line">	using NameSpaceB::NameSpaceC::Teacher;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; NameSpaceB::a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	Teacher t &#x3D; &#123;&quot;simon&quot;, 3&#125;;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;t.name &#x3D; &quot; &lt;&lt; t.name &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &quot;t.age &#x3D; &quot; &lt;&lt; t.age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å‘½åç©ºé—´çš„ä½¿ç”¨"><a href="#å‘½åç©ºé—´çš„ä½¿ç”¨" class="headerlink" title="å‘½åç©ºé—´çš„ä½¿ç”¨"></a>å‘½åç©ºé—´çš„ä½¿ç”¨</h3><ul>
<li>std::cout ç›´æ¥æŒ‡å®šæ ‡è¯†ç¬¦</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">std::cout &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼éå¸¸éº»çƒ¦ï¼Œæ¯ä¸ªæ ‡è¯†ç¬¦éƒ½è¦åŠ ä¸Šå¯¹åº”çš„å‘½åç©ºé—´ã€‚</p>
<ul>
<li><p><code>using namespace std</code><br>å¦‚æœå°† <code>using namespace std</code> æ”¾åœ¨å‡½æ•°å¤–ï¼Œåˆ™ std ä¸­çš„æ‰€æœ‰æ ‡è¯†ç¬¦å…·æœ‰æ•´ä¸ªæ–‡ä»¶å…¨å±€çš„ä½œç”¨åŸŸï¼›å¦‚æœæ”¾åœ¨å‡½æ•°å†…ï¼Œåˆ™ std å…·æœ‰å‡½æ•°çš„å±€éƒ¨ä½œç”¨åŸŸã€‚</p>
</li>
<li><p><code>using std::cout</code></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;using namespace std;</span><br><span class="line">using std::cout;	&#x2F;&#x2F; ä½¿ç”¨å‘½åç©ºé—´ä¸­çš„å…·ä½“æ ‡è¯†ç¬¦</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void bubbleSort(std::vector&lt;T&gt;&amp; nums)&#123;	&#x2F;&#x2F; ç›´æ¥æŒ‡å®šæ ‡è¯†ç¬¦</span><br><span class="line">    for(int i&#x3D;0; i&lt;nums.size()-1; i++)&#123;</span><br><span class="line">        bool flag &#x3D; false;</span><br><span class="line"></span><br><span class="line">        for(int j&#x3D;i+1; j&lt;nums.size(); j++)</span><br><span class="line">            if(nums[i] &gt; nums[j])&#123;</span><br><span class="line">                std::swap&lt;T&gt;(nums[i], nums[j]);</span><br><span class="line">                flag &#x3D; true;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        if(!flag)</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void print_vec(std::vector&lt;T&gt;&amp; matrix)&#123;</span><br><span class="line">    for(T e : matrix)&#123;</span><br><span class="line">        cout &lt;&lt; e &lt;&lt; &quot; &quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    using namespace std;	&#x2F;&#x2F; åœ¨å‡½æ•°ä¸­ä½¿ç”¨å‘½åç©ºé—´çš„æ‰€æœ‰æ ‡è¯†ç¬¦</span><br><span class="line"></span><br><span class="line">    vector&lt;int&gt; inums &#x3D; &#123; 4, 1, 6, 0, 5, 2, 3 &#125;;</span><br><span class="line">    vector&lt;char&gt; cnums &#x3D; &#123;&#39;b&#39;, &#39;a&#39;, &#39;c&#39;, &#39;e&#39;, &#39;d&#39;&#125;;</span><br><span class="line">    vector&lt;string&gt; snums &#x3D; &#123; &quot;string&quot;, &quot;apple&quot;, &quot;world&quot;, &quot;hello&quot;, &quot;cpp&quot; &#125;;</span><br><span class="line"></span><br><span class="line">    bubbleSort&lt;int&gt;(inums);</span><br><span class="line">    bubbleSort&lt;char&gt;(cnums);</span><br><span class="line">    bubbleSort&lt;string&gt;(snums);</span><br><span class="line"></span><br><span class="line">    print_vec(inums);</span><br><span class="line">    print_vec(cnums);</span><br><span class="line">    print_vec(snums);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="struct-ç±»å‹åŠ å¼º"><a href="#struct-ç±»å‹åŠ å¼º" class="headerlink" title="struct ç±»å‹åŠ å¼º"></a>struct ç±»å‹åŠ å¼º</h2><p>Cè¯­è¨€ä¸­structå®šä¹‰ä¸ºä¸€ç»„å˜é‡çš„é›†åˆï¼ŒCç¼–è¯‘å™¨ä¸è®¤ä¸ºè¿™æ˜¯ä¸€ç§æ–°çš„ç±»å‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">struct Teacher&#123;</span><br><span class="line">    char name[20];</span><br><span class="line">    int age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;    Teacher t &#x3D; &#123; &quot;savana&quot;, 28 &#125;;   &#x2F;&#x2F; é”™è¯¯ Teacher ä¸æ˜¯ç»“æ„ä½“ç±»å‹ï¼Œç»“æ„ä½“ç±»å‹è¡¨ç¤ºä¸º struct Teacher</span><br><span class="line">    struct Teacher t &#x3D; &#123; &quot;savana&quot;, 28 &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>C++ä¸­çš„structæ˜¯ä¸€ä¸ªæ–°ç±»å‹çš„å®šä¹‰å£°æ˜ã€‚ç±»ä¼¼äºclassï¼Œä½†æ˜¯classä¸­çš„æˆå‘˜ä¸æŒ‡å®šè®¿é—®æ§åˆ¶ï¼Œé»˜è®¤æ˜¯privateï¼Œè€Œstructé»˜è®¤æ˜¯publicã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Teacherä¸ºç»“æ„ä½“ç±»å‹</span><br><span class="line">struct Teacher&#123;</span><br><span class="line">    string name;</span><br><span class="line">    int age;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ„é€ å‡½æ•°</span><br><span class="line">    Teacher(string name, int age)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;name &#x3D; name;</span><br><span class="line">        this-&gt;age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Teacher(const Teacher&amp; obj)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;name &#x3D; obj.name;</span><br><span class="line">        this-&gt;age &#x3D; obj.age;</span><br><span class="line">        cout &lt;&lt; &quot;æ‹·è´æ„é€ å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    string getName()</span><br><span class="line">    &#123;</span><br><span class="line">        return this-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int getAge()</span><br><span class="line">    &#123;</span><br><span class="line">        return this-&gt;age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; Teacher æ˜¯ struct ç±»å‹</span><br><span class="line">    Teacher t(&quot;simon&quot;, 25);</span><br><span class="line">    cout &lt;&lt; &quot;name&#x3D;&quot; &lt;&lt; t.getName() &lt;&lt; &quot;,age&#x3D;&quot; &lt;&lt; t.getAge() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰ç›®è¿ç®—ç¬¦å¢å¼º"><a href="#ä¸‰ç›®è¿ç®—ç¬¦å¢å¼º" class="headerlink" title="ä¸‰ç›®è¿ç®—ç¬¦å¢å¼º"></a>ä¸‰ç›®è¿ç®—ç¬¦å¢å¼º</h2><ul>
<li>Cè¯­è¨€ä¸­ä¸‰ç›®è¿ç®—ç¬¦ä¸èƒ½åšå·¦å€¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 10;</span><br><span class="line">	int b &#x3D; 20;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Cè¯­è¨€ä¸­çš„ä¸‰ç›®è¿ç®—ç¬¦è¿”å›å˜é‡å€¼ï¼Œä¸èƒ½ä½œä¸ºå·¦å€¼ä½¿ç”¨</span><br><span class="line">&#x2F;&#x2F;	( a &lt; b ? a : b )&#x3D; 30;  &#x2F;&#x2F; error</span><br><span class="line">    *( a &lt; b ? &amp;a : &amp;b ) &#x3D; 30;</span><br><span class="line"></span><br><span class="line">	printf(&quot;a &#x3D; %d, b &#x3D; %d\n&quot;, a, b);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>C++ä¸‰ç›®è¿ç®—ç¬¦æ²¡æœ‰é™åˆ¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int a &#x3D; 10;</span><br><span class="line">	int b &#x3D; 20;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; C++ä¸­ç›´æ¥è¿”å›å˜é‡æœ¬èº«</span><br><span class="line">&#x2F;&#x2F;	(a &lt; b ? a : b )&#x3D; 30;   &#x2F;&#x2F; æ­£ç¡®</span><br><span class="line">	*( a &lt; b ? &amp;a : &amp;b ) &#x3D; 30;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt;&quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1>]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>cpp</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>24-cpp-static-thisæŒ‡é’ˆ</title>
    <url>/2020/02/14/24-cpp-static-this%E6%8C%87%E9%92%88/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>C++å¯¹è±¡æ¨¡å‹ä¸­æˆå‘˜æ•°æ®å¦‚å›¾ï¼š<br><img src="/images/31-cpp-static-thisæŒ‡é’ˆ/01-cpp-æˆå‘˜.png" alt="&quot;01-cpp-æˆå‘˜&quot;"><br><a id="more"></a></p>
<h1 id="thisæŒ‡é’ˆ"><a href="#thisæŒ‡é’ˆ" class="headerlink" title="thisæŒ‡é’ˆ"></a>thisæŒ‡é’ˆ</h1><p>C++ç±»å¯¹è±¡ä¸­æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨ã€‚ç”±thisInCpp.hå’ŒthisInC.hå¯çŸ¥ï¼ŒC++ä¸­çš„ç±»æ™®é€šæˆå‘˜å˜é‡ç»“æ„ç±»ä¼¼äº<br>ç»“æ„ä½“ã€‚ç±»æ™®é€šæˆå‘˜å‡½æ•°ç±»ä¼¼äºthisInC.hçš„å…¨å±€å‡½æ•°ã€‚C++ä¸­ä¸ºäº†åŒºåˆ†ä¸åŒçš„å¯¹è±¡ï¼Œä¼šè‡ªåŠ¨å°†è¯¥å¯¹è±¡å–åœ°å€ä¼ é€’ç»™<br>ä¸€ä¸ªé»˜è®¤å­˜åœ¨äºç±»ä¸­çš„æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯thisæŒ‡é’ˆã€‚</p>
<ul>
<li>thisInCpp.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Test</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int ti;</span><br><span class="line">public:</span><br><span class="line">    Test(int i)</span><br><span class="line">    &#123;</span><br><span class="line">        ti &#x3D; i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int get()</span><br><span class="line">    &#123;</span><br><span class="line">        return ti;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;this is class test&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Test t(100);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; t.get() &lt;&lt; endl;</span><br><span class="line">    t.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>thisInC.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">typedef struct Test</span><br><span class="line">&#123;</span><br><span class="line">    int ti;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void TestInitialize(Test *pThis, int i)</span><br><span class="line">&#123;</span><br><span class="line">    pThis-&gt;ti &#x3D; i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int TestGet(Test *pThis)</span><br><span class="line">&#123;</span><br><span class="line">    return pThis-&gt;ti;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void TestPrint()</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;this is class test&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Test t;</span><br><span class="line"></span><br><span class="line">    TestInitialize(&amp;t, 100);</span><br><span class="line">    cout &lt;&lt; TestGet(&amp;t) &lt;&lt; endl;</span><br><span class="line">    TestPrint();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ™®é€šæˆå‘˜å˜é‡å­˜å‚¨äºå¯¹è±¡ä¸­ï¼Œé™æ€æˆå‘˜å˜é‡å­˜å‚¨ä¸é™æ€å‚¨å­˜åŒºï¼Œæˆå‘˜å‡½æ•°å­˜å‚¨äºä»£ç æ®µã€‚<br>C++ä¸­ç±»çš„æ™®é€šæˆå‘˜å‡½æ•°éƒ½éšå¼åŒ…å«ä¸€ä¸ªæŒ‡å‘å½“å‰å¯¹è±¡çš„ this æŒ‡é’ˆã€‚<br>é™æ€æˆå‘˜å‡½æ•°ä¸åŒ…å«æŒ‡å‘å…·ä½“å¯¹è±¡çš„æŒ‡é’ˆï¼Œæ™®é€šæˆå‘˜å‡½æ•°åŒ…å«ä¸€ä¸ªæŒ‡å‘å…·ä½“å¯¹è±¡çš„æŒ‡é’ˆã€‚</p>
<ul>
<li>this.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class thisPointer</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    &#x2F;&#x2F; å±äºç±»</span><br><span class="line">    static void test1()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;istatic &#x3D; &quot; &lt;&lt; istatic &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ²¡æœ‰ç”¨åˆ°thisæŒ‡é’ˆ</span><br><span class="line">    void test2()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;test2&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ²¡æœ‰ç”¨åˆ°thisæŒ‡é’ˆ</span><br><span class="line">    void test3(int i)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;i&#x3D;&quot; &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ç”¨åˆ°thisæŒ‡é’ˆ</span><br><span class="line">    void test4()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;inormal &#x3D; &quot; &lt;&lt; inormal &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    static int istatic;</span><br><span class="line">    int inormal;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int thisPointer::istatic &#x3D; 0;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; ç±»æŒ‡é’ˆä¸ºç©º</span><br><span class="line">    thisPointer *p &#x3D; NULL;</span><br><span class="line">    p-&gt;test1();     &#x2F;&#x2F; å¯ä»¥æ‰§è¡Œ</span><br><span class="line">    p-&gt;test2();     &#x2F;&#x2F; å¯ä»¥æ‰§è¡Œ</span><br><span class="line">    p-&gt;test3(25);   &#x2F;&#x2F; å¯ä»¥æ‰§è¡Œ</span><br><span class="line">&#x2F;&#x2F;    p-&gt;test4();   &#x2F;&#x2F; ä¸å¯ä»¥æ‰§è¡Œ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>thisæ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯this æŒ‡é’ˆå˜é‡æœ¬èº«æ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚æ¯”å¦‚ç±»Testå¯¹åº”çš„ thisæŒ‡é’ˆä¸ºï¼šTest* const this;<br>é‚£å¦‚ä½•è®© thisæŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´ä¸å¯ä¿®æ”¹ï¼Œç­”æ¡ˆæ˜¯åœ¨å‡½æ•°å®šä¹‰ååŠ ä¸Š constï¼Œè¡¨ç¤º thisæŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´ä¸å¯ä¿®æ”¹ã€‚</p>
<ul>
<li>thisWithConst.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Test</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int t;</span><br><span class="line">public:</span><br><span class="line">    int setThis()</span><br><span class="line">    &#123;</span><br><span class="line">&#x2F;&#x2F;        this &#x3D; 0x222;   &#x2F;&#x2F; Test* const this</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int setT(int t) const   &#x2F;&#x2F; åœ¨å‡½æ•°å®šä¹‰ååŠ çš„ä»const,ä½¿thisæŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´åªè¯»</span><br><span class="line">    &#123;</span><br><span class="line">&#x2F;&#x2F;        this-&gt;t &#x3D; t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Test t;</span><br><span class="line">&#x2F;&#x2F;    t.setThis();</span><br><span class="line">&#x2F;&#x2F;    t.setT(10);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>thisæŒ‡é’ˆä¸»è¦æ˜¯æ ‡è®°ä¸åŒç±»å¯¹è±¡çš„å†…å­˜ç©ºé—´ã€‚staticå…³é”®å­—æ ‡è®°çš„æˆå‘˜å±äºç±»ï¼Œé™æ€æˆå‘˜å‡½æ•°åœ¨ç±»åˆ›å»ºæ—¶å°±å­˜åœ¨ï¼Œä¸èƒ½åœ¨é™æ€æˆå‘˜å‡½æ•°ä¸­è®¿é—®è¿˜æ²¡æœ‰åˆ›å»ºçš„å¯¹è±¡æˆå‘˜å˜é‡ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>cpp</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>26-cpp-å¤šæ€</title>
    <url>/2020/02/17/26-cpp-%E5%A4%9A%E6%80%81/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h1><ol>
<li>è”ç¼–å°±æ˜¯ä¸€ä¸ªç¨‹åºæ¨¡å—ã€ä»£ç äº’ç›¸å…³è”çš„è¿‡ç¨‹ã€‚</li>
<li>å¤šæ€å­˜åœ¨çš„æ„ä¹‰å°±æ˜¯ï¼šå½“çˆ¶ç±»æŒ‡é’ˆ/å¼•ç”¨æŒ‡å‘çˆ¶ç±»å¯¹è±¡æ—¶ï¼Œè°ƒç”¨çˆ¶ç±»çš„å‡½æ•°ï¼›å½“çˆ¶ç±»æŒ‡é’ˆ/å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ï¼Œè°ƒç”¨å­ç±»é‡å†™çš„åŒåå‡½æ•°ã€‚å³åŒæ ·çš„è°ƒç”¨è¯­å¥æœ‰å¤šç§ä¸åŒçš„è¡¨ç°å½¢æ€ã€‚</li>
<li>å®é™…åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ ¹æ®æŒ‡é’ˆçš„ç±»å‹åˆ¤æ–­æŒ‡å‘çš„æ—¶ä¸€ä¸ªä»€ä¹ˆæ ·çš„å¯¹è±¡ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨è®¤ä¸ºçˆ¶ç±»æŒ‡é’ˆæŒ‡å‘çš„çˆ¶ç±»å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰virtualå…³é”®å­—è¿›è¡Œé™å®šï¼Œ<br>çˆ¶ç±»æŒ‡é’ˆè°ƒç”¨çš„æ°¸è¿œæ˜¯çˆ¶ç±»å¯¹è±¡ä¸­æˆå‘˜å‡½æ•°ã€‚è¿™ç§ç‰¹æ€§å«åšé™æ€è”ç¼–ã€‚</li>
<li>ä¸ºäº†ä½¿å¤šæ€æˆç«‹ï¼Œéœ€è¦å°†ç¨‹åºè”ç¼–æ¨è¿Ÿåˆ°è¿è¡Œæ—¶è¿›è¡Œï¼Œæˆä¸ºåŠ¨æ€è”ç¼–ã€‚</li>
<li>çˆ¶ç±»å¯¹è±¡å’Œå­ç±»å¯¹è±¡çš„æŒ‡é’ˆ++æ­¥é•¿ä¸åŒï¼Œæ‰€ä»¥ä¸è¦ç”¨çˆ¶ç±»æŒ‡é’ˆ++çš„æ–¹å¼æ“ä½œå­ç±»æ•°ç»„ã€‚</li>
</ol>
<h2 id="å¤šæ€çš„æˆç«‹æ¡ä»¶"><a href="#å¤šæ€çš„æˆç«‹æ¡ä»¶" class="headerlink" title="å¤šæ€çš„æˆç«‹æ¡ä»¶"></a>å¤šæ€çš„æˆç«‹æ¡ä»¶</h2><ol>
<li>è¦æœ‰ç»§æ‰¿</li>
<li>è¦æœ‰å‡½æ•°é‡å†™</li>
<li>è¦æœ‰çˆ¶ç±»æŒ‡é’ˆ/å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</li>
</ol>
<ul>
<li>polyCondition.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void func()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent::func()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç»§æ‰¿</span><br><span class="line">class Child : public Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    &#x2F;&#x2F; å‡½æ•°é‡å†™</span><br><span class="line">    virtual void func()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child::func()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡</span><br><span class="line">void run(Parent* p)</span><br><span class="line">&#123;</span><br><span class="line">    p-&gt;func();     &#x2F;&#x2F; æœ‰virtualå…³é”®å­—,å¤šæ€</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Parent p &#x3D; Parent();</span><br><span class="line">    Child c &#x3D; Child();</span><br><span class="line">    c.Parent::func();</span><br><span class="line"></span><br><span class="line">    run(&amp;p);</span><br><span class="line">    run(&amp;c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¤šæ€çš„å®ç°åŸç†"><a href="#å¤šæ€çš„å®ç°åŸç†" class="headerlink" title="å¤šæ€çš„å®ç°åŸç†"></a>å¤šæ€çš„å®ç°åŸç†</h2><ol>
<li>å½“ç±»ä¸­å£°æ˜è™šå‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ç±»ä¸­ç”Ÿæˆä¸€ä¸ªè™šå‡½æ•°è¡¨ã€‚</li>
<li>è™šå‡½æ•°è¡¨æ˜¯ä¸€ä¸ªå­˜å‚¨ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆçš„æ•°æ®ç»“æ„ï¼Œvirtualæˆå‘˜å‡½æ•°ä¼šè¢«ç¼–è¯‘å™¨æ”¾å…¥è™šå‡½æ•°è¡¨ä¸­ã€‚</li>
<li>è™šå‡½æ•°è¡¨ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆä¸ç»´æŠ¤ã€‚å½“å­˜åœ¨è™šå‡½æ•°æ—¶ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œç§°ä¸ºvptræŒ‡é’ˆã€‚</li>
<li>åœ¨å®ç°å¤šæ€çš„è¿‡ç¨‹ä¸­ï¼Œçˆ¶ç±»å’Œå­ç±»éƒ½æœ‰vptræŒ‡é’ˆã€‚çˆ¶ç±»å¯¹è±¡çš„vptræŒ‡é’ˆæŒ‡å‘çˆ¶ç±»è™šå‡½æ•°è¡¨ï¼Œå­ç±»å¯¹è±¡vptræŒ‡é’ˆæŒ‡å‘å­ç±»è™šå‡½æ•°è¡¨ã€‚</li>
<li>åœ¨å¯¹è±¡åˆ›å»ºæ—¶ï¼Œå¦‚æœå¯¹è±¡ä¸­å­˜åœ¨è™šå‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¼šåœ¨å¯¹è±¡ä¸­å»ºç«‹è™šå‡½æ•°è¡¨ï¼Œå¹¶ç”¨vptræŒ‡é’ˆæŒ‡å‘è¿™ä¸ªè™šå‡½æ•°è¡¨ã€‚</li>
<li>åªæœ‰å¯¹è±¡æ„é€ å®Œæˆï¼ŒvptræŒ‡é’ˆçš„æŒ‡å‘æ‰æœ€ç»ˆç¡®å®šã€‚</li>
</ol>
<ul>
<li>verifyVptr.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Test</span><br><span class="line">&#123;</span><br><span class="line">    int t;</span><br><span class="line">public:</span><br><span class="line">    void func()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Test::func()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;t &#x3D; &quot; &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class VirtualTest</span><br><span class="line">&#123;</span><br><span class="line">    int t;</span><br><span class="line">public:</span><br><span class="line">    virtual void func()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;VirtualTest::func()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    virtual void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;t &#x3D; &quot; &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; åŠ virtualå…³é”®å­—ä¼šåŠ ä¸€ä¸ªæŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆ</span><br><span class="line">    cout &lt;&lt; &quot;sizeof(Test) &#x3D; &quot; &lt;&lt; sizeof(Test) &lt;&lt; endl;          &#x2F;&#x2F; 4</span><br><span class="line">    cout &lt;&lt; &quot;sizeof(VirtualTest) &#x3D; &quot; &lt;&lt; sizeof(VirtualTest) &lt;&lt; endl;    &#x2F;&#x2F; 8</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨é¦–å…ˆç¡®å®šå‡½æ•°æ˜¯å¦ä¸ºè™šå‡½æ•°ï¼Œå¦‚æœä¸æ˜¯è™šå‡½æ•°ï¼Œç¼–è¯‘å™¨ç›´æ¥ç¡®å®šè¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°ã€‚<br>å¦‚æœå‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œç¼–è¯‘å™¨æ ¹æ®ä¼ å…¥å¯¹è±¡çš„vptræŒ‡é’ˆï¼Œæ‰¾åˆ°å¯¹åº”çš„è™šå‡½æ•°è¡¨ï¼Œæ‰¾åˆ°å¯¹è±¡å¯¹åº”çš„è™šå‡½æ•°å¹¶è°ƒç”¨ã€‚<br>æ‰€ä»¥çˆ¶ç±»æŒ‡é’ˆä¸éœ€è¦ç¡®å®šä¼ å…¥å¯¹è±¡æ˜¯å­ç±»å¯¹è±¡è¿˜æ˜¯çˆ¶ç±»å¯¹è±¡ã€‚<br>å½“å°†å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°æ—¶ï¼Œéœ€è¦é€šè¿‡å¯»å€æ“ä½œæ‰¾åˆ°çœŸæ­£åº”è¯¥è°ƒç”¨çš„å‡½æ•°ï¼Œæ‰€ä»¥è™šå‡½æ•°çš„æ•ˆç‡æ¯”æ™®é€šå‡½æ•°ä½ã€‚<br>å³å¯ä»¥å°†ç±»ä¸­æ‰€æœ‰æˆå‘˜å‡½æ•°éƒ½å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦ã€‚</p>
<h2 id="vptræŒ‡é’ˆåˆ†å¸ƒåˆå§‹åŒ–"><a href="#vptræŒ‡é’ˆåˆ†å¸ƒåˆå§‹åŒ–" class="headerlink" title="vptræŒ‡é’ˆåˆ†å¸ƒåˆå§‹åŒ–"></a>vptræŒ‡é’ˆåˆ†å¸ƒåˆå§‹åŒ–</h2><p>å¯¹è±¡åœ¨åˆ›å»ºä¸­ï¼Œç¼–è¯‘å™¨å¯¹vptræŒ‡é’ˆè¿›è¡Œåˆå§‹åŒ–ã€‚åªæœ‰å½“å¯¹è±¡æ„é€ å®Œå…¨ç»“æŸåvptræŒ‡é’ˆçš„æŒ‡å‘æ‰æœ€ç»ˆç¡®å®šã€‚<br>åœ¨æ„å»ºå­ç±»å¯¹è±¡æ—¶ï¼Œä¼šå…ˆæ„é€ çˆ¶ç±»å¯¹è±¡ï¼Œæ­¤æ—¶åœ¨çˆ¶ç±»å¯¹è±¡ä¸­è°ƒç”¨è™šå‡½æ•°ï¼ŒæŒ‡å‘çˆ¶ç±»çš„è™šå‡½æ•°ã€‚æ„é€ å®Œçˆ¶ç±»å¯¹è±¡ï¼Œ<br>æ­¤æ—¶å­ç±»å¯¹è±¡è°ƒç”¨è™šå‡½æ•°ï¼ŒæŒ‡å‘å­ç±»çš„è™šå‡½æ•°ã€‚</p>
<ul>
<li>vptr.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Parent()</span><br><span class="line">    &#123;</span><br><span class="line">        func();</span><br><span class="line">        cout &lt;&lt; &quot;Parent()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    virtual void func()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent::func()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Child()</span><br><span class="line">    &#123;</span><br><span class="line">        func();</span><br><span class="line">        cout &lt;&lt; &quot;Child()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    virtual void func()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child::func()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; å®šä¹‰å­ç±»å¯¹è±¡æ—¶,vptræŒ‡é’ˆå…ˆæŒ‡å‘çˆ¶ç±»çš„è™šå‡½æ•°è¡¨,åœ¨çˆ¶ç±»æ„é€ å®Œæˆä¹‹å</span><br><span class="line">    &#x2F;&#x2F; å­ç±»çš„vptræ‰æŒ‡å‘è‡ªå·±çš„è™šå‡½æ•°è¡¨</span><br><span class="line">    Child c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è™šææ„å‡½æ•°"><a href="#è™šææ„å‡½æ•°" class="headerlink" title="è™šææ„å‡½æ•°"></a>è™šææ„å‡½æ•°</h2><p>æ™®é€šææ„å‡½æ•°åœ¨åˆ é™¤åŠ¨æ€æ´¾ç”Ÿç±»å¯¹è±¡ä¼šå‡ºç°ææ„ä¸å½»åº•çš„ç°è±¡ã€‚è™šææ„å‡½æ•°ç”¨äºæŒ‡å¼• delete è¿ç®—ç¬¦æ­£ç¡®ææ„åŠ¨æ€å¯¹è±¡ã€‚</p>
<ul>
<li>normalDestructor.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Base</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    ~Base()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Base destructor&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Parent : public Base</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    ~Parent()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent destructor&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    ~Child()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child destructor&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Child* pc &#x3D; new Child();</span><br><span class="line">    delete pc;</span><br><span class="line">    cout &lt;&lt; &quot;Child* pc&quot; &lt;&lt; endl;  &#x2F;&#x2F; è°ƒç”¨Baseçš„ææ„å‡½æ•°&#x2F;Parentææ„å‡½æ•°&#x2F;Childææ„å‡½æ•°</span><br><span class="line"></span><br><span class="line">    Parent* pp &#x3D; new Child();</span><br><span class="line">    delete pp;</span><br><span class="line">    cout &lt;&lt; &quot;Parent* pp&quot; &lt;&lt; endl; &#x2F;&#x2F; è°ƒç”¨Baseçš„ææ„å‡½æ•°&#x2F;Parentææ„å‡½æ•°</span><br><span class="line"></span><br><span class="line">    Base* pb &#x3D; new Child();</span><br><span class="line">    delete pb;</span><br><span class="line">    cout &lt;&lt; &quot;Base* pb&quot; &lt;&lt; endl;   &#x2F;&#x2F; åªè°ƒç”¨Baseçš„ææ„å‡½æ•°</span><br><span class="line"></span><br><span class="line">    Child c;  &#x2F;&#x2F; è°ƒç”¨Baseçš„ææ„å‡½æ•°&#x2F;Parentææ„å‡½æ•°&#x2F;Childææ„å‡½æ•°</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>virutualDestructor.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Base</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    virtual ~Base()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Base destructor&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Parent : public Base</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    virtual ~Parent()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Parent destructor&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public Parent</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    virtual ~Child()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child destructor&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Child* pc &#x3D; new Child();</span><br><span class="line">    delete pc;    &#x2F;&#x2F; è°ƒç”¨Baseçš„ææ„å‡½æ•°&#x2F;Parentææ„å‡½æ•°&#x2F;Childææ„å‡½æ•°</span><br><span class="line">    cout &lt;&lt; &quot;Child* pc&quot; &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Parent* pp &#x3D; new Child();</span><br><span class="line">    delete pp;    &#x2F;&#x2F; è°ƒç”¨Baseçš„ææ„å‡½æ•°&#x2F;Parentææ„å‡½æ•°&#x2F;Childææ„å‡½æ•°</span><br><span class="line">    cout &lt;&lt; &quot;Parent* pp&quot; &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Base* pb &#x3D; new Child();</span><br><span class="line">    delete pb;    &#x2F;&#x2F; è°ƒç”¨Baseçš„ææ„å‡½æ•°&#x2F;Parentææ„å‡½æ•°&#x2F;Childææ„å‡½æ•°</span><br><span class="line">    cout &lt;&lt; &quot;Base* pb&quot; &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Child c;      &#x2F;&#x2F; è°ƒç”¨Baseçš„ææ„å‡½æ•°&#x2F;Parentææ„å‡½æ•°&#x2F;Childææ„å‡½æ•°</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»"><a href="#çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»" class="headerlink" title="çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»"></a>çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»</h1><p>çº¯è™šå‡½æ•°æ˜¯ä¸€ä¸ªåœ¨åŸºç±»ä¸­è¯´æ˜çš„è™šå‡½æ•°ï¼Œåœ¨åŸºç±»ä¸­æ²¡æœ‰å®šä¹‰ï¼Œè¦æ±‚æ´¾ç”Ÿç±»å¿…é¡»å®ç°çº¯è™šå‡½æ•°ã€‚<br>çº¯è™šå‡½æ•°å½¢å¼ï¼š<br>  virtual ç±»å‹ å‡½æ•°å(å‚æ•°è¡¨)=0;<br>åœ¨C++ä¸­æ²¡æœ‰æ¥å£çš„æ¦‚å¿µï¼Œçº¯è™šå‡½æ•°å°±ç±»ä¼¼äºJavaçš„æ¥å£ã€‚Javaæ´¾ç”Ÿç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ï¼Œä¸å…è®¸ç»§æ‰¿å¤šä¸ªç±»ã€‚<br>C++ä¸­å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿å¤šä¸ªç±»ï¼Œä½†æ˜¯ç»§æ‰¿å¤šä¸ªç±»ä¼šäº§ç”Ÿâ€é’»çŸ³é—®é¢˜â€ï¼Œæ•…C++æ‘ˆå¼ƒç»§æ‰¿å¤šä¸ªç±»è¿™ç§ç†å¿µã€‚<br>åœ¨C++ä¸­å…·æœ‰çº¯è™šå‡½æ•°çš„åŸºç±»ç§°ä¸ºæŠ½è±¡ç±»ã€‚</p>
<ul>
<li>abstractClass.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æŠ½è±¡ç±»</span><br><span class="line">class Figure</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">    double x, y;</span><br><span class="line">public:</span><br><span class="line">    void setDim(double i, double j&#x3D;0)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;x &#x3D; i;</span><br><span class="line">        this-&gt;y &#x3D; j;</span><br><span class="line">    &#125;</span><br><span class="line">    virtual void showArea() &#x3D; 0;    &#x2F;&#x2F; çº¯è™šå‡½æ•°</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Triangle : public Figure</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void showArea()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Triangle Area &#x3D; &quot; &lt;&lt; 0.5*x*y &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Square : public Figure</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void showArea()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Triangle Area &#x3D; &quot; &lt;&lt; x*y &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Circle : public Figure</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void showArea()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Circle Area &#x3D; &quot; &lt;&lt; 3.14*x*x &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Figure* pf;   &#x2F;&#x2F; æŠ½è±¡ç±»å¯ä»¥å®šä¹‰æŒ‡é’ˆ&#x2F;å¼•ç”¨,ä¸å¯ä»¥å®šä¹‰å¯¹è±¡</span><br><span class="line">    Triangle t;</span><br><span class="line">    Square s;</span><br><span class="line">    Circle c;</span><br><span class="line"></span><br><span class="line">    pf &#x3D; &amp;t;</span><br><span class="line">    pf-&gt;setDim(10.0, 6.0);</span><br><span class="line">    pf-&gt;showArea();</span><br><span class="line"></span><br><span class="line">    pf &#x3D; &amp;s;</span><br><span class="line">    pf-&gt;setDim(10.0, 6.0);</span><br><span class="line">    pf-&gt;showArea();</span><br><span class="line"></span><br><span class="line">    pf &#x3D; &amp;c;</span><br><span class="line">    pf-&gt;setDim(10.0, 6.0);</span><br><span class="line">    pf-&gt;showArea();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æŠ½è±¡ç±»æ¨¡æ‹Ÿæ¥å£"><a href="#æŠ½è±¡ç±»æ¨¡æ‹Ÿæ¥å£" class="headerlink" title="æŠ½è±¡ç±»æ¨¡æ‹Ÿæ¥å£"></a>æŠ½è±¡ç±»æ¨¡æ‹Ÿæ¥å£</h2><p>æ¥å£å°±æ˜¯å¯ä»¥çœ‹ä½œåªæœ‰çº¯è™šå‡½æ•°çš„ç±»ã€‚åœ¨C++å’ŒJavaä¸­ç»§æ‰¿å¤šä¸ªæ¥å£éƒ½æ˜¯å¯ä»¥çš„ã€‚</p>
<ul>
<li>interface.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class interface1</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void print() &#x3D; 0;</span><br><span class="line">    virtual int add(int a, int b) &#x3D; 0;</span><br><span class="line">&#x2F;&#x2F;    virtual int add(int a, int b, int c) &#x3D; 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class interface2</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void print() &#x3D; 0;</span><br><span class="line">    virtual int add(int a, int b) &#x3D; 0;</span><br><span class="line">    virtual int minus(int a, int b) &#x3D; 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Child : public interface1, interface2</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Child::print()&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; é‡è½½ä¸ä»¥è¿”å›å€¼ä¸ºæ ‡å‡†</span><br><span class="line">&#x2F;&#x2F;    void add(int a, int b)</span><br><span class="line">&#x2F;&#x2F;    &#123;</span><br><span class="line">&#x2F;&#x2F;        return a+b;</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;    int add(int a, int b, int c)</span><br><span class="line">&#x2F;&#x2F;    &#123;</span><br><span class="line">&#x2F;&#x2F;        return a+b;</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line"></span><br><span class="line">    int add(int a, int b)</span><br><span class="line">    &#123;</span><br><span class="line">        return a+b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int minus(int a, int b)</span><br><span class="line">    &#123;</span><br><span class="line">        return a-b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Child c;</span><br><span class="line">    c.print();</span><br><span class="line">    cout &lt;&lt; c.add(1, 1) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; c.minus(1, 1) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“å¤šç»§æ‰¿å‡ºç°â€é’»çŸ³æ¨¡å‹â€æ—¶ï¼Œå¯ä»¥ä½¿ç”¨virtualå…³é”®å­—é¿å…äºŒä¹‰æ€§é—®é¢˜ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é¢å‘æ¥å£ç¼–ç¨‹æ—¶é¡¹ç›®å¼€å‘ä¸­éå¸¸é‡è¦çš„æŠ€èƒ½ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>cpp</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>25-cpp-æ¨¡æ¿</title>
    <url>/2020/02/15/25-cpp-%E6%A8%A1%E6%9D%BF/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="å‡½æ•°æ¨¡æ¿"><a href="#å‡½æ•°æ¨¡æ¿" class="headerlink" title="å‡½æ•°æ¨¡æ¿"></a>å‡½æ•°æ¨¡æ¿</h1><p>å‡½æ•°æ¨¡æ¿ï¼Œå°±æ˜¯å»ºç«‹ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå…¶å½¢å‚ç±»å‹å’Œè¿”å›å€¼ç±»å‹éƒ½å¯ä»¥ä¸å…·ä½“æŒ‡å®šï¼Œç”¨è™šæ‹Ÿç±»å‹æ¥ä»£è¡¨ã€‚è¿™ä¸ªé€šç”¨å‡½æ•°å°±ç§°ä¸ºå‡½æ•°æ¨¡æ¿ã€‚åœ¨è°ƒç”¨å‡½æ•°æ—¶ç³»ç»Ÿå¯ä»¥é€šè¿‡è‡ªåŠ¨ç±»å‹æ¨å¯¼æˆ–è€…ç”¨æˆ·æ˜¾å¼æŒ‡å®šç±»å‹çš„æ–¹å¼æ¥å–ä»£æ¨¡æ¿ä¸­çš„è™šæ‹Ÿç±»å‹ï¼Œä»è€Œå®ç°ä¸åŒå‡½æ•°çš„åŠŸèƒ½ã€‚ç”¨å‡½æ•°æ¨¡æ¿ç”Ÿæˆçš„å‡½æ•°å«åšæ¨¡æ¿å‡½æ•°ã€‚  </p>
<ul>
<li>å‡½æ•°æ¨¡æ¿å®šä¹‰æœ‰æ¨¡æ¿è¯´æ˜å’Œå‡½æ•°å®šä¹‰ç»„æˆ</li>
<li>å‡½æ•°å‚æ•°è¡¨ä¸­å¯ä»¥ä½¿ç”¨ç±»å±(ç±»å‹å‚æ•°åŒ–)ç±»å‹å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€èˆ¬ç±»å‹å‚æ•°</li>
<li>è¿”å›å€¼ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å±ç±»å‹å‚æ•°ï¼Œæ­¤æ—¶ç±»å‹å¿…é¡»æ˜¾ç¤ºæŒ‡å®š</li>
<li>ç¼–è¯‘å™¨ç¼–è¯‘ä»£ç æ—¶ï¼Œä¼šæ ¹æ®ä»£ç ä»å‡½æ•°æ¨¡æ¿äº§ç”Ÿå…·ä½“ç±»å‹çš„å‡½æ•°</li>
<li>å‡½æ•°æ¨¡æ¿ä¸èƒ½ç®€å•çš„å£°æ˜å’Œå®šä¹‰åˆ†å¼€</li>
<li>å‡½æ•°æ¨¡æ¿å¯ä»¥åƒæ™®é€šå‡½æ•°ä¸€æ ·è¢«é‡è½½</li>
<li>å‡½æ•°æ¨¡æ¿å½¢å¼<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;ç±»å‹å½¢å¼å‚æ•°è¡¨&gt;       &#x2F;&#x2F; ç±»å‹å½¢å¼å‚æ•°çš„å½¢å¼ä¸ºï¼štypename T1, typename T2, ... , typename Tn</span><br><span class="line">ç±»å‹ å‡½æ•°å(å½¢å¼å‚æ•°è¡¨)</span><br><span class="line">&#123;</span><br><span class="line">    è¯­å¥åºåˆ—</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void bubbleSort(vector&lt;T&gt;&amp; nums)&#123;</span><br><span class="line">    for(int i&#x3D;0; i&lt;nums.size()-1; i++)&#123;</span><br><span class="line">        bool flag &#x3D; false;</span><br><span class="line"></span><br><span class="line">        for(int j&#x3D;i+1; j&lt;nums.size(); j++)</span><br><span class="line">            if(nums[i] &gt; nums[j])&#123;</span><br><span class="line">                swap&lt;T&gt;(nums[i], nums[j]);</span><br><span class="line">                flag &#x3D; true;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        if(!flag)</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void bubbleSort()</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;bubbleSorté‡è½½&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void print_vec(vector&lt;T&gt;&amp; matrix)&#123;</span><br><span class="line">    for(T e : matrix)&#123;</span><br><span class="line">        cout &lt;&lt; e &lt;&lt; &quot; &quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;int&gt; inums &#x3D; &#123; 4, 1, 6, 0, 5, 2, 3 &#125;;</span><br><span class="line">    vector&lt;char&gt; cnums &#x3D; &#123;&#39;b&#39;, &#39;a&#39;, &#39;c&#39;, &#39;e&#39;, &#39;d&#39;&#125;;</span><br><span class="line">    vector&lt;string&gt; snums &#x3D; &#123; &quot;string&quot;, &quot;apple&quot;, &quot;world&quot;, &quot;hello&quot;, &quot;cpp&quot; &#125;;</span><br><span class="line"></span><br><span class="line">    bubbleSort&lt;int&gt;(inums);   &#x2F;&#x2F; æ˜¾å¼ç±»å‹è°ƒç”¨</span><br><span class="line">    bubbleSort(cnums);        &#x2F;&#x2F; éšå¼ç±»å‹æ¨å¯¼</span><br><span class="line">    bubbleSort&lt;string&gt;(snums);</span><br><span class="line">    bubbleSort();             &#x2F;&#x2F; å‡½æ•°æ¨¡æ¿å¯ä»¥é‡è½½</span><br><span class="line"></span><br><span class="line">    print_vec(inums);</span><br><span class="line">    print_vec(cnums);</span><br><span class="line">    print_vec(snums);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="c-å‡½æ•°æ¨¡æ¿å£°æ˜ä¸å®šä¹‰ç›¸åˆ†ç¦»"><a href="#c-å‡½æ•°æ¨¡æ¿å£°æ˜ä¸å®šä¹‰ç›¸åˆ†ç¦»" class="headerlink" title="c++å‡½æ•°æ¨¡æ¿å£°æ˜ä¸å®šä¹‰ç›¸åˆ†ç¦»"></a><a href="https://www.cnblogs.com/tonychen-tobeTopCoder/p/5199655.html" target="_blank" rel="noopener">c++å‡½æ•°æ¨¡æ¿å£°æ˜ä¸å®šä¹‰ç›¸åˆ†ç¦»</a></h2><p><img src="/images/29-cpp-é‡è½½/01-ç¼–è¯‘æµç¨‹å›¾.png" alt="&quot;01-ç¼–è¯‘æµç¨‹å›¾&quot;"></p>
<p>ç”±ç¼–è¯‘æµç¨‹å›¾å¯çŸ¥ï¼Œç¼–è¯‘å™¨å…ˆå¯¹ æ¯ä¸€ä¸ªæºæ–‡ä»¶è¿›è¡Œ é¢„å¤„ç†ã€ç¼–è¯‘ã€æ±‡ç¼– ç”Ÿæˆ .o æ–‡ä»¶ã€‚ç„¶åå°† æ•´ä¸ªå·¥ç¨‹ä¸­çš„ æ‰€æœ‰ .oæ–‡ä»¶å’Œå…¶ä»–åº“æ–‡ä»¶ é“¾æ¥<br>æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚å¦‚æœå°† c++å‡½æ•°æ¨¡æ¿å£°æ˜ä¸å®šä¹‰ç›¸åˆ†ç¦»ï¼Œåˆ™åœ¨ç¼–è¯‘è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œåªæœ‰å£°æ˜æ— æ³•å…·ç° å‡½æ•°æ¨¡æ¿ è€ŒæŠ¥é”™ã€‚</p>
<h1 id="ç±»æ¨¡æ¿"><a href="#ç±»æ¨¡æ¿" class="headerlink" title="ç±»æ¨¡æ¿"></a>ç±»æ¨¡æ¿</h1><h2 id="ç±»æ¨¡æ¿å®šä¹‰ä¸ä½¿ç”¨"><a href="#ç±»æ¨¡æ¿å®šä¹‰ä¸ä½¿ç”¨" class="headerlink" title="ç±»æ¨¡æ¿å®šä¹‰ä¸ä½¿ç”¨"></a>ç±»æ¨¡æ¿å®šä¹‰ä¸ä½¿ç”¨</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">template &lt;ç±»å‹å½¢å¼å‚æ•°è¡¨&gt;       &#x2F;&#x2F; ç±»å‹å½¢å¼å‚æ•°çš„å½¢å¼ä¸ºï¼štypename T1, typename T2, ... , typename Tn</span><br><span class="line">class ç±»å</span><br><span class="line">&#123;</span><br><span class="line">    æˆå‘˜å‡½æ•°</span><br><span class="line">    æˆå‘˜å˜é‡</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ç±»æ¨¡æ¿ä½¿ç”¨æ—¶,å¿…é¡»æ˜¾å¼æŒ‡å®šç±»å‹ã€‚</p>
<ul>
<li>classTemplateGrammar.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class Parent&#123;</span><br><span class="line">public:</span><br><span class="line">    Parent(T a)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;a &#x3D; a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">protected:</span><br><span class="line">    T a;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ¨¡æ¿ç±»åšæ™®é€šå‡½æ•°å‚æ•°,éœ€è¦æŒ‡å®šç±»å‹</span><br><span class="line">void normalUseParent(Parent&lt;int&gt; &amp;p)</span><br><span class="line">&#123;</span><br><span class="line">    p.print();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ¨¡æ¿ç±»åšå‡½æ•°æ¨¡æ¿å‚æ•°,ä¸éœ€è¦æŒ‡å®šç±»å‹</span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void templateUseParent(Parent&lt;T&gt; &amp;p)</span><br><span class="line">&#123;</span><br><span class="line">    p.print();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; ç±»æ¨¡æ¿å¿…é¡»è¦æŒ‡å®šç±»å‹ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¸çŸ¥é“æŒ‰ç…§ä»€ä¹ˆç±»å‹å¤„ç†</span><br><span class="line">    Parent&lt;int&gt; p(10);</span><br><span class="line">&#x2F;&#x2F;    Parent p(10); &#x2F;&#x2F; error</span><br><span class="line">    p.print();</span><br><span class="line"> </span><br><span class="line">    normalUseParent(p);</span><br><span class="line">    templateUseParent&lt;int&gt;(p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å¤æ•°ç±»</p>
</li>
<li><p>templateClassComplex.hpp</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class Complex</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; å‹å…ƒå‡½æ•°ç”¨äºé‡è½½ &lt;&lt; &gt;&gt;, å…¶ä»–çš„æœ€å¥½ç”¨æˆå‘˜å‡½æ•°</span><br><span class="line">	friend ostream&amp; operator&lt;&lt; &lt;T&gt;(ostream&amp; out, Complex&amp; c);</span><br><span class="line">public:</span><br><span class="line">	Complex(T a, T b);</span><br><span class="line">	Complex operator+(Complex&amp; c);</span><br><span class="line">	void print();</span><br><span class="line">private:</span><br><span class="line">	T a;</span><br><span class="line">	T b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">Complex&lt;T&gt;::Complex(T a, T b)</span><br><span class="line">&#123;</span><br><span class="line">	this-&gt;a &#x3D; a;</span><br><span class="line">	this-&gt;b &#x3D; b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">Complex&lt;T&gt; Complex&lt;T&gt;::operator+(Complex&lt;T&gt;&amp; c)</span><br><span class="line">&#123;</span><br><span class="line">	Complex&lt;T&gt; tmp(this-&gt;a + c.a, this-&gt;b + c.b);</span><br><span class="line"></span><br><span class="line">	return tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void Complex&lt;T&gt;::print()</span><br><span class="line">&#123;</span><br><span class="line">	cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt; &quot;b&#x3D;&quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å‹å…ƒå‡½æ•°ä¸å±äºç±»</span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">ostream&amp; operator&lt;&lt;(ostream&amp; out, Complex&lt;T&gt;&amp; c)</span><br><span class="line">&#123;</span><br><span class="line">	out &lt;&lt; c.a &lt;&lt; &quot;+&quot; &lt;&lt; c.b &lt;&lt; &quot;i&quot; &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">	Complex&lt;int&gt; c1(1, 2), c2(3, 4);</span><br><span class="line">	Complex&lt;int&gt; c3 &#x3D; c1 + c2;</span><br><span class="line">	c3.print();</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; c3 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¨¡æ¿ç±»åªèƒ½å†™åœ¨åŒä¸€ä¸ª.h/.hppæˆ–è€….cppä¸­ï¼Œä¸èƒ½åˆ†å¼€å†™ã€‚å…·ä½“åŸå› è¿˜éœ€è¦ç ”ç©¶ã€‚</p>
<h2 id="ç±»æ¨¡æ¿ç»§æ‰¿"><a href="#ç±»æ¨¡æ¿ç»§æ‰¿" class="headerlink" title="ç±»æ¨¡æ¿ç»§æ‰¿"></a>ç±»æ¨¡æ¿ç»§æ‰¿</h2><ul>
<li>classTemplateWithInherit.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class Parent&#123;</span><br><span class="line">public:</span><br><span class="line">    Parent(T a)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;a &#x3D; a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;a&#x3D;&quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">protected:</span><br><span class="line">    T a;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class normalChild : public Parent&lt;int&gt;</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    normalChild(int a, int b):Parent&lt;int&gt;(a)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;b &#x3D; b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        Parent&lt;int&gt;::print();</span><br><span class="line">        cout &lt;&lt; &quot;b&#x3D;&quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    int b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class templateChild : public Parent&lt;T&gt;</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    templateChild(T a , int b) : Parent&lt;T&gt;(a)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        this-&gt;b &#x3D; b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        Parent&lt;T&gt;::print();</span><br><span class="line">        cout &lt;&lt; &quot;b&#x3D;&quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    int b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    normalChild nc(10, 20);</span><br><span class="line">    nc.print();</span><br><span class="line"></span><br><span class="line">    templateChild&lt;int&gt; tc(10, 20);</span><br><span class="line">    tc.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç±»æ¨¡æ¿staticå…³é”®å­—"><a href="#ç±»æ¨¡æ¿staticå…³é”®å­—" class="headerlink" title="ç±»æ¨¡æ¿staticå…³é”®å­—"></a>ç±»æ¨¡æ¿staticå…³é”®å­—</h2><p>ä»ç±»æ¨¡æ¿å®ä¾‹åŒ–çš„æ¯ä¸ªæ¨¡æ¿ç±»æœ‰è‡ªå·±çš„ç±»æ¨¡æ¿æ•°æ®æˆå‘˜ï¼Œè¯¥æ¨¡æ¿ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«ä¸€ä¸ªstaticæ•°æ®æˆå‘˜ã€‚</p>
<ul>
<li>classTemplateWithStatic.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class Parent&#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    static T a;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">T Parent&lt;T&gt;::a &#x3D; 0; &#x2F;&#x2F; åˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    Parent&lt;int&gt; p1, p2, p3; &#x2F;&#x2F; intå®ä¾‹åŒ–çš„æ¨¡æ¿ç±»å…±äº«ä¸€ä¸ªstaticå˜é‡</span><br><span class="line"></span><br><span class="line">    p1.a++;</span><br><span class="line">    p2.a++;</span><br><span class="line">    p3.a++;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; p1.a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Parent&lt;char&gt; c1, c2, c3;    &#x2F;&#x2F; charå®ä¾‹åŒ–çš„æ¨¡æ¿ç±»å…±äº«ä¸€ä¸ªstaticå˜é‡</span><br><span class="line">    c1.a &#x3D; 97;</span><br><span class="line">    c2.a++;</span><br><span class="line">    c3.a++;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; c1.a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ç±»å±å‚æ•°å¯ç”¨äºå‡½æ•°çš„å‚æ•°ç±»å‹ã€è¿”å›ç±»å‹å’Œå£°æ˜å‡½æ•°ä¸­çš„å˜é‡ã€‚<br>æ¨¡æ¿ç”±ç¼–è¯‘å™¨æ ¹æ®å®é™…æ•°æ®å®ä¾‹åŒ–ï¼Œç”Ÿæˆå¯æ‰§è¡Œä»£ç ã€‚å®ä¾‹åŒ–çš„å‡½æ•°ï¼Œæ¨¡æ¿ç§°ä¸ºæ¨¡æ¿å‡½æ•°ï¼Œå®ä¾‹åŒ–çš„ç±»æ¨¡æ¿ç§°ä¸ºæ¨¡æ¿ç±»ã€‚<br>å‡½æ•°æ¨¡æ¿å¯ä»¥é‡è½½ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>cpp</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>27-linux-å†…å­˜ç®¡ç†</title>
    <url>/2020/02/18/27-linux-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="linuxè™šæ‹Ÿåœ°å€ç©ºé—´"><a href="#linuxè™šæ‹Ÿåœ°å€ç©ºé—´" class="headerlink" title="linuxè™šæ‹Ÿåœ°å€ç©ºé—´"></a>linuxè™šæ‹Ÿåœ°å€ç©ºé—´</h1><p>linuxä¸­æ¯ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚ç¨‹åºæ˜¯ç”±è‹¥å¹²æ¡å…·æœ‰ä¸€å®šåŠŸèƒ½çš„æŒ‡ä»¤æ‰€ç»„æˆçš„è§£é¢˜é¡ºåºå’Œæ­¥éª¤(ç£ç›˜ä¸­)ã€‚è¿›ç¨‹æ˜¯è®¡ç®—æœºä¸­ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨(å†…å­˜ä¸­)ï¼Œæ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•å…ƒã€‚<br>å¯¹äº32ä½çš„linuxæ“ä½œç³»ç»Ÿï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºå…¶æ‹¥æœ‰0~4Gçš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå¦‚å›¾1æ‰€ç¤ºã€‚è™šæ‹Ÿåœ°å€ç©ºé—´å¯ä»¥åˆ†ä¸ºå†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´ã€‚å†…æ ¸ç©ºé—´åœ°å€ä¸º3G~4Gï¼Œç”¨æˆ·ç©ºé—´ä¸º0~3Gã€‚<br><strong>å†…æ ¸ç©ºé—´</strong>åŠŸèƒ½åŒ…æ‹¬ï¼šå†…å­˜ç®¡ç†ã€è¿›ç¨‹ç®¡ç†(å¦‚è¿›ç¨‹é—´é€šä¿¡)ã€è®¾å¤‡é©±åŠ¨ç®¡ç†å’ŒVFSè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿç­‰ã€‚<br><strong>ç”¨æˆ·ç©ºé—´</strong>è‡ªä¸‹å¾€ä¸Šçœ‹ä¾æ¬¡åŒ…æ‹¬ï¼šå—ä¿æŠ¤åœ°å€(0~4k)ã€.textä»£ç æ®µã€.rodataæ®µã€.dataæ®µã€.bssæ®µã€heapç©ºé—´(å‘ä¸Šå¢é•¿)ã€å†…å­˜æ˜ å°„æ®µ(æ˜ å°„å¯æ‰§è¡Œæ–‡ä»¶çš„åŠ¨æ€é“¾æ¥åº“)ã€æ ˆç©ºé—´(å‘ä¸‹å¢é•¿)ã€å‘½ä»¤è¡Œå‚æ•°ã€ç¯å¢ƒå˜é‡ã€‚</p>
<p><img src="/images/27-linux-å†…å­˜ç®¡ç†/01-linuxä¸‹Cç¨‹åºå†…å­˜æ˜ åƒ.jpg" alt="&quot;01-linuxä¸‹Cç¨‹åºå†…å­˜æ˜ åƒ&quot;"></p>
<center>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;"><b>å›¾1</b></div>
    <br>
</center>

<p>è¯æ˜ï¼š</p>
<ul>
<li>hello.c</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">	printf(&quot;Hello World!&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨linuxä¸‹ä½¿ç”¨ï¼Œgcc hello.c -o hello ç¼–è¯‘å‡º hello å¯æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨å‘½ä»¤è¡Œä¸‹è¾“å…¥ï¼šsize helloã€‚ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">text</th>
<th style="text-align:center">data</th>
<th style="text-align:center">bss</th>
<th style="text-align:center">dec</th>
<th style="text-align:center">hex</th>
<th style="text-align:center">filename</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1517</td>
<td style="text-align:center">600</td>
<td style="text-align:center">8</td>
<td style="text-align:center">2125</td>
<td style="text-align:center">84d</td>
<td style="text-align:center">hello</td>
</tr>
</tbody>
</table>
</div>
<p>å³ï¼Œåœ¨ç¡¬ç›˜ä¸ŠåŠ è½½ï¼Œå¯æ‰§è¡Œæ–‡ä»¶åˆ†ä¸ºï¼š.textæ®µã€.dataæ®µã€bssæ®µ;åŠ è½½åˆ°å†…å­˜æ—¶ï¼Œå¯æ‰§è¡Œæ–‡ä»¶åˆ†ä¸ºï¼š.textæ®µã€.dataæ®µã€.bssæ®µã€heapã€stackã€‚å¦‚å›¾2æ‰€ç¤ºã€‚</p>
<p><img src="/images/27-linux-å†…å­˜ç®¡ç†/02-å¯æ‰§è¡Œä»£ç å­˜å‚¨æ—¶ç»“æ„å’Œè¿è¡Œæ—¶ç»“æ„çš„å¯¹ç…§å›¾.png" alt="&quot;02-å¯æ‰§è¡Œä»£ç å­˜å‚¨æ—¶ç»“æ„å’Œè¿è¡Œæ—¶ç»“æ„çš„å¯¹ç…§å›¾&quot;"></p>
<center>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;"><b>å›¾2</b></div>
    <br>
</center>

<h2 id="ä¿ç•™åŒº"><a href="#ä¿ç•™åŒº" class="headerlink" title="ä¿ç•™åŒº"></a>ä¿ç•™åŒº</h2><p>ä½äºè™šæ‹Ÿåœ°å€ç©ºé—´çš„æœ€ä½éƒ¨åˆ†ï¼Œæœªèµ‹äºˆç‰©ç†åœ°å€ã€‚ä»»ä½•å¯¹å®ƒçš„å¼•ç”¨éƒ½æ˜¯éæ³•çš„ï¼Œç”¨äºæ•æ‰ä½¿ç”¨ç©ºæŒ‡é’ˆå’Œå°æ•´å‹å€¼æŒ‡é’ˆå¼•ç”¨å†…å­˜çš„å¼‚å¸¸æƒ…å†µã€‚<br>å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„å†…å­˜åŒºåŸŸï¼Œè€Œæ˜¯å¯¹åœ°å€ç©ºé—´ä¸­å—åˆ°æ“ä½œç³»ç»Ÿä¿æŠ¤è€Œç¦æ­¢ç”¨æˆ·è¿›ç¨‹è®¿é—®çš„åœ°å€åŒºåŸŸçš„æ€»ç§°ã€‚å¤§å¤šæ•°æ“ä½œç³»ç»Ÿä¸­ï¼Œæå°çš„åœ°å€é€šå¸¸éƒ½æ˜¯ä¸å…è®¸è®¿é—®çš„ï¼Œå¦‚NULLã€‚Cè¯­è¨€å°†æ— æ•ˆæŒ‡é’ˆèµ‹å€¼ä¸º0ä¹Ÿæ˜¯å‡ºäºè¿™ç§è€ƒè™‘ï¼Œå› ä¸º0åœ°å€ä¸Šæ­£å¸¸æƒ…å†µä¸‹ä¸ä¼šå­˜æ”¾æœ‰æ•ˆçš„å¯è®¿é—®æ•°æ®ã€‚</p>
<h2 id="ä»£ç åŒº-textæ®µ"><a href="#ä»£ç åŒº-textæ®µ" class="headerlink" title="ä»£ç åŒº(.textæ®µ)"></a>ä»£ç åŒº(.textæ®µ)</h2><p>å­˜æ”¾ä»£ç (å¦‚å‡½æ•°)ï¼Œä¸å…è®¸ä¿®æ”¹(ç±»ä¼¼å¸¸é‡å­˜å‚¨åŒº)ï¼Œä½†å¯ä»¥æ‰§è¡Œ(ä¸åŒäºå¸¸é‡å­˜å‚¨åŒº)ã€‚ä»£ç åŒºæ˜¯å¯å…±äº«çš„ï¼Œå¯¹äºé¢‘ç¹æ‰§è¡Œçš„ç¨‹åºï¼Œåªéœ€è¦åœ¨å†…å­˜ä¸­æœ‰ä¸€ä»½ä»£ç å³å¯ã€‚ä»£ç æ®µé€šå¸¸å±äºåªè¯»ï¼Œä»¥é˜²æ­¢å…¶ä»–ç¨‹åºæ„å¤–åœ°ä¿®æ”¹å…¶æŒ‡ä»¤(å¯¹è¯¥æ®µçš„å†™æ“ä½œå°†å¯¼è‡´æ®µé”™è¯¯)ã€‚æŸäº›æ¶æ„ä¹Ÿå…è®¸ä»£ç æ®µä¸ºå¯å†™ï¼Œå³å…è®¸ä¿®æ”¹ç¨‹åºã€‚</p>
<h2 id="å¸¸é‡å­˜å‚¨åŒº-rodataæ®µ"><a href="#å¸¸é‡å­˜å‚¨åŒº-rodataæ®µ" class="headerlink" title="å¸¸é‡å­˜å‚¨åŒº(.rodataæ®µ)"></a>å¸¸é‡å­˜å‚¨åŒº(.rodataæ®µ)</h2><p>å¯ä»¥å­˜æ”¾å¸¸é‡ï¼Œä¸å…è®¸ä¿®æ”¹ã€‚æ³¨æ„ä¸æ˜¯æ‰€æœ‰å¸¸é‡éƒ½åœ¨å¸¸é‡å­˜å‚¨åŒºä¸­ã€‚åœ¨Cè¯­è¨€ä¸­ï¼Œå¸¸é‡é€šè¿‡æŒ‡é’ˆæ˜¯å¯ä»¥é—´æ¥ä¿®æ”¹çš„ã€‚C++ä¸­å¸¸é‡ä¸å¯ä»¥é€šè¿‡æŒ‡é’ˆé—´æ¥ä¿®æ”¹ï¼Œä½†æ˜¯é€šè¿‡volatileå…³é”®å­—ä¹Ÿæ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚</p>
<h2 id="å…¨å±€-é™æ€å­˜å‚¨åŒº-dataæ®µå’Œ-bssæ®µ"><a href="#å…¨å±€-é™æ€å­˜å‚¨åŒº-dataæ®µå’Œ-bssæ®µ" class="headerlink" title="å…¨å±€/é™æ€å­˜å‚¨åŒº(.dataæ®µå’Œ.bssæ®µ)"></a>å…¨å±€/é™æ€å­˜å‚¨åŒº(.dataæ®µå’Œ.bssæ®µ)</h2><p>Cè¯­è¨€ä¸­ï¼Œ.dataæ®µ(æ•°æ®æ®µ)å­˜æ”¾è¢«åˆå§‹åŒ–ä¸ºé0çš„å…¨å±€å˜é‡ã€é™æ€å…¨å±€å˜é‡ã€é™æ€å±€éƒ¨å˜é‡ã€‚.bssæ®µå­˜æ”¾æœªè¢«åˆå§‹åŒ–çš„å…¨å±€å˜é‡(åˆå§‹åŒ–ä¸º0çš„å…¨å±€å˜é‡);æœªè¢«åˆå§‹åŒ–çš„é™æ€å±€éƒ¨å˜é‡ã€‚<br>C++ä¸­ï¼Œå¯¹ä»¥ä¸Šä¸¤è€…ä¸è¿›è¡ŒåŒºåˆ†ã€‚</p>
<h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><p>å †ç”¨äºå­˜æ”¾è¿›ç¨‹è¿è¡Œæ—¶åŠ¨æ€åˆ†é…çš„å†…å­˜æ®µï¼Œå¯åŠ¨æ€æ‰©å¼ æˆ–ç¼©å‡ã€‚å †ä¸­å†…å®¹æ˜¯åŒ¿åçš„ï¼Œä¸èƒ½æŒ‰åå­—ç›´æ¥è®¿é—®ï¼Œåªèƒ½é€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®ã€‚å½“è¿›ç¨‹è°ƒç”¨malloc(C)/new(C++)ç­‰å‡½æ•°åˆ†é…å†…å­˜æ—¶ï¼Œæ–°åˆ†é…çš„å†…å­˜åŠ¨æ€æ·»åŠ åˆ°å †ä¸Š(æ‰©å¼ )ï¼›å½“è°ƒç”¨free(C)/delete(C++)ç­‰å‡½æ•°é‡Šæ”¾å†…å­˜æ—¶ï¼Œè¢«é‡Šæ”¾çš„å†…å­˜ä»å †ä¸­å‰”é™¤(ç¼©å‡) ã€‚<br>å †å†…å­˜ç©ºé—´ç”±ç¨‹åºå‘˜è‡ªè¡Œç®¡ç†ï¼Œå¦‚æœç¨‹åºå‘˜ç”³è¯·äº†å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯ä¸é‡Šæ”¾ï¼Œå°±ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚ </p>
<h2 id="å†…å­˜æ˜ å°„æ®µ"><a href="#å†…å­˜æ˜ å°„æ®µ" class="headerlink" title="å†…å­˜æ˜ å°„æ®µ"></a>å†…å­˜æ˜ å°„æ®µ</h2><p>å†…æ ¸å°†ç¡¬ç›˜æ–‡ä»¶çš„å†…å®¹ç›´æ¥æ˜ å°„åˆ°å†…å­˜, åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡Linuxçš„mmap()ç³»ç»Ÿè°ƒç”¨è¯·æ±‚è¿™ç§æ˜ å°„ã€‚å†…å­˜æ˜ å°„æ˜¯ä¸€ç§æ–¹ä¾¿é«˜æ•ˆçš„æ–‡ä»¶I/Oæ–¹å¼ï¼Œ å› è€Œè¢«ç”¨äºè£…è½½åŠ¨æ€å…±äº«åº“ã€‚ç”¨æˆ·ä¹Ÿå¯åˆ›å»ºåŒ¿åå†…å­˜æ˜ å°„ï¼Œè¯¥æ˜ å°„æ²¡æœ‰å¯¹åº”çš„æ–‡ä»¶, å¯ç”¨äºå­˜æ”¾ç¨‹åºæ•°æ®ã€‚</p>
<h2 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h2><p>æ ˆå†…å­˜ç©ºé—´ç”±ç³»ç»Ÿç®¡ç†ï¼Œè¿è¡Œæ—¶åˆ†é…ã€‚å­˜å‚¨å‡½æ•°çš„å½¢å‚ã€å±€éƒ¨å˜é‡ç­‰ã€‚æ³¨æ„ï¼šä¸€èˆ¬å‡½æ•°è¿”å›ä¸è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œä¼šé€ æˆè®¿é—®é”™è¯¯ã€‚æ ˆçš„å¢é•¿æ–¹å‘å‘ä¸‹ï¼Œå³å‘ç€å†…å­˜åœ°å€å‡å°çš„æ–¹å‘ï¼›å †çš„å¢é•¿æ–¹å‘å‘ä¸Šï¼Œå³å‘ç€å†…å­˜åœ°å€å¢åŠ çš„æ–¹å‘ã€‚  </p>
<p>å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä¿å­˜ç°åœº(å¯„å­˜å™¨çš„å€¼ã€è¿”å›åœ°å€ç­‰)ã€‚å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œä¸»è°ƒå‡½æ•° åœ¨æ ˆä¸Šåˆ†é…çš„å†…å­˜ã€å †ä¸Šåˆ†é…çš„å†…å­˜ã€å…¨å±€åŒºåˆ†é…çš„å†…å­˜ è¢«è°ƒå‡½æ•°éƒ½æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚è¢«è°ƒå‡½æ•° å †ä¸Šåˆ†é…çš„å†…å­˜ã€å…¨å±€åŒºåˆ†é…çš„å†…å­˜ å¯ä»¥è¢« ä¸»è°ƒå‡½æ•°ä½¿ç”¨ï¼Œä½†æ˜¯ æ ˆä¸Šåˆ†é…çš„å†…å­˜ ä¸å¯ä»¥è¢«ä¸»è°ƒå‡½æ•°ä½¿ç”¨ã€‚å› ä¸º è¢«è°ƒå‡½æ•°æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ ˆä¸Šæœ‰å…³ è¢«è°ƒå‡½æ•°çš„å†…å­˜ç©ºé—´è¢«ææ„äº†ã€‚</p>
<ul>
<li>å‡½æ•°è°ƒç”¨è¿‡ç¨‹åˆ†æ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">void funcB()&#123;</span><br><span class="line"></span><br><span class="line">	printf(&quot;Hello World\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void funcA(int *p)&#123;</span><br><span class="line">	*p &#x3D; 10;</span><br><span class="line"></span><br><span class="line">	funcB();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; mainå‡½æ•°ä¸­çš„ a å˜é‡å¯¹åº”çš„å†…å­˜ç©ºé—´å¯ä»¥åœ¨ è¢«è°ƒå‡½æ•°ä¸­è®¿é—®ã€‚</span><br><span class="line">&#x2F;&#x2F; mainå‡½æ•°è°ƒç”¨ funcA() æ—¶ï¼šå…ˆå°† main å‡½æ•°çš„è¿è¡ŒçŠ¶æ€å…¥æ ˆï¼Œç„¶å main å‡½æ•°çš„è¿”å›åœ°å€å…¥æ ˆï¼Œ</span><br><span class="line">&#x2F;&#x2F; æœ€å funcA(p) ä¸­ p æ˜¯å±€éƒ¨å˜é‡é¦–å…ˆå…¥æ ˆã€‚ä¹‹åç¨‹åºè¿è¡Œå®Œæˆåã€‚å¼¹å‡º main å‡½æ•°è¿”å›åœ°å€ï¼Œ</span><br><span class="line">&#x2F;&#x2F; å¼¹å‡º main å‡½æ•°è¿è¡ŒçŠ¶æ€ã€‚</span><br><span class="line">int main()&#123;</span><br><span class="line">	int a &#x3D; 0;</span><br><span class="line">	int *p &#x3D; &amp;a;</span><br><span class="line"></span><br><span class="line">	printf(&quot;%d\n&quot;, a);  &#x2F;&#x2F; 0</span><br><span class="line"></span><br><span class="line">	funcA(p);</span><br><span class="line"></span><br><span class="line">	printf(&quot;%d\n&quot;, a);  &#x2F;&#x2F; 10</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><p>ç¯å¢ƒå˜é‡ï¼Œæ˜¯æŒ‡åœ¨æ“ä½œç³»ç»Ÿä¸­ç”¨æ¥æŒ‡å®šæ“ä½œç³»ç»Ÿè¿è¡Œç¯å¢ƒçš„ä¸€äº›å‚æ•°ã€‚é€šå¸¸å…·å¤‡ä»¥ä¸‹ç‰¹å¾ï¼š<br>æœ¬è´¨ä¸Šæ˜¯å­—ç¬¦ä¸²ï¼›æœ‰ç»Ÿä¸€çš„æ ¼å¼ï¼šname-valueï¼›å€¼ç”¨æ¥æè¿°è¿›ç¨‹ç¯å¢ƒä¿¡æ¯ã€‚<br>å­˜å‚¨å½¢å¼ï¼šchar <em>[]æ•°ç»„ï¼Œæ•°ç»„åenvironï¼Œå†…éƒ¨å­˜å‚¨å­—ç¬¦ä¸²ï¼ŒNULLä½œä¸ºå“¨å…µç»“å°¾ã€‚å¼•å…¥ç¯å¢ƒå˜é‡è¡¨ï¼šé¡»å£°æ˜ç¯å¢ƒå˜é‡ã€‚extern char *</em> environ;    </p>
<ul>
<li>environ.c</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">extern char **environ;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line"></span><br><span class="line">	for(i &#x3D; 0; environ[i] !&#x3D; NULL; i++)&#123;  &#x2F;&#x2F; NULLä½œä¸ºå“¨å…µç»“å°¾</span><br><span class="line">		printf(&quot;%s\n&quot;, environ[i]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="PATH"><a href="#PATH" class="headerlink" title="PATH"></a>PATH</h3><p>å¯æ‰§è¡Œæ–‡ä»¶çš„æœç´¢è·¯å¾„ã€‚shellä¸‹lsç­‰å‘½ä»¤æ˜¯/bin/ä¸‹çš„ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œå› ä¸ºåœ¨PATHç¯å¢ƒå˜é‡çš„å€¼é‡Œé¢åŒ…å«äº†è¿™äº›å‘½ä»¤æ‰€åœ¨çš„ç›®å½•/binã€‚PATHç¯å¢ƒå˜é‡çš„å€¼å¯ä»¥åŒ…å«å¤šä¸ªç›®å½•ï¼Œç”¨:å·éš”å¼€ã€‚åœ¨Shellä¸­ç”¨echoå‘½ä»¤å¯ä»¥æŸ¥çœ‹è¿™ä¸ªç¯å¢ƒå˜é‡çš„å€¼ï¼š<code>echo $PATH</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">char *getenv(const char *name);   &#x2F;&#x2F; è·å–ç¯å¢ƒå˜é‡</span><br><span class="line">int setenv(const char *name, const char *value, int overwrite); &#x2F;&#x2F; è®¾ç½®ç¯å¢ƒå˜é‡</span><br><span class="line">int unsetenv(const char *name);   &#x2F;&#x2F; åˆ é™¤ç¯å¢ƒå˜é‡</span><br></pre></td></tr></table></figure>
<h1 id="Cåº“å‡½æ•°å’Œlinuxç³»ç»Ÿå‡½æ•°"><a href="#Cåº“å‡½æ•°å’Œlinuxç³»ç»Ÿå‡½æ•°" class="headerlink" title="Cåº“å‡½æ•°å’Œlinuxç³»ç»Ÿå‡½æ•°"></a>Cåº“å‡½æ•°å’Œlinuxç³»ç»Ÿå‡½æ•°</h1><p><a href="https://www.cnblogs.com/haore147/p/3648395.html" target="_blank" rel="noopener">cè¯­è¨€<em>æ–‡ä»¶æ“ä½œ_FILEç»“æ„ä½“è§£é‡Š</em>æ¶‰åŠå¯¹æ“ä½œç³»ç»Ÿæ–‡ä»¶FCBæ“ä½œçš„è§£é‡Š_</a><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">man man</span><br><span class="line">       1   å¯æ‰§è¡Œç¨‹åºæˆ– shell å‘½ä»¤</span><br><span class="line">       2   ç³»ç»Ÿè°ƒç”¨(å†…æ ¸æä¾›çš„å‡½æ•°)</span><br><span class="line">       3   åº“è°ƒç”¨(ç¨‹åºåº“ä¸­çš„å‡½æ•°)</span><br><span class="line">       4   ç‰¹æ®Šæ–‡ä»¶(é€šå¸¸ä½äº &#x2F;dev)</span><br><span class="line">       5   æ–‡ä»¶æ ¼å¼å’Œè§„èŒƒï¼Œå¦‚ &#x2F;etc&#x2F;passwd</span><br><span class="line">       6   æ¸¸æˆ</span><br><span class="line">       7   æ‚é¡¹(åŒ…æ‹¬å®åŒ…å’Œè§„èŒƒï¼Œå¦‚ man(7)ï¼Œgroff(7))</span><br><span class="line">       8   ç³»ç»Ÿç®¡ç†å‘½ä»¤(é€šå¸¸åªé’ˆå¯¹ root ç”¨æˆ·)</span><br><span class="line">       9   å†…æ ¸ä¾‹ç¨‹ [éæ ‡å‡†]</span><br></pre></td></tr></table></figure></p>
<p><img src="/images/27-linux-å†…å­˜ç®¡ç†/03-Cè¯­è¨€æ–‡ä»¶æ“ä½œåº“å‡½æ•°.png" alt="&quot;03-Cè¯­è¨€æ–‡ä»¶æ“ä½œåº“å‡½æ•°&quot;"></p>
<p>Cç¨‹åºç”¨ä¸åŒçš„FILEç»“æ„ä½“ç®¡ç†æ¯ä¸ªæ–‡ä»¶ã€‚ç¨‹åºå‘˜å¯ä»¥ä½¿ç”¨æ–‡ä»¶ï¼Œä½†æ˜¯ä¸éœ€è¦çŸ¥é“FILEç»“æ„çš„ç»†èŠ‚ã€‚å®é™…ä¸Šï¼ŒFILEç»“æ„æ˜¯é—´æ¥åœ°æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶æ§åˆ¶å—(FCB)æ¥å®ç°å¯¹æ–‡ä»¶çš„æ“ä½œçš„ã€‚Cåº“å‡½æ•°å’Œç³»ç»Ÿå‡½æ•°çš„åŒºåˆ«åœ¨äºç¼“å†²ã€‚</p>
<p><strong>ç¼“å­˜æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼š<br>ç¼“å†²æ–‡ä»¶ç³»ç»Ÿçš„ç‰¹ç‚¹æ˜¯ï¼šåœ¨å†…å­˜å¼€è¾Ÿä¸€ä¸ªâ€œç¼“å†²åŒºâ€ï¼Œä¸ºç¨‹åºä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨ï¼›å½“æ‰§è¡Œè¯»æ–‡ä»¶çš„æ“ä½œæ—¶ï¼Œä»ç£ç›˜æ–‡ä»¶å°†æ•°æ®å…ˆè¯»å…¥å†…å­˜â€œç¼“å†²åŒºâ€ï¼Œè£…æ»¡åå†ä»å†…å­˜â€œç¼“å†²åŒºâ€ä¾æ­¤è¯»å‡ºéœ€è¦çš„æ•°æ®ã€‚æ‰§è¡Œå†™æ–‡ä»¶çš„æ“ä½œæ—¶ï¼Œå…ˆå°†æ•°æ®å†™å…¥å†…å­˜â€œç¼“å†²åŒºâ€ï¼Œå¾…å†…å­˜â€œç¼“å†²åŒºâ€è£…æ»¡åå†å†™å…¥æ–‡ä»¶ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œå†…å­˜â€œç¼“å†²åŒºâ€çš„å¤§å°ï¼Œå½±å“ç€å®é™…æ“ä½œå¤–å­˜çš„æ¬¡æ•°ï¼Œå†…å­˜â€œç¼“å†²åŒºâ€è¶Šå¤§ï¼Œåˆ™æ“ä½œå¤–å­˜çš„æ¬¡æ•°å°±å°‘ï¼Œæ‰§è¡Œé€Ÿåº¦å°±å¿«ã€æ•ˆç‡é«˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ–‡ä»¶â€œç¼“å†²åŒºâ€çš„å¤§å°éšæœºå™¨è€Œå®šã€‚fopen, fclose, fread, fwrite, fgetc, fgets, fputc, fputs, freopen, fseek, ftell, rewindç­‰ã€‚<strong>é¢„è¯»å…¥ç¼“è¾“å‡ºæœºåˆ¶</strong></p>
<p><strong>éç¼“å†²æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼š<br>ç¼“å†²æ–‡ä»¶ç³»ç»Ÿæ˜¯å€ŸåŠ©æ–‡ä»¶ç»“æ„ä½“æŒ‡é’ˆæ¥å¯¹æ–‡ä»¶è¿›è¡Œç®¡ç†ï¼Œé€šè¿‡æ–‡ä»¶æŒ‡é’ˆæ¥å¯¹æ–‡ä»¶è¿›è¡Œè®¿é—®ï¼Œæ—¢å¯ä»¥è¯»å†™å­—ç¬¦ã€å­—ç¬¦ä¸²ã€æ ¼å¼åŒ–æ•°æ®ï¼Œä¹Ÿå¯ä»¥è¯»å†™äºŒè¿›åˆ¶æ•°æ®ã€‚éç¼“å†²æ–‡ä»¶ç³»ç»Ÿä¾èµ–äºæ“ä½œç³»ç»Ÿï¼Œé€šè¿‡æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œæ˜¯ç³»ç»Ÿçº§çš„è¾“å…¥è¾“å‡ºï¼Œå®ƒä¸è®¾æ–‡ä»¶ç»“æ„ä½“æŒ‡é’ˆï¼Œåªèƒ½è¯»å†™äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½†æ•ˆç‡é«˜ã€é€Ÿåº¦å¿«ï¼Œç”±äºANSIæ ‡å‡†ä¸å†åŒ…æ‹¬éç¼“å†²æ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤å»ºè®®å¤§å®¶æœ€å¥½ä¸è¦é€‰æ‹©å®ƒã€‚open, close, read, write, getc, getchar, putc, putcharç­‰ã€‚</p>
<p>ä¸€å¥è¯æ€»ç»“ä¸€ä¸‹ï¼Œå°±æ˜¯openæ— ç¼“å†²ï¼Œfopenæœ‰ç¼“å†²ã€‚å‰è€…ä¸read, writeç­‰é…åˆä½¿ç”¨ï¼Œ åè€…ä¸fread,fwriteç­‰é…åˆä½¿ç”¨ã€‚</p>
<p>ä½¿ç”¨fopenå‡½æ•°ï¼Œç”±äºåœ¨ç”¨æˆ·æ€ä¸‹å°±æœ‰äº†ç¼“å†²ï¼Œå› æ­¤è¿›è¡Œæ–‡ä»¶è¯»å†™æ“ä½œçš„æ—¶å€™å°±å‡å°‘äº†ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åˆ‡æ¢ï¼ˆåˆ‡æ¢åˆ°å†…æ ¸æ€è°ƒç”¨è¿˜æ˜¯éœ€è¦è°ƒç”¨ç³»ç»Ÿè°ƒç”¨API:readï¼Œwriteï¼‰ï¼›è€Œä½¿ç”¨openå‡½æ•°ï¼Œåœ¨æ–‡ä»¶è¯»å†™æ—¶åˆ™æ¯æ¬¡éƒ½éœ€è¦è¿›è¡Œå†…æ ¸æ€å’Œç”¨æˆ·æ€çš„åˆ‡æ¢ã€‚</p>
<p>æ¯”å¦‚ï¼šä½¿ç”¨fwriteå’Œwriteå¾ªç¯1000æ¬¡ï¼Œæ¯æ¬¡å†™å…¥ä¸€ä¸ªå­—èŠ‚ã€‚æ­¤æ—¶fwriteç”±äºæœ‰ç¼“å†²(4096å­—èŠ‚)ï¼Œå‡å°‘äº†ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åˆ‡æ¢ï¼Œé€Ÿåº¦å¿«ï¼›è€Œwriteç”¨äºè¦ä¸åœçš„åˆ‡æ¢ç”¨æˆ·æ€å’Œå†…æ ¸æ€ï¼Œé€Ÿåº¦æ…¢ã€‚straceå‘½ä»¤æŸ¥çœ‹ã€‚</p>
<p><img src="/images/27-linux-å†…å­˜ç®¡ç†/06-FILEç»“æ„ä½“.png" alt="&quot;06-FILEç»“æ„ä½“&quot;"><br><img src="/images/27-linux-å†…å­˜ç®¡ç†/04-pcbå’Œæ–‡ä»¶æè¿°ç¬¦.png" alt="&quot;04-pcbå’Œæ–‡ä»¶æè¿°ç¬¦&quot;"></p>
<center>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;"><b>å›¾3</b></div>
    <br>
</center>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">struct task_struct &#123;</span><br><span class="line">...</span><br><span class="line">struct files_struct *files;	&#x2F;&#x2F; æ‰“å¼€æ–‡ä»¶ä¿¡æ¯</span><br><span class="line">...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ç»“æ„ä½“PCB çš„æˆå‘˜å˜é‡file_struct *file æŒ‡å‘æ–‡ä»¶æè¿°ç¬¦è¡¨ã€‚<br>   ä»åº”ç”¨ç¨‹åºä½¿ç”¨è§’åº¦ï¼Œè¯¥æŒ‡é’ˆå¯ç†è§£è®°å¿†æˆä¸€ä¸ªå­—ç¬¦æŒ‡é’ˆæ•°ç»„ï¼Œä¸‹æ ‡0/1/2/3/4â€¦æ‰¾åˆ°æ–‡ä»¶ç»“æ„ä½“ã€‚<br>   æœ¬è´¨æ˜¯ä¸€ä¸ªé”®å€¼å¯¹0ã€1ã€2â€¦éƒ½åˆ†åˆ«å¯¹åº”å…·ä½“åœ°å€ã€‚ä½†é”®å€¼å¯¹ä½¿ç”¨çš„ç‰¹æ€§æ˜¯è‡ªåŠ¨æ˜ å°„ï¼Œæˆ‘ä»¬åªæ“ä½œé”®ä¸ç›´æ¥ä½¿ç”¨å€¼ã€‚<br>æ–°æ‰“å¼€æ–‡ä»¶è¿”å›æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­æœªä½¿ç”¨çš„æœ€å°æ–‡ä»¶æè¿°ç¬¦ã€‚</p>
<p>STDIN_FILENO      0<br>STDOUT_FILENO      1<br>STDERR_FILENO    2</p>
<p><img src="/images/27-linux-å†…å­˜ç®¡ç†/07-åº“å‡½æ•°å’Œç³»ç»Ÿå‡½æ•°çš„å…³ç³».png" alt="&quot;07-åº“å‡½æ•°å’Œç³»ç»Ÿå‡½æ•°çš„å…³ç³»&quot;"></p>
<p><center>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;"><b>å›¾4</b></div>
    <br>
</center><br>ä»<a href="https://www.cnblogs.com/joey-hua/p/5570691.html" target="_blank" rel="noopener">Linux0.11å†…æ ¸â€”ç³»ç»Ÿè°ƒç”¨æœºåˆ¶åˆ†æ</a>å¯çŸ¥ï¼Œç”¨æˆ·åŒºåˆ°å†…æ ¸åŒºçš„è½¬æ¢æ˜¯é€šè¿‡ä¸­æ–­å®ç°çš„ã€‚</p>
<h1 id="é“¾æ¥åœ°å€"><a href="#é“¾æ¥åœ°å€" class="headerlink" title="é“¾æ¥åœ°å€"></a>é“¾æ¥åœ°å€</h1><p><a href="https://blog.csdn.net/sunweixiang1002/article/details/80407886" target="_blank" rel="noopener">æ·±å…¥ç†è§£Cè¯­è¨€å†…å­˜ç®¡ç†</a><br><a href="https://blog.csdn.net/laiqun_ai/article/details/8528366" target="_blank" rel="noopener">bssã€dataå’ŒrodataåŒºåˆ«ä¸è”ç³»</a><br><a href="https://www.cnblogs.com/clover-toeic/p/3754433.html" target="_blank" rel="noopener">Linuxè™šæ‹Ÿåœ°å€ç©ºé—´å¸ƒå±€</a></p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>28-leetcode-æ»‘åŠ¨çª—å£</title>
    <url>/2020/02/19/28-leetcode-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="é•¿åº¦æœ€å°çš„å­æ•°ç»„"><a href="#é•¿åº¦æœ€å°çš„å­æ•°ç»„" class="headerlink" title="é•¿åº¦æœ€å°çš„å­æ•°ç»„"></a><a href="https://leetcode-cn.com/problems/minimum-size-subarray-sum/" target="_blank" rel="noopener">é•¿åº¦æœ€å°çš„å­æ•°ç»„</a></h1><ul>
<li><p>å†™æ³•ä¸€</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int minSubArrayLen(int s, vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        int left&#x3D;0, right&#x3D;-1;   &#x2F;&#x2F; nums[left...right]ä¸ºæ»‘åŠ¨çª—å£ï¼Œåˆå§‹ä¸ºç©º</span><br><span class="line">        int sum&#x3D;0;</span><br><span class="line">        int minLen&#x3D;nums.size()+1;  &#x2F;&#x2F; è®¾ç½®è¿ç»­å­æ•°ç»„ä¸ºä¸€ä¸ªä¸å¯èƒ½çš„æœ€å¤§å€¼</span><br><span class="line">        while(left&lt;nums.size())</span><br><span class="line">        &#123;</span><br><span class="line">            if(right+1&lt;nums.size() &amp;&amp; sum&lt;s)</span><br><span class="line">                sum +&#x3D; nums[++right];</span><br><span class="line">            else</span><br><span class="line">                sum -&#x3D; nums[left++];</span><br><span class="line"></span><br><span class="line">            if(sum&gt;&#x3D;s)</span><br><span class="line">                minLen &#x3D; min(minLen, right-left+1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if(minLen &#x3D;&#x3D; nums.size()+1)</span><br><span class="line">            return 0;</span><br><span class="line">        return minLen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å†™æ³•äºŒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int minSubArrayLen(int s, vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        int left&#x3D;0, right&#x3D;-1;   &#x2F;&#x2F; nums[left...right]ä¸ºæ»‘åŠ¨çª—å£ï¼Œåˆå§‹ä¸ºç©º</span><br><span class="line">        int sum&#x3D;0;</span><br><span class="line">        int res&#x3D;nums.size()+1;  &#x2F;&#x2F; è®¾ç½®è¿ç»­å­æ•°ç»„ä¸ºä¸€ä¸ªä¸å¯èƒ½çš„æœ€å¤§å€¼</span><br><span class="line">        while(left&lt;nums.size())</span><br><span class="line">        &#123;</span><br><span class="line">            if(sum&gt;&#x3D;s)</span><br><span class="line">            &#123;</span><br><span class="line">                res &#x3D; min(res, right-left+1);</span><br><span class="line">                sum -&#x3D; nums[left++];</span><br><span class="line">            &#125;</span><br><span class="line">            else if(right+1&lt;nums.size() &amp;&amp; sum &lt; s)</span><br><span class="line">                sum +&#x3D; nums[++right];</span><br><span class="line">            else</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if(res &#x3D;&#x3D; nums.size()+1)</span><br><span class="line">            return 0;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²-https-leetcode-cn-com-problems-longest-substring-without-repeating-characters"><a href="#æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²-https-leetcode-cn-com-problems-longest-substring-without-repeating-characters" class="headerlink" title="[æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²]{https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/}"></a>[æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²]{<a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/}" target="_blank" rel="noopener">https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/}</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int lengthOfLongestSubstring(string s) &#123;</span><br><span class="line">        int freq[256] &#x3D; &#123;0&#125;;</span><br><span class="line">        int left&#x3D;0, right&#x3D;-1;</span><br><span class="line">        int maxLen&#x3D;0;</span><br><span class="line">        while(left&lt;s.size())</span><br><span class="line">        &#123;</span><br><span class="line">            if(right+1&lt;s.size() &amp;&amp; freq[s[right+1]]&#x3D;&#x3D;0)</span><br><span class="line">                freq[s[++right]]++;</span><br><span class="line">            else</span><br><span class="line">                freq[s[left++]]--;</span><br><span class="line"></span><br><span class="line">            maxLen &#x3D; max(maxLen, right-left+1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return maxLen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯"><a href="#æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯" class="headerlink" title="æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯"></a><a href="https://leetcode-cn.com/problems/find-all-anagrams-in-a-string/" target="_blank" rel="noopener">æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯</a></h1><ul>
<li><p>æš´åŠ›è§£æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    vector&lt;int&gt; findAnagrams(string s, string p) &#123;</span><br><span class="line">        int left&#x3D;0;</span><br><span class="line">        vector&lt;int&gt; res;</span><br><span class="line">        while(left&lt;s.size())</span><br><span class="line">        &#123;</span><br><span class="line">            if(left+p.size()-1&lt;s.size() &amp;&amp; anagram(s, left, p)) &#x2F;&#x2F; æ²¡æœ‰é‡ç”¨</span><br><span class="line">            &#123;</span><br><span class="line">                res.push_back(left);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bool anagram(string s, int left, string p)</span><br><span class="line">    &#123;</span><br><span class="line">        if(s.size()-left &lt; p.size())</span><br><span class="line">            return false;</span><br><span class="line">        int freq[256] &#x3D; &#123;0&#125;;</span><br><span class="line">        for(char c : p)</span><br><span class="line">            freq[c]++;</span><br><span class="line"></span><br><span class="line">        for(int i&#x3D;left; i&lt;left+p.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(freq[s[i]] &#x3D;&#x3D; 0)</span><br><span class="line">                return false;</span><br><span class="line">            else</span><br><span class="line">                freq[s[i]]--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return true;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ»‘åŠ¨çª—å£</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    vector&lt;int&gt; findAnagrams(string s, string p) &#123;</span><br><span class="line">        vector&lt;int&gt; res;</span><br><span class="line"></span><br><span class="line">        if(s.size() &lt; p.size())</span><br><span class="line">            return res;</span><br><span class="line"></span><br><span class="line">        int left&#x3D;0, right&#x3D;-1;</span><br><span class="line">        vector&lt;int&gt; freq_p(26, 0);</span><br><span class="line">        for(char c : p)</span><br><span class="line">            freq_p[c-&#39;a&#39;]++;</span><br><span class="line"></span><br><span class="line">        vector&lt;int&gt; freq_s(26, 0);</span><br><span class="line"></span><br><span class="line">        while(left&lt;s.size())    &#x2F;&#x2F; é‡ç”¨</span><br><span class="line">        &#123;</span><br><span class="line">            if((right-left+1) &#x3D;&#x3D; p.size() &amp;&amp; same(freq_p, freq_s))</span><br><span class="line">            &#123;</span><br><span class="line">                res.push_back(left);</span><br><span class="line">                freq_s[s[left++]-&#39;a&#39;]--;</span><br><span class="line">            &#125;</span><br><span class="line">            else if(right+1&lt;s.size() &amp;&amp; (right-left+1)&lt;p.size())    </span><br><span class="line">            &#123;</span><br><span class="line">                freq_s[s[++right]-&#39;a&#39;]++;</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                freq_s[s[left++]-&#39;a&#39;]--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bool same(const vector&lt;int&gt;&amp; freq_p, const vector&lt;int&gt;&amp; freq_s)</span><br><span class="line">    &#123;</span><br><span class="line">        for(int i&#x3D;0; i&lt;26; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(freq_p[i] !&#x3D; freq_s[i])</span><br><span class="line">                return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="æœ€å°è¦†ç›–å­ä¸²"><a href="#æœ€å°è¦†ç›–å­ä¸²" class="headerlink" title="æœ€å°è¦†ç›–å­ä¸²"></a><a href="https://leetcode-cn.com/problems/minimum-window-substring/" target="_blank" rel="noopener">æœ€å°è¦†ç›–å­ä¸²</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    string minWindow(string s, string t) &#123;</span><br><span class="line">        int left&#x3D;0, right&#x3D;-1;</span><br><span class="line">        int minLen &#x3D; s.size()+1;</span><br><span class="line">        string mins;</span><br><span class="line"></span><br><span class="line">        vector&lt;int&gt; freq_t(256, 0);</span><br><span class="line">        for(char c : t)</span><br><span class="line">            freq_t[c]++;</span><br><span class="line"></span><br><span class="line">        vector&lt;int&gt; freq_s(256, 0);</span><br><span class="line"></span><br><span class="line">        while(left&lt;s.size())</span><br><span class="line">        &#123;</span><br><span class="line">            bool b &#x3D; contain(freq_s, freq_t);</span><br><span class="line">            if(right+1&lt;s.size() &amp;&amp; !b)</span><br><span class="line">                freq_s[s[++right]]++;</span><br><span class="line">            else if(b)</span><br><span class="line">            &#123;</span><br><span class="line">                if(((minLen&gt;right-left+1)))</span><br><span class="line">                &#123;</span><br><span class="line">                    minLen &#x3D; right-left+1;</span><br><span class="line">                    mins.assign(s, left, right-left+1);</span><br><span class="line">                &#125;</span><br><span class="line">                freq_s[s[left++]]--;</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return mins;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bool contain(const vector&lt;int&gt;&amp; freq_s, const vector&lt;int&gt;&amp; freq_t)</span><br><span class="line">    &#123;</span><br><span class="line">        for(int i&#x3D;0; i&lt;256; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            if((freq_s[i]-freq_t[i])&lt;0)</span><br><span class="line">                return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ»‘åŠ¨çª—å£çš„èµ·å§‹æ¡ä»¶ï¼šleft=0,right=-1;<br>æ»‘åŠ¨çª—å£çš„å¾ªç¯æ¡ä»¶ï¼šleft&lt;nums.size()<br>æ»‘åŠ¨çª—å£çš„rightæ¡ä»¶ï¼šright+1&lt;nums.size()<br>æ³¨æ„ï¼šé˜²æ­¢leftå’ŒrightæŒ‡é’ˆä¸åŠ¨å¯¼è‡´å¾ªç¯åœæ­¢çš„æƒ…å†µã€‚</p>
]]></content>
      <categories>
        <category>åˆ·é¢˜</category>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>29-tools-vscodeçš„ä½¿ç”¨</title>
    <url>/2020/02/23/29-tools-vscode%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><a href="https://code.visualstudio.com/docs" target="_blank" rel="noopener">vscodeå®˜æ–¹æ–‡æ¡£</a><br><a id="more"></a></p>
<h1 id="vscode-install"><a href="#vscode-install" class="headerlink" title="vscode-install"></a>vscode-install</h1><h2 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h2><p>ä¸‹è½½<a href="https://go.microsoft.com/fwlink/?LinkID=760868" target="_blank" rel="noopener">.deb package (64-bit)</a>ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt install .&#x2F;&lt;file&gt;.deb</span><br></pre></td></tr></table></figure></p>
<h1 id="vscode-C"><a href="#vscode-C" class="headerlink" title="vscode-C++"></a>vscode-C++</h1><h2 id="GCC-on-Linux"><a href="#GCC-on-Linux" class="headerlink" title="GCC on Linux"></a>GCC on Linux</h2><h3 id="å…ˆå†³æ¡ä»¶"><a href="#å…ˆå†³æ¡ä»¶" class="headerlink" title="å…ˆå†³æ¡ä»¶"></a>å…ˆå†³æ¡ä»¶</h3><ol>
<li>å®‰è£…VSCode</li>
<li>å®‰è£…C/C++ extension for VS Codeã€‚åœ¨Extensionsè§†å›¾(Ctrl+Shift+X)ä¸­æœç´¢â€™c++â€™æ¥å®‰è£…ã€‚<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/1.cpp-extension.png" alt="&quot;1.cpp-extension&quot;"></li>
</ol>
<p><strong>ç¡®ä¿GCCå·²ç»å®‰è£…</strong>ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get install gcc</span><br><span class="line">sudo apt-get install build-essential gdb</span><br></pre></td></tr></table></figure></p>
<h3 id="åˆ›å»ºHello-World"><a href="#åˆ›å»ºHello-World" class="headerlink" title="åˆ›å»ºHello World"></a>åˆ›å»ºHello World</h3><p>åœ¨ç»ˆç«¯ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºprojectsçš„ç©ºæ–‡ä»¶å¤¹ï¼Œå¯ä»¥åœ¨å…¶ä¸­æ”¾ç½®æ‰€æœ‰VSä»£ç é¡¹ç›®ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªåä¸ºhelloworldçš„å­æ–‡ä»¶å¤¹ï¼Œå¯¼èˆªåˆ°å…¶ä¸­ï¼Œé€šè¿‡è¾“å…¥ä»¥ä¸‹å‘½ä»¤åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­æ‰“å¼€VSä»£ç :<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir projects</span><br><span class="line">cd projects</span><br><span class="line">mkdir helloworld</span><br><span class="line">cd helloworld</span><br><span class="line">code .</span><br></pre></td></tr></table></figure><br><code>code .</code>å‘½ä»¤æ‰“å¼€å½“å‰å·¥ä½œæ–‡ä»¶å¤¹ä¸­çš„VSä»£ç ï¼Œè¿™å°†æˆä¸ºæ‚¨çš„â€œå·¥ä½œåŒºâ€ã€‚åœ¨ä½ æµè§ˆæ•™ç¨‹çš„è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šçœ‹åˆ°åœ¨å·¥ä½œåŒºçš„.vscodeæ–‡ä»¶å¤¹ä¸­åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶:</p>
<ul>
<li>tasks.json(æ„å»ºæŒ‡ä»¤)</li>
<li>launch.json(è°ƒè¯•å™¨è®¾ç½®)</li>
<li>c_cpp_properties.json(ç¼–è¯‘å™¨è·¯å¾„å’Œæ™ºèƒ½æç¤º)</li>
</ul>
<h3 id="æ·»åŠ æºä»£ç æ–‡ä»¶"><a href="#æ·»åŠ æºä»£ç æ–‡ä»¶" class="headerlink" title="æ·»åŠ æºä»£ç æ–‡ä»¶"></a>æ·»åŠ æºä»£ç æ–‡ä»¶</h3><p>åœ¨èœå•æ é€‰æ‹©File-&gt;New Fileå¹¶å‘½åä¸ºhelloworld.cppã€‚<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/2.file-explorer-mingw.png" alt="&quot;2.file-explorer-mingw&quot;"><br>æ·»åŠ æºä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;string&gt; msg &#123;&quot;Hello&quot;, &quot;C++&quot;, &quot;World&quot;, &quot;from&quot;, &quot;VS Code&quot;, &quot;and the C++ extension!&quot;&#125;;</span><br><span class="line"></span><br><span class="line">    for (const string&amp; word : msg)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; word &lt;&lt; &quot; &quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="ç¼–è¯‘helloworld-cpp"><a href="#ç¼–è¯‘helloworld-cpp" class="headerlink" title="ç¼–è¯‘helloworld.cpp"></a>ç¼–è¯‘helloworld.cpp</h3><p>ç¼–è¯‘éœ€è¦åˆ›å»ºä¸€ä¸ªtasks.jsonæ–‡ä»¶æ¥å‘Šè¯‰VS Codeå¦‚ä½•ç¼–è¯‘ç¨‹åºã€‚è¿™ä¸ªä»»åŠ¡è°ƒç”¨g++ç¼–è¯‘å™¨æ¥åŸºäºæºä»£ç åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚<br>ä»èœå•æ é€‰æ‹© Terminal-&gt;Configure Default Build Task(é…ç½®é»˜è®¤ç”Ÿæˆä»»åŠ¡)ã€‚åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¼šåˆ—å‡ºc++ç¼–è¯‘å™¨çš„å„ç§é¢„å®šä¹‰æ„å»ºä»»åŠ¡ã€‚é€‰æ‹©g++ build active fileã€‚è¿™å°†ä¼šåœ¨.vscodeæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºtasks.jsonæ–‡ä»¶ï¼Œå¹¶åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ã€‚tasks.jsonçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;version&quot;: &quot;2.0.0&quot;,</span><br><span class="line">	&quot;tasks&quot;: [</span><br><span class="line">		&#123;</span><br><span class="line">			&quot;type&quot;: &quot;shell&quot;,</span><br><span class="line">			&quot;label&quot;: &quot;C&#x2F;C++: g++ build active file&quot;,</span><br><span class="line">			&quot;command&quot;: &quot;&#x2F;usr&#x2F;bin&#x2F;g++&quot;,</span><br><span class="line">			&quot;args&quot;: [</span><br><span class="line">				&quot;-g&quot;,</span><br><span class="line">				&quot;$&#123;file&#125;&quot;,</span><br><span class="line">				&quot;-o&quot;,</span><br><span class="line">				&quot;$&#123;fileDirname&#125;&#x2F;$&#123;fileBasenameNoExtension&#125;&quot;</span><br><span class="line">			],</span><br><span class="line">			&quot;options&quot;: &#123;</span><br><span class="line">				&quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;</span><br><span class="line">			&#125;,</span><br><span class="line">			&quot;problemMatcher&quot;: [</span><br><span class="line">				&quot;$gcc&quot;</span><br><span class="line">			],</span><br><span class="line">			&quot;group&quot;: &#123;</span><br><span class="line">				&quot;kind&quot;: &quot;build&quot;,</span><br><span class="line">				&quot;isDefault&quot;: true</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><code>command</code>è®¾ç½®æŒ‡å®šè¦è¿è¡Œçš„ç¨‹åºï¼Œè¿™é‡Œæ˜¯g++ã€‚<br><code>args</code>æ•°ç»„æŒ‡å®šå°†ä¼ é€’ç»™g++çš„å‘½ä»¤è¡Œå‚æ•°ã€‚è¿™äº›å‚æ•°å¿…é¡»æŒ‰ç…§ç¼–è¯‘å™¨æœŸæœ›çš„é¡ºåºæŒ‡å®šã€‚è¿™ä¸ªä»»åŠ¡å‘Šè¯‰g++è·å–æ´»åŠ¨æ–‡ä»¶(${file})ï¼Œç¼–è¯‘å®ƒï¼Œå¹¶åœ¨å½“å‰ç›®å½•(${fileDirname})ä¸­åˆ›å»ºä¸€ä¸ªä¸æ´»åŠ¨æ–‡ä»¶åŒåä½†æ‰©å±•åçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ç”Ÿæˆhelloworldã€‚<br><code>label</code>å€¼æ˜¯ä½ å°†åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­çœ‹åˆ°çš„å€¼ï¼›ä½ å¯ä»¥ç»™å®ƒèµ·ä»»ä½•ä½ å–œæ¬¢çš„åå­—ã€‚<br><code>isDefault</code>ï¼šç»„å¯¹è±¡ä¸­çš„trueå€¼æŒ‡å®šå½“ä½ æŒ‰Ctrl+Shift+Bæ—¶è¯¥ä»»åŠ¡å°†ä¼šè¿è¡Œã€‚è¿™ä¸ªå±æ€§åªæ˜¯ä¸ºäº†æ–¹ä¾¿ï¼›å¦‚æœè®¾ç½®ä¸ºfalseï¼Œä»ç„¶å¯ä»¥åœ¨Terminalèœå•ä¸­è¿è¡Œä»»åŠ¡ï¼šRun Build Taskã€‚</p>
<p>æ³¨æ„ï¼šæ›´å¤šå…³äºtask.jsonçš„å˜é‡ä¿¡æ¯å¯ä»¥åœ¨<a href="https://code.visualstudio.com/docs/editor/variables-reference" target="_blank" rel="noopener">å˜é‡å¼•ç”¨</a>ä¸­æŸ¥çœ‹</p>
<p><strong>è¿è¡Œæ„å»º</strong>:</p>
<ol>
<li>å›åˆ° helloworld.cppã€‚</li>
<li>è¿è¡Œåœ¨tasks.jsonä¸­å®šä¹‰çš„ç”Ÿæˆä»»åŠ¡ï¼ŒæŒ‰Ctrl+Shift+Bæˆ–ä»èœå•æ é€‰æ‹©Terminal-&gt;Run Build Taskã€‚</li>
<li>å½“ä»»åŠ¡å¼€å§‹æ—¶ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°é›†æˆçš„ç»ˆç«¯é¢æ¿å‡ºç°åœ¨æºä»£ç ç¼–è¾‘å™¨çš„ä¸‹é¢ã€‚ä»»åŠ¡å®Œæˆåï¼Œç»ˆç«¯æ˜¾ç¤ºç¼–è¯‘å™¨çš„è¾“å‡ºï¼ŒæŒ‡ç¤ºæ„å»ºæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚å¯¹äºä¸€ä¸ªæˆåŠŸçš„g++æ„å»ºï¼Œè¾“å‡ºå¦‚ä¸‹æ‰€ç¤º:<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/7.wsl-task-in-terminal.png" alt="&quot;7.wsl-task-in-terminal&quot;"></li>
<li>ä½¿ç”¨ + buttonåˆ›å»ºä¸€ä¸ªæ–°çš„ç»ˆç«¯ã€‚è¿è¡Œ<code>ls</code>å°±å¯ä»¥çœ‹åˆ°å¯æ‰§è¡Œæ–‡ä»¶helloworldã€‚<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/8.wsl-bash-terminal.png" alt="&quot;8.wsl-bash-terminal&quot;"></li>
</ol>
<h3 id="è°ƒè¯•helloworld-cpp"><a href="#è°ƒè¯•helloworld-cpp" class="headerlink" title="è°ƒè¯•helloworld.cpp"></a>è°ƒè¯•helloworld.cpp</h3><p>è°ƒè¯•ç¨‹åº(F5)éœ€è¦åˆ›å»ºä¸€ä¸ªlaunch.jsonæ–‡ä»¶æ¥é…ç½®VS Codeå¯åŠ¨GDBè°ƒè¯•å™¨ã€‚ä»èœå•æ ä¸­é€‰æ‹© Run-&gt;Add Configurationâ€¦(æ·»åŠ é…ç½®â€¦)ï¼Œç„¶åé€‰æ‹©C++(GDB/LLDB)ã€‚<br>ç„¶åæ‚¨å°†çœ‹åˆ°å„ç§é¢„å®šä¹‰è°ƒè¯•é…ç½®çš„ä¸‹æ‹‰åˆ—è¡¨ã€‚é€‰æ‹©g++-build and debug active fileã€‚<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/5.build-and-debug-active-file.png" alt="&quot;5.build-and-debug-active-file&quot;"></p>
<p>VS Codeåˆ›å»ºä¸€ä¸ªlaunch.jsonæ–‡ä»¶ï¼Œåœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ï¼Œæ„å»ºå¹¶è¿è¡Œâ€™helloworldâ€™ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚ </span><br><span class="line">    &#x2F;&#x2F; æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚</span><br><span class="line">    &#x2F;&#x2F; æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https:&#x2F;&#x2F;go.microsoft.com&#x2F;fwlink&#x2F;?linkid&#x3D;830387</span><br><span class="line">    &quot;version&quot;: &quot;0.2.0&quot;,</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;g++ - ç”Ÿæˆå’Œè°ƒè¯•æ´»åŠ¨æ–‡ä»¶&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;cppdbg&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">            &quot;program&quot;: &quot;$&#123;fileDirname&#125;&#x2F;$&#123;fileBasenameNoExtension&#125;&quot;,</span><br><span class="line">            &quot;args&quot;: [],</span><br><span class="line">            &quot;stopAtEntry&quot;: false,</span><br><span class="line">            &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;,</span><br><span class="line">            &quot;environment&quot;: [],</span><br><span class="line">            &quot;externalConsole&quot;: false,</span><br><span class="line">            &quot;MIMode&quot;: &quot;gdb&quot;,</span><br><span class="line">            &quot;setupCommands&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;description&quot;: &quot;ä¸º gdb å¯ç”¨æ•´é½æ‰“å°&quot;,</span><br><span class="line">                    &quot;text&quot;: &quot;-enable-pretty-printing&quot;,</span><br><span class="line">                    &quot;ignoreFailures&quot;: true</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            &quot;preLaunchTask&quot;: &quot;C&#x2F;C++: g++ build active file&quot;,</span><br><span class="line">            &quot;miDebuggerPath&quot;: &quot;&#x2F;usr&#x2F;bin&#x2F;gdb&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><code>program</code>è®¾ç½®æŒ‡å®šè¦è°ƒè¯•çš„ç¨‹åºã€‚åœ¨è¿™é‡Œå®ƒè¢«è®¾ç½®ä¸ºæ´»åŠ¨æ–‡ä»¶å¤¹${fileDirname}å’Œæ— æ‰©å±•åçš„æ´»åŠ¨æ–‡ä»¶å${fileBasenameNoExtension}ã€‚å¦‚æœhelloworld.cppæ˜¯æ´»åŠ¨æ–‡ä»¶ï¼Œå®ƒå°†æ˜¯helloworldã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œc++æ‰©å±•ä¸ä¼šå‘æºä»£ç æ·»åŠ ä»»ä½•æ–­ç‚¹ï¼Œå¹¶ä¸”stopAtEntryå€¼è®¾ç½®ä¸ºfalseã€‚å°†stopAtEntryå€¼æ›´æ”¹ä¸ºtrueï¼Œä»¥ä¾¿åœ¨å¼€å§‹è°ƒè¯•æ—¶ä½¿è°ƒè¯•å™¨åœ¨ä¸»æ–¹æ³•ä¸Šåœæ­¢ã€‚</p>
<p><strong>å¯åŠ¨è°ƒè¯•ä¼šè¯</strong>ï¼š</p>
<ol>
<li>å›åˆ°helloworld.cppï¼Œä½¿å…¶æˆä¸ºæ´»åŠ¨æ–‡ä»¶ã€‚</li>
<li>æŒ‰F5æˆ–ä»ä¸»èœå•ä¸­é€‰æ‹© run&gt;Start Debuggingã€‚</li>
</ol>
<h3 id="C-C-é…ç½®"><a href="#C-C-é…ç½®" class="headerlink" title="C/C++é…ç½®"></a>C/C++é…ç½®</h3><p>å¦‚æœæƒ³å¯¹C/C++æ‰©å±•è¿›è¡Œæ›´å¤šçš„æ§åˆ¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªc_cpp_properties.jsonæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å…è®¸ä½ ä¿®æ”¹å¦‚ç¼–è¯‘å™¨è·¯å¾„ï¼ŒåŒ…æ‹¬è·¯å¾„ã€c++æ ‡å‡†(é»˜è®¤c++17)ç­‰è®¾ç½®ã€‚å¯ä»¥é€šè¿‡ä»å‘½ä»¤é¢æ¿(Ctrl+Shift+P)è¿è¡Œå‘½ä»¤ï¼šC/C++ Edit Configurations(UI)æ¥æŸ¥çœ‹C/C++é…ç½®ã€‚<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/6.command-palette.png" alt="&quot;6.command-palette&quot;">ã€‚<br>è¿™ä¼šæ‰“å¼€C/C++ Configurationé¡µé¢ã€‚å½“ä½ ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼ŒVS Codeä¼šå°†è¿™äº›å†…å®¹å†™å…¥.vscodeæ–‡ä»¶å¤¹ä¸‹çš„c_cpp_properties.jsonã€‚</p>
<p><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/9.intellisense-configurations-wsl.png" alt="&quot;9.intellisense-configurations-wsl.&quot;"><br>å¦‚æœä½ çš„ç¨‹åºåŒ…å«ä¸åœ¨ä½ çš„å·¥ä½œåŒºæˆ–è€…æ ‡å‡†åº“è·¯å¾„ä¸‹çš„å¤´æ–‡ä»¶ï¼Œä½ åªéœ€è¦ä¿®æ”¹<strong>include path</strong>è®¾ç½®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Linux&quot;,</span><br><span class="line">            &quot;includePath&quot;: [</span><br><span class="line">                &quot;$&#123;workspaceFolder&#125;&#x2F;**&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;defines&quot;: [],</span><br><span class="line">            &quot;compilerPath&quot;: &quot;&#x2F;usr&#x2F;bin&#x2F;clang&quot;,</span><br><span class="line">            &quot;cStandard&quot;: &quot;c11&quot;,</span><br><span class="line">            &quot;cppStandard&quot;: &quot;c++14&quot;,</span><br><span class="line">            &quot;intelliSenseMode&quot;: &quot;clang-x64&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;version&quot;: 4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>VSä»£ç ç°åœ¨é…ç½®ä¸ºåœ¨Linuxä¸Šä½¿ç”¨gccã€‚é…ç½®åº”ç”¨äºå½“å‰å·¥ä½œåŒºã€‚è¦é‡ç”¨é…ç½®ï¼Œåªéœ€å°†JSONæ–‡ä»¶å¤åˆ¶åˆ°æ–°é¡¹ç›®æ–‡ä»¶å¤¹(å·¥ä½œåŒº)ä¸­çš„.vscodeæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶æ ¹æ®éœ€è¦æ›´æ”¹æºæ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ã€‚</p>
<h2 id="GCC-on-Windows"><a href="#GCC-on-Windows" class="headerlink" title="GCC on Windows"></a>GCC on Windows</h2><p>é…ç½®VSCodeä½¿ç”¨Mingw-64ä¸­çš„GCC C++ç¼–è¯‘å™¨å’ŒGDBè°ƒè¯•å™¨åœ¨Windowsä¸Šè¿è¡Œç¨‹åºã€‚</p>
<h3 id="å…ˆå†³æ¡ä»¶-1"><a href="#å…ˆå†³æ¡ä»¶-1" class="headerlink" title="å…ˆå†³æ¡ä»¶"></a>å…ˆå†³æ¡ä»¶</h3><ol>
<li>å®‰è£…VSCode</li>
<li>å®‰è£…C/C++ extension for VS Codeã€‚åœ¨Extensionsè§†å›¾(Ctrl+Shift+X)ä¸­æœç´¢â€™c++â€™æ¥å®‰è£…ã€‚<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/1.cpp-extension.png" alt="&quot;1.cpp-extension&quot;"></li>
<li>é€šè¿‡Source Forgeå®‰è£…Mingw-64ã€‚å•å‡»<a href="https://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/mingw-builds/installer/mingw-w64-install.exe/download" target="_blank" rel="noopener">Mingw-64</a>å¼€å§‹ä¸‹è½½åœ¨çº¿å®‰è£…ç¨‹åºã€‚æ³¨æ„ï¼Œåœ¨çº¿å®‰è£…çš„æ–¹æ³•éœ€è¦VPNã€‚å¦‚æœæ— æ³•åœ¨çº¿å®‰è£…ï¼Œå¯ä»¥åˆ°Source Forgeçš„<a href="https://sourceforge.net/projects/mingw-w64/files/" target="_blank" rel="noopener">Mingwé¡µé¢</a>ä¸‹è½½å¯¹åº”çš„ç¦»çº¿å®‰è£…åŒ…ï¼Œç„¶åå°†ç¦»çº¿å®‰è£…åŒ…è§£å‹ã€‚è¿™é‡Œæˆ‘å°†è§£å‹æ–‡ä»¶å¤¹ä¸­çš„mingw64æ–‡ä»¶å¤¹å®‰è£…åˆ°C:\mingw-w64æ–‡ä»¶å¤¹ä¸‹ã€‚</li>
<li>å°†Mingw-w64 bin æ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­<ul>
<li>åœ¨æœç´¢æ è¾“å…¥ æ­¤ç”µè„‘ï¼Œå³é”®å±æ€§ã€‚ç‚¹å‡» é«˜çº§ç³»ç»Ÿè®¾ç½®ï¼Œé€‰æ‹©é«˜çº§é€‰é¡¹å¡ã€‚</li>
<li>ç‚¹å‡»ç¯å¢ƒå˜é‡ã€‚é€‰æ‹©ç³»ç»Ÿå˜é‡-&gt;Pathå˜é‡-&gt;ç¼–è¾‘ï¼Œæ·»åŠ mingw64çš„binç›®å½•åˆ°ç¯å¢ƒå˜é‡ã€‚<br>æ¯”å¦‚ï¼šc:\mingw-w64\x86_64-8.1.0-win32-seh-rt_v6-rev0\mingw64\binã€‚</li>
</ul>
</li>
<li>æ£€æµ‹MinGWçš„å®‰è£…<br>æ‰“å¼€cmdï¼Œè¾“å…¥ï¼š<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">g++ --version</span><br><span class="line">gdb --version</span><br></pre></td></tr></table></figure>
å¦‚æœæœ‰è¾“å‡ºï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</li>
</ol>
<h3 id="åˆ›å»ºHello-World-1"><a href="#åˆ›å»ºHello-World-1" class="headerlink" title="åˆ›å»ºHello World"></a>åˆ›å»ºHello World</h3><p>åœ¨Windowså‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºprojectsçš„ç©ºæ–‡ä»¶å¤¹ï¼Œå¯ä»¥åœ¨å…¶ä¸­æ”¾ç½®æ‰€æœ‰VSä»£ç é¡¹ç›®ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªåä¸ºhelloworldçš„å­æ–‡ä»¶å¤¹ï¼Œå¯¼èˆªåˆ°å…¶ä¸­ï¼Œé€šè¿‡è¾“å…¥ä»¥ä¸‹å‘½ä»¤åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­æ‰“å¼€VSä»£ç :<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir projects</span><br><span class="line">cd projects</span><br><span class="line">mkdir helloworld</span><br><span class="line">cd helloworld</span><br><span class="line">code .</span><br></pre></td></tr></table></figure><br><code>code .</code>å‘½ä»¤æ‰“å¼€å½“å‰å·¥ä½œæ–‡ä»¶å¤¹ä¸­çš„VSä»£ç ï¼Œè¿™å°†æˆä¸ºæ‚¨çš„â€œå·¥ä½œåŒºâ€ã€‚åœ¨ä½ æµè§ˆæ•™ç¨‹çš„è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šçœ‹åˆ°åœ¨å·¥ä½œåŒºçš„.vscodeæ–‡ä»¶å¤¹ä¸­åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶:</p>
<ul>
<li>tasks.json(æ„å»ºæŒ‡ä»¤)</li>
<li>launch.json(è°ƒè¯•å™¨è®¾ç½®)</li>
<li>c_cpp_properties.json(ç¼–è¯‘å™¨è·¯å¾„å’Œæ™ºèƒ½æç¤º)</li>
</ul>
<h3 id="æ·»åŠ æºä»£ç æ–‡ä»¶-1"><a href="#æ·»åŠ æºä»£ç æ–‡ä»¶-1" class="headerlink" title="æ·»åŠ æºä»£ç æ–‡ä»¶"></a>æ·»åŠ æºä»£ç æ–‡ä»¶</h3><p>åœ¨èœå•æ é€‰æ‹©File-&gt;New Fileå¹¶å‘½åä¸ºhelloworld.cppã€‚<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/2.file-explorer-mingw.png" alt="&quot;2.file-explorer-mingw&quot;"><br>æ·»åŠ æºä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;string&gt; msg &#123;&quot;Hello&quot;, &quot;C++&quot;, &quot;World&quot;, &quot;from&quot;, &quot;VS Code&quot;, &quot;and the C++ extension!&quot;&#125;;</span><br><span class="line"></span><br><span class="line">    for (const string&amp; word : msg)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; word &lt;&lt; &quot; &quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="ç¼–è¯‘helloworld-cpp-1"><a href="#ç¼–è¯‘helloworld-cpp-1" class="headerlink" title="ç¼–è¯‘helloworld.cpp"></a>ç¼–è¯‘helloworld.cpp</h3><p>ç¼–è¯‘éœ€è¦åˆ›å»ºä¸€ä¸ªtasks.jsonæ–‡ä»¶æ¥å‘Šè¯‰VS Codeå¦‚ä½•ç¼–è¯‘ç¨‹åºã€‚è¿™ä¸ªä»»åŠ¡è°ƒç”¨g++ç¼–è¯‘å™¨æ¥åŸºäºæºä»£ç åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚<br>ä»èœå•æ é€‰æ‹© Terminal-&gt;Configure Default Build Taskã€‚åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¼šåˆ—å‡ºc++ç¼–è¯‘å™¨çš„å„ç§é¢„å®šä¹‰æ„å»ºä»»åŠ¡ã€‚é€‰æ‹©g++.exe build active fileã€‚è¿™å°†ä¼šåœ¨.vscodeæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºtasks.jsonæ–‡ä»¶ï¼Œå¹¶åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ã€‚tasks.jsonçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;version&quot;: &quot;2.0.0&quot;,</span><br><span class="line">	&quot;tasks&quot;: [</span><br><span class="line">		&#123;</span><br><span class="line">			&quot;type&quot;: &quot;shell&quot;,</span><br><span class="line">			&quot;label&quot;: &quot;C&#x2F;C++: g++.exe build active file&quot;,</span><br><span class="line">			&quot;command&quot;: &quot;C:\\mingw-w64\\x86_64-8.1.0-release-posix-sjlj-rt_v6-rev0\\mingw64\\bin\\g++.exe&quot;,</span><br><span class="line">			&quot;args&quot;: [</span><br><span class="line">				&quot;-g&quot;,</span><br><span class="line">				&quot;$&#123;file&#125;&quot;,</span><br><span class="line">				&quot;-o&quot;,</span><br><span class="line">				&quot;$&#123;fileDirname&#125;\\$&#123;fileBasenameNoExtension&#125;.exe&quot;</span><br><span class="line">			],</span><br><span class="line">			&quot;options&quot;: &#123;</span><br><span class="line">				&quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;</span><br><span class="line">			&#125;,</span><br><span class="line">			&quot;problemMatcher&quot;: [</span><br><span class="line">				&quot;$gcc&quot;</span><br><span class="line">			],</span><br><span class="line">			&quot;group&quot;: &#123;</span><br><span class="line">				&quot;kind&quot;: &quot;build&quot;,</span><br><span class="line">				&quot;isDefault&quot;: true</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><code>command</code>è®¾ç½®æŒ‡å®šè¦è¿è¡Œçš„ç¨‹åºï¼Œè¿™é‡Œæ˜¯g++ã€‚<br><code>args</code>æ•°ç»„æŒ‡å®šå°†ä¼ é€’ç»™g++çš„å‘½ä»¤è¡Œå‚æ•°ã€‚è¿™äº›å‚æ•°å¿…é¡»æŒ‰ç…§ç¼–è¯‘å™¨æœŸæœ›çš„é¡ºåºæŒ‡å®šã€‚è¿™ä¸ªä»»åŠ¡å‘Šè¯‰g++è·å–æ´»åŠ¨æ–‡ä»¶(${file})ï¼Œç¼–è¯‘å®ƒï¼Œå¹¶åœ¨å½“å‰ç›®å½•(${fileDirname})ä¸­åˆ›å»ºä¸€ä¸ªä¸æ´»åŠ¨æ–‡ä»¶åŒåä½†æ‰©å±•åä¸º.exeçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ç”Ÿæˆhelloworld.exeã€‚<br><code>label</code>å€¼æ˜¯ä½ å°†åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­çœ‹åˆ°çš„å€¼ï¼›ä½ å¯ä»¥ç»™å®ƒèµ·ä»»ä½•ä½ å–œæ¬¢çš„åå­—ã€‚<br><code>isDefault</code>ï¼šç»„å¯¹è±¡ä¸­çš„trueå€¼æŒ‡å®šå½“ä½ æŒ‰Ctrl+Shift+Bæ—¶è¯¥ä»»åŠ¡å°†ä¼šè¿è¡Œã€‚è¿™ä¸ªå±æ€§åªæ˜¯ä¸ºäº†æ–¹ä¾¿ï¼›å¦‚æœè®¾ç½®ä¸ºfalseï¼Œä»ç„¶å¯ä»¥åœ¨Terminalèœå•ä¸­è¿è¡Œä»»åŠ¡ï¼šRun Build Taskã€‚</p>
<p>æ³¨æ„ï¼šæ›´å¤šå…³äºtask.jsonçš„å˜é‡ä¿¡æ¯å¯ä»¥åœ¨<a href="https://code.visualstudio.com/docs/editor/variables-reference" target="_blank" rel="noopener">å˜é‡å¼•ç”¨</a>ä¸­æŸ¥çœ‹</p>
<p><strong>è¿è¡Œæ„å»º</strong>:</p>
<ol>
<li>å›åˆ° helloworld.cppã€‚</li>
<li>è¿è¡Œåœ¨tasks.jsonä¸­å®šä¹‰çš„ç”Ÿæˆä»»åŠ¡ï¼ŒæŒ‰Ctrl+Shift+Bæˆ–ä»èœå•æ é€‰æ‹©Terminal-&gt;Run Build Taskã€‚</li>
<li>å½“ä»»åŠ¡å¼€å§‹æ—¶ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°é›†æˆçš„ç»ˆç«¯é¢æ¿å‡ºç°åœ¨æºä»£ç ç¼–è¾‘å™¨çš„ä¸‹é¢ã€‚ä»»åŠ¡å®Œæˆåï¼Œç»ˆç«¯æ˜¾ç¤ºç¼–è¯‘å™¨çš„è¾“å‡ºï¼ŒæŒ‡ç¤ºæ„å»ºæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚å¯¹äºä¸€ä¸ªæˆåŠŸçš„g++æ„å»ºï¼Œè¾“å‡ºå¦‚ä¸‹æ‰€ç¤º:<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/3.build-output-in-terminal.png" alt="&quot;3.build-output-in-terminal&quot;"></li>
<li>ä½¿ç”¨ + buttonåˆ›å»ºä¸€ä¸ªæ–°çš„ç»ˆç«¯ã€‚è¿è¡Œ<code>dir</code>å°±å¯ä»¥çœ‹åˆ°å¯æ‰§è¡Œæ–‡ä»¶helloworld.exeã€‚<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/4.helloworld-in-terminal.png" alt="&quot;4.helloworld-in-terminal&quot;"></li>
</ol>
<p>æ³¨æ„ï¼šè¿è¡Œæ—¶å¯èƒ½æ²¡æœ‰è¾“å‡ºã€‚åŸå› åœ¨äºg++ç¼–è¯‘è¿è¡Œæ—¶å‡ºç°ï¼šæ— æ³•å®šä½ç¨‹åºè¾“å…¥ç‚¹__gxx_personality_v0 é—®é¢˜ã€‚<br><a href="https://blog.csdn.net/lushuchengsky/article/details/78002565" target="_blank" rel="noopener">è§£å†³æ–¹æ³•</a></p>
<p><strong>4ç§è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨-static ç¼–è¯‘[g++ -static file.cpp]</li>
<li>åˆ é™¤æ‰å…¶ä»–å«æœ‰libstdc++-6.dll çš„PATHç¯å¢ƒå˜é‡ï¼Œåªç•™ä¸‹mingwçš„</li>
<li>å°† libstdc++-6.dll æ–‡ä»¶ä¸ä»£ç æ”¾ç½®åŒä¸€æ–‡ä»¶ç¼–è¯‘</li>
<li>å°† libstdc++-6.dll æ–‡ä»¶æ”¾åˆ°System32(åšä¸»å°è¯•è¿™ä¸ªæœ‰æ•ˆ)æˆ–SysWOW64æ–‡ä»¶å¤¹ä¸‹ã€‚  [è¿™ä¸ªæ¯”è¾ƒæ–¹ä¾¿]</li>
</ol>
<h3 id="è°ƒè¯•helloworld-cpp-1"><a href="#è°ƒè¯•helloworld-cpp-1" class="headerlink" title="è°ƒè¯•helloworld.cpp"></a>è°ƒè¯•helloworld.cpp</h3><p>è°ƒè¯•ç¨‹åº(F5)éœ€è¦åˆ›å»ºä¸€ä¸ªlaunch.jsonæ–‡ä»¶æ¥é…ç½®VS Codeå¯åŠ¨GDBè°ƒè¯•å™¨ã€‚ä»èœå•æ ä¸­é€‰æ‹© Run-&gt;Add Configurationâ€¦ï¼Œç„¶åé€‰æ‹©C++(GDB/LLDB)ã€‚<br>ç„¶åæ‚¨å°†çœ‹åˆ°å„ç§é¢„å®šä¹‰è°ƒè¯•é…ç½®çš„ä¸‹æ‹‰åˆ—è¡¨ã€‚é€‰æ‹©g++.exe-ç”Ÿæˆå’Œè°ƒè¯•æ´»åŠ¨æ–‡ä»¶ã€‚<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/5.build-and-debug-active-file.png" alt="&quot;5.build-and-debug-active-file&quot;"></p>
<p>VS Codeåˆ›å»ºä¸€ä¸ªlaunch.jsonæ–‡ä»¶ï¼Œåœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ï¼Œæ„å»ºå¹¶è¿è¡Œâ€™helloworldâ€™ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; Use IntelliSense to learn about possible attributes.</span><br><span class="line">    &#x2F;&#x2F; Hover to view descriptions of existing attributes.</span><br><span class="line">    &#x2F;&#x2F; For more information, visit: https:&#x2F;&#x2F;go.microsoft.com&#x2F;fwlink&#x2F;?linkid&#x3D;830387</span><br><span class="line">    &quot;version&quot;: &quot;0.2.0&quot;,</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;g++.exe - ç”Ÿæˆå’Œè°ƒè¯•æ´»åŠ¨æ–‡ä»¶&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;cppdbg&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">            &quot;program&quot;: &quot;$&#123;fileDirname&#125;\\$&#123;fileBasenameNoExtension&#125;.exe&quot;,</span><br><span class="line">            &quot;args&quot;: [],</span><br><span class="line">            &quot;stopAtEntry&quot;: false,</span><br><span class="line">            &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;,</span><br><span class="line">            &quot;environment&quot;: [],</span><br><span class="line">            &quot;externalConsole&quot;: false,</span><br><span class="line">            &quot;MIMode&quot;: &quot;gdb&quot;,</span><br><span class="line">            &quot;miDebuggerPath&quot;: &quot;C:\\mingw-w64\\x86_64-8.1.0-release-posix-sjlj-rt_v6-rev0\\mingw64\\bin\\gdb.exe&quot;,</span><br><span class="line">            &quot;setupCommands&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;description&quot;: &quot;ä¸º gdb å¯ç”¨æ•´é½æ‰“å°&quot;,</span><br><span class="line">                    &quot;text&quot;: &quot;-enable-pretty-printing&quot;,</span><br><span class="line">                    &quot;ignoreFailures&quot;: true</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            &quot;preLaunchTask&quot;: &quot;C&#x2F;C++: g++.exe build active file&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><code>program</code>è®¾ç½®æŒ‡å®šè¦è°ƒè¯•çš„ç¨‹åºã€‚åœ¨è¿™é‡Œå®ƒè¢«è®¾ç½®ä¸ºæ´»åŠ¨æ–‡ä»¶å¤¹${fileDirname}å’Œæ‰©å±•åä¸º.exeçš„æ´»åŠ¨æ–‡ä»¶å${fileBasenameNoExtension}ã€‚å¦‚æœhelloworld.cppæ˜¯æ´»åŠ¨æ–‡ä»¶ï¼Œå®ƒå°†æ˜¯helloworld.exeã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œc++æ‰©å±•ä¸ä¼šå‘æºä»£ç æ·»åŠ ä»»ä½•æ–­ç‚¹ï¼Œå¹¶ä¸”stopAtEntryå€¼è®¾ç½®ä¸ºfalseã€‚å°†stopAtEntryå€¼æ›´æ”¹ä¸ºtrueï¼Œä»¥ä¾¿åœ¨å¼€å§‹è°ƒè¯•æ—¶ä½¿è°ƒè¯•å™¨åœ¨ä¸»æ–¹æ³•ä¸Šåœæ­¢ã€‚</p>
<p><strong>å¯åŠ¨è°ƒè¯•ä¼šè¯</strong>ï¼š</p>
<ol>
<li>å›åˆ°helloworld.cppï¼Œä½¿å…¶æˆä¸ºæ´»åŠ¨æ–‡ä»¶ã€‚</li>
<li>æŒ‰F5æˆ–ä»ä¸»èœå•ä¸­é€‰æ‹© run&gt;Start Debuggingã€‚</li>
</ol>
<h3 id="C-C-é…ç½®-1"><a href="#C-C-é…ç½®-1" class="headerlink" title="C/C++é…ç½®"></a>C/C++é…ç½®</h3><p>å¦‚æœæƒ³å¯¹C/C++æ‰©å±•è¿›è¡Œæ›´å¤šçš„æ§åˆ¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªc_cpp_properties.jsonæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å…è®¸ä½ ä¿®æ”¹å¦‚ç¼–è¯‘å™¨è·¯å¾„ï¼ŒåŒ…æ‹¬è·¯å¾„ã€c++æ ‡å‡†(é»˜è®¤c++17)ç­‰è®¾ç½®ã€‚å¯ä»¥é€šè¿‡ä»å‘½ä»¤é¢æ¿(Ctrl+Shift+P)è¿è¡Œå‘½ä»¤ï¼šC/C++ Edit Configurations(UI)æ¥æŸ¥çœ‹C/C++é…ç½®ã€‚<br><img src="/images/29-tools-vscodeçš„ä½¿ç”¨/6.command-palette.png" alt="&quot;6.command-palette&quot;">ã€‚<br>è¿™ä¼šæ‰“å¼€C/C++ Configurationé¡µé¢ã€‚å½“ä½ ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼ŒVS Codeä¼šå°†è¿™äº›å†…å®¹å†™å…¥.vscodeæ–‡ä»¶å¤¹ä¸‹çš„c_cpp_properties.jsonã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Win32&quot;,</span><br><span class="line">            &quot;includePath&quot;: [</span><br><span class="line">                &quot;$&#123;workspaceFolder&#125;&#x2F;**&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;defines&quot;: [</span><br><span class="line">                &quot;_DEBUG&quot;,</span><br><span class="line">                &quot;UNICODE&quot;,</span><br><span class="line">                &quot;_UNICODE&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;windowsSdkVersion&quot;: &quot;10.0.17763.0&quot;,</span><br><span class="line">            &quot;compilerPath&quot;: &quot;C:&#x2F;mingw-w64&#x2F;x86_64-8.1.0-release-posix-sjlj-rt_v6-rev0&#x2F;mingw64&#x2F;bin&#x2F;g++.exe&quot;,</span><br><span class="line">            &quot;cStandard&quot;: &quot;c11&quot;,</span><br><span class="line">            &quot;cppStandard&quot;: &quot;c++17&quot;,</span><br><span class="line">            &quot;intelliSenseMode&quot;: &quot;clang-x86&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;version&quot;: 4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>åªæœ‰å½“ç¨‹åºåŒ…å«çš„å¤´æ–‡ä»¶ä¸åœ¨å·¥ä½œåŒºæˆ–åœ¨æ ‡å‡†åº“è·¯å¾„ä¸­æ—¶ï¼Œæ‰éœ€è¦æ·»åŠ åˆ°Include pathæ•°ç»„è®¾ç½®ä¸­ã€‚</p>
<p>compilerPathè®¾ç½®æ˜¯é…ç½®ä¸­çš„ä¸€ä¸ªé‡è¦è®¾ç½®ã€‚æ‰©å±•ä½¿ç”¨å®ƒæ¥æ¨æ–­c++æ ‡å‡†åº“å¤´æ–‡ä»¶çš„è·¯å¾„ã€‚å½“æ‰©å±•çŸ¥é“åœ¨å“ªé‡Œæ‰¾åˆ°è¿™äº›æ–‡ä»¶æ—¶ï¼Œå®ƒå¯ä»¥æä¾›åƒæ™ºèƒ½è¡¥å…¨è¿™æ ·çš„æœ‰ç”¨ç‰¹æ€§ï¼Œå¹¶è¿›å…¥å®šä¹‰å¯¼èˆªã€‚</p>
<p>C/C++æ‰©å±•å°è¯•æ ¹æ®åœ¨ç³»ç»Ÿä¸Šæ‰¾åˆ°çš„é»˜è®¤ç¼–è¯‘å™¨æ¥å¡«å……compilerPathã€‚è¯¥æ‰©å±•åœ¨å‡ ä¸ªå¸¸è§çš„ç¼–è¯‘å™¨ä½ç½®æŸ¥æ‰¾ã€‚<br>compilerPathæœç´¢é¡ºåºä¸ºï¼š</p>
<ul>
<li>é¦–å…ˆæ£€æŸ¥Microsoft Visual C++ç¼–è¯‘å™¨</li>
<li>ç„¶ååœ¨Windows Linuxå­ç³»ç»Ÿ(WSL)ä¸Šå¯»æ‰¾g++</li>
<li>ç„¶åMingw-w64 g++</li>
</ul>
<p>å¦‚æœä½ å®‰è£…äº†Visual Studioæˆ–WSLï¼Œä½ å¯èƒ½éœ€è¦æ›´æ”¹compilerPathä»¥åŒ¹é…é¡¹ç›®çš„é¦–é€‰ç¼–è¯‘å™¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åœ¨C:\ Mingw-w64ä¸‹å®‰è£…Mingw-w64ç‰ˆæœ¬8.1.0ï¼Œä½¿ç”¨Win32çº¿ç¨‹å’ŒSEHå¼‚å¸¸å¤„ç†é€‰é¡¹ï¼Œè·¯å¾„å°†æ˜¯è¿™æ ·çš„:C: Mingw-w64 \x86_64-8.1.0-win32-seh-rt_v6-rev0\mingw64\bin\g++.exeã€‚æ³¨æ„ï¼šæ­¤æ—¶intelliSenseModeè¦ä¿®æ”¹ä¸ºï¼šâ€clang-x86â€ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ¬æ–‡ç•¥å»äº†è°ƒè¯•çš„éƒ¨åˆ†å†…å®¹ï¼Œè¯¦ç»†æŸ¥çœ‹VS CodeåŸæ–‡ã€‚</p>
]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>tools</tag>
      </tags>
  </entry>
  <entry>
    <title>30-tools-sourceInsightçš„ä½¿ç”¨</title>
    <url>/2020/02/24/30-tools-sourceInsight%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="Source-Insightçš„åŸºæœ¬ä½¿ç”¨"><a href="#Source-Insightçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="Source Insightçš„åŸºæœ¬ä½¿ç”¨"></a>Source Insightçš„åŸºæœ¬ä½¿ç”¨</h1><h2 id="å®‰è£…Source-Insight4096"><a href="#å®‰è£…Source-Insight4096" class="headerlink" title="å®‰è£…Source Insight4096"></a>å®‰è£…Source Insight4096</h2><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1MhjXbHnP8MuX6tSHDuVz6w" target="_blank" rel="noopener">https://pan.baidu.com/s/1MhjXbHnP8MuX6tSHDuVz6w</a><br>æå–ç ï¼š9ovr</p>
<h2 id="å»ºç«‹å·¥ç¨‹åŠæ·»åŠ æ–‡ä»¶"><a href="#å»ºç«‹å·¥ç¨‹åŠæ·»åŠ æ–‡ä»¶" class="headerlink" title="å»ºç«‹å·¥ç¨‹åŠæ·»åŠ æ–‡ä»¶"></a>å»ºç«‹å·¥ç¨‹åŠæ·»åŠ æ–‡ä»¶</h2><ol>
<li>é€‰æ‹©èœå•æ Project-&gt;New Projectï¼Œå¦‚å›¾1ï¼š<br><img src="/images/30-tools-sourceInsightçš„ä½¿ç”¨/1.åˆ›å»ºå·¥ç¨‹.png" alt="&quot;1.åˆ›å»ºå·¥ç¨‹&quot;"><center>
 <div style="color:orange; border-bottom: 1px solid #d9d9d9;
 display: inline-block;
 color: #999;
 padding: 2px;"><b>å›¾1</b></div>
 <br>
</center>


</li>
</ol>
<ol>
<li><p>åˆ›å»ºSIé¡¹ç›®ï¼Œæ³¨æ„æœ€å¥½æŠŠSIé¡¹ç›®å•ç‹¬æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚å›¾2ã€‚<br><img src="/images/30-tools-sourceInsightçš„ä½¿ç”¨/2.é¡¹ç›®æ–‡ä»¶ä½ç½®.png" alt="&quot;2.é¡¹ç›®æ–‡ä»¶ä½ç½®&quot;"></p>
<center>
 <div style="color:orange; border-bottom: 1px solid #d9d9d9;
 display: inline-block;
 color: #999;
 padding: 2px;"><b>å›¾2</b></div>
 <br>
</center>
</li>
<li><p>åˆ›å»ºå¥½é¡¹ç›®åï¼Œéœ€è¦æ·»åŠ é¡¹ç›®æ–‡ä»¶ã€‚æ³¨æ„SIä¸­ï¼Œé»˜è®¤æ”¯æŒä¸€äº›æ–‡ä»¶ç±»å‹ã€‚ä½†æœ‰ä¸€äº›æ–‡ä»¶ç±»å‹(å¦‚:.s)ä¸æ”¯æŒã€‚æ­¤æ—¶å¯ä»¥ä¸å‹¾é€‰ Show only known file typeså°†å…¶æ·»åŠ ã€‚ä¹Ÿå¯ä»¥åœ¨èœå•æ  OptionS-&gt;File Type Optionsä¸­æ·»åŠ SIä¸æ”¯æŒè§£æçš„æ–‡ä»¶ç±»å‹ã€‚<br><img src="/images/30-tools-sourceInsightçš„ä½¿ç”¨/3.æ·»åŠ æºä»£ç .png" alt="&quot;3.æ·»åŠ æºä»£ç &quot;"></p>
<center>
 <div style="color:orange; border-bottom: 1px solid #d9d9d9;
 display: inline-block;
 color: #999;
 padding: 2px;"><b>å›¾3</b></div>
 <br>
</center>

</li>
</ol>
<p><img src="/images/30-tools-sourceInsightçš„ä½¿ç”¨/4.SIæ”¯æŒçš„æ–‡ä»¶ç±»å‹.png" alt="&quot;4.SIæ”¯æŒçš„æ–‡ä»¶ç±»å‹&quot;"></p>
<center>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;"><b>å›¾4</b></div>
    <br>
</center>

<ol>
<li>åŒæ­¥è§£ææºä»£ç æ–‡ä»¶ã€‚èœå•æ  Project-&gt;Sychronize Filesâ€¦<br><img src="/images/30-tools-sourceInsightçš„ä½¿ç”¨/5.åŒæ­¥æ“ä½œ.png" alt="&quot;5.åŒæ­¥æ“ä½œ&quot;"><center>
 <div style="color:orange; border-bottom: 1px solid #d9d9d9;
 display: inline-block;
 color: #999;
 padding: 2px;"><b>å›¾5</b></div>
 <br>
</center>

</li>
</ol>
<p><img src="/images/30-tools-sourceInsightçš„ä½¿ç”¨/6.å‹¾é€‰.png" alt="&quot;6.å‹¾é€‰&quot;"></p>
<center>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;"><b>å›¾6</b></div>
    <br>
</center>

<ol>
<li>é¡¹ç›®è§£æå®Œæˆ<br><img src="/images/30-tools-sourceInsightçš„ä½¿ç”¨/7.é¡¹ç›®æ–‡ä»¶.png" alt="&quot;7.é¡¹ç›®æ–‡ä»¶&quot;"><center>
 <div style="color:orange; border-bottom: 1px solid #d9d9d9;
 display: inline-block;
 color: #999;
 padding: 2px;"><b>å›¾7</b></div>
 <br>
</center></li>
</ol>
]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>tools</tag>
      </tags>
  </entry>
  <entry>
    <title>34-linux-è¿›ç¨‹</title>
    <url>/2020/03/29/34-linux-%E8%BF%9B%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h1><p>linuxä¸­æ¯ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚ç¨‹åºæ˜¯ç”±è‹¥å¹²æ¡å…·æœ‰ä¸€å®šåŠŸèƒ½çš„æŒ‡ä»¤æ‰€ç»„æˆçš„è§£é¢˜é¡ºåºå’Œæ­¥éª¤(ç£ç›˜ä¸­)ã€‚è¿›ç¨‹æ˜¯è®¡ç®—æœºä¸­ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨(å†…å­˜ä¸­)ï¼Œæ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•å…ƒã€‚å¯¹äº32ä½çš„linuxæ“ä½œç³»ç»Ÿï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºå…¶æ‹¥æœ‰0~4Gçš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚è™šæ‹Ÿåœ°å€ç©ºé—´å¯ä»¥åˆ†ä¸ºå†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´ã€‚å†…æ ¸ç©ºé—´åœ°å€ä¸º3G~4Gï¼Œç”¨æˆ·ç©ºé—´ä¸º0~3Gã€‚</p>
<p>ç”±ä¸Šå¯çŸ¥ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºè‡ªå·±æœ‰4Gçš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚å®é™…ä¸Šï¼Œå†…æ ¸ç©ºé—´æ˜¯æ‰€æœ‰è¿›ç¨‹å…±äº«çš„ï¼Œç”¨æˆ·ç©ºé—´æ˜¯å„ä¸ªè¿›ç¨‹ç‹¬äº«çš„ã€‚ç®€å•ç†è§£ï¼Œå¦‚æœä¸¤ä¸ªè¿›ç¨‹é—´è¦è¿›è¡Œé€šä¿¡å¿…é¡»è¦æœ‰ä¸€ä¸ªæ¡¥æ¢ï¼Œè€Œæ¯ä¸ªè¿›ç¨‹çš„ç”¨æˆ·ç©ºé—´éƒ½æ˜¯ç‹¬äº«çš„ï¼Œåªæœ‰é€šè¿‡å†…æ ¸ç©ºé—´æ‰èƒ½è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ã€‚å¹¶ä¸”å¯¹äºæ‰€æœ‰è¿›ç¨‹å¿…é¡»è¦è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ï¼Œæ•…å†…æ ¸ç©ºé—´ä¸­å¿…ç„¶ä½¿ç”¨ç±»ä¼¼æ•°ç»„çš„æ–¹å¼å¯¹æ¯ä¸ªè¿›ç¨‹çš„ä¿¡æ¯è¿›è¡Œç®¡ç†ã€‚åœ¨å†…æ ¸ä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹æ§åˆ¶å—(PCB, Processing Control Block)æ¥ç»´æŠ¤è¿›ç¨‹ç›¸å…³çš„ä¿¡æ¯ï¼Œlinuxå†…æ ¸çš„è¿›ç¨‹æ§åˆ¶å—æ˜¯task_structç»“æ„ä½“ã€‚<br>åšä¸»ä½¿ç”¨Ubuntu18.04ï¼Œåœ¨/usr/src/linux-headers-5.3.0-53/include/linux/sched.hä¸­å¯ä»¥æ‰¾åˆ°task_structç»“æ„ä½“ã€‚</p>
<p><a href="https://www.kernel.org/pub/linux/kernel/v2.6/" target="_blank" rel="noopener">linux 2.6ç‰ˆæœ¬</a></p>
<p>è¿›ç¨‹ä¹‹é—´å…±äº«çš„æ•°æ®ï¼šä»£ç æ®µã€æ–‡ä»¶æè¿°ç¬¦(ç®¡é“ã€fifoã€å¥—æ¥å­—)ã€å†…å­˜æ˜ å°„åŒº<br>çº¿ç¨‹ä¹‹é—´å…±äº«çš„æ•°æ®ï¼šä»£ç æ®µã€å †ã€å…¨å±€å˜é‡ã€å†…å­˜æ˜ å°„åŒºã€‚æ ˆä¸å…±äº«ã€‚</p>
<h2 id="è¿›ç¨‹çŠ¶æ€"><a href="#è¿›ç¨‹çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çŠ¶æ€"></a>è¿›ç¨‹çŠ¶æ€</h2><p><img src="/images/34-linux-è¿›ç¨‹/1.è¿›ç¨‹çŠ¶æ€.png" alt="&quot;1.è¿›ç¨‹çŠ¶æ€&quot;"></p>
<center>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;"><b>å›¾1</b></div>
    <br>
</center>

<p>åˆ›å»ºçŠ¶æ€ï¼šè¿›ç¨‹åœ¨åˆ›å»ºæ—¶éœ€è¦ç”³è¯·ä¸€ä¸ªç©ºç™½PCBï¼Œå‘å…¶ä¸­å¡«å†™æ§åˆ¶å’Œç®¡ç†è¿›ç¨‹çš„ä¿¡æ¯ï¼Œå®Œæˆèµ„æºåˆ†é…ã€‚å¦‚æœåˆ›å»ºå·¥ä½œæ— æ³•å®Œæˆï¼Œæ¯”å¦‚èµ„æºæ— æ³•æ»¡è¶³ï¼Œå°±æ— æ³•è¢«è°ƒåº¦è¿è¡Œï¼ŒæŠŠæ­¤æ—¶è¿›ç¨‹æ‰€å¤„çŠ¶æ€ç§°ä¸ºåˆ›å»ºçŠ¶æ€<br>å°±ç»ªçŠ¶æ€ï¼šè¿›ç¨‹å·²ç»å‡†å¤‡å¥½ï¼Œå·²åˆ†é…åˆ°æ‰€éœ€èµ„æºï¼Œåªè¦åˆ†é…åˆ°CPUå°±èƒ½å¤Ÿç«‹å³è¿è¡Œ<br>æ‰§è¡ŒçŠ¶æ€ï¼šè¿›ç¨‹å¤„äºå°±ç»ªçŠ¶æ€è¢«è°ƒåº¦åï¼Œè¿›ç¨‹è¿›å…¥æ‰§è¡ŒçŠ¶æ€<br>é˜»å¡çŠ¶æ€ï¼šæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ç”±äºæŸäº›äº‹ä»¶ï¼ˆI/Oè¯·æ±‚ï¼Œç”³è¯·ç¼“å­˜åŒºå¤±è´¥ï¼‰è€Œæš‚æ—¶æ— æ³•è¿è¡Œï¼Œè¿›ç¨‹å—åˆ°é˜»å¡ã€‚åœ¨æ»¡è¶³è¯·æ±‚æ—¶è¿›å…¥å°±ç»ªçŠ¶æ€ç­‰å¾…ç³»ç»Ÿè°ƒç”¨<br>ç»ˆæ­¢çŠ¶æ€ï¼šè¿›ç¨‹ç»“æŸï¼Œæˆ–å‡ºç°é”™è¯¯ï¼Œæˆ–è¢«ç³»ç»Ÿç»ˆæ­¢ï¼Œè¿›å…¥ç»ˆæ­¢çŠ¶æ€ã€‚æ— æ³•å†æ‰§è¡Œ</p>
<h2 id="è¿›ç¨‹æ§åˆ¶"><a href="#è¿›ç¨‹æ§åˆ¶" class="headerlink" title="è¿›ç¨‹æ§åˆ¶"></a>è¿›ç¨‹æ§åˆ¶</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pid_t fork(void);	&#x2F;&#x2F; å¤±è´¥è¿”å›-1ï¼›æˆåŠŸè¿”å›ï¼šçˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„ID(éè´Ÿ)ï¼›å­è¿›ç¨‹è¿”å› 0 </span><br><span class="line">&#x2F;&#x2F; æ³¨æ„ï¼šforkå‡½æ•°ä¸æ˜¯è¿”å›ä¸¤ä¸ªå€¼ï¼Œè€Œæ˜¯forkä¹‹åå°±å­˜åœ¨ä¸¤ä¸ªè¿›ç¨‹ã€‚æ¯ä¸ªè¿›ç¨‹æœ‰ä¸åŒçš„è¿”å›å€¼ã€‚</span><br><span class="line">&#x2F;&#x2F; çˆ¶å­è¿›ç¨‹æ‰§è¡Œçš„é¡ºåºéšæœºã€‚forkåçˆ¶å­è¿›ç¨‹ä»ç›¸åŒçš„ç¨‹åºä½ç½®å¼€å§‹æ‰§è¡Œã€‚</span><br><span class="line">pid_t getpid(void);	  &#x2F;&#x2F; è·å–å½“å‰è¿›ç¨‹ID</span><br><span class="line">pid_t getppid(void);  &#x2F;&#x2F; è·å–å½“å‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ID</span><br><span class="line">uid_t getuid(void);   &#x2F;&#x2F; è·å–å½“å‰è¿›ç¨‹å®é™…ç”¨æˆ·ID</span><br><span class="line">uid_t geteuid(void);  &#x2F;&#x2F; è·å–å½“å‰è¿›ç¨‹æœ‰æ•ˆç”¨æˆ·ID</span><br><span class="line">gid_t getgid(void);   &#x2F;&#x2F; è·å–å½“å‰è¿›ç¨‹ä½¿ç”¨ç”¨æˆ·ç»„ID</span><br><span class="line">gid_t getegid(void);  &#x2F;&#x2F; è·å–å½“å‰è¿›ç¨‹æœ‰æ•ˆç”¨æˆ·ç»„ID</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 1ä¸ªçˆ¶è¿›ç¨‹å¾ªç¯åˆ›å»ºnä¸ªå­è¿›ç¨‹</span><br><span class="line"></span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">	int n &#x3D; 5, i;				    &#x2F;&#x2F;ä¸€ä¸ªçˆ¶è¿›ç¨‹é»˜è®¤åˆ›å»º5ä¸ªå­è¿›ç¨‹</span><br><span class="line">	pid_t pid;</span><br><span class="line"></span><br><span class="line">	if (argc &#x3D;&#x3D; 2) &#123;	</span><br><span class="line">		n &#x3D; atoi(argv[1]);		&#x2F;&#x2F;å­—ç¬¦ä¸²è½¬æ•´æ•°</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	for (i &#x3D; 0; i &lt; n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		pid &#x3D; fork();			&#x2F;&#x2F;å‡ºå£1,çˆ¶è¿›ç¨‹ä¸“ç”¨å‡ºå£</span><br><span class="line">		if (pid &#x3D;&#x3D; 0)</span><br><span class="line">			break;				&#x2F;&#x2F;å‡ºå£2,å­è¿›ç¨‹å‡ºå£,iä¸è‡ªå¢</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if (n &#x3D;&#x3D; i) &#123;</span><br><span class="line">		sleep(n);</span><br><span class="line">		printf(&quot;I am parent, pid &#x3D; %d\n&quot;, getpid());</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		sleep(i);</span><br><span class="line">		printf(&quot;I&#39;m %dth child, pid &#x3D; %d\n&quot;, i+1, getpid());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çˆ¶å­è¿›ç¨‹forkä¹‹åï¼Œç®€å•æ¥çœ‹ï¼Œå­è¿›ç¨‹å¤åˆ¶äº†çˆ¶è¿›ç¨‹0~3Gç”¨æˆ·ç©ºé—´å†…å®¹ä»¥åŠçˆ¶è¿›ç¨‹çš„PCBï¼Œä½†æ˜¯pidä¸åŒã€‚æ•…å­è¿›ç¨‹æ‰§è¡Œçš„ä»£ç ä½ç½®å’Œçˆ¶è¿›ç¨‹æ‰§è¡Œçš„ä»£ç ä½ç½®ç›¸åŒã€‚ä¹‹åï¼Œæ ¹æ®å¯¹<br>fork()è¿”å›å€¼çš„åˆ¤æ–­ï¼Œçˆ¶å­è¿›ç¨‹å¯ä»¥æ‰§è¡Œä¸åŒçš„ä»£ç ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ol>
<li>çˆ¶å­è¿›ç¨‹æ‰§è¡Œé¡ºåºä¸å®š</li>
<li>æ ¹æ®forkè¿”å›å€¼åˆ¤æ–­çˆ¶å­è¿›ç¨‹</li>
<li>åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹çˆ¶å­è¿›ç¨‹é—´éµå¾ª<strong>è¯»æ—¶å…±äº«å†™æ—¶å¤åˆ¶</strong>çš„åŸåˆ™ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœå†…å­˜å¼€é”€ã€‚<br>åŒæ—¶ä¹Ÿè¯´æ˜çˆ¶å­è¿›ç¨‹ä¹‹é—´æ•°æ®æ˜¯ä¸å…³è”çš„(çˆ¶å­è¿›ç¨‹ä¹‹é—´ä¸å…±äº«å…¨å±€å˜é‡)ã€‚</li>
</ol>
<h3 id="exceå‡½æ•°æ—"><a href="#exceå‡½æ•°æ—" class="headerlink" title="exceå‡½æ•°æ—"></a>exceå‡½æ•°æ—</h3><p>å½“è¿›ç¨‹è°ƒç”¨execå‡½æ•°æ—¶ï¼Œå½“å‰è¿›ç¨‹çš„.textã€.dataæ›¿æ¢ä¸ºæ‰€è¦åŠ è½½çš„ç¨‹åºçš„.textã€.dataï¼Œç„¶åè®©è¿›ç¨‹ä»æ–°çš„.textç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹æ‰§è¡Œï¼Œä½†è¿›ç¨‹IDä¸å˜ï¼Œæ¢æ ¸ä¸æ¢å£³ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int execl(const char *path, const char *arg, ...);  &#x2F;&#x2F; åŠ è½½ä¸€ä¸ªè¿›ç¨‹ï¼Œé€šè¿‡è·¯å¾„+ç¨‹åºåæ¥åŠ è½½</span><br><span class="line">&#x2F;&#x2F; path:è¦æ‰§è¡Œç¨‹åºçš„ç»å¯¹è·¯å¾„</span><br><span class="line">&#x2F;&#x2F; å˜å‚arg:è¦æ‰§è¡Œç¨‹åºéœ€è¦çš„å‚æ•°</span><br><span class="line">&#x2F;&#x2F; ç¬¬ä¸€ä¸ªarg:å ä½</span><br><span class="line">&#x2F;&#x2F; åè¾¹çš„arg:å‘½ä»¤çš„å‚æ•°</span><br><span class="line">&#x2F;&#x2F; å“¨å…µï¼šNULL</span><br><span class="line">int execlp(const char *file, const char *arg, ...); &#x2F;&#x2F; å€ŸåŠ©ç¯å¢ƒå˜é‡PATHåŠ è½½ä¸€ä¸ªè¿›ç¨‹,è¯¥å‡½æ•°ç”¨æ¥è°ƒç”¨ç³»ç»Ÿç¨‹åº</span><br><span class="line">&#x2F;&#x2F; file:æ‰§è¡Œå‘½ä»¤çš„åå­—</span><br><span class="line">&#x2F;&#x2F; ç¬¬ä¸€ä¸ªarg:å ä½</span><br><span class="line">&#x2F;&#x2F; åè¾¹çš„arg:å‘½ä»¤çš„å‚æ•°</span><br><span class="line">&#x2F;&#x2F; å“¨å…µï¼šNULL</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>execl.c</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    execl(&quot;&#x2F;bin&#x2F;ls&quot;, &quot;ls&quot;, &quot;-lah&quot;, NULL);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>execlp.c</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    execlp(&quot;ps&quot;, &quot;ps&quot;, &quot;-aux&quot;, NULL);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹"><a href="#å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹" class="headerlink" title="å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹"></a>å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹</h3><p>å­¤å„¿è¿›ç¨‹: çˆ¶è¿›ç¨‹å…ˆäºå­è¿›ç¨‹ç»“æŸï¼Œåˆ™å­è¿›ç¨‹æˆä¸ºå­¤å„¿è¿›ç¨‹ã€‚å­è¿›ç¨‹çš„çˆ¶è¿›ç¨‹å˜ä¸ºinitè¿›ç¨‹ï¼Œç§°initè¿›ç¨‹é¢†å…»å­¤å„¿è¿›ç¨‹ã€‚è¿›ç¨‹ç»“æŸä¹‹åï¼Œèƒ½å¤Ÿé‡Šæ”¾ç”¨æˆ·ç©ºé—´çš„èµ„æºï¼Œè€Œå†…æ ¸ç©ºé—´<br>çš„PCBå¿…é¡»ç”±çˆ¶è¿›ç¨‹é‡Šæ”¾ã€‚<br>åƒµå°¸è¿›ç¨‹: è¿›ç¨‹ç»ˆæ­¢ï¼Œçˆ¶è¿›ç¨‹å°šæœªå›æ”¶å­è¿›ç¨‹æ®‹ç•™èµ„æº(PCB)ï¼Œåˆ™å˜æˆåƒµå°¸ï¼ˆZombieï¼‰è¿›ç¨‹ã€‚<br>åƒµå°¸è¿›ç¨‹æ˜¯ä¸èƒ½ä½¿ç”¨killå‘½ä»¤æ¸…é™¤æ‰çš„ã€‚å› ä¸ºkillå‘½ä»¤åªæ˜¯ç”¨æ¥ç»ˆæ­¢è¿›ç¨‹çš„ï¼Œè€Œåƒµå°¸è¿›ç¨‹å·²ç»ç»ˆæ­¢ã€‚æ­¤æ—¶ï¼Œå¦‚æœéœ€è¦é‡Šæ”¾åƒµå°¸è¿›ç¨‹çš„æ®‹ç•™èµ„æºï¼Œå°±éœ€è¦ç»“æŸçˆ¶è¿›ç¨‹ã€‚çˆ¶è¿›ç¨‹ç»“æŸ<br>å°±ä¼šè‡ªåŠ¨å›æ”¶åƒµå°¸è¿›ç¨‹çš„èµ„æºã€‚</p>
<h3 id="è¿›ç¨‹å›æ”¶"><a href="#è¿›ç¨‹å›æ”¶" class="headerlink" title="è¿›ç¨‹å›æ”¶"></a>è¿›ç¨‹å›æ”¶</h3><p>è¿›ç¨‹ç»ˆæ­¢æ—¶ä¼šå…³é—­æ‰€æœ‰çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œé‡Šæ”¾åœ¨ç”¨æˆ·ç©ºé—´åˆ†é…çš„å†…å­˜ï¼Œä½†PCBæ˜¯ä¿ç•™çš„ï¼Œå†…æ ¸åœ¨å…¶ä¸­ä¿ç•™äº†ä¸€äº›ä¿¡æ¯ï¼šå¦‚æœæ˜¯æ­£å¸¸ç»ˆæ­¢åˆ™ä¿å­˜ç€é€€å‡ºçŠ¶æ€ï¼Œå¦‚æœæ˜¯å¼‚å¸¸ç»ˆæ­¢åˆ™ä¿å­˜ç€å¯¼è‡´è¯¥è¿›ç¨‹ç»ˆæ­¢çš„ä¿¡å·æ˜¯å“ªä¸ªã€‚è¿™ä¸ªè¿›ç¨‹çš„çˆ¶è¿›ç¨‹å¯ä»¥è°ƒç”¨waitæˆ–waitpidè·å–è¿™äº›ä¿¡æ¯ï¼Œç„¶åå½»åº•æ¸…é™¤æ‰è¿™ä¸ªè¿›ç¨‹ã€‚çˆ¶è¿›ç¨‹å¯ä»¥è°ƒç”¨waitæˆ–waitpidå¾—åˆ°å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€åŒæ—¶å½»åº•æ¸…é™¤æ‰è¿™ä¸ªè¿›ç¨‹ã€‚</p>
<p>çˆ¶è¿›ç¨‹è°ƒç”¨waitå‡½æ•°å¯ä»¥å›æ”¶å­è¿›ç¨‹ç»ˆæ­¢ä¿¡æ¯ã€‚è¯¥å‡½æ•°æœ‰ä¸‰ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li>é˜»å¡ç­‰å¾…å­è¿›ç¨‹é€€å‡º </li>
<li>å›æ”¶å­è¿›ç¨‹æ®‹ç•™èµ„æº </li>
<li>è·å–å­è¿›ç¨‹ç»“æŸçŠ¶æ€(é€€å‡ºåŸå› )</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pid_t wait(int *status); 	&#x2F;&#x2F; ä¸€æ¬¡åªèƒ½å›æ”¶ä¸€ä¸ªå­è¿›ç¨‹</span><br><span class="line">&#x2F;&#x2F; statusæ˜¯waitçš„ä¼ å‡ºå‚æ•°ï¼Œä¿å­˜è¿›ç¨‹çš„ç»“æŸçŠ¶æ€(æ­£å¸¸é€€å‡ºè¿˜æ˜¯å¼‚å¸¸ç»ˆæ­¢)ã€‚å€ŸåŠ©å®å‡½æ•°å¯ä»¥è¿›ä¸€æ­¥åˆ¤æ–­è¿›ç¨‹ç»ˆæ­¢çš„å…·ä½“åŸå› ã€‚</span><br><span class="line">&#x2F;&#x2F; æ­£å¸¸é€€å‡ºï¼šreturn 0ï¼› exit(0) æ­¤æ—¶WEXITSTATUS(staus)å¯ä»¥è·å–returnæˆ–exitçš„è¿”å›å‚æ•°</span><br><span class="line">&#x2F;&#x2F; ç¬¬ä¸€ç»„ï¼š</span><br><span class="line">WIFEXITED(status)     ä¸ºé0	â†’ è¿›ç¨‹æ­£å¸¸ç»“æŸ</span><br><span class="line">WEXITSTATUS(status)   å¦‚ä¸Šå®ä¸ºçœŸï¼Œä½¿ç”¨æ­¤å® â†’ è·å–è¿›ç¨‹é€€å‡ºçŠ¶æ€ (exitçš„å‚æ•°)</span><br><span class="line">&#x2F;&#x2F; ç¬¬äºŒç»„ï¼š</span><br><span class="line">WIFSIGNALED(status)   ä¸ºé0 â†’ è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢</span><br><span class="line">WTERMSIG(status)      å¦‚ä¸Šå®ä¸ºçœŸï¼Œä½¿ç”¨æ­¤å® â†’ å–å¾—ä½¿è¿›ç¨‹ç»ˆæ­¢çš„é‚£ä¸ªä¿¡å·çš„ç¼–å·</span><br><span class="line">&#x2F;&#x2F; ç¬¬ä¸‰ç»„ï¼š</span><br><span class="line">WIFSTOPPED(status)    ä¸ºé0 â†’ è¿›ç¨‹å¤„äºæš‚åœçŠ¶æ€</span><br><span class="line">WSTOPSIG(status)      å¦‚ä¸Šå®ä¸ºçœŸï¼Œä½¿ç”¨æ­¤å® â†’ å–å¾—ä½¿è¿›ç¨‹æš‚åœçš„é‚£ä¸ªä¿¡å·çš„ç¼–å·</span><br><span class="line">WIFCONTINUED(status)  ä¸ºçœŸ â†’ è¿›ç¨‹æš‚åœåå·²ç»ç»§ç»­è¿è¡Œ</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; è¿”å›å€¼ï¼š&gt;0 å›æ”¶å­è¿›ç¨‹IDï¼›-1 å›æ”¶å¤±è´¥(æ²¡æœ‰å¯å›æ”¶çš„å­è¿›ç¨‹)</span><br></pre></td></tr></table></figure>
<ul>
<li>abnor.c</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">  int a &#x3D; 5&#x2F;0;  &#x2F;&#x2F; é™¤0é”™è¯¯ è¿›ç¨‹æ‰§è¡Œæ—¶linuxå‘é€SIGFPEä¿¡å·ç»ˆæ­¢è¿›ç¨‹</span><br><span class="line"></span><br><span class="line">	return 56;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>wait.c</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	pid_t pid, wpid;</span><br><span class="line">	int status;</span><br><span class="line"></span><br><span class="line">	pid &#x3D; fork();</span><br><span class="line"></span><br><span class="line">	if(pid &#x3D;&#x3D; -1)&#123;</span><br><span class="line">		perror(&quot;fork error&quot;);</span><br><span class="line">		exit(1);</span><br><span class="line">	&#125; else if(pid &#x3D;&#x3D; 0)&#123;		</span><br><span class="line">		printf(&quot;I&#39;m process child, pid &#x3D; %d\n&quot;, getpid());</span><br><span class="line">#if 0</span><br><span class="line">		execl(&quot;.&#x2F;abnor&quot;, &quot;abnor&quot;, NULL);  &#x2F;&#x2F; å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢</span><br><span class="line">		perror(&quot;execl error&quot;);</span><br><span class="line">		exit(1);</span><br><span class="line">#endif</span><br><span class="line">		sleep(1);				</span><br><span class="line">		exit(10);</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		wpid &#x3D; wait(&amp;status);	    &#x2F;&#x2F; ä¼ å‡ºå‚æ•°</span><br><span class="line"></span><br><span class="line">		if(WIFEXITED(status))&#123;	  &#x2F;&#x2F; æ­£å¸¸é€€å‡º</span><br><span class="line">			printf(&quot;I&#39;m parent, The child process &quot;</span><br><span class="line">					&quot;%d exit normally\n&quot;, wpid);</span><br><span class="line">			printf(&quot;return value:%d\n&quot;, WEXITSTATUS(status));</span><br><span class="line"></span><br><span class="line">		&#125; else if (WIFSIGNALED(status)) &#123;	&#x2F;&#x2F; å¼‚å¸¸é€€å‡º</span><br><span class="line">			printf(&quot;The child process exit abnormally, &quot;</span><br><span class="line">					&quot;killed by signal %d\n&quot;, WTERMSIG(status));</span><br><span class="line">										&#x2F;&#x2F; è·å–ä¿¡å·ç¼–å·</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			printf(&quot;other...\n&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çˆ¶è¿›ç¨‹è°ƒç”¨waitpidå¯æŒ‡å®špidè¿›ç¨‹æ¸…ç†,å¯ä»¥ä¸é˜»å¡</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pid_t waitpid(pid_t pid, int *status, in options);	&#x2F;&#x2F; ä¸€æ¬¡åªèƒ½å›æ”¶ä¸€ä¸ªå­è¿›ç¨‹</span><br><span class="line">ç‰¹æ®Šå‚æ•°å’Œè¿”å›æƒ…å†µï¼š</span><br><span class="line">&#x2F;&#x2F; å‚æ•°pidï¼š &gt;0:å›æ”¶æŒ‡å®šIDçš„å­è¿›ç¨‹	&#x3D;0:å›æ”¶å½“å‰è¿›ç¨‹ç»„ä»»æ„å­è¿›ç¨‹</span><br><span class="line">&#x2F;&#x2F; -1:å›æ”¶ä»»æ„å­è¿›ç¨‹(ç›¸å½“äºwait)  &lt;-1:ç­‰å¾…å…¶ç»„IDç­‰äºpidçš„ç»å¯¹å€¼çš„ä»»ä¸€è¿›ç¨‹</span><br><span class="line">&#x2F;&#x2F; status:å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼Œä¸waitç›¸åŒ</span><br><span class="line">&#x2F;&#x2F; options:è®¾ç½®ä¸ºWNOHANGæ˜¯å‡½æ•°éé˜»å¡ï¼›è®¾ç½®ä¸º0æ—¶å‡½æ•°é˜»å¡</span><br><span class="line">&#x2F;&#x2F; è¿”å›å€¼ï¼š&gt;0 è¿”å›å›æ”¶å­è¿›ç¨‹IDï¼›-1 å›æ”¶å¤±è´¥(æ²¡æœ‰å¯å›æ”¶çš„å­è¿›ç¨‹)ï¼›&#x3D;0 åªæœ‰åœ¨optionsä¸ºWNOHANGæœ‰æ•ˆï¼Œè¡¨ç¤ºå­è¿›ç¨‹æ­£åœ¨è¿è¡Œ</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    pid_t pid;</span><br><span class="line">    pid &#x3D; fork();</span><br><span class="line"></span><br><span class="line">    if (pid &lt; 0) &#123;</span><br><span class="line">        perror(&quot;fork failed&quot;);</span><br><span class="line">        exit(1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (pid &#x3D;&#x3D; 0) &#123;</span><br><span class="line">        int i;</span><br><span class="line">        for (i &#x3D; 3; i &gt; 0; i--) &#123;</span><br><span class="line">            printf(&quot;This is the child\n&quot;);</span><br><span class="line">            sleep(1);</span><br><span class="line">        &#125;</span><br><span class="line">        exit(34);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        int stat_val;</span><br><span class="line">        waitpid(pid, &amp;stat_val, 0);     &#x2F;&#x2F; é˜»å¡</span><br><span class="line"></span><br><span class="line">        if (WIFEXITED(stat_val))</span><br><span class="line">            printf(&quot;Child exited with code %d\n&quot;, WEXITSTATUS(stat_val));</span><br><span class="line">        else if (WIFSIGNALED(stat_val))</span><br><span class="line">            printf(&quot;Child terminated abnormally, signal %d\n&quot;, WTERMSIG(stat_val));</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">	int n &#x3D; 5, i;				</span><br><span class="line">	pid_t p, q;</span><br><span class="line"></span><br><span class="line">	if(argc &#x3D;&#x3D; 2)&#123;	</span><br><span class="line">		n &#x3D; atoi(argv[1]);</span><br><span class="line">	&#125;</span><br><span class="line">    q &#x3D; getpid();</span><br><span class="line"></span><br><span class="line">	for(i&#x3D;0; i&lt;n; i++)	 &#123;</span><br><span class="line">        p &#x3D; fork();</span><br><span class="line">		if(p &#x3D;&#x3D; 0)</span><br><span class="line">			break;			</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	if(n &#x3D;&#x3D; i)&#123;  		&#x2F;&#x2F; çˆ¶è¿›ç¨‹</span><br><span class="line">		sleep(n);</span><br><span class="line">		printf(&quot;I am parent, pid &#x3D; %d\n&quot;, getpid());</span><br><span class="line">        for (i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">            p &#x3D; waitpid(0, NULL, WNOHANG);	&#x2F;&#x2F; forkå‡ºçš„è¿›ç¨‹å±äºä¸€ä¸ªè¿›ç¨‹ç»„</span><br><span class="line">            printf(&quot;wait  pid &#x3D; %d\n&quot;, p);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		sleep(i);</span><br><span class="line">		printf(&quot;I&#39;m %dth child, pid &#x3D; %d\n&quot;, i+1, getpid());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é‡å®šå‘dupå’Œdup2"><a href="#é‡å®šå‘dupå’Œdup2" class="headerlink" title="é‡å®šå‘dupå’Œdup2"></a>é‡å®šå‘dupå’Œdup2</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int dup(int oldfd); 	&#x2F;&#x2F; æˆåŠŸï¼šè¿”å›ä¸€ä¸ªæ–°æ–‡ä»¶æè¿°ç¬¦ï¼›å¤±è´¥ï¼š-1è®¾ç½®errnoä¸ºç›¸åº”å€¼</span><br><span class="line">int dup2(int oldfd, int newfd); 	&#x2F;&#x2F; å°†oldfdå¤åˆ¶ç»™newfd</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	int fd, save_fd;</span><br><span class="line">	char msg[] &#x3D; &quot;It&#39;s just a test!\n&quot;;</span><br><span class="line"></span><br><span class="line">	fd &#x3D; open(&quot;test.txt&quot;, O_RDWR|O_CREAT|O_TRUNC, 0644);	&#x2F;&#x2F; fd&#x3D;3</span><br><span class="line">	if(fd &lt; 0)&#123;</span><br><span class="line">		perror(&quot;open error&quot;);</span><br><span class="line">		exit(1);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	save_fd &#x3D; dup(STDOUT_FILENO);			&#x2F;&#x2F; save_fd æŒ‡å‘ STDOUT</span><br><span class="line">	printf(&quot;save_fd &#x3D; %d\n&quot;, save_fd);</span><br><span class="line">	write(save_fd, msg, strlen(msg));		&#x2F;&#x2F; æ‰“å°åˆ°æ ‡å‡†è¾“å‡º</span><br><span class="line">#if 1</span><br><span class="line">	dup2(STDOUT_FILENO, fd);	&#x2F;&#x2F; æŠŠSTDOUT_FILENOå¤åˆ¶ç»™fd</span><br><span class="line">	write(fd, msg, strlen(msg));</span><br><span class="line">#else</span><br><span class="line">	dup2(fd, STDOUT_FILENO);	&#x2F;&#x2F; æŠŠfdå¤åˆ¶ç»™STDOUT_FILENO</span><br><span class="line">	&#x2F;&#x2F;puts(msg);				&#x2F;&#x2F; å‘æ ‡å‡†è¾“å‡ºè®¾å¤‡è¾“å‡ºå­—ç¬¦ä¸²æ¢è¡Œ	&#x2F;&#x2F; é‡å®šå‘æ ‡å‡†è¾“å‡ºåˆ°fdï¼Œè¾“å‡ºåˆ°test.txtæ–‡ä»¶							</span><br><span class="line">	write(fd, msg, strlen(msg));	</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">	close(fd);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/images/34-linux-è¿›ç¨‹/3.é‡å®šå‘.png" alt="&quot;3.é‡å®šå‘&quot;"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é‡å®šå‘å°±æ˜¯å¯¹æ–‡ä»¶è®¾ç½®æ–°çš„æ–‡ä»¶æè¿°ç¬¦ã€‚æ—§æ–‡ä»¶æè¿°ç¬¦å…³é—­ï¼Œæ–°æ–‡ä»¶æè¿°ç¬¦è¿˜æ˜¯å¯ä»¥è®¿é—®ã€‚</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	int fd;</span><br><span class="line">	char *str &#x3D; &quot;hello dup2\n&quot;;</span><br><span class="line"></span><br><span class="line">	fd &#x3D; open(&quot;test.txt&quot;, O_WRONLY|O_TRUNC|O_CREAT, 0644);</span><br><span class="line">	if(fd &lt; 0)&#123;</span><br><span class="line">		perror(&quot;open test1 error&quot;);</span><br><span class="line">		exit(1);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	dup2(fd, STDOUT_FILENO);</span><br><span class="line"></span><br><span class="line">	close(fd);	&#x2F;&#x2F; å…³é—­fdä¾ç„¶å¯ä»¥è®¿é—®å¯¹åº”æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">	int n &#x3D; write(fd, str, strlen(str));		</span><br><span class="line">	printf(&quot;--------|%d\n&quot;, n);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è¿›ç¨‹é—´é€šä¿¡-IPC"><a href="#è¿›ç¨‹é—´é€šä¿¡-IPC" class="headerlink" title="è¿›ç¨‹é—´é€šä¿¡(IPC)"></a>è¿›ç¨‹é—´é€šä¿¡(IPC)</h1><p>Linuxç¯å¢ƒä¸‹ï¼Œè¿›ç¨‹åœ°å€ç©ºé—´ç›¸äº’ç‹¬ç«‹ï¼Œæ¯ä¸ªè¿›ç¨‹å„è‡ªæœ‰ä¸åŒçš„ç”¨æˆ·åœ°å€ç©ºé—´ã€‚è¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´æ•°æ®ç›¸äº’ç‹¬ç«‹ï¼Œè¦äº¤æ¢æ•°æ®å¿…é¡»é€šè¿‡å†…æ ¸ã€‚åœ¨å†…æ ¸ä¸­å¼€è¾Ÿä¸€å—ç¼“å†²åŒºï¼Œè¿›ç¨‹1æŠŠæ•°æ®ä»ç”¨æˆ·ç©ºé—´æ‹·åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œè¿›ç¨‹2å†ä»å†…æ ¸ç¼“å†²åŒºæŠŠæ•°æ®è¯»èµ°ï¼Œå†…æ ¸æä¾›çš„è¿™ç§æœºåˆ¶ç§°ä¸ºè¿›ç¨‹é—´é€šä¿¡(IPCï¼ŒInterProcess Communication)ã€‚</p>
<h2 id="æ–‡ä»¶æ–¹å¼"><a href="#æ–‡ä»¶æ–¹å¼" class="headerlink" title="æ–‡ä»¶æ–¹å¼"></a>æ–‡ä»¶æ–¹å¼</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line"></span><br><span class="line">void sys_err(const char *str)</span><br><span class="line">&#123;</span><br><span class="line">    perror(str);</span><br><span class="line">    exit(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    int fd &#x3D; open(&quot;testFile.txt&quot;, O_RDWR | O_TRUNC | O_CREAT, 0664);</span><br><span class="line">    if (fd &#x3D;&#x3D; -1)</span><br><span class="line">        sys_err(&quot;open err&quot;);</span><br><span class="line">    int ret;</span><br><span class="line">    char buf[1024];</span><br><span class="line"></span><br><span class="line">    pid_t pid &#x3D; fork();</span><br><span class="line">    if (pid &#x3D;&#x3D; -1)</span><br><span class="line">        sys_err(&quot;fork err&quot;);</span><br><span class="line"></span><br><span class="line">    if (pid &gt; 0) &#123;</span><br><span class="line">        write(fd, &quot;file IPC\n&quot;, strlen(&quot;file IPC\n&quot;));</span><br><span class="line">        printf(&quot;----write finish ----\n&quot;);</span><br><span class="line">        wait(NULL);</span><br><span class="line">    &#125; else if (pid &#x3D;&#x3D; 0) &#123;</span><br><span class="line">        sleep(1);</span><br><span class="line">        lseek(fd, 0, SEEK_SET);</span><br><span class="line">        ret &#x3D; read(fd, buf, sizeof(buf));</span><br><span class="line">        write(STDOUT_FILENO, buf, ret);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç®¡é“æ–¹å¼-è¿›ç¨‹ä¹‹é—´æœ‰è¡€ç¼˜å…³ç³»"><a href="#ç®¡é“æ–¹å¼-è¿›ç¨‹ä¹‹é—´æœ‰è¡€ç¼˜å…³ç³»" class="headerlink" title="ç®¡é“æ–¹å¼(è¿›ç¨‹ä¹‹é—´æœ‰è¡€ç¼˜å…³ç³»)"></a>ç®¡é“æ–¹å¼(è¿›ç¨‹ä¹‹é—´æœ‰è¡€ç¼˜å…³ç³»)</h2><p>ç®¡é“æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå†…å­˜ç¼“å†²åŒºï¼Œå¯ä»¥ä»¥æ–‡ä»¶çš„æ–¹å¼å¯¹é½è¿›è¡Œæ“ä½œã€‚åœ¨linuxä¸­å¯ä»¥ä½¿ç”¨<code>ulimit -a</code>å‘½ä»¤æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­åˆ›å»ºç®¡é“æ–‡ä»¶æ‰€å¯¹åº”çš„ç¼“å†²åŒºçš„å¤§å°ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨<br><code>fpathconf</code>å‡½æ•°æ¥æŸ¥çœ‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int pipe(int pipefd[2]);		&#x2F;&#x2F; æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br><span class="line">&#x2F;&#x2F; pipefdæ˜¯ä¼ å‡ºå‚æ•°ï¼Œè¿”å›r&#x2F;wä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚è§„å®šï¼šfd[0]å¯¹åº”è¯»ç«¯ï¼Œfd[1]å¯¹åº”å†™ç«¯ã€‚å¦‚æœè¿›ç¨‹ä¸­æ²¡æœ‰æ‰“å¼€å…¶ä»–æ–‡ä»¶ï¼Œåˆ™fd[0]&#x3D;3ï¼Œfd[1]&#x3D;4ã€‚</span><br></pre></td></tr></table></figure>
<p>ç®¡é“åˆ›å»ºæˆåŠŸåï¼Œåˆ›å»ºè¯¥ç®¡é“çš„è¿›ç¨‹åŒæ—¶æŒæ¡ç€ç®¡é“çš„è¯»ç«¯å’Œå†™ç«¯ã€‚æ­¤æ—¶ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥forkå‡ºå­è¿›ç¨‹ï¼Œè¿™æ ·å­è¿›ç¨‹ä¹Ÿä¼šæŒæ¡ç®¡é“çš„è¯»ç«¯å’Œå†™ç«¯ã€‚ç”±å›¾2å¯çŸ¥ï¼Œå¦‚æœä¸¤ä¸ªè¿›ç¨‹åŒæ—¶<br>å¯¹ç®¡é“è¿›è¡Œè¯»å†™ï¼Œå¿…ç„¶é€ æˆå†²çªã€‚å› æ­¤ï¼Œç®¡é“çš„ä½¿ç”¨ä¸­ä¸€æ–¹éœ€è¦å…³é—­è¯»ç«¯ï¼Œè€Œå¦ä¸€æ–¹éœ€è¦å…³é—­å†™ç«¯ã€‚å³ä¸€ä¸ªç®¡é“åªèƒ½å®ç°åŠåŒå·¥é€šä¿¡ï¼Œå¦‚æœè¦å®ç°å…¨åŒå·¥é€šä¿¡ï¼Œå¿…é¡»é‡‡ç”¨ä¸¤ä¸ªç®¡é“ã€‚</p>
<p><img src="/images/34-linux-è¿›ç¨‹/2.ç®¡é“.png" alt="&quot;2.ç®¡é“&quot;"></p>
<center>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;"><b>å›¾2</b></div>
    <br>
</center>

<p>çˆ¶å­è¿›ç¨‹é€šä¿¡è¿‡ç¨‹ï¼š</p>
<ol>
<li>çˆ¶è¿›ç¨‹è°ƒç”¨pipeå‡½æ•°åˆ›å»ºç®¡é“ï¼Œå¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦fd[0]ã€fd[1]æŒ‡å‘ç®¡é“çš„è¯»ç«¯å’Œå†™ç«¯ã€‚</li>
<li>çˆ¶è¿›ç¨‹è°ƒç”¨forkåˆ›å»ºå­è¿›ç¨‹ï¼Œé‚£ä¹ˆå­è¿›ç¨‹ä¹Ÿæœ‰ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦æŒ‡å‘åŒä¸€ç®¡é“ã€‚</li>
<li>çˆ¶è¿›ç¨‹å…³é—­ç®¡é“è¯»ç«¯ï¼Œå­è¿›ç¨‹å…³é—­ç®¡é“å†™ç«¯ã€‚çˆ¶è¿›ç¨‹å¯ä»¥å‘ç®¡é“ä¸­å†™å…¥æ•°æ®ï¼Œå­è¿›ç¨‹å°†ç®¡é“ä¸­çš„æ•°æ®è¯»å‡ºã€‚ç”±äºç®¡é“æ˜¯åˆ©ç”¨ç¯å½¢é˜Ÿåˆ—å®ç°çš„ï¼Œæ•°æ®ä»å†™ç«¯æµå…¥ç®¡é“ï¼Œä»è¯»ç«¯æµå‡ºï¼Œè¿™æ ·å°±å®ç°äº†è¿›ç¨‹é—´é€šä¿¡ã€‚</li>
</ol>
<p>ç®¡é“çš„è¯»å†™è¡Œä¸ºï¼š</p>
<ol>
<li>å¦‚æœæ‰€æœ‰æŒ‡å‘ç®¡é“å†™ç«¯çš„æ–‡ä»¶æè¿°ç¬¦éƒ½å…³é—­äº†ï¼ˆç®¡é“å†™ç«¯å¼•ç”¨è®¡æ•°ä¸º0ï¼‰ï¼Œè€Œä»ç„¶æœ‰è¿›ç¨‹ä»ç®¡é“çš„è¯»ç«¯è¯»æ•°æ®ï¼Œé‚£ä¹ˆç®¡é“ä¸­å‰©ä½™çš„æ•°æ®éƒ½è¢«è¯»å–åï¼Œå†æ¬¡readä¼šè¿”å›0ï¼Œå°±åƒè¯»åˆ°æ–‡ä»¶æœ«å°¾ä¸€æ ·ã€‚</li>
<li>å¦‚æœæœ‰æŒ‡å‘ç®¡é“å†™ç«¯çš„æ–‡ä»¶æè¿°ç¬¦æ²¡å…³é—­ï¼ˆç®¡é“å†™ç«¯å¼•ç”¨è®¡æ•°å¤§äº0ï¼‰ï¼Œè€ŒæŒæœ‰ç®¡é“å†™ç«¯çš„è¿›ç¨‹ä¹Ÿæ²¡æœ‰å‘ç®¡é“ä¸­å†™æ•°æ®ï¼Œè¿™æ—¶æœ‰è¿›ç¨‹ä»ç®¡é“è¯»ç«¯è¯»æ•°æ®ï¼Œé‚£ä¹ˆç®¡é“ä¸­å‰©ä½™çš„æ•°æ®éƒ½è¢«è¯»å–åï¼Œå†æ¬¡readä¼šé˜»å¡ï¼Œç›´åˆ°ç®¡é“ä¸­æœ‰æ•°æ®å¯è¯»äº†æ‰è¯»å–æ•°æ®å¹¶è¿”å›ã€‚</li>
<li>å¦‚æœæ‰€æœ‰æŒ‡å‘ç®¡é“è¯»ç«¯çš„æ–‡ä»¶æè¿°ç¬¦éƒ½å…³é—­äº†ï¼ˆç®¡é“è¯»ç«¯å¼•ç”¨è®¡æ•°ä¸º0ï¼‰ï¼Œè¿™æ—¶æœ‰è¿›ç¨‹å‘ç®¡é“çš„å†™ç«¯å†™æ•°æ®ï¼Œé‚£ä¹ˆè¯¥è¿›ç¨‹ä¼šæ”¶åˆ°ä¿¡å·SIGPIPEï¼Œé€šå¸¸ä¼šå¯¼è‡´è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢ã€‚å½“ç„¶ä¹Ÿå¯ä»¥å¯¹SIGPIPEä¿¡å·å®æ–½æ•æ‰ï¼Œä¸ç»ˆæ­¢è¿›ç¨‹ã€‚</li>
<li>å¦‚æœæœ‰æŒ‡å‘ç®¡é“è¯»ç«¯çš„æ–‡ä»¶æè¿°ç¬¦æ²¡å…³é—­ï¼ˆç®¡é“è¯»ç«¯å¼•ç”¨è®¡æ•°å¤§äº0ï¼‰ï¼Œè€ŒæŒæœ‰ç®¡é“è¯»ç«¯çš„è¿›ç¨‹ä¹Ÿæ²¡æœ‰ä»ç®¡é“ä¸­è¯»æ•°æ®ï¼Œè¿™æ—¶æœ‰è¿›ç¨‹å‘ç®¡é“å†™ç«¯å†™æ•°æ®ï¼Œé‚£ä¹ˆåœ¨ç®¡é“è¢«å†™æ»¡æ—¶å†æ¬¡writeä¼šé˜»å¡ï¼Œç›´åˆ°ç®¡é“ä¸­æœ‰ç©ºä½ç½®äº†æ‰å†™å…¥æ•°æ®å¹¶è¿”å›ã€‚</li>
</ol>
<ul>
<li>è¯»ç®¡é“ï¼š    </li>
</ul>
<ol>
<li>ç®¡é“ä¸­æœ‰æ•°æ®ï¼Œreadè¿”å›å®é™…è¯»åˆ°çš„å­—èŠ‚æ•°ã€‚</li>
<li>ç®¡é“ä¸­æ— æ•°æ®ï¼šç®¡é“å†™ç«¯è¢«å…¨éƒ¨å…³é—­ï¼Œreadè¿”å›0ï¼›å†™ç«¯æ²¡æœ‰å…¨éƒ¨è¢«å…³é—­ï¼Œreadé˜»å¡ç­‰å¾…(ä¸ä¹…çš„å°†æ¥å¯èƒ½æœ‰æ•°æ®é€’è¾¾ï¼Œæ­¤æ—¶ä¼šè®©å‡ºcpu)</li>
</ol>
<ul>
<li>å†™ç®¡é“ï¼š    </li>
</ul>
<ol>
<li>ç®¡é“è¯»ç«¯å…¨éƒ¨è¢«å…³é—­ï¼Œè¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢(ä¹Ÿå¯ä½¿ç”¨æ•æ‰SIGPIPEä¿¡å·ï¼Œä½¿è¿›ç¨‹ä¸ç»ˆæ­¢)ï¼Œç®¡é“ç ´è£‚ã€‚</li>
<li>ç®¡é“è¯»ç«¯æ²¡æœ‰å…¨éƒ¨å…³é—­ï¼šç®¡é“å·²æ»¡ï¼Œwriteé˜»å¡ï¼›ç®¡é“æœªæ»¡ï¼Œwriteå°†æ•°æ®å†™å…¥ï¼Œå¹¶è¿”å›å®é™…å†™å…¥çš„å­—èŠ‚æ•°ã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; çˆ¶å­è¿›ç¨‹ä¹‹é—´é€šä¿¡</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	pid_t pid;</span><br><span class="line">	int fd[2];</span><br><span class="line"></span><br><span class="line">	pipe(fd);</span><br><span class="line">	pid &#x3D; fork();</span><br><span class="line"></span><br><span class="line">	if (pid &#x3D;&#x3D; 0) &#123;  &#x2F;&#x2F;child</span><br><span class="line">		close(fd[1]);	                &#x2F;&#x2F;å­è¿›ç¨‹ä»ç®¡é“ä¸­è¯»æ•°æ®ï¼Œå…³é—­å†™ç«¯</span><br><span class="line">		dup2(fd[0], STDIN_FILENO);		&#x2F;&#x2F;è®©wcä»ç®¡é“ä¸­è¯»å–æ•°æ®</span><br><span class="line">		execlp(&quot;wc&quot;, &quot;wc&quot;, &quot;-l&quot;, NULL);	&#x2F;&#x2F;wcå‘½ä»¤é»˜è®¤ä»æ ‡å‡†è¯»å…¥å–æ•°æ®</span><br><span class="line"></span><br><span class="line">	&#125; else &#123;</span><br><span class="line"></span><br><span class="line">		close(fd[0]);	&#x2F;&#x2F;çˆ¶è¿›ç¨‹å‘ç®¡é“ä¸­å†™æ•°æ®ï¼Œå…³é—­è¯»ç«¯</span><br><span class="line">		dup2(fd[1], STDOUT_FILENO);		&#x2F;&#x2F;å°†lsçš„ç»“æœå†™å…¥ç®¡é“ä¸­</span><br><span class="line">		execlp(&quot;ls&quot;, &quot;ls&quot;, NULL);		&#x2F;&#x2F;lsè¾“å‡ºç»“æœé»˜è®¤å¯¹åº”å±å¹•</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å…„å¼Ÿè¿›ç¨‹ä¹‹é—´é€šä¿¡</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	pid_t pid;</span><br><span class="line">	int fd[2], i;</span><br><span class="line">	</span><br><span class="line">	pipe(fd);</span><br><span class="line"></span><br><span class="line">	for (i &#x3D; 0; i &lt; 2; i++) &#123;</span><br><span class="line">		if((pid &#x3D; fork()) &#x3D;&#x3D; 0) &#123;</span><br><span class="line">			break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	if (i &#x3D;&#x3D; 0) &#123;			&#x2F;&#x2F; å…„</span><br><span class="line">		close(fd[0]);				&#x2F;&#x2F; å†™,å…³é—­è¯»ç«¯</span><br><span class="line">		dup2(fd[1], STDOUT_FILENO);		</span><br><span class="line">		execlp(&quot;ls&quot;, &quot;ls&quot;, NULL);	</span><br><span class="line">	&#125; else if (i &#x3D;&#x3D; 1) &#123;	&#x2F;&#x2F; å¼Ÿ</span><br><span class="line">		close(fd[1]);				&#x2F;&#x2F; è¯»ï¼Œå…³é—­å†™ç«¯</span><br><span class="line">		dup2(fd[0], STDIN_FILENO);		</span><br><span class="line">		execlp(&quot;wc&quot;, &quot;wc&quot;, &quot;-l&quot;, NULL);		</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">        close(fd[0]);</span><br><span class="line">        close(fd[1]);</span><br><span class="line">		for(i &#x3D; 0; i &lt; 2; i++)		&#x2F;&#x2F;ä¸¤ä¸ªå„¿å­waitä¸¤æ¬¡</span><br><span class="line">			wait(NULL);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç®¡é“é»˜è®¤æ˜¯é˜»å¡çš„ï¼Œå¦‚æœéœ€è¦è®¾ç½®ç®¡é“éé˜»å¡ã€‚å¯ä»¥ä½¿ç”¨fcntlå‡½æ•°ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int flags &#x3D; fcntl(fd[0], F_GETFL);</span><br><span class="line">flag |&#x3D; O_NONBLOCK;</span><br><span class="line">fcntl(fd[0], F_SETFL, flags);</span><br></pre></td></tr></table></figure></p>
<h2 id="fifoæ–¹å¼-è¿›ç¨‹ä¹‹é—´æ— è¡€ç¼˜å…³ç³»"><a href="#fifoæ–¹å¼-è¿›ç¨‹ä¹‹é—´æ— è¡€ç¼˜å…³ç³»" class="headerlink" title="fifoæ–¹å¼(è¿›ç¨‹ä¹‹é—´æ— è¡€ç¼˜å…³ç³»)"></a>fifoæ–¹å¼(è¿›ç¨‹ä¹‹é—´æ— è¡€ç¼˜å…³ç³»)</h2><p>FIFOè¢«ç§°ä¸ºæœ‰åç®¡é“ã€‚FIFOæ˜¯LinuxåŸºç¡€æ–‡ä»¶ç±»å‹ä¸­çš„ä¸€ç§ã€‚ä½†FIFOæ–‡ä»¶åœ¨ç£ç›˜ä¸Šå¤§å°æ°¸è¿œä¸º0ï¼Œä»…ä»…ç”¨æ¥æ ‡è¯†å†…æ ¸ä¸­ä¸€æ¡ç®¡é“(ç¼“å†²åŒº)ã€‚å„è¿›ç¨‹å¯ä»¥æ‰“å¼€è¿™ä¸ªæ–‡ä»¶è¿›è¡Œread/writeï¼Œå®é™…ä¸Šæ˜¯åœ¨è¯»å†™å†…æ ¸é€šé“ï¼Œè¿™æ ·å°±å®ç°äº†è¿›ç¨‹é—´é€šä¿¡ã€‚</p>
<p>åˆ›å»ºæ–¹å¼ï¼š</p>
<ol>
<li>å‘½ä»¤ï¼šmkfifo ç®¡é“å    lså‘½ä»¤æŸ¥çœ‹ï¼šprw-râ€”râ€” 1    pè¡¨ç¤ºç®¡é“</li>
<li>åº“å‡½æ•°ï¼šint mkfifo(const char *pathname,  mode_t mode);      // æˆåŠŸï¼š0ï¼› å¤±è´¥ï¼š-1<br>ä¸€æ—¦ä½¿ç”¨mkfifoåˆ›å»ºäº†ä¸€ä¸ªFIFOï¼Œå°±å¯ä»¥ä½¿ç”¨openæ‰“å¼€å®ƒï¼Œå¸¸è§çš„æ–‡ä»¶I/Oå‡½æ•°éƒ½å¯ç”¨äºfifoã€‚å¦‚ï¼šcloseã€readã€writeã€unlinkç­‰ã€‚</li>
</ol>
<ul>
<li>fifo_write.c</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">void sys_err(char *str)</span><br><span class="line">&#123;</span><br><span class="line">    perror(str);</span><br><span class="line">    exit(-1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    int fd, i;</span><br><span class="line">    char buf[4096];</span><br><span class="line"></span><br><span class="line">    if (argc &lt; 2) &#123;</span><br><span class="line">        printf(&quot;Enter like this: .&#x2F;a.out fifoname\n&quot;);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    int ret &#x3D; access(argv[1], F_OK);	&#x2F;&#x2F; åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><br><span class="line">    if (ret !&#x3D; 0) &#123;</span><br><span class="line">        mkfifo(argv[1], 0664);			&#x2F;&#x2F; å¦‚æœç®¡é“æ–‡ä»¶ä¸å­˜åœ¨ï¼Œç”¨mkfifoåˆ›å»ºç®¡é“</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    fd &#x3D; open(argv[1], O_WRONLY);		</span><br><span class="line">    if (fd &lt; 0) </span><br><span class="line">        sys_err(&quot;open&quot;);</span><br><span class="line"></span><br><span class="line">    i &#x3D; 0;</span><br><span class="line">    while (1) &#123;</span><br><span class="line">        sprintf(buf, &quot;hello world %d\n&quot;, i++);</span><br><span class="line">        write(fd, buf, strlen(buf));</span><br><span class="line">        sleep(1);</span><br><span class="line">    &#125;</span><br><span class="line">    close(fd);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>fifo_read.c</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">void sys_err(char *str)</span><br><span class="line">&#123;</span><br><span class="line">    perror(str);</span><br><span class="line">    exit(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    int fd, len;</span><br><span class="line">    char buf[4096];</span><br><span class="line"></span><br><span class="line">    if (argc &lt; 2) &#123;</span><br><span class="line">        printf(&quot;.&#x2F;a.out fifoname\n&quot;);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    fd &#x3D; open(argv[1], O_RDONLY);</span><br><span class="line">    if (fd &lt; 0) </span><br><span class="line">        sys_err(&quot;open&quot;);</span><br><span class="line">    while (1) &#123;</span><br><span class="line">        len &#x3D;read(fd, buf, sizeof(buf));	&#x2F;&#x2F; ç®¡é“é»˜è®¤é˜»å¡</span><br><span class="line">        write(STDOUT_FILENO, buf, len);</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    close(fd);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å†…å­˜æ˜ å°„"><a href="#å†…å­˜æ˜ å°„" class="headerlink" title="å†…å­˜æ˜ å°„"></a>å†…å­˜æ˜ å°„</h2><p>å†…å­˜æ˜ å°„å¯¹äºæœ‰è¡€ç¼˜å…³ç³»å’Œæ— è¡€ç¼˜å…³ç³»çš„è¿›ç¨‹é—´éƒ½å¯ä»¥é€šä¿¡ã€‚å†…å­˜æ˜ å°„ä½¿ä¸€ä¸ªç£ç›˜æ–‡ä»¶ä¸å­˜å‚¨ç©ºé—´ä¸­çš„ä¸€ä¸ªç¼“å†²åŒºç›¸æ˜ å°„ã€‚å½“ä»ç¼“å†²åŒºä¸­å–æ•°æ®ï¼Œå°±ç›¸å½“äºè¯»æ–‡ä»¶ä¸­çš„ç›¸åº”å­—èŠ‚ï¼›å°†æ•°æ®å­˜å…¥ç¼“å†²åŒºï¼Œåˆ™ç›¸åº”çš„å­—èŠ‚å°±è‡ªåŠ¨å†™å…¥æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void *mmap(void *adrr, size_t length, int prot, int flags, int fd, off_t offset); </span><br><span class="line">å‚æ•°ï¼š	</span><br><span class="line">	addr: å»ºç«‹æ˜ å°„åŒºçš„é¦–åœ°å€ï¼Œç”±Linuxå†…æ ¸æŒ‡å®šã€‚ä½¿ç”¨æ—¶ï¼Œç›´æ¥ä¼ é€’NULL</span><br><span class="line">	length: æ¬²åˆ›å»ºæ˜ å°„åŒºçš„å¤§å°(é»˜è®¤åˆ†é…4kçš„æ•´æ•°å€,ä¸èƒ½ä¸º0)</span><br><span class="line">	prot: æ˜ å°„åŒºæƒé™PROT_READã€PROT_WRITEã€PROT_READ|PROT_WRITE </span><br><span class="line">	flags: æ ‡å¿—ä½å‚æ•°(å¸¸ç”¨äºè®¾å®šæ›´æ–°ç‰©ç†åŒºåŸŸã€è®¾ç½®å…±äº«ã€åˆ›å»ºåŒ¿åæ˜ å°„åŒº)</span><br><span class="line">		MAP_SHARED:  æ˜ å°„åŒºæ‰€åšçš„æ“ä½œåŒæ­¥åˆ°ç£ç›˜ã€‚æ³¨æ„ï¼šmmapçš„æ˜ å°„åŒºæƒé™å°äºç­‰äºopenæ‰“å¼€æ—¶æ–‡ä»¶çš„æƒé™</span><br><span class="line">		MAP_PRIVATE: æ˜ å°„åŒºæ‰€åšçš„æ“ä½œä¸ä¼šåŒæ­¥åˆ°ç£ç›˜ã€‚</span><br><span class="line">	fd: ç”¨æ¥å»ºç«‹æ˜ å°„åŒºçš„æ–‡ä»¶æè¿°ç¬¦(åˆ›å»ºæ˜ å°„åŒºåå¯ä»¥å…³é—­æ–‡ä»¶æè¿°ç¬¦)</span><br><span class="line">	offset: æ˜ å°„æ–‡ä»¶çš„åç§»(4kçš„æ•´æ•°å€)ï¼Œå¦åˆ™è¿”å›æ— æ•ˆå‚æ•°</span><br><span class="line"></span><br><span class="line">è¿”å›å€¼ï¼š</span><br><span class="line">	æˆåŠŸï¼šè¿”å›åˆ›å»ºçš„æ˜ å°„åŒºé¦–åœ°å€(ä¸èƒ½è¶Šç•Œæ“ä½œ)ï¼›å¤±è´¥ï¼šMAP_FAILEDå®</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ä½¿ç”¨munmapé‡Šæ”¾æ˜ å°„åŒºç©ºé—´</span><br><span class="line">int munmap(void *addr, size_t length);	</span><br><span class="line"></span><br><span class="line">è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼› å¤±è´¥ï¼š-1</span><br></pre></td></tr></table></figure>
<p>å¦‚æœmmapå¯¹åº”çš„ç£ç›˜æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä½¿ç”¨openå‡½æ•°çš„O_CREATåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶å¿…é¡»æŒ‡å®šæ–‡ä»¶å¤§å°ã€‚åº”è¯¥ä½¿ç”¨lseekæˆ–truncateåšæ–‡ä»¶æ‹“å±•ã€‚</p>
<ul>
<li>lseekå‡½æ•°<br>lseekå‡½æ•°å¯ä»¥ç”¨æ¥ä¿®æ”¹æ–‡ä»¶åç§»é‡ã€‚æ¯ä¸ªæ‰“å¼€çš„æ–‡ä»¶éƒ½è®°å½•è¿™å½“å‰è¯»å†™ä½ç½®ï¼Œæ‰“å¼€æ–‡ä»¶æ—¶è¯»å†™ä½ç½®ä¸º0ï¼Œè¡¨ç¤ºæ–‡ä»¶å¼€å¤´ï¼Œé€šå¸¸è¯»å†™å¤šå°‘ä¸ªå­—èŠ‚å°±ä¼šå°†è¯»å†™ä½ç½®å¾€åç§»å¤šå°‘ä¸ªå­—èŠ‚ã€‚<br>å¦‚æœä»¥O_APPENDæ–¹å¼æ‰“å¼€ï¼Œæ¯æ¬¡å†™æ“ä½œéƒ½ä¼šåœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ æ•°æ®ï¼Œç„¶åå°†è¯»å†™ä½ç½®ç§»åˆ°æ–°çš„æ–‡ä»¶æœ«å°¾ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">off_t lseek(int fd, off_t offset, int whence); </span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">offset çš„å«ä¹‰å–å†³äºå‚æ•° whenceï¼š</span><br><span class="line">    1. å¦‚æœ whence æ˜¯ SEEK_SETï¼Œæ–‡ä»¶åç§»é‡å°†è¢«è®¾ç½®ä¸º offsetã€‚</span><br><span class="line">    2. å¦‚æœ whence æ˜¯ SEEK_CURï¼Œæ–‡ä»¶åç§»é‡å°†è¢«è®¾ç½®ä¸ºå½“å‰æ–‡ä»¶åç§»é‡ + offsetï¼Œoffset å¯æ­£å¯è´Ÿ</span><br><span class="line">    3. å¦‚æœ whence æ˜¯ SEEK_ENDï¼Œæ–‡ä»¶åç§»é‡å°†è¢«è®¾ç½®ä¸ºæ–‡ä»¶é•¿åº¦ + offsetï¼Œoffset å¯æ­£å¯è´Ÿ</span><br><span class="line"></span><br><span class="line">åœ¨Unixæ–‡ä»¶æ“ä½œä¸­ï¼Œæ–‡ä»¶åç§»é‡å¯ä»¥å¤§äºå½“å‰æ–‡ä»¶çš„é•¿åº¦ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å¯¹æ–‡ä»¶çš„ä¸‹ä¸€æ¬¡ å†™ å°†å»¶é•¿è¯¥æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­æ„æˆä¸€ä¸ªç©ºæ´ã€‚ä½äºæ–‡ä»¶ä¸­ä½†æ²¡æœ‰å†™è¿‡çš„</span><br><span class="line">å­—èŠ‚éƒ½è®¾ä¸º0ã€‚</span><br><span class="line"></span><br><span class="line">è¿”å›å€¼ï¼š</span><br><span class="line">	å¤±è´¥è¿”å›-1ï¼›æˆåŠŸï¼šè¿”å›å€¼æ˜¯è¾ƒæ–‡ä»¶èµ·å§‹ä½ç½®å‘åçš„åç§»é‡ã€‚</span><br><span class="line">lseek(fd, 0, SEEK_END);	&#x2F;&#x2F; è·å–æ–‡ä»¶å¤§å°	</span><br><span class="line">&#x2F;&#x2F; lseekå…è®¸è¶…è¿‡æ–‡ä»¶ç»“å°¾è®¾ç½®åç§»é‡ï¼Œæ–‡ä»¶ä¼šå› æ­¤è¢«æ‹“å±•ã€‚</span><br></pre></td></tr></table></figure>
<ul>
<li>mmap.c</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;mman.h&gt;</span><br><span class="line"></span><br><span class="line">void sys_err(char *str)</span><br><span class="line">&#123;</span><br><span class="line">    perror(str);</span><br><span class="line">    exit(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    char *mem;</span><br><span class="line">    int len &#x3D; 0;</span><br><span class="line"></span><br><span class="line">    int fd &#x3D; open(&quot;mmap.txt&quot;, O_RDWR|O_CREAT|O_TRUNC, 0644);	&#x2F;&#x2F; åˆ›å»ºæ–‡ä»¶ï¼Œæˆ–è€…å°†æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘SEEK_SET</span><br><span class="line">    if (fd &lt; 0)</span><br><span class="line">        sys_err(&quot;open error&quot;);</span><br><span class="line"></span><br><span class="line">    len &#x3D; lseek(fd, 3, SEEK_SET);   &#x2F;&#x2F; å°†æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘SEEK_SET + 3çš„ä½ç½®</span><br><span class="line">    write(fd, &quot;\0&quot;, 1);             &#x2F;&#x2F; ç©ºæ´æ–‡ä»¶æ–‡ä»¶æ‹“å±•ï¼Œå¿…é¡»è¿›è¡Œä¸€æ¬¡å†™æ“ä½œ</span><br><span class="line">    len &#x3D; lseek(fd, 0, SEEK_END);	&#x2F;&#x2F; SEEK_ENDæŒ‡å‘æ–‡ä»¶æœ€åä¸€ä¸ªå­—ç¬¦</span><br><span class="line">    </span><br><span class="line">    printf(&quot;The length of file &#x3D; %d\n&quot;, len);	&#x2F;&#x2F; len &#x3D; 4</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; mem &#x3D; mmap(NULL, len, PROT_WRITE, MAP_PRIVATE, fd, 0);	&#x2F;&#x2F; MAP_PRIVATE:å¯¹æ˜ å°„ç©ºé—´å†™å…¥ä¸å½±å“ç£ç›˜æ–‡ä»¶</span><br><span class="line">	mem &#x3D; mmap(NULL, len, PROT_WRITE, MAP_SHARED, fd, 0);		&#x2F;&#x2F; æ˜ å°„æ–‡ä»¶é•¿åº¦ä¸º4ï¼Œå®é™…ç³»ç»Ÿåˆ†é…4K</span><br><span class="line">    if (mem &#x3D;&#x3D; MAP_FAILED)</span><br><span class="line">        sys_err(&quot;mmap err: &quot;);</span><br><span class="line">    close(fd);	&#x2F;&#x2F; å…³é—­æ–‡ä»¶æè¿°ç¬¦å¯¹å°†ç¼“å†²åŒºä¸­å†…å®¹å†™å…¥æ–‡ä»¶æ— å½±å“</span><br><span class="line"></span><br><span class="line">    strcpy(mem, &quot;hello&quot;);</span><br><span class="line">    printf(&quot;%s\n&quot;, mem);	&#x2F;&#x2F; hello MAP_SHAREDå†™å…¥çš„å­—ç¬¦ä¸è¶…è¿‡æ–‡ä»¶å¤§å°,æ–‡ä»¶å¤§å°ä¸º4,æ•…å†™å…¥4å­—èŠ‚</span><br><span class="line"></span><br><span class="line">    if (munmap(mem,  len) &lt; 0)</span><br><span class="line">        sys_err(&quot;munmap&quot;);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mmapçˆ¶å­é—´é€šä¿¡"><a href="#mmapçˆ¶å­é—´é€šä¿¡" class="headerlink" title="mmapçˆ¶å­é—´é€šä¿¡"></a>mmapçˆ¶å­é—´é€šä¿¡</h3><p><img src="/images/34-linux-è¿›ç¨‹/4.è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ.png" alt="&quot;4.è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ&quot;"></p>
<p>Linuxå…è®¸å¤šä¸ªdentryå…±äº«ä¸€ä¸ªinodeï¼Œå³å…±äº«ç›˜å—ã€‚mvå‘½ä»¤åªä¿®æ”¹äº†dentry(dentryåŒ…æ‹¬æ–‡ä»¶å)ï¼Œä¸ä¿®æ”¹inodeã€‚<br>Linuxä¸‹åˆ é™¤æ–‡ä»¶æ˜¯å°†ä¸inodeå¯¹åº”çš„ç¡¬è¿æ¥æ•°å‡ä¸º0ï¼Œè¿™æ ·åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å°±æ²¡æœ‰å¯¹åº”çš„dentryäº†ã€‚ç£ç›˜ä¸Šçš„æ–‡ä»¶å®é™…æ˜¯æ²¡æœ‰æ“¦é™¤çš„ã€‚å¦‚æœé‡æ–°å»ºç«‹äº†dentryï¼Œæ–‡ä»¶<br>è¿˜æ˜¯å¯ä»¥è¯»å–çš„ã€‚ç±»ä¼¼äºwindowsä¸‹æ ¼å¼åŒ–ç£ç›˜åªæ˜¯æŠŠç´¢å¼•å»é™¤äº†ï¼Œä½†æ˜¯ç£ç›˜å†…å®¹è¿˜æ˜¯å­˜åœ¨çš„ã€‚è¦æƒ³çœŸçš„åˆ é™¤ç£ç›˜å†…å®¹ï¼Œå°±éœ€è¦å¯¹è¦åˆ é™¤çš„ç©ºé—´è¿›è¡Œè¦†ç›–ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æˆªæ–­æ–‡ä»¶é•¿åº¦æˆæŒ‡å®šé•¿åº¦ï¼Œå¸¸ç”¨æ¥æ‹“å±•æ–‡ä»¶å¤§å°ã€‚</span><br><span class="line">int truncate(const char *path, off_t length);	æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1è®¾ç½®errnoä¸ºç›¸åº”å€¼</span><br><span class="line">int ftruncate(int fd, off_t length);	</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; linkå‡½æ•°åˆ›å»ºç¡¬è¿æ¥ã€‚ç¡¬è¿æ¥å…¨éƒ¨åˆ é™¤æ—¶æ‰ä¼šåˆ é™¤æ–‡ä»¶ï¼Œè½¯è¿æ¥å¦‚æœæ–‡ä»¶åˆ é™¤ï¼Œè½¯è¿æ¥æŒ‡å‘çš„æ–‡ä»¶é”™è¯¯ã€‚</span><br><span class="line">int link(const char *oldpath,  const char *newpath);	æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1è®¾ç½®errnoä¸ºç›¸åº”å€¼</span><br><span class="line">int unlink(const char *pathname);	æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1è®¾ç½®errnoä¸ºç›¸åº”å€¼</span><br><span class="line">int symlink(const char *oldpath, const char *newpath);	æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1è®¾ç½®errnoä¸ºç›¸åº”å€¼</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿›ç¨‹ä¸­ä½¿ç”¨ulinkåˆ é™¤æ–‡ä»¶åªæ˜¯è®©æ–‡ä»¶å…·å¤‡äº†è¢«é‡Šæ”¾çš„æ¡ä»¶ã€‚åªæœ‰æ‰€æœ‰æ‰“å¼€è¯¥æ–‡ä»¶çš„è¿›ç¨‹å…³é—­è¯¥æ–‡ä»¶ï¼Œç³»ç»Ÿæ‰ä¼šæ‹©æœºé‡Šæ”¾è¯¥æ–‡ä»¶ã€‚<br>å½“è¿›ç¨‹ç»“æŸè¿è¡Œæ—¶ï¼Œæ‰€æœ‰è¯¥è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶éƒ½ä¼šè¢«å…³é—­ï¼Œç”³è¯·çš„å†…å­˜ç©ºé—´ä¼šè¢«é‡Šæ”¾ã€‚ç³»ç»Ÿè¿™ä¸€ç‰¹æ€§æˆä¸ºéšå¼å›æ”¶ã€‚</p>
<ul>
<li>åˆ›å»ºæ–‡ä»¶è¿›è¡Œçˆ¶å­è¿›ç¨‹é€šä¿¡</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;mman.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line"></span><br><span class="line">int var &#x3D; 100;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    int *p;</span><br><span class="line">    pid_t pid;</span><br><span class="line"></span><br><span class="line">    int fd;</span><br><span class="line">    fd &#x3D; open(&quot;temp&quot;, O_RDWR|O_CREAT|O_TRUNC, 0644);</span><br><span class="line">    if(fd &lt; 0)&#123;</span><br><span class="line">        perror(&quot;open error&quot;);</span><br><span class="line">        exit(1);</span><br><span class="line">    &#125;</span><br><span class="line">    unlink(&quot;temp&quot;);				&#x2F;&#x2F; åˆ é™¤ä¸´æ—¶æ–‡ä»¶ç›®å½•é¡¹,ä½¿ä¹‹å…·å¤‡è¢«é‡Šæ”¾æ¡ä»¶</span><br><span class="line">    ftruncate(fd, 4);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;p &#x3D; (int *)mmap(NULL, 4, PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0);		&#x2F;&#x2F; çˆ¶å­è¿›ç¨‹å…±äº«æ˜ å°„åŒº</span><br><span class="line">    p &#x3D; (int *)mmap(NULL, 4, PROT_READ|PROT_WRITE, MAP_PRIVATE, fd, 0);	&#x2F;&#x2F; çˆ¶å­è¿›ç¨‹å„è‡ªç‹¬å æ˜ å°„åŒº</span><br><span class="line">    if(p &#x3D;&#x3D; MAP_FAILED)&#123;		</span><br><span class="line">        perror(&quot;mmap error&quot;);</span><br><span class="line">        exit(1);</span><br><span class="line">    &#125;</span><br><span class="line">    close(fd);					&#x2F;&#x2F; æ˜ å°„åŒºå»ºç«‹å®Œæ¯•,å³å¯å…³é—­æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">    pid &#x3D; fork();				&#x2F;&#x2F; åˆ›å»ºå­è¿›ç¨‹</span><br><span class="line">    if(pid &#x3D;&#x3D; 0)&#123;</span><br><span class="line">        *p &#x3D; 2000;</span><br><span class="line">        var &#x3D; 1000;</span><br><span class="line">        printf(&quot;child, *p &#x3D; %d, var &#x3D; %d\n&quot;, *p, var);	&#x2F;&#x2F; 2000 1000</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        sleep(1);</span><br><span class="line">        printf(&quot;parent, *p &#x3D; %d, var &#x3D; %d\n&quot;, *p, var);	&#x2F;&#x2F; 2000 100</span><br><span class="line">        wait(NULL);</span><br><span class="line"></span><br><span class="line">        int ret &#x3D; munmap(p, 4);				&#x2F;&#x2F; é‡Šæ”¾æ˜ å°„åŒº</span><br><span class="line">        if (ret &#x3D;&#x3D; -1) &#123;</span><br><span class="line">            perror(&quot;munmap error&quot;);</span><br><span class="line">            exit(1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸åˆ›å»ºæ–‡ä»¶è¿›è¡Œçˆ¶å­è¿›ç¨‹é€šä¿¡(åŒ¿åæ˜ å°„)<br>æ¯æ¬¡åˆ›å»ºæ˜ å°„åŒºè¦ä¾èµ–ä¸€ä¸ªæ–‡ä»¶æ¥å®ç°å¤ªéº»çƒ¦ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åŒ¿åæ˜ å°„(å®ï¼šMAP_ANONYMOUSå’ŒMAP_ANON)çš„æ–¹å¼æ›¿ä»£ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;mman.h&gt;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    int *p;</span><br><span class="line">    pid_t pid;</span><br><span class="line"></span><br><span class="line">    p &#x3D; mmap(NULL, 400, PROT_READ|PROT_WRITE, MAP_SHARED | MAP_ANON, -1, 0);</span><br><span class="line">    if(p &#x3D;&#x3D; MAP_FAILED)&#123;</span><br><span class="line">        perror(&quot;mmap error&quot;);</span><br><span class="line">        exit(1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pid &#x3D; fork();               &#x2F;&#x2F;åˆ›å»ºå­è¿›ç¨‹</span><br><span class="line">    if(pid &#x3D;&#x3D; 0)&#123;</span><br><span class="line">        *p &#x3D; 2000;</span><br><span class="line">        printf(&quot;child, *p &#x3D; %d\n&quot;, *p);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        sleep(1);</span><br><span class="line">        printf(&quot;parent, *p &#x3D; %d\n&quot;, *p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    munmap(p, 400);             &#x2F;&#x2F;é‡Šæ”¾æ˜ å°„åŒº</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mmapæ— è¡€ç¼˜å…³ç³»é€šä¿¡"><a href="#mmapæ— è¡€ç¼˜å…³ç³»é€šä¿¡" class="headerlink" title="mmapæ— è¡€ç¼˜å…³ç³»é€šä¿¡"></a>mmapæ— è¡€ç¼˜å…³ç³»é€šä¿¡</h3><p>æ— è¡€ç¼˜å…³ç³»çš„è¿›ç¨‹ä¹‹é—´é€šä¿¡ï¼Œå¿…é¡»è¦å»ºç«‹ç£ç›˜æ–‡ä»¶æ‰èƒ½åˆ›å»ºæ˜ å°„åŒºã€‚</p>
<ul>
<li>è¯»è¿›ç¨‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;mman.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">struct Student &#123;</span><br><span class="line">    int id;</span><br><span class="line">    char name[20];</span><br><span class="line">    char sex;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void sys_err(char *str)</span><br><span class="line">&#123;</span><br><span class="line">    perror(str);</span><br><span class="line">    exit(-1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    int fd;</span><br><span class="line">    struct Student stu;</span><br><span class="line">    struct Student *maddr;</span><br><span class="line"></span><br><span class="line">    if (argc &lt; 2) &#123;</span><br><span class="line">        printf(&quot;.&#x2F;a.out file_shared\n&quot;);</span><br><span class="line">        exit(-1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fd &#x3D; open(argv[1], O_RDONLY);</span><br><span class="line">    if (fd &#x3D;&#x3D; -1)</span><br><span class="line">        sys_err(&quot;open error&quot;);</span><br><span class="line"></span><br><span class="line">    maddr &#x3D; mmap(NULL, sizeof(stu), PROT_READ, MAP_SHARED, fd, 0);</span><br><span class="line">    if (maddr &#x3D;&#x3D; MAP_FAILED)</span><br><span class="line">        sys_err(&quot;mmap error&quot;);</span><br><span class="line">    </span><br><span class="line">    close(fd);</span><br><span class="line"></span><br><span class="line">    while (1) &#123;</span><br><span class="line">        printf(&quot;id&#x3D;%d\tname&#x3D;%s\t%c\n&quot;, maddr-&gt;id, maddr-&gt;name, maddr-&gt;sex);</span><br><span class="line">        usleep(10000);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    munmap(maddr, sizeof(stu));</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å†™è¿›ç¨‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;mman.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">struct Student &#123;</span><br><span class="line">    int id;</span><br><span class="line">    char name[20];</span><br><span class="line">    char sex;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void sys_err(char *str)</span><br><span class="line">&#123;</span><br><span class="line">    perror(str);</span><br><span class="line">    exit(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    int fd;</span><br><span class="line">    struct Student stu &#x3D; &#123;10, &quot;xiaoming&quot;, &#39;m&#39;&#125;;</span><br><span class="line">    char *maddr;</span><br><span class="line"></span><br><span class="line">    if (argc &lt; 2) &#123;</span><br><span class="line">        printf(&quot;.&#x2F;a.out file_shared\n&quot;);</span><br><span class="line">        exit(-1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fd &#x3D; open(argv[1], O_RDWR | O_CREAT, 0664);</span><br><span class="line">    ftruncate(fd, sizeof(stu));</span><br><span class="line"></span><br><span class="line">    maddr &#x3D; mmap(NULL, sizeof(stu), PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0);</span><br><span class="line">    if (maddr &#x3D;&#x3D; MAP_FAILED)</span><br><span class="line">        sys_err(&quot;mmap&quot;);</span><br><span class="line"></span><br><span class="line">    close(fd);</span><br><span class="line"></span><br><span class="line">    while (1) &#123;</span><br><span class="line">        memcpy(maddr, &amp;stu, sizeof(stu));</span><br><span class="line">        stu.id++;</span><br><span class="line">        sleep(1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    munmap(maddr, sizeof(stu));</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¿¡å·"><a href="#ä¿¡å·" class="headerlink" title="ä¿¡å·"></a>ä¿¡å·</h2><p>è¿›ç¨‹Aå¯ä»¥å‘è¿›ç¨‹Bå‘é€ä¿¡å·ã€‚è¿›ç¨‹Bæ”¶åˆ°ä¿¡å·ä¹‹å‰æ‰§è¡Œè‡ªå·±çš„ä»£ç ï¼Œæ”¶åˆ°ä¿¡å·åï¼Œä¸ç®¡ç¨‹åºæ‰§è¡Œåˆ°ä»€ä¹ˆä½ç½®ï¼Œéƒ½è¦æš‚åœè¿è¡Œå»å¤„ç†ä¿¡å·ï¼Œå¤„ç†å®Œæ¯•å†ç»§ç»­æ‰§è¡Œã€‚æ¯ä¸ªè¿›ç¨‹æ”¶åˆ°çš„æ‰€æœ‰ä¿¡å·éƒ½ç”±å†…æ ¸è´Ÿè´£å‘é€ã€‚linuxä¸­å¯ä»¥ä½¿ç”¨kill -lå‘½ä»¤æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­å¯ä½¿ç”¨çš„ä¿¡å·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> 1) SIGHUP	 2) SIGINT	 3) SIGQUIT	 4) SIGILL	 5) SIGTRAP</span><br><span class="line"> 6) SIGABRT	 7) SIGBUS	 8) SIGFPE	 9) SIGKILL	10) SIGUSR1</span><br><span class="line">11) SIGSEGV	12) SIGUSR2	13) SIGPIPE	14) SIGALRM	15) SIGTERM</span><br><span class="line">16) SIGSTKFLT	17) SIGCHLD	18) SIGCONT	19) SIGSTOP	20) SIGTSTP</span><br><span class="line">21) SIGTTIN	22) SIGTTOU	23) SIGURG	24) SIGXCPU	25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM	27) SIGPROF	28) SIGWINCH	29) SIGIO	30) SIGPWR</span><br><span class="line">31) SIGSYS	34) SIGRTMIN	35) SIGRTMIN+1	36) SIGRTMIN+2	37) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+4	39) SIGRTMIN+5	40) SIGRTMIN+6	41) SIGRTMIN+7	42) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+9	44) SIGRTMIN+10	45) SIGRTMIN+11	46) SIGRTMIN+12	47) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+14	49) SIGRTMIN+15	50) SIGRTMAX-14	51) SIGRTMAX-13	52) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-11	54) SIGRTMAX-10	55) SIGRTMAX-9	56) SIGRTMAX-8	57) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-6	59) SIGRTMAX-5	60) SIGRTMAX-4	61) SIGRTMAX-3	62) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-1	64) SIGRTMAX</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥é€šè¿‡ç±»ä¼¼<code>man 7 signal</code>çš„æ–¹å¼æŸ¥çœ‹ä¿¡å·å¯¹åº”çš„ä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Signal     Value     Action   Comment</span><br><span class="line">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="line">SIGHUP        1       Term    Hangup detected on controlling terminal   &#x2F;&#x2F; å½“ç”¨æˆ·é€€å‡ºshellæ—¶ï¼Œç”±è¯¥shellå¯åŠ¨çš„æ‰€æœ‰è¿›ç¨‹å°†æ”¶åˆ°è¿™ä¸ªä¿¡å·</span><br><span class="line">                                or death of controlling process         &#x2F;&#x2F; é»˜è®¤åŠ¨ä½œç»ˆæ­¢è¿›ç¨‹</span><br><span class="line">SIGINT        2       Term    Interrupt from keyboard                   &#x2F;&#x2F; Ctrl+Cç»„åˆé”®å‘å‡ºè¯¥ä¿¡å·ï¼Œç»ˆæ­¢è¿›ç¨‹</span><br><span class="line">SIGQUIT       3       Core    Quit from keyboard                        &#x2F;&#x2F; Ctrl+\ç»„åˆé”®å‘å‡ºè¯¥ä¿¡å·ï¼Œç»ˆæ­¢è¿›ç¨‹</span><br><span class="line">SIGILL        4       Core    Illegal Instruction</span><br><span class="line">SIGABRT       6       Core    Abort signal from abort(3)                &#x2F;&#x2F; è°ƒç”¨abortå‡½æ•°å‘å‡ºè¯¥ä¿¡å·ï¼Œç»ˆæ­¢è¿›ç¨‹å¹¶äº§ç”Ÿcoreæ–‡ä»¶</span><br><span class="line">SIGFPE        8       Core    Floating-point exception                  &#x2F;&#x2F; éæ³•ç®—æœ¯æ“ä½œ</span><br><span class="line">SIGKILL       9       Term    Kill signal                               &#x2F;&#x2F; æ— æ¡ä»¶ç»ˆæ­¢è¿›ç¨‹ã€‚ä¿¡å·ä¸èƒ½è¢«æ•æ‰ã€é˜»å¡å’Œå¿½ç•¥</span><br><span class="line">SIGSEGV      11       Core    Invalid memory reference                  &#x2F;&#x2F; æ— æ•ˆå†…å­˜è®¿é—®ï¼Œç»ˆæ­¢è¿›ç¨‹å¹¶ç”Ÿæˆcoreæ–‡ä»¶</span><br><span class="line">SIGPIPE      13       Term    Broken pipe: write to pipe with no        &#x2F;&#x2F; å‘ä¸€ä¸ªæ²¡æœ‰è¯»ç«¯çš„ç®¡é“å†™æ•°æ®ï¼Œç®¡é“ç ´è£‚</span><br><span class="line">                                readers; see pipe(7)</span><br><span class="line">SIGALRM      14       Term    Timer signal from alarm(2)                &#x2F;&#x2F; å®šæ—¶å™¨è¶…æ—¶</span><br><span class="line">SIGTERM      15       Term    Termination signal</span><br><span class="line">SIGUSR1   30,10,16    Term    User-defined signal 1</span><br><span class="line">SIGUSR2   31,12,17    Term    User-defined signal 2</span><br><span class="line">SIGCHLD   20,17,18    Ign     Child stopped or terminated               &#x2F;&#x2F; å­è¿›ç¨‹ç»“æŸï¼Œçˆ¶è¿›ç¨‹ä¼šæ”¶åˆ°è¿™ä¸ªä¿¡å·ï¼Œé»˜è®¤å¿½ç•¥ã€‚</span><br><span class="line">SIGCONT   19,18,25    Cont    Continue if stopped                       &#x2F;&#x2F; è¿›ç¨‹æš‚åœä½¿ç”¨è¿™ä¸ªä¿¡å·é€šçŸ¥è¿›ç¨‹ç»§ç»­æ‰§è¡Œ</span><br><span class="line">SIGSTOP   17,19,23    Stop    Stop process                              &#x2F;&#x2F; åœæ­¢è¿›ç¨‹è¿è¡Œã€‚ä¿¡å·ä¸èƒ½è¢«æ•æ‰ã€é˜»å¡å’Œå¿½ç•¥</span><br><span class="line">SIGTSTP   18,20,24    Stop    Stop typed at terminal                    &#x2F;&#x2F; Ctrl+Zæš‚åœè¿›ç¨‹</span><br><span class="line">SIGTTIN   21,21,26    Stop    Terminal input for background process</span><br><span class="line">SIGTTOU   22,22,27    Stop    Terminal output for background process</span><br><span class="line"></span><br><span class="line">The signals SIGKILL and SIGSTOP cannot be caught, blocked, or ignored.</span><br></pre></td></tr></table></figure>
<p>SIGKILLå’ŒSIGSTOPä¿¡å·ä¸èƒ½è¢«æ•æ‰ã€é˜»å¡å’Œå¿½ç•¥ã€‚<br>é»˜è®¤åŠ¨ä½œåŒ…æ‹¬ï¼š    Term:ç»ˆæ­¢è¿›ç¨‹   Ign:å¿½ç•¥ä¿¡å· (é»˜è®¤å³æ—¶å¯¹è¯¥ç§ä¿¡å·å¿½ç•¥æ“ä½œ)<br>        Core:ç»ˆæ­¢è¿›ç¨‹ï¼Œç”ŸæˆCoreæ–‡ä»¶ã€‚(æŸ¥éªŒè¿›ç¨‹æ­»äº¡åŸå› ï¼Œ ç”¨äºgdbè°ƒè¯•)<br>        Stopï¼šåœæ­¢ï¼ˆæš‚åœï¼‰è¿›ç¨‹  Contï¼šç»§ç»­è¿è¡Œè¿›ç¨‹</p>
<p>killå‘½ä»¤äº§ç”Ÿä¿¡å·ï¼škill ä¿¡å·å®å/ç¼–å· è¿›ç¨‹ID</p>
<ul>
<li>killç³»ç»Ÿå‡½æ•°<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int kill(pid_t pid, int sig);</span><br><span class="line"></span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">    pid &gt; 0:  å‘é€ä¿¡å·ç»™æŒ‡å®šçš„è¿›ç¨‹ã€‚</span><br><span class="line">	pid &#x3D; 0:  å‘é€ä¿¡å·ç»™ä¸è°ƒç”¨killå‡½æ•°è¿›ç¨‹å±äºåŒä¸€è¿›ç¨‹ç»„çš„æ‰€æœ‰è¿›ç¨‹ã€‚</span><br><span class="line">	pid &lt; -1: å–|pid|å‘ç»™å¯¹åº”è¿›ç¨‹ç»„ã€‚</span><br><span class="line">	pid &#x3D; -1ï¼šå‘é€ç»™è¿›ç¨‹æœ‰æƒé™å‘é€çš„ç³»ç»Ÿä¸­æ‰€æœ‰è¿›ç¨‹ã€‚</span><br><span class="line"></span><br><span class="line">è¿”å›å€¼ï¼š</span><br><span class="line">    æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;signal.h&gt;</span><br><span class="line"></span><br><span class="line">#define N 5</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ä»»ä¸€å­è¿›ç¨‹å‘é€ä¿¡å·æ€æ­»çˆ¶è¿›ç¨‹</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	int i;				    &#x2F;&#x2F; é»˜è®¤åˆ›å»º5ä¸ªå­è¿›ç¨‹</span><br><span class="line"></span><br><span class="line">	for(i &#x3D; 0; i &lt; N; i++)	</span><br><span class="line">		if(fork() &#x3D;&#x3D; 0)</span><br><span class="line">			break;			</span><br><span class="line"></span><br><span class="line">    if (i &#x3D;&#x3D; 3) &#123;</span><br><span class="line">        sleep(1);</span><br><span class="line">        printf(&quot;-----------child ---pid &#x3D; %d, ppid &#x3D; %d\n&quot;, getpid(), getppid());</span><br><span class="line">        kill(getppid(), SIGKILL);</span><br><span class="line"></span><br><span class="line">    &#125; else if (i &#x3D;&#x3D; N) &#123;</span><br><span class="line">        printf(&quot;I am parent, pid &#x3D; %d\n&quot;, getpid());</span><br><span class="line">        while(1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>abortç³»ç»Ÿå‡½æ•°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;signal.h&gt;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    while (1) &#123;</span><br><span class="line">        printf(&quot;pid &#x3D; %d\n&quot;, getpid());</span><br><span class="line">        sleep(1);</span><br><span class="line">        abort();    &#x2F;&#x2F; ç»™å½“å‰è¿›ç¨‹å‘é€æŒ‡å®šä¿¡å·SIGABRT(è‡ªå·±å‘ç»™è‡ªå·±)</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>raise å‡½æ•°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int raise(int sig); æˆåŠŸï¼š0ï¼Œå¤±è´¥é0å€¼</span><br></pre></td></tr></table></figure>
</li>
<li><p>è½¯ä»¶æ¡ä»¶äº§ç”Ÿä¿¡å·</p>
</li>
</ul>
<p>alarmå‡½æ•°è®¾ç½®å®šæ—¶å™¨ï¼Œåœ¨æŒ‡å®šsecondsåï¼Œå†…æ ¸ä¼šç»™å½“å‰è¿›ç¨‹å‘é€SIGALARMä¿¡å·ã€‚è¿›ç¨‹æ”¶åˆ°è¯¥ä¿¡å·ï¼Œé»˜è®¤åŠ¨ä½œç»ˆæ­¢ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸”åªæœ‰å”¯ä¸€çš„ä¸€ä¸ªå®šæ—¶å™¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">unsigned int alarm(unsigned int seconds); </span><br><span class="line"></span><br><span class="line">è¿”å›å€¼ï¼š</span><br><span class="line">    0æˆ–å‰©ä½™çš„ç§’æ•°ã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å®šæ—¶1sçœ‹èƒ½æ‰“å°å¤šå°‘ä¸ªæ•°</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line">	alarm(1);</span><br><span class="line"></span><br><span class="line">	for(i &#x3D; 0; ; i++)</span><br><span class="line">		printf(&quot;%d\n&quot;, i);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int setitimer(int which, const struct itimerval *new_value, struct itimerval *old_value);	æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br><span class="line">å‚æ•°ï¼šwhichï¼šæŒ‡å®šå®šæ—¶æ–¹å¼</span><br><span class="line">    è‡ªç„¶å®šæ—¶ï¼šITIMER_REAL â†’ 14ï¼‰SIGLARM                        è®¡ç®—è‡ªç„¶æ—¶é—´</span><br><span class="line">    è™šæ‹Ÿç©ºé—´è®¡æ—¶(ç”¨æˆ·ç©ºé—´)ï¼šITIMER_VIRTUAL â†’ 26ï¼‰SIGVTALRM      åªè®¡ç®—è¿›ç¨‹å ç”¨cpuçš„æ—¶é—´</span><br><span class="line">    è¿è¡Œæ—¶è®¡æ—¶(ç”¨æˆ·+å†…æ ¸)ï¼šITIMER_PROF â†’ 27ï¼‰SIGPROF            è®¡ç®—å ç”¨cpuåŠæ‰§è¡Œç³»ç»Ÿè°ƒç”¨çš„æ—¶é—´</span><br></pre></td></tr></table></figure>
<h3 id="ä¿¡å·é›†"><a href="#ä¿¡å·é›†" class="headerlink" title="ä¿¡å·é›†"></a>ä¿¡å·é›†</h3><p>åœ¨è¿›ç¨‹æ§åˆ¶å—PCBä¸­ï¼Œæœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„ä¿¡å·é›†ï¼šé˜»å¡ä¿¡å·é›†å’Œæœªå†³ä¿¡å·é›†ã€‚æ‰§è¡Œä¿¡å·çš„å¤„ç†åŠ¨ä½œæˆä¸ºä¿¡å·é€’è¾¾ï¼Œä¿¡å·ä»äº§ç”Ÿåˆ°é€’è¾¾ä¹‹é—´çš„çŠ¶æ€ï¼Œæˆä¸ºä¿¡å·æœªå†³ã€‚<br>å¦‚æœä¸è®¾ç½®é˜»å¡ä¿¡å·é›†ï¼Œä¿¡å·åªä¼šçŸ­æš‚çš„åœ¨æœªå†³ä¿¡å·é›†ä¸­ä»0-&gt;1-&gt;0ï¼Œ0-&gt;1è¡¨ç¤ºä¿¡å·æœªå†³ï¼Œ1-&gt;0è¡¨ç¤ºä¿¡å·é€’è¾¾ã€‚</p>
<p><img src="/images/34-linux-è¿›ç¨‹/5.ä¿¡å·é›†.png" alt="&quot;5.ä¿¡å·é›†&quot;"></p>
<p>blocké›†ï¼ˆé˜»å¡é›†ã€å±è”½é›†ï¼‰ï¼šä¸€ä¸ªè¿›ç¨‹æ‰€è¦å±è”½çš„ä¿¡å·ï¼Œåœ¨å¯¹åº”è¦å±è”½çš„ä¿¡å·ä½ç½®1<br>pendingé›†ï¼ˆæœªå†³ä¿¡å·é›†ï¼‰ï¼šå¦‚æœæŸä¸ªä¿¡å·åœ¨è¿›ç¨‹çš„é˜»å¡é›†ä¸­ï¼Œåˆ™ä¹Ÿåœ¨æœªå†³é›†ä¸­å¯¹åº”ä½ç½®1ï¼Œè¡¨ç¤ºè¯¥ä¿¡å·ä¸èƒ½è¢«é€’è¾¾ï¼Œä¸ä¼šè¢«å¤„ç†<br>handlerï¼ˆä¿¡å·å¤„ç†å‡½æ•°é›†ï¼‰ï¼šè¡¨ç¤ºæ¯ä¸ªä¿¡å·æ‰€å¯¹åº”çš„ä¿¡å·å¤„ç†å‡½æ•°ï¼Œå½“ä¿¡å·ä¸åœ¨æœªå†³é›†ä¸­æ—¶ï¼Œå°†è¢«è°ƒç”¨</p>
<p>ç”¨æˆ·å¯ä»¥ä¿®æ”¹é˜»å¡é›†ï¼Œä¸èƒ½ä¿®æ”¹æœªå†³ä¿¡å·é›†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int sigemptyset(sigset_t *set);			    &#x2F;&#x2F; å°†æŸä¸ªä¿¡å·é›†æ¸…0 æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br><span class="line">int sigfillset(sigset_t *set);				&#x2F;&#x2F; å°†æŸä¸ªä¿¡å·é›†ç½®1 æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br><span class="line">int sigaddset(sigset_t *set, int signum);	&#x2F;&#x2F; å°†é˜»å¡ä¿¡å·é›†ä¸­çš„æŸä¸ªä¿¡å·ç½®1   æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br><span class="line">int sigdelset(sigset_t *set, int signum);	&#x2F;&#x2F; å°†é˜»å¡ä¿¡å·é›†ä¸­æŸä¸ªä¿¡å·ç½®0   æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br><span class="line">int sigismember(const sigset_t *set, int signum);   &#x2F;&#x2F; åˆ¤æ–­æŸä¸ªä¿¡å·æ˜¯å¦åœ¨ä¿¡å·é›†ä¸­ï¼šåœ¨ï¼š1ï¼›ä¸åœ¨ï¼š0ï¼›å‡ºé”™ï¼š-1ï¼Œè®¾ç½®errno</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; å±è”½ä¿¡å·æˆ–è§£é™¤å±è”½</span><br><span class="line">int sigprocmask(int how, const sigset_t *set, sigset_t *oldset);	æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">    howå‚æ•°å–å€¼ï¼šå‡è®¾å½“å‰çš„ä¿¡å·å±è”½å­—ä¸ºmask</span><br><span class="line">        1.SIG_BLOCK: å½“howè®¾ç½®ä¸ºæ­¤å€¼ï¼Œsetè¡¨ç¤ºéœ€è¦å±è”½çš„ä¿¡å·ã€‚ç›¸å½“äº mask &#x3D; mask|set</span><br><span class="line">        2.SIG_UNBLOCK: å½“howè®¾ç½®ä¸ºæ­¤ï¼Œsetè¡¨ç¤ºéœ€è¦è§£é™¤å±è”½çš„ä¿¡å·ã€‚ç›¸å½“äº mask &#x3D; mask &amp; ~set</span><br><span class="line">        3.SIG_SETMASK: å½“howè®¾ç½®ä¸ºæ­¤ï¼Œsetè¡¨ç¤ºç”¨äºæ›¿ä»£åŸå§‹å±è”½åŠçš„æ–°å±è”½é›†ã€‚</span><br><span class="line">	setï¼šä¼ å…¥å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ä¿¡å·é›†åˆã€‚ç”±å‚æ•°howæ¥æŒ‡ç¤ºå¦‚ä½•ä¿®æ”¹å½“å‰ä¿¡å·å±è”½å­—ã€‚</span><br><span class="line">	oldsetï¼šä¼ å‡ºå‚æ•°ï¼Œä¿å­˜æ—§çš„ä¿¡å·å±è”½å­—ã€‚</span><br><span class="line">		</span><br><span class="line">&#x2F;&#x2F; è¯»å–å½“å‰è¿›ç¨‹çš„æœªå†³ä¿¡å·é›†</span><br><span class="line">int sigpending(sigset_t *set);	setä¼ å‡ºå‚æ•°ã€‚   è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;errno.h&gt;</span><br><span class="line">#include &lt;signal.h&gt;</span><br><span class="line"></span><br><span class="line">void sys_err(char *str)</span><br><span class="line">&#123;</span><br><span class="line">    perror(str);</span><br><span class="line">    exit(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void print_set(sigset_t* set)</span><br><span class="line">&#123;</span><br><span class="line">    int i;</span><br><span class="line">    for(i&#x3D;1; i&lt;32; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        if(sigismember(set, i))</span><br><span class="line">            putchar(&#39;1&#39;);</span><br><span class="line">        else</span><br><span class="line">            putchar(&#39;0&#39;);</span><br><span class="line">    &#125;</span><br><span class="line">	printf(&quot;\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ‰“å°æœªå†³ä¿¡å·é›†</span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    sigset_t set, oldset, pendset;</span><br><span class="line"></span><br><span class="line">    int ret &#x3D; 0;</span><br><span class="line">    sigemptyset(&amp;set);</span><br><span class="line">    sigaddset(&amp;set, SIGQUIT);   &#x2F;&#x2F; é˜»å¡ä¿¡å·é›†SIGQUITä¿¡å·ç½®1,å½“æœ‰SIGQUITä¿¡å·å‘å‡ºæ—¶ï¼Œæœªå†³ä¿¡å·é›†ç›¸åº”ä½ç½®1</span><br><span class="line"></span><br><span class="line">    ret &#x3D; sigprocmask(SIG_BLOCK, &amp;set, &amp;oldset);</span><br><span class="line">    if(ret &#x3D;&#x3D; -1)</span><br><span class="line">        sys_err(&quot;sigprocmask error&quot;);</span><br><span class="line"></span><br><span class="line">    while(1)</span><br><span class="line">    &#123;</span><br><span class="line">        ret &#x3D; sigpending(&amp;pendset);</span><br><span class="line">        if(ret &#x3D;&#x3D; -1)</span><br><span class="line">            sys_err(&quot;sigpending error&quot;);</span><br><span class="line"></span><br><span class="line">        print_set(&amp;pendset);</span><br><span class="line">        sleep(1);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¿¡å·å±è”½é›†åœ¨è¿›ç¨‹æ‰§è¡ŒæœŸé—´éƒ½æ˜¯ç”Ÿæ•ˆçš„ã€‚</p>
<h3 id="ä¿¡å·æ•æ‰"><a href="#ä¿¡å·æ•æ‰" class="headerlink" title="ä¿¡å·æ•æ‰"></a>ä¿¡å·æ•æ‰</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; ç¬¬ä¸€ç§ï¼šsignalå‡½æ•°ï¼Œä¸æ¨èä½¿ç”¨</span><br><span class="line">typedef void (*sighandler_t)(int);  &#x2F;&#x2F; æ³¨å†Œä¸€ä¸ªä¿¡å·æ•æ‰å‡½æ•°</span><br><span class="line">sighandler_t signal(int signum, sighandler_t handler); &#x2F;&#x2F; æˆåŠŸï¼šè¿”å›å‡½æ•°æŒ‡é’ˆï¼›å¤±è´¥ï¼šè¿”å›SIG_ERRï¼Œè®¾ç½®errno</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç¬¬äºŒç§: sigactionå‡½æ•°ï¼Œæ¨èä½¿ç”¨</span><br><span class="line">int sigaction(int signum, const struct sigaction *act, struct sigaction *oldact);  &#x2F;&#x2F; æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">    actï¼šä¼ å…¥å‚æ•°ï¼Œæ–°çš„å¤„ç†æ–¹å¼ã€‚</span><br><span class="line">	oldactï¼šä¼ å‡ºå‚æ•°ï¼Œæ—§çš„å¤„ç†æ–¹å¼ã€‚	</span><br><span class="line"></span><br><span class="line">struct sigaction &#123;</span><br><span class="line">        void     (*sa_handler)(int);</span><br><span class="line">        void     (*sa_sigaction)(int, siginfo_t *, void *);</span><br><span class="line">        sigset_t   sa_mask;</span><br><span class="line">        int       sa_flags;</span><br><span class="line">        void     (*sa_restorer)(void);</span><br><span class="line">    &#125;;</span><br><span class="line">sa_handlerï¼šæŒ‡å®šä¿¡å·æ•æ‰åçš„å¤„ç†å‡½æ•°å(å³æ³¨å†Œå‡½æ•°)ã€‚ä¹Ÿå¯èµ‹å€¼ä¸ºSIG_IGNè¡¨å¿½ç•¥æˆ–SIG_DFLè¡¨æ‰§è¡Œé»˜è®¤åŠ¨ä½œ</span><br><span class="line">sa_sigactionï¼šå¾ˆå°‘ä½¿ç”¨  </span><br><span class="line">sa_mask: è°ƒç”¨ä¿¡å·å¤„ç†å‡½æ•°æ—¶ï¼Œæ‰€è¦å±è”½çš„ä¿¡å·é›†åˆ(ä¿¡å·å±è”½å­—)ã€‚æ³¨æ„ï¼šä»…åœ¨å¤„ç†å‡½æ•°è¢«è°ƒç”¨æœŸé—´å±è”½ç”Ÿæ•ˆï¼Œæ˜¯ä¸´æ—¶æ€§è®¾ç½®ã€‚</span><br><span class="line">sa_flagsï¼šé€šå¸¸è®¾ç½®ä¸º0ï¼Œè¡¨ä½¿ç”¨é»˜è®¤å±æ€§ã€‚é»˜è®¤sa_flagsä¸º0ï¼Œè¡¨ç¤ºå±è”½æœ¬ä¿¡å·ã€‚å³æ¯”å¦‚SIGINTä¿¡å·å¯¹åº”å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œå±è”½SIGINTä¿¡å·ã€‚  </span><br><span class="line">sa_restorerï¼šè¿‡æ—¶å¼ƒç”¨</span><br></pre></td></tr></table></figure>
<p>sa_maskåªå·¥ä½œäºä¿¡å·å¤„ç†å‡½æ•°æ‰§è¡ŒæœŸé—´ã€‚PCBä¸­çš„å±è”½ä¿¡å·é›†å¯ä»¥å†³å®šè¿›ç¨‹å±è”½å“ªäº›ä¿¡å·ï¼Œæ‰§è¡Œä¿¡å·æ•æ‰å‡½æ•°æ—¶çš„å±è”½ä¿¡å·é›†ç”±sa_maskæŒ‡å®šã€‚<br>ä¸€ä¸ªä¿¡å·æ‰§è¡Œä¿¡å·æ•æ‰å‡½æ•°æ—¶ï¼Œè¯¥ä¿¡å·è¢«å±è”½ã€‚åªæœ‰ç­‰å¾…ä¿¡å·æ•æ‰å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œè¢«å±è”½çš„ä¿¡å·æ‰èƒ½æ‰§è¡Œ(ç›¸å½“äºé˜»å¡)ã€‚é˜»å¡çš„ä¿¡å·ä¸æ”¯æŒæ’é˜Ÿï¼Œå¤šæ¬¡<br>å‘å‡ºä¿¡å·åªè®°å½•ä¸€æ¬¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;signal.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line"></span><br><span class="line">void sig_handle(int signo)</span><br><span class="line">&#123;</span><br><span class="line">	if(signo &#x3D;&#x3D; SIGQUIT)</span><br><span class="line">		printf(&quot;catch signal %d\n&quot;, signo);</span><br><span class="line"></span><br><span class="line">	sleep(5);			&#x2F;&#x2F; æ¨¡æ‹Ÿä¿¡å·å¤„ç†å‡½æ•°æ‰§è¡Œå¾ˆé•¿æ—¶é—´</span><br><span class="line">	printf(&quot;end of handle\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	struct sigaction act, oldact;		</span><br><span class="line"></span><br><span class="line">	act.sa_handler &#x3D; sig_handle;</span><br><span class="line">	sigemptyset(&amp;act.sa_mask);		</span><br><span class="line">	sigaddset(&amp;act.sa_mask, SIGINT);	</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; å°†SIGINTåŠ å…¥ä¿¡å·å±è”½é›†</span><br><span class="line">	&#x2F;&#x2F; åœ¨è°ƒç”¨ä¿¡å·å¤„ç†å‡½æ•°æœŸé—´:ä¸å“åº”SIGQUITä¿¡å·æœ¬èº«,ä¹Ÿä¸å“åº”SIGINT(å½“ä¿¡å·å¤„ç†å‡½æ•°æ‰§è¡Œå®Œæ‰å“åº”)</span><br><span class="line">	act.sa_flags &#x3D; 0;	</span><br><span class="line"></span><br><span class="line">	sigaction(SIGQUIT, &amp;act, &amp;oldact);		&#x2F;&#x2F; æ³¨å†Œä¿¡å·SIGINTæ•æ‰å‡½æ•°</span><br><span class="line"></span><br><span class="line">	while(1);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å€ŸåŠ©SIGCHLDä¿¡å·å›æ”¶å­è¿›ç¨‹"><a href="#å€ŸåŠ©SIGCHLDä¿¡å·å›æ”¶å­è¿›ç¨‹" class="headerlink" title="å€ŸåŠ©SIGCHLDä¿¡å·å›æ”¶å­è¿›ç¨‹"></a>å€ŸåŠ©SIGCHLDä¿¡å·å›æ”¶å­è¿›ç¨‹</h3><p>SIGCHLDäº§ç”Ÿçš„æ¡ä»¶ï¼šå­è¿›ç¨‹ç»ˆæ­¢ï¼›å­è¿›ç¨‹æ¥æ”¶åˆ°SIGSTOPä¿¡å·åœæ­¢ï¼›å­è¿›ç¨‹å¤„äºåœæ­¢æ€ï¼Œæ¥æ”¶åˆ°SIGCONTåå”¤é†’ã€‚<br>çˆ¶è¿›ç¨‹forkå­è¿›ç¨‹åï¼Œå¦‚æœçˆ¶è¿›ç¨‹ä½¿ç”¨execlå‡½æ•°æ—ï¼Œåˆ™çˆ¶è¿›ç¨‹ä¸èƒ½å›æ”¶å­è¿›ç¨‹ã€‚æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¿¡å·çš„æ–¹å¼è¿›è¡Œå›è°ƒå›æ”¶å­è¿›ç¨‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;errno.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line">#include &lt;signal.h&gt;</span><br><span class="line"></span><br><span class="line">void sys_err(char *str)</span><br><span class="line">&#123;</span><br><span class="line">    perror(str);</span><br><span class="line">    exit(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void do_sig_child(int signo)</span><br><span class="line">&#123;</span><br><span class="line">    int status;</span><br><span class="line">    pid_t pid;</span><br><span class="line">    if ((pid &#x3D; waitpid(0, &amp;status, WNOHANG)) &gt; 0) &#123; &#x2F;&#x2F; å¦‚æœä¸€æ¬¡æœ‰å¤šä¸ªè¿›ç¨‹ç»ˆæ­¢ï¼Œåˆ™ç”±äºå›è°ƒå‡½æ•°ä¸€æ¬¡åªèƒ½å›æ”¶ä¸€ä¸ªï¼Œä¸”å¤šä¸ªè¿›ç¨‹ä¿¡å·åªä¿ç•™ä¸€ä¸ª</span><br><span class="line">                                                    &#x2F;&#x2F; è¿™æ ·ä¼šæœ‰å­è¿›ç¨‹ä¸è¢«çˆ¶è¿›ç¨‹å›æ”¶çš„æƒ…å†µï¼Œé€ æˆåƒµå°¸è¿›ç¨‹</span><br><span class="line">    &#x2F;&#x2F;    while ((pid &#x3D; waitpid(0, &amp;status, WNOHANG)) &gt; 0) &#123;    &#x2F;&#x2F; åº”è¯¥æ”¹æˆå¾ªç¯</span><br><span class="line">        if (WIFEXITED(status))</span><br><span class="line">            printf(&quot;child %d exit %d\n&quot;, pid, WEXITSTATUS(status));</span><br><span class="line">        else if (WIFSIGNALED(status))</span><br><span class="line">            printf(&quot;child %d cancel signal %d\n&quot;, pid, WTERMSIG(status));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    pid_t pid;</span><br><span class="line">    int i;</span><br><span class="line">    &#x2F;&#x2F;é˜»å¡SIGCHLDï¼Œé˜²æ­¢çˆ¶è¿›ç¨‹å›è°ƒå‡½æ•°è¿˜æ²¡æ³¨å†Œï¼Œå­è¿›ç¨‹å°±ç»ˆæ­¢ã€‚</span><br><span class="line">    sigset_t set;</span><br><span class="line">    sigemptyset(&amp;set);</span><br><span class="line">    sigaddset(&amp;set, SIGCHLD);</span><br><span class="line">    sigprocmask(SIG_BLOCK, &amp;set, NULL);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    for (i&#x3D;0; i&lt;5; i++) &#123;</span><br><span class="line">        if ((pid &#x3D; fork()) &#x3D;&#x3D; 0)</span><br><span class="line">            break;</span><br><span class="line">        else if (pid &lt; 0)</span><br><span class="line">            sys_err(&quot;fork&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	if(5 &#x3D;&#x3D; i)</span><br><span class="line">	&#123;</span><br><span class="line">        &#x2F;&#x2F; å…ˆè®¾ç½®æ•æ‰, å†è§£é™¤å¯¹SIGCHLDçš„é˜»å¡</span><br><span class="line">        struct sigaction act;</span><br><span class="line"></span><br><span class="line">        act.sa_handler &#x3D; do_sig_child;</span><br><span class="line">        sigemptyset(&amp;act.sa_mask);</span><br><span class="line">        act.sa_flags &#x3D; 0;</span><br><span class="line">        sigaction(SIGCHLD, &amp;act, NULL);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; å›è°ƒå‡½æ•°æ³¨å†Œåè§£é™¤é˜»å¡</span><br><span class="line">        sigprocmask(SIG_UNBLOCK, &amp;set, NULL);</span><br><span class="line">        </span><br><span class="line">        while (1) &#123;</span><br><span class="line">            printf(&quot;Parent ID %d\n&quot;, getpid());</span><br><span class="line">            sleep(1);</span><br><span class="line">        &#125;		</span><br><span class="line">	&#125;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		printf(&quot;child ID %d\n&quot;, getpid());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å®ˆæŠ¤è¿›ç¨‹-Daemon"><a href="#å®ˆæŠ¤è¿›ç¨‹-Daemon" class="headerlink" title="å®ˆæŠ¤è¿›ç¨‹(Daemon)"></a>å®ˆæŠ¤è¿›ç¨‹(Daemon)</h1><p>å®ˆæŠ¤è¿›ç¨‹æ˜¯åå°è¿è¡Œï¼Œç‹¬ç«‹äºæ§åˆ¶ç»ˆç«¯ã€ä¸ä¸ç”¨æˆ·ç›´æ¥äº¤äº’ä¸”å‘¨æœŸæ€§æ‰§è¡ŒæŸç§ä»»åŠ¡æˆ–ç­‰å¾…å¤„ç†å‘ç”Ÿäº‹ä»¶çš„è¿›ç¨‹ã€‚å®ˆæŠ¤è¿›ç¨‹ä¸å—ç”¨æˆ·ç™»é™†å’Œæ³¨é”€å½±å“ã€‚<br>è¿›ç¨‹ç»„æ˜¯ä¸€ç»„ç›¸å…³è¿›ç¨‹çš„é›†åˆï¼Œä¼šè¯æ˜¯ä¸€ç»„ç›¸å…³è¿›ç¨‹ç»„çš„é›†åˆï¼Œä¸€ä¸ªè¿›ç¨‹ä¼šæœ‰å¦‚ä¸‹ID:PIDã€PPIDã€PGID(è¿›ç¨‹ç»„ID)ã€SID(ä¼šè¯ID)ã€‚<br>å½“çˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹çš„æ—¶å€™ï¼Œé»˜è®¤å­è¿›ç¨‹ä¸çˆ¶è¿›ç¨‹å±äºåŒä¸€è¿›ç¨‹ç»„ã€‚è¿›ç¨‹ç»„IDç­‰äºç¬¬ä¸€ä¸ªè¿›ç¨‹ID</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; è¿”å›è°ƒç”¨è€…çš„è¿›ç¨‹ç»„ID</span><br><span class="line">pid_t getpgrp(void);    </span><br><span class="line">&#x2F;&#x2F; è¿”å›æŒ‡å®šè¿›ç¨‹çš„è¿›ç¨‹ç»„ID</span><br><span class="line">pid_t getpgid(pid_t pid);   &#x2F;&#x2F; æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br><span class="line">&#x2F;&#x2F; æ”¹å˜è¿›ç¨‹é»˜è®¤æ‰€å±çš„è¿›ç¨‹ç»„,å°†pidå¯¹åº”çš„è¿›ç¨‹åŠ å…¥pgidå¯¹åº”çš„è¿›ç¨‹ç»„</span><br><span class="line">int setpgid(pid_t pid, pid_t pgid); 	&#x2F;&#x2F; æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    pid_t pid;</span><br><span class="line"></span><br><span class="line">    if ((pid &#x3D; fork())&lt;0) &#123;</span><br><span class="line">        perror(&quot;fork&quot;);</span><br><span class="line">        exit(1);</span><br><span class="line">    &#125; else if (pid &#x3D;&#x3D; 0) &#123;</span><br><span class="line">        printf(&quot;child process PID is %d\n&quot;, getpid());</span><br><span class="line">        printf(&quot;Group ID of child is %d\n&quot;, getpgid(0));</span><br><span class="line">        printf(&quot;Session ID of child is %d\n&quot;, getsid(0));</span><br><span class="line"></span><br><span class="line">        sleep(5);</span><br><span class="line">        setsid();       &#x2F;&#x2F; å­è¿›ç¨‹éç»„é•¿è¿›ç¨‹ï¼Œæ•…å…¶æˆä¸ºæ–°ä¼šè¯é¦–è¿›ç¨‹ï¼Œä¸”æˆä¸ºç»„é•¿è¿›ç¨‹ã€‚è¯¥è¿›ç¨‹ç»„idå³ä¸ºä¼šè¯è¿›ç¨‹</span><br><span class="line"></span><br><span class="line">        printf(&quot;Changed:\n&quot;);</span><br><span class="line">        printf(&quot;child process PID is %d\n&quot;, getpid());</span><br><span class="line">        printf(&quot;Group ID of child is %d\n&quot;, getpgid(0));</span><br><span class="line">        printf(&quot;Session ID of child is %d\n&quot;, getsid(0));</span><br><span class="line">        sleep(5);</span><br><span class="line"></span><br><span class="line">        exit(0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨UNIXç³»ç»Ÿä¸­ï¼Œç”¨æˆ·é€šè¿‡ç»ˆç«¯ç™»å½•ç³»ç»Ÿåå¾—åˆ°ä¸€ä¸ªShellè¿›ç¨‹ï¼Œè¿™ä¸ªç»ˆç«¯æˆä¸ºShellè¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ï¼ˆControlling Terminalï¼‰.è¿›ç¨‹ä¸­ï¼Œæ§åˆ¶ç»ˆç«¯æ˜¯ä¿å­˜åœ¨PCBä¸­çš„ä¿¡æ¯ï¼Œè€Œforkä¼šå¤åˆ¶PCBä¸­çš„ä¿¡æ¯ï¼Œå› æ­¤ç”±Shellè¿›ç¨‹å¯åŠ¨çš„å…¶å®ƒè¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ä¹Ÿæ˜¯è¿™ä¸ªç»ˆç«¯ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ˆæ²¡æœ‰é‡å®šå‘ï¼‰ï¼Œæ¯ä¸ªè¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºéƒ½æŒ‡å‘æ§åˆ¶ç»ˆç«¯ï¼Œè¿›ç¨‹ä»æ ‡å‡†è¾“å…¥è¯»ä¹Ÿå°±æ˜¯è¯»ç”¨æˆ·çš„é”®ç›˜è¾“å…¥ï¼Œè¿›ç¨‹å¾€æ ‡å‡†è¾“å‡ºæˆ–æ ‡å‡†é”™è¯¯è¾“å‡ºå†™ä¹Ÿå°±æ˜¯è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨ä¸Šã€‚</p>
<ul>
<li>åˆ›å»ºä¼šè¯</li>
</ul>
<ol>
<li>è°ƒç”¨è¿›ç¨‹ä¸èƒ½æ˜¯è¿›ç¨‹ç»„ç»„é•¿ã€‚å¦‚æœè°ƒç”¨è¿›ç¨‹æ˜¯è¿›ç¨‹ç»„ç»„é•¿ï¼Œåˆ™è¿›ç¨‹ç»„ç»„é•¿ä¼šæˆä¸ºæ–°è¿›ç¨‹ç»„çš„ç»„é•¿ï¼ŒåŒæ—¶æ˜¯æ–°ä¼šè¯çš„ä¼šé•¿ã€‚ä½†æ˜¯åŸè¿›ç¨‹ç»„çš„å…¶ä»–æˆå‘˜<br>ä»ç„¶åœ¨è€çš„ä¼šè¯ä¸­ï¼Œå°±ä¼šå‡ºç°åŒä¸€ä¸ªè¿›ç¨‹ç»„çš„è¿›ç¨‹åˆ†å±äºä¸åŒä¼šè¯çš„æƒ…å†µã€‚è¿™ç ´åäº†è¿›ç¨‹ç»„å’Œä¼šè¯ä¹‹é—´çš„ä¸¥æ ¼å±‚æ¬¡å…³ç³»ã€‚</li>
<li>è¯¥è¿›ç¨‹æˆä¸ºä¸€ä¸ªæ–°è¿›ç¨‹ç»„çš„ç»„é•¿è¿›ç¨‹ã€‚</li>
<li>éœ€æœ‰rootæƒé™(ubuntuä¸éœ€è¦)</li>
<li>æ–°ä¼šè¯ä¸¢å¼ƒåŸæœ‰çš„æ§åˆ¶ç»ˆç«¯ï¼Œè¯¥ä¼šè¯æ²¡æœ‰æ§åˆ¶ç»ˆç«¯</li>
<li>å»ºç«‹æ–°ä¼šè¯æ—¶ï¼Œå…ˆè°ƒç”¨fork, çˆ¶è¿›ç¨‹ç»ˆæ­¢ï¼Œå­è¿›ç¨‹è°ƒç”¨setsid</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; è·å–è¿›ç¨‹æ‰€å±çš„ä¼šè¯ID</span><br><span class="line">pid_t getsid(pid_t pid); æˆåŠŸï¼šè¿”å›è°ƒç”¨è¿›ç¨‹çš„ä¼šè¯IDï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br><span class="line">&#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªä¼šè¯ï¼Œå¹¶ä»¥è‡ªå·±çš„IDè®¾ç½®è¿›ç¨‹ç»„IDï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ–°ä¼šè¯çš„ID</span><br><span class="line">pid_t setsid(void);  æˆåŠŸï¼šè¿”å›è°ƒç”¨è¿›ç¨‹çš„ä¼šè¯IDï¼›å¤±è´¥ï¼š-1ï¼Œè®¾ç½®errno</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹è¿‡ç¨‹</li>
</ul>
<ol>
<li>åˆ›å»ºå­è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹é€€å‡ºï¼Œæ‰€æœ‰å·¥ä½œåœ¨å­è¿›ç¨‹ä¸­è¿›è¡Œå½¢å¼ä¸Šè„±ç¦»äº†æ§åˆ¶ç»ˆç«¯</li>
<li>åœ¨å­è¿›ç¨‹ä¸­åˆ›å»ºæ–°ä¼šè¯ï¼Œsetsid()å‡½æ•°ï¼Œä½¿å­è¿›ç¨‹å®Œå…¨ç‹¬ç«‹å‡ºæ¥ï¼Œè„±ç¦»æ§åˆ¶</li>
<li>æ”¹å˜å½“å‰ç›®å½•ä¸ºæ ¹ç›®å½•ï¼Œchdir()å‡½æ•°ï¼Œé˜²æ­¢å ç”¨å¯å¸è½½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥æ¢æˆå…¶å®ƒè·¯å¾„</li>
<li>é‡è®¾æ–‡ä»¶æƒé™æ©ç ï¼Œumask()å‡½æ•°ï¼Œé˜²æ­¢ç»§æ‰¿çš„æ–‡ä»¶åˆ›å»ºå±è”½å­—æ‹’ç»æŸäº›æƒé™ï¼Œå¢åŠ å®ˆæŠ¤è¿›ç¨‹çµæ´»æ€§</li>
<li>å…³é—­æ–‡ä»¶æè¿°ç¬¦ï¼Œç»§æ‰¿çš„æ‰“å¼€æ–‡ä»¶ä¸ä¼šç”¨åˆ°ï¼Œæµªè´¹ç³»ç»Ÿèµ„æºï¼Œæ— æ³•å¸è½½</li>
<li>å¼€å§‹æ‰§è¡Œå®ˆæŠ¤è¿›ç¨‹æ ¸å¿ƒå·¥ä½œ</li>
<li>å®ˆæŠ¤è¿›ç¨‹é€€å‡ºå¤„ç†ç¨‹åºæ¨¡å‹    </li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line"></span><br><span class="line">void daemonize(void)</span><br><span class="line">&#123;</span><br><span class="line">    pid_t pid;</span><br><span class="line">    &#x2F;*</span><br><span class="line">     *  æˆä¸ºä¸€ä¸ªæ–°ä¼šè¯çš„é¦–è¿›ç¨‹ï¼Œå¤±å»æ§åˆ¶ç»ˆç«¯</span><br><span class="line">     *&#x2F;</span><br><span class="line">    if ((pid &#x3D; fork()) &lt; 0) &#123;</span><br><span class="line">        perror(&quot;fork&quot;);</span><br><span class="line">        exit(1);</span><br><span class="line">    &#125; else if (pid !&#x3D; 0) &#x2F;* parent *&#x2F;</span><br><span class="line">        exit(0);</span><br><span class="line">    setsid();</span><br><span class="line">    &#x2F;*</span><br><span class="line">     * æ”¹å˜å½“å‰å·¥ä½œç›®å½•åˆ°&#x2F;ç›®å½•ä¸‹.</span><br><span class="line">     *&#x2F;</span><br><span class="line">    if (chdir(&quot;&#x2F;&quot;) &lt; 0) &#123;</span><br><span class="line">        perror(&quot;chdir&quot;);</span><br><span class="line">        exit(1);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;* è®¾ç½®umaskä¸º0 *&#x2F;</span><br><span class="line">    umask(0);</span><br><span class="line">    &#x2F;*</span><br><span class="line">     * é‡å®šå‘0ï¼Œ1ï¼Œ2æ–‡ä»¶æè¿°ç¬¦åˆ° &#x2F;dev&#x2F;nullï¼Œå› ä¸ºå·²ç»å¤±å»æ§åˆ¶ç»ˆç«¯ï¼Œå†æ“ä½œ0ï¼Œ1ï¼Œ2æ²¡æœ‰æ„ä¹‰.</span><br><span class="line">     *&#x2F;</span><br><span class="line">    close(0);</span><br><span class="line">    open(&quot;&#x2F;dev&#x2F;null&quot;, O_RDWR);	&#x2F;&#x2F; ä¿è¯0ï¼Œ1ï¼Œ2ä¸ä¼šåœ¨å®ˆæŠ¤è¿›ç¨‹opençš„æ—¶å€™è¢«åˆ†é…</span><br><span class="line">    dup2(0, 1);</span><br><span class="line">    dup2(0, 2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    daemonize();</span><br><span class="line">    while(1);       &#x2F;* åœ¨æ­¤å¾ªç¯ä¸­å¯ä»¥å®ç°å®ˆæŠ¤è¿›ç¨‹çš„æ ¸å¿ƒå·¥ä½œ *&#x2F;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¹¶å‘å’Œå¹¶è¡Œ"><a href="#å¹¶å‘å’Œå¹¶è¡Œ" class="headerlink" title="å¹¶å‘å’Œå¹¶è¡Œ"></a>å¹¶å‘å’Œå¹¶è¡Œ</h1><blockquote>
<p>å¦‚æœæŸä¸ªç³»ç»Ÿæ”¯æŒä¸¤ä¸ªæˆ–è€…å¤šä¸ªåŠ¨ä½œï¼ˆActionï¼‰åŒæ—¶å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿå°±æ˜¯ä¸€ä¸ªå¹¶å‘ç³»ç»Ÿã€‚å¦‚æœæŸä¸ªç³»ç»Ÿæ”¯æŒä¸¤ä¸ªæˆ–è€…å¤šä¸ªåŠ¨ä½œåŒæ—¶æ‰§è¡Œï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿå°±æ˜¯ä¸€ä¸ªå¹¶è¡Œç³»ç»Ÿã€‚å¹¶å‘ç³»ç»Ÿä¸å¹¶è¡Œç³»ç»Ÿè¿™ä¸¤ä¸ªå®šä¹‰ä¹‹é—´çš„å…³é”®å·®å¼‚åœ¨äºâ€œå­˜åœ¨â€è¿™ä¸ªè¯ã€‚åœ¨å¹¶å‘ç¨‹åºä¸­å¯ä»¥åŒæ—¶æ‹¥æœ‰ä¸¤ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœç¨‹åºåœ¨å•æ ¸å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªçº¿ç¨‹å°†äº¤æ›¿åœ°æ¢å…¥æˆ–è€…æ¢å‡ºå†…å­˜ã€‚è¿™äº›çº¿ç¨‹æ˜¯åŒæ—¶â€œå­˜åœ¨â€çš„â€”â€”æ¯ä¸ªçº¿ç¨‹éƒ½å¤„äºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸ªçŠ¶æ€ã€‚å¦‚æœç¨‹åºèƒ½å¤Ÿå¹¶è¡Œæ‰§è¡Œï¼Œé‚£ä¹ˆå°±ä¸€å®šæ˜¯è¿è¡Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šã€‚æ­¤æ—¶ï¼Œç¨‹åºä¸­çš„æ¯ä¸ªçº¿ç¨‹éƒ½å°†åˆ†é…åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å¤„ç†å™¨æ ¸ä¸Šï¼Œå› æ­¤å¯ä»¥åŒæ—¶è¿è¡Œã€‚æˆ‘ç›¸ä¿¡ä½ å·²ç»èƒ½å¤Ÿå¾—å‡ºç»“è®ºâ€”â€”â€œå¹¶è¡Œâ€æ¦‚å¿µæ˜¯â€œå¹¶å‘â€æ¦‚å¿µçš„ä¸€ä¸ªå­é›†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ç¼–å†™ä¸€ä¸ªæ‹¥æœ‰å¤šä¸ªçº¿ç¨‹æˆ–è€…è¿›ç¨‹çš„å¹¶å‘ç¨‹åºï¼Œä½†å¦‚æœæ²¡æœ‰å¤šæ ¸å¤„ç†å™¨æ¥æ‰§è¡Œè¿™ä¸ªç¨‹åºï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä»¥å¹¶è¡Œæ–¹å¼æ¥è¿è¡Œä»£ç ã€‚å› æ­¤ï¼Œå‡¡æ˜¯åœ¨æ±‚è§£å•ä¸ªé—®é¢˜æ—¶æ¶‰åŠå¤šä¸ªæ‰§è¡Œæµç¨‹çš„ç¼–ç¨‹æ¨¡å¼æˆ–è€…æ‰§è¡Œè¡Œä¸ºï¼Œéƒ½å±äºå¹¶å‘ç¼–ç¨‹çš„èŒƒç•´ã€‚<br><a href="https://www.zhihu.com/question/33515481/answer/105348019" target="_blank" rel="noopener">ä½œè€…é“¾æ¥</a></p>
<p>å¹¶å‘ï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæ˜¯æŒ‡ä¸€ä¸ªæ—¶é—´æ®µä¸­æœ‰å‡ ä¸ªç¨‹åºéƒ½å¤„äºå·²å¯åŠ¨è¿è¡Œåˆ°è¿è¡Œå®Œæ¯•ä¹‹é—´ï¼Œä¸”è¿™å‡ ä¸ªç¨‹åºéƒ½æ˜¯åœ¨åŒä¸€ä¸ªå¤„ç†æœºä¸Šè¿è¡Œã€‚<br>å¹¶å‘ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„â€œåŒæ—¶è¿›è¡Œâ€ï¼Œåªæ˜¯CPUæŠŠä¸€ä¸ªæ—¶é—´æ®µåˆ’åˆ†æˆå‡ ä¸ªæ—¶é—´ç‰‡æ®µï¼ˆæ—¶é—´åŒºé—´ï¼‰ï¼Œç„¶ååœ¨è¿™å‡ ä¸ªæ—¶é—´åŒºé—´ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œç”±äºCPUå¤„ç†çš„é€Ÿåº¦éå¸¸å¿«ï¼Œåªè¦æ—¶é—´é—´éš”å¤„ç†å¾—å½“ï¼Œå³å¯è®©ç”¨æˆ·æ„Ÿè§‰æ˜¯å¤šä¸ªåº”ç”¨ç¨‹åºåŒæ—¶åœ¨è¿›è¡Œã€‚<br>å¹¶è¡Œï¼ˆParallelï¼‰ï¼Œå½“ç³»ç»Ÿæœ‰ä¸€ä¸ªä»¥ä¸ŠCPUæ—¶ï¼Œå½“ä¸€ä¸ªCPUæ‰§è¡Œä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå¦ä¸€ä¸ªCPUå¯ä»¥æ‰§è¡Œå¦ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸¤ä¸ªè¿›ç¨‹äº’ä¸æŠ¢å CPUèµ„æºï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œï¼Œè¿™ç§æ–¹å¼æˆ‘ä»¬ç§°ä¹‹ä¸ºå¹¶è¡Œ(Parallel)ã€‚å†³å®šå¹¶è¡Œçš„å› ç´ ä¸æ˜¯CPUçš„æ•°é‡ï¼Œè€Œæ˜¯CPUçš„æ ¸å¿ƒæ•°é‡ï¼Œæ¯”å¦‚ä¸€ä¸ªCPUå¤šä¸ªæ ¸ä¹Ÿå¯ä»¥å¹¶è¡Œã€‚<br><a href="https://www.cnblogs.com/xc-chejj/p/10813692.html" target="_blank" rel="noopener">å¹¶è¡Œå’Œå¹¶å‘çš„åŒºåˆ«</a></p>
</blockquote>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¹¶å‘æ˜¯åœ¨ä¸€æ®µæ—¶é—´å†…å®è§‚ä¸Šå¤šä¸ªç¨‹åºåŒæ—¶è¿è¡Œ(å®è§‚å¹¶è¡Œï¼Œå¾®è§‚ä¸²è¡Œ)ï¼›å¹¶è¡Œæ˜¯åœ¨æŸä¸€æ—¶åˆ»ï¼ŒçœŸæ­£æœ‰å¤šä¸ªç¨‹åºåœ¨è¿è¡Œã€‚</p>
<p>å¹¶è¡Œå’Œå¹¶å‘çš„åŒºåˆ«ï¼š</p>
<p>å¹¶å‘ï¼ŒæŒ‡çš„æ˜¯å¤šä¸ªäº‹æƒ…ï¼Œåœ¨åŒä¸€æ—¶é—´æ®µå†…åŒæ—¶å‘ç”Ÿäº†ã€‚<br>å¹¶è¡Œï¼ŒæŒ‡çš„æ˜¯å¤šä¸ªäº‹æƒ…ï¼Œåœ¨åŒä¸€æ—¶é—´ç‚¹ä¸ŠåŒæ—¶å‘ç”Ÿäº†ã€‚</p>
<p>å¹¶å‘çš„å¤šä¸ªä»»åŠ¡ä¹‹é—´æ˜¯äº’ç›¸æŠ¢å èµ„æºçš„ã€‚<br>å¹¶è¡Œçš„å¤šä¸ªä»»åŠ¡ä¹‹é—´æ˜¯ä¸äº’ç›¸æŠ¢å èµ„æºçš„ã€</p>
<p>åªæœ‰åœ¨å¤šCPUæˆ–è€…ä¸€ä¸ªCPUå¤šæ ¸çš„æƒ…å†µä¸­ï¼Œæ‰ä¼šå‘ç”Ÿå¹¶è¡Œã€‚å¦åˆ™ï¼Œçœ‹ä¼¼åŒæ—¶å‘ç”Ÿçš„äº‹æƒ…ï¼Œå…¶å®éƒ½æ˜¯å¹¶å‘æ‰§è¡Œçš„ã€‚</p>
<h1 id="é“¾æ¥åœ°å€"><a href="#é“¾æ¥åœ°å€" class="headerlink" title="é“¾æ¥åœ°å€"></a>é“¾æ¥åœ°å€</h1><p><a href="https://www.cnblogs.com/zengyiwen/p/5755191.html" target="_blank" rel="noopener">linuxå†…æ ¸ä¹‹è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µ(è¿›ç¨‹ï¼Œè¿›ç¨‹ç»„ï¼Œä¼šè¯å…³ç³»)</a><br><a href="https://blog.csdn.net/mijichui2153/article/details/81394387" target="_blank" rel="noopener">åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹çš„æ­¥éª¤</a></p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>31-è™šæ‹Ÿæœº-Ubuntu-Mac</title>
    <url>/2020/02/29/31-%E8%99%9A%E6%8B%9F%E6%9C%BA-Ubuntu-Mac/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="è™šæ‹Ÿæœº"><a href="#è™šæ‹Ÿæœº" class="headerlink" title="è™šæ‹Ÿæœº"></a>è™šæ‹Ÿæœº</h1><h1 id="VMware-Workstation"><a href="#VMware-Workstation" class="headerlink" title="VMware Workstation"></a>VMware Workstation</h1><p><a href="https://blog.csdn.net/qq_39135287/article/details/82924547?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">VMware Workstation 14ä¸­æ–‡ç ´è§£ç‰ˆ ä¸‹è½½ä¸å®‰è£…(é™„å¯†é’¥)</a></p>
<h2 id="Ubuntu-18-04"><a href="#Ubuntu-18-04" class="headerlink" title="Ubuntu 18.04"></a>Ubuntu 18.04</h2><h3 id="å®‰è£…ç™¾åº¦è¾“å…¥æ³•"><a href="#å®‰è£…ç™¾åº¦è¾“å…¥æ³•" class="headerlink" title="å®‰è£…ç™¾åº¦è¾“å…¥æ³•"></a>å®‰è£…ç™¾åº¦è¾“å…¥æ³•</h3><ol>
<li>Ubuntuä¸‹ç™¾åº¦è¾“å…¥æ³•éœ€è¦å®‰è£…fcitxã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br><span class="line">sudo apt-get install aptitude</span><br><span class="line">sudo aptitude install fcitx-bin fcitx-table fcitx-config-gtk fcitx-config-gtk2 fcitx-frontend-all</span><br><span class="line">sudo aptitude install qt5-default qtcreator qml-module-qtquick-controls2</span><br></pre></td></tr></table></figure>
<ol>
<li><p>è®¾ç½®é”®ç›˜è¾“å…¥æ³•ç³»ç»Ÿ<br>å·¦ä¸‹è§’-&gt;è®¾ç½®-&gt;åŒºåŸŸå’Œè¯­è¨€-&gt;ç®¡ç†å·²å®‰è£…çš„è¯­è¨€-&gt;æ·»åŠ æˆ–åˆ é™¤è¯­è¨€-&gt;å‹¾é€‰<strong>ä¸­æ–‡ç®€ä½“</strong>-&gt;ç‚¹å‡»<strong>åº”ç”¨</strong>ã€‚<br>å·¦ä¸‹è§’-&gt;è®¾ç½®-&gt;åŒºåŸŸå’Œè¯­è¨€-&gt;ç®¡ç†å·²å®‰è£…çš„è¯­è¨€-&gt;é”®ç›˜è¾“å…¥æ³•ç³»ç»Ÿ-&gt;é€‰æ‹©<strong>fcitx</strong>-&gt;ç‚¹å‡»<strong>åº”ç”¨åˆ°æ•´ä¸ªç³»ç»Ÿ</strong>ã€‚</p>
<p><img src="/images/31-è™šæ‹Ÿæœº-Ubuntu-Mac/1.fcitx.png" alt="1.fcitx"></p>
</li>
</ol>
<p>åœ¨<a href="https://srf.baidu.com/site/guanwang_linux/index.html" target="_blank" rel="noopener">ç™¾åº¦è¾“å…¥æ³•</a>ä¸‹è½½linuxç‰ˆæœ¬çš„ç™¾åº¦è¾“å…¥æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å®‰è£…</span><br><span class="line">sudo dpkg â€“i fcitx-baidupinyin.deb</span><br><span class="line"># å¸è½½</span><br><span class="line">sudo dpkg --purge remove fcitx-baidupinyin:amd64</span><br></pre></td></tr></table></figure>
<h2 id="Mac-OS-10-13"><a href="#Mac-OS-10-13" class="headerlink" title="Mac OS 10.13"></a>Mac OS 10.13</h2><p><a href="https://jingyan.baidu.com/article/ca2d939d79c9e3eb6c31ce32.html" target="_blank" rel="noopener">VMWare14 å®‰è£… Mac OS ç³»ç»Ÿ</a></p>
]]></content>
  </entry>
  <entry>
    <title>36-å¯†ç å­¦åŸç†</title>
    <url>/2020/04/15/36-%E5%AF%86%E7%A0%81%E5%AD%A6%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="åŠ å¯†ç®—æ³•"><a href="#åŠ å¯†ç®—æ³•" class="headerlink" title="åŠ å¯†ç®—æ³•"></a>åŠ å¯†ç®—æ³•</h1><h2 id="å¯¹ç§°åŠ å¯†ç®—æ³•"><a href="#å¯¹ç§°åŠ å¯†ç®—æ³•" class="headerlink" title="å¯¹ç§°åŠ å¯†ç®—æ³•"></a>å¯¹ç§°åŠ å¯†ç®—æ³•</h2><p>  åœ¨å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­ï¼ŒåŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„å¯†é’¥æ˜¯ç›¸åŒçš„ã€‚å› æ­¤ï¼Œå¯¹ç§°åŠ å¯†ç®—æ³•è¦ä¿è¯å®‰å…¨æ€§çš„è¯ï¼Œå¯†é’¥å¿…é¡»ä¿ç®¡å¥½ã€‚ä¸€æ—¦å¯†é’¥æ³„éœ²ï¼ŒåŠ å¯†ä¿¡æ¯å°±ä¼šæ³„éœ²ã€‚å°±å¦‚è°æˆ˜ç‰‡ä¸­æŠ¤é€å¯†ç æœ¬çš„<br>æ¡¥æ®µæ‰€æè¿°çš„é‚£æ ·ï¼Œä¸­å¤®å’Œåœ°æ–¹æƒ…æŠ¥äººå‘˜é€šä¿¡é‡‡ç”¨å‘ç”µæŠ¥çš„å½¢å¼ï¼Œå‘é€çš„ä¿¡æ¯æ—¶ç»è¿‡å¯†ç æœ¬åŠ å¯†çš„ã€‚åœ°æ–¹æƒ…æŠ¥äººå‘˜æ¥æ”¶åˆ°ä¸­å¤®çš„æŒ‡ä»¤åï¼Œéœ€è¦å¯†ç æœ¬è¿›è¡Œè§£å¯†ã€‚è€Œå°±åƒç”µè§†å‰§é‡Œæ‰€æ¼”<br>ç»çš„é‚£æ ·ï¼Œæ•Œäººä¼šç›‘å¬ç”µæŠ¥ï¼Œä¹Ÿèƒ½å¾—åˆ°åŠ å¯†åçš„æŒ‡ä»¤ã€‚æ­¤æ—¶ï¼Œæ•Œäººå’ŒåŒå¿—éƒ½æƒ³å¾—åˆ°å¯†ç æœ¬ï¼Œå°±äº§ç”Ÿäº†æŠ¤é€å¯†ç æœ¬çš„æƒ…èŠ‚ã€‚</p>
<h2 id="éå¯¹ç§°åŠ å¯†ç®—æ³•"><a href="#éå¯¹ç§°åŠ å¯†ç®—æ³•" class="headerlink" title="éå¯¹ç§°åŠ å¯†ç®—æ³•"></a>éå¯¹ç§°åŠ å¯†ç®—æ³•</h2><p>éå¯¹ç§°åŠ å¯†ç®—æ³•é‡‡ç”¨å…¬ç§é’¥å¯¹è¿›è¡ŒåŠ å¯†ã€‚å…¬ç§é’¥å¯¹å…·æœ‰å¦‚ä¸‹æ€§è´¨ï¼š</p>
<ul>
<li>å¯†é’¥æœ‰å…¬é’¥å’Œç§é’¥ï¼Œä¸€ä¸€å¯¹åº”ï¼Œæœ‰ä¸€æŠŠå…¬é’¥å°±å¿…ç„¶æœ‰ä¸€æŠŠä¸ä¹‹å¯¹åº”çš„ã€ç‹¬ä¸€æ— äºŒçš„ç§é’¥ï¼Œåä¹‹äº¦æˆç«‹ã€‚</li>
<li>æ‰€æœ‰çš„ï¼ˆå…¬é’¥, ç§é’¥ï¼‰å¯¹éƒ½æ˜¯ä¸åŒçš„ã€‚</li>
<li>ç”¨å…¬é’¥å¯ä»¥è§£å¼€ç§é’¥åŠ å¯†çš„ä¿¡æ¯ï¼Œåä¹‹äº¦æˆç«‹ã€‚</li>
<li>åŒæ—¶ç”Ÿæˆå…¬é’¥å’Œç§é’¥åº”è¯¥ç›¸å¯¹æ¯”è¾ƒå®¹æ˜“ï¼Œä½†æ˜¯ä»å…¬é’¥æ¨ç®—å‡ºç§é’¥ï¼Œåº”è¯¥æ˜¯å¾ˆå›°éš¾æˆ–è€…æ˜¯ä¸å¯èƒ½çš„ã€‚</li>
</ul>
<p>å…¬é’¥å¯†ç ä½“åˆ¶åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œå…¬é’¥ã€ç§é’¥ã€åŠ å¯†è§£å¯†ç®—æ³•ï¼Œå®ƒçš„åŠ å¯†è§£å¯†è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>åŠ å¯†ï¼šé€šè¿‡åŠ å¯†ç®—æ³•å’Œå…¬é’¥å¯¹å†…å®¹(æˆ–è€…è¯´æ˜æ–‡)è¿›è¡ŒåŠ å¯†ï¼Œå¾—åˆ°å¯†æ–‡ã€‚åŠ å¯†è¿‡ç¨‹éœ€è¦ç”¨åˆ°å…¬é’¥ã€‚</li>
<li>è§£å¯†ï¼šé€šè¿‡è§£å¯†ç®—æ³•å’Œç§é’¥å¯¹å¯†æ–‡è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°æ˜æ–‡ã€‚è§£å¯†è¿‡ç¨‹éœ€è¦ç”¨åˆ°è§£å¯†ç®—æ³•å’Œç§é’¥ã€‚</li>
</ul>
<p>å…¬é’¥å¯†ç ä½“åˆ¶çš„å…¬é’¥å’Œç®—æ³•éƒ½æ˜¯å…¬å¼€çš„ï¼Œç§é’¥æ˜¯ä¿å¯†çš„ã€‚å¦‚æœå›åˆ°ä¸­å¤®å’Œåœ°æ–¹æƒ…æŠ¥äººå‘˜é€šä¿¡çš„è¿‡ç¨‹ï¼Œåœ°æ–¹æƒ…æŠ¥äººå‘˜å’Œä¸­å¤®å„æœ‰ä¸€å¯¹å…¬ç§é’¥å¯¹ã€‚åœ°æ–¹æƒ…æŠ¥äººå‘˜å’Œä¸­å¤®å¯ä»¥ç›´æ¥é€šè¿‡ç”µ<br>æŠ¥çš„å½¢å¼äº¤æ¢å…¬é’¥ï¼Œå³ä½¿åœ¨è¿™è¿‡ç¨‹ä¸­å…¬é’¥è¢«æ•Œäººçªƒå–ä¹Ÿæ²¡æœ‰å…³ç³»ã€‚å¦‚æœä¸­å¤®è¦å‘åœ°æ–¹æƒ…æŠ¥äººå‘˜å‘é€æŒ‡ä»¤ï¼Œå°±ç”¨åœ°æ–¹æƒ…æŠ¥äººå‘˜çš„å…¬é’¥åŠ å¯†ï¼Œæ•Œäººå¾—åˆ°äº†åŠ å¯†ä¿¡æ¯ï¼Œä½†æ˜¯å´æ²¡æœ‰åœ°æ–¹æƒ…æŠ¥<br>äººå‘˜çš„ç§é’¥ï¼Œæ‰€ä»¥æ— æ³•è§£å¼€åŠ å¯†ä¿¡æ¯ï¼Œä»è€Œå¾—åˆ°æŒ‡ä»¤ã€‚ä¹Ÿå°±ä¸ä¼šç”¨æŠ¤é€å¯†ç æœ¬çš„é—®é¢˜äº†ã€‚</p>
<h2 id="åŠ å¯†ä¸ç­¾å"><a href="#åŠ å¯†ä¸ç­¾å" class="headerlink" title="åŠ å¯†ä¸ç­¾å"></a>åŠ å¯†ä¸ç­¾å</h2><p>åŠ å¯†æŒ‡å¯¹æŸä¸ªå†…å®¹è¿›è¡ŒåŠ å¯†ï¼ŒåŠ å¯†åçš„å†…å®¹å¯ä»¥é€šè¿‡è§£å¯†è¿›è¡Œè¿˜åŸã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒåŒå¿—Aå‘åŒå¿—Bå‘é€ä¿¡æ¯ï¼Œéœ€è¦ç”¨åŒå¿—Bçš„å…¬é’¥åŠ å¯†ï¼Œè¿™æ ·åŠ å¯†åçš„ä¿¡æ¯åªèƒ½åŒå¿—Bçš„ç§é’¥è§£å¼€ã€‚ç­¾åçš„ä¸»è¦ä½œç”¨æ˜¯è®©ä¿¡æ¯æ¥æ”¶è€…éªŒè¯ï¼Œä¿¡æ¯æ˜¯å¦è¢«ä¿®æ”¹è¿‡ã€‚ç”·ç”ŸAå‘å¥³ç”ŸAå†™ä¿¡ï¼Œå¸Œæœ›å¥³ç”ŸAå€Ÿ5000å…ƒé’±ç»™ç”·ç”ŸAï¼Œå¹¶é™„ä¸Šäº†ç”·ç”ŸAçš„æ”¯ä»˜å®è´¦å·ã€‚åœ¨æŠ•é€’è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç”·ç”ŸBæŠŠè¿™å°ä¿¡æˆªèƒ¡äº†ï¼Œå¹¶å°†è¿™å°ä¿¡ä¸­æ”¯ä»˜å®è´¦å·ä¿®æ”¹äº†ï¼Œç„¶åæŠ•é€’ç»™å¥³ç”ŸAã€‚å¦‚æœå¥³ç”ŸAæ— æ³•éªŒè¯è¿™å°ä¿¡æ˜¯å¦è¢«ä¿®æ”¹è¿‡ã€‚æ­¤æ—¶å¥³ç”ŸAå°†ä¼šæŠŠ5000å…ƒè½¬ç»™ç”·ç”ŸBï¼ŒåŒæ—¶ç”·ç”ŸAæ²¡å¾—åˆ°é’±ï¼Œåè€ŒèƒŒäº†5000å…ƒçš„é»‘é”…ã€‚å› æ­¤ï¼Œè¿™å°ä¿¡å°±éœ€è¦ç”·ç”ŸAè¿›è¡Œç­¾åï¼Œä¿è¯è¿™å°ä¿¡æ²¡æœ‰è¢«ç¯¡æ”¹è¿‡ã€‚<br>  ç­¾åå°±æ˜¯åœ¨ä¿¡çš„åé¢åŠ ä¸Šä¸€æ®µå†…å®¹ï¼Œå¯ä»¥è¯æ˜ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ã€‚è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¯¹ä¿¡çš„ä¿¡æ¯åšhashè®¡ç®—ï¼Œå¾—åˆ°ä¿¡æ¯æ‘˜è¦ã€‚hashè®¡ç®—å¯ä»¥é‡‡ç”¨å¦‚SHA256ç­‰å“ˆå¸Œç®—æ³•ã€‚å“ˆå¸Œç®—æ³•çš„ç‰¹ç‚¹ï¼šç”±åŸæ•°æ®å¯ä»¥å¾—åˆ°å”¯ä¸€å“ˆå¸Œå€¼ï¼›ç”±å“ˆå¸Œå€¼æ— æ³•æ¨å‡ºåŸæ•°æ®ã€‚</li>
<li>å°†ä¿¡æ¯æ‘˜è¦å’Œç”·ç”ŸAçš„ç§é’¥åŠ å¯†ååšæˆç­¾åï¼Œå‘å¥³ç”ŸAå†™çš„ä¿¡å°±åŒ…æ‹¬ä¿¡çš„å†…å®¹å’Œç­¾åã€‚æ­¤æ—¶ï¼Œå¥³ç”ŸAæ‹¥æœ‰ç”·ç”ŸAçš„å…¬é’¥ï¼Œå¯ä»¥è§£å¼€ç­¾åå¾—åˆ°å“ˆå¸Œå€¼1,ç„¶åæŠŠä¿¡çš„å†…å®¹é€šè¿‡SHA256<br>å‡½æ•°è®¡ç®—å“ˆå¸Œå€¼2ï¼Œå¦‚æœå“ˆå¸Œå€¼1=å“ˆå¸Œå€¼2ã€‚åˆ™è¡¨ç¤ºä¿¡çš„å†…å®¹æ²¡æœ‰è¢«ç¯¡æ”¹è¿‡ï¼›è¿™ä¸ªç­¾åæ˜¯ç”·ç”ŸAçš„ï¼›è¿™ä¸ªç­¾åæ˜¯é’ˆå¯¹è¿™æ¡è®°å½•çš„ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¿¡è¢«ç”·ç”ŸBæˆªèƒ¡äº†ã€‚æ­¤æ—¶ï¼Œç”·ç”ŸBè¦ä¿®æ”¹æ”¯ä»˜å®è´¦å·ï¼Œå°±å¿…é¡»ä¿®æ”¹ä¿¡çš„åŸå†…å®¹ï¼Œä¿¡çš„ç­¾åã€‚ä½†æ˜¯ï¼Œç­¾åç”¨çš„æ˜¯ç”·ç”ŸAçš„ç§é’¥ï¼Œç”·ç”ŸBæ˜¯æ— æ³•ä¼ªé€ ç­¾åçš„ï¼Œæ‰€ä»¥ä¿è¯äº†ä¿¡æ— æ³•ç¯¡æ”¹ã€‚<br>ä»¥ä¸Šæœºåˆ¶çœ‹èµ·æ¥ä¿è¯äº†ç”·ç”ŸAå‘é€ç»™å¥³ç”ŸAçš„ä¿¡æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œä½†æ˜¯å¥³ç”ŸAå¦‚ä½•è®¤å®šè‡ªå·±æ‰‹é‡Œçš„å…¬é’¥æ˜¯ç”·ç”ŸAçš„å…¬é’¥å‘¢ï¼Ÿå¦‚æœåœ¨ç”·ç”ŸAç»™å¥³ç”ŸAå‘é€ç”·ç”ŸAçš„å…¬é’¥åï¼Œç”·ç”ŸBå°†å¥³ç”ŸAå¤„çš„<br>ç”·ç”ŸAçš„å…¬é’¥æ›¿æ¢æˆç”·ç”ŸBçš„å…¬é’¥ã€‚åˆ™ç”·ç”ŸAå°†å€Ÿé’±ä¿¡å‘ç»™å¥³ç”ŸAï¼Œå¥³ç”ŸAç”±äºæŒæœ‰äº†â€å‡å†’çš„â€ç”·ç”ŸAçš„å…¬é’¥ï¼Œè€Œæ— æ³•ç¡®è®¤ç”·ç”ŸAçš„ä¿¡ã€‚æ­¤æ—¶ï¼Œç”·ç”ŸAçš„ä¿¡å¦‚æœè¢«ç”·ç”ŸBæ‹¿åˆ°ï¼Œç”·ç”ŸBå°†ç”·ç”ŸA<br>çš„ä¿¡çš„æ”¯ä»˜å®è´¦å·ä¿®æ”¹æˆè‡ªå·±çš„è´¦å·ï¼Œå¹¶ä¸”é€šè¿‡å“ˆå¸Œç®—æ³•é‡æ–°è®¡ç®—æ¶ˆæ¯æ‘˜è¦ï¼Œå¹¶ç”¨è‡ªå·±çš„ç§é’¥ä¸æ¶ˆæ¯æ‘˜è¦å½¢æˆæ•°å­—ç­¾åã€‚ä¹‹åï¼Œç”·ç”ŸBå°±å¯ä»¥å†’ç”¨ç”·ç”ŸAçš„åä¹‰ï¼Œè·å¾—å¥³ç”ŸAçš„é’±ï¼Œå¹¶<br>å°†é”…ç”©ç»™ç”·ç”ŸAã€‚é‚£ä¹ˆï¼Œå¦‚ä½•ä¿è¯ç”·ç”ŸAçš„å…¬é’¥å°±æ˜¯ç”·ç”ŸAçš„å…¬é’¥å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯æ•°å­—è¯ä¹¦ï¼</li>
</ul>
<p>å¦‚HTTPSä¸­ï¼Œå…¬é’¥åŠ å¯†ï¼Œç§é’¥ç­¾åã€‚åŠ å¯†æ˜¯ä¸ºäº†ä¼ è¾“ä¿¡æ¯ï¼Œç­¾åæ˜¯ä¸ºäº†éªŒè¯ã€‚</p>
<h2 id="æ•°å­—è¯ä¹¦"><a href="#æ•°å­—è¯ä¹¦" class="headerlink" title="æ•°å­—è¯ä¹¦"></a>æ•°å­—è¯ä¹¦</h2><p>ä¸€ä¸ªè¯ä¹¦åŒ…å«ä¸‹é¢çš„å…·ä½“å†…å®¹ï¼š</p>
<ul>
<li>è¯ä¹¦çš„å‘å¸ƒæœºæ„</li>
<li>è¯ä¹¦çš„æœ‰æ•ˆæœŸ</li>
<li>å…¬é’¥</li>
<li>è¯ä¹¦æ‰€æœ‰è€…</li>
<li>ç­¾åæ‰€ä½¿ç”¨çš„ç®—æ³•</li>
<li>æŒ‡çº¹ä»¥åŠæŒ‡çº¹ç®—æ³•</li>
</ul>
<p>æ•°å­—è¯ä¹¦å¯ä»¥ä¿è¯æ•°å­—è¯ä¹¦é‡Œçš„å…¬é’¥ç¡®å®æ˜¯è¿™ä¸ªè¯ä¹¦çš„æ‰€æœ‰è€…çš„ï¼Œæˆ–è€…è¯ä¹¦å¯ä»¥ç”¨æ¥ç¡®è®¤å¯¹æ–¹çš„èº«ä»½ã€‚<br>æ•°å­—è¯ä¹¦ç”±ä¸“é—¨çš„è¯ä¹¦ä¸­å¿ƒâ€”â€”CA(certificate authority)è®¤è¯é¢å‘ã€‚ç”·ç”ŸAå°†è‡ªå·±çš„å…¬é’¥æ”¾åˆ°è¯ä¹¦ä¸­å¿ƒå»è¿›è¡Œè®¤è¯ï¼Œè¯ä¹¦ä¸­å¿ƒç”¨è‡ªå·±çš„ç§é’¥ï¼Œå°†ç”·ç”ŸAçš„å…¬é’¥å’Œç›¸å…³ä¿¡æ¯åŠ å¯†ï¼Œç”Ÿ<br>æˆæ•°å­—è¯ä¹¦ã€‚ç”·ç”ŸAæ‹¿åˆ°æ•°å­—è¯ä¹¦ä¹‹åï¼Œåœ¨å†™ä¿¡ç»™å¥³ç”ŸAçš„æ—¶å€™ï¼Œå…ˆæŠŠè‡ªå·±çš„æ•°å­—è¯ä¹¦å‘é€ç»™å¥³ç”ŸAï¼Œå¥³ç”ŸAä¹Ÿåˆ°CAè·å–CAçš„å…¬é’¥ï¼Œå¯¹æ•°å­—è¯ä¹¦è§£å¯†ï¼Œæ‹¿åˆ°ç”·ç”ŸAçš„å…¬é’¥ã€‚æ­¤æ—¶ï¼Œå¥³ç”ŸA<br>å°±å¯ä»¥ç¡®å®šç”·ç”ŸAå‘è¿‡æ¥çš„å…¬é’¥å°±æ˜¯ç”·ç”ŸAçš„å…¬é’¥äº†ã€‚</p>
<h1 id="æ¯”ç‰¹å¸"><a href="#æ¯”ç‰¹å¸" class="headerlink" title="æ¯”ç‰¹å¸"></a>æ¯”ç‰¹å¸</h1><h2 id="å¯†ç å­¦åŸç†"><a href="#å¯†ç å­¦åŸç†" class="headerlink" title="å¯†ç å­¦åŸç†"></a>å¯†ç å­¦åŸç†</h2><ul>
<li><p>å“ˆå¸Œ<br>collision resistance:å“ˆå¸Œå‡½æ•°æ²¡æœ‰æ‰¾åˆ°åˆ¶é€ å“ˆå¸Œç¢°æ’çš„æ–¹æ³•ï¼Œå¦‚MD5å·²ç»çŸ¥é“å¦‚ä½•è®¤ä¸ºåˆ¶é€ å“ˆå¸Œç¢°æ’ã€‚<br>hiding:å“ˆå¸Œå‡½æ•°çš„è®¡ç®—æ˜¯å•å‘çš„ã€‚ä»xå¯ä»¥æ¨å‡ºH(x)ï¼Œä½†æ˜¯ä»H(x)æ— æ³•é«˜æ•ˆæ¨å‡ºxã€‚<br>puzzle friendly:æ ¹æ®å“ˆå¸Œå€¼çš„è¾“å…¥æ— æ³•é¢„æµ‹è¾“å‡ºèŒƒå›´<br>H(block header) &lt;= target block headeråŒ…æ‹¬ï¼šä¸Šä¸€ä¸ªå“ˆå¸Œï¼Œéšæœºæ•°nounceï¼Œæ ¹å“ˆå¸Œ<br>diffcult to solve, but easy to verify<br>æ¯”ç‰¹å¸ä¸­ç”¨çš„æ˜¯SHA-256</p>
</li>
<li><p>ç­¾å<br>å¼€æˆ·åˆ›ç«‹ä¸€ä¸ªå…¬é’¥å’Œç§é’¥å¯¹<br>å‘é€è€…ç”¨æ¥æ”¶è€…çš„å…¬é’¥åŠ å¯†ï¼Œæ¥æ”¶æ–¹ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚ç”¨çš„æ˜¯åŒä¸€ä¸ªäººçš„å…¬é’¥å’Œç§é’¥ã€‚<br>ç­¾åç”¨æ¥ä¿è¯äº¤æ˜“æ˜¯æœ¬äººå‘å‡ºçš„ï¼Œç”¨ç§é’¥ç­¾åã€‚</p>
</li>
</ul>
<h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><h3 id="åŒºå—é“¾"><a href="#åŒºå—é“¾" class="headerlink" title="åŒºå—é“¾"></a>åŒºå—é“¾</h3><h3 id="merkle-tree"><a href="#merkle-tree" class="headerlink" title="merkle tree"></a>merkle tree</h3><h2 id="åè®®"><a href="#åè®®" class="headerlink" title="åè®®"></a>åè®®</h2><h3 id="åŒèŠ±æ”»å‡»-double-spending"><a href="#åŒèŠ±æ”»å‡»-double-spending" class="headerlink" title="åŒèŠ±æ”»å‡»(double spending)"></a>åŒèŠ±æ”»å‡»(double spending)</h3><p>åŒºå—é“¾é˜²æ­¢åŒèŠ±æ”»å‡»ã€‚<br>è°æœ‰æƒåˆ©å‘è¡Œæ•°å­—è´§å¸(æŒ–çŸ¿);æ€ä¹ˆéªŒè¯äº¤æ˜“çš„æœ‰æ•ˆæ€§</p>
<p>è¾“å…¥ï¼šè¯´æ˜å¸çš„æ¥æºï¼Œå’Œæ”¯ä»˜äººçš„å…¬é’¥<br>è¾“å‡ºï¼šè¯´æ˜æ”¯ä»˜ç»™åˆ°çš„äººçš„å…¬é’¥hash(ç±»ä¼¼äºé“¶è¡Œè´¦å·)</p>
<p>block header: version;hash of previous block header(Hahs(previous block header));Merkel root hash target nounce<br>merkel root hashä¿è¯äº†äº¤æ˜“æ— æ³•è¢«ç¯¡æ”¹<br>full validating node:<br>light weighting node:æ— æ³•ç‹¬ç«‹éªŒè¯äº¤æ˜“çš„åˆæ³•æ€§<br>è½»ç»“ç‚¹ä¸å‚ä¸åŒºå—é“¾çš„æ„é€ å’Œç»´æŠ¤<br>åŒºå—é“¾æ˜¯å»ä¸­å¿ƒåŒ–çš„è´¦æœ¬ï¼Œè´¦æœ¬çš„å†…å®¹è¦å–å¾—åˆ†å¸ƒå¼çš„å…±è¯†ã€‚<br>ä¸å¯èƒ½ç»“è®ºï¼šFLP å¼‚æ­¥ç³»ç»Ÿï¼Œç½‘ç»œæ—¶å»¶æ— ä¸Šé™ï¼Œå“ªæ€•ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªæˆå‘˜å®•æœºä¹Ÿæ— æ³•è¾¾æˆå…±è¯†ã€‚<br>CAP : Consistency Availability Partition tolerance ä¸‰ä¸ªæ€§è´¨åªèƒ½æ»¡è¶³ä¸¤ä¸ª<br>Paxos<br>å…±è¯†åè®®ï¼š<br>å¥³å·«æ”»å‡»<br>åˆ†å‰æ”»å‡»:<br>åŒºå—é“¾æ˜¯å»ä¸­å¿ƒåŒ–çš„è´¦æœ¬<br>å…¨ç»“ç‚¹ï¼šUTXO(unspent transation output)æ•°æ®ç»“æ„<br>ä¸€ä¸ªäº¤æ˜“å¯ä»¥æœ‰å¤šä¸ªè¾“å…¥å’Œè¾“å‡º<br>transaction-based ledger:<br>account-based ledger:<br>åŒºå—é“¾æ˜¯ä¸å¯ç¯¡æ”¹çš„è´¦æœ¬</p>
<p>10åˆ†é’Ÿå‡ºå— 6ä¸ªç¡®è®¤å—<br>åº”ç”¨å±‚ åŒºå—é“¾<br>ç½‘ç»œå±‚ P2Pç½‘ç»œ ç»“ç‚¹TCPé€šä¿¡<br>51% æ”»å‡»:åˆ†å‰æ”»å‡» boycott ä¸å¯èƒ½ç›—å¸<br>çŸ¿æ±  </p>
<p>ä»¥å¤ªåŠï¼šaccount-based ledger<br>replay attack nounce(sequence number)<br>externally owned account ï¼š balance nounce<br>smart contract account ä¸èƒ½ä¸»åŠ¨å‘èµ·ä¸€ä¸ªäº¤æ˜“ code storage<br>çŠ¶æ€æ ‘<br>äº¤æ˜“æ ‘<br>trie:<br>ä¼˜ç‚¹ï¼š<br>  ä¿è¯äº†æ•°æ®æ‰“ä¹±é¡ºåºæ„æˆåŒä¸€æ£µæ ‘<br>  æ›´æ–°æ“ä½œçš„å±€éƒ¨æ€§<br>ç¼ºç‚¹ï¼š<br>  æ ‘çš„é«˜åº¦å¤ªé«˜ å†…å­˜è®¿é—®æ¬¡æ•°å¤ªå¤š<br>Patricia tree: è·¯å¾„å‹ç¼©çš„å‰ç¼€æ ‘<br>  è®¿é—®å†…å­˜çš„æ¬¡æ•°å‡å°‘</p>
<p>MPT:Merkle Patricia tree<br>  é˜²æ­¢ç¯¡æ”¹<br>  å¯ä»¥è¯æ˜ no membership</p>
<p>Modified MPT<br>Merkle tree<br>binary tree</p>
<p>RLP:Recursive Length Prefix é€’å½’é•¿åº¦å‰ç¼€ç¼–ç <br>bloom filterï¼šfalse positive </p>
<p>æ¯”è¾ƒç¨€ç–çš„æ—¶å€™æ—¶å€™è·¯å¾„å‹ç¼©æ•ˆæœæ¯”è¾ƒå¥½</p>
<p>åœ°å€è¡¨ç¤ºæˆ40ä¸ª16è¿›åˆ¶çš„æ•°(160ä½) ç»è¿‡å…¬é’¥å–å“ˆå¸Œè½¬æ¢å¾—æ¥çš„<br>branching factor </p>
<p>genesis block åˆ›ä¸–çºªå—<br>mining centralization<br>centralization bias<br>GHOSTåè®®ï¼šuncle block<br>æœ€å¤šåˆå¹¶ä¸¤ä¸ªuncle block<br>7ä»£ä»¥å†…çš„å”å”åŒºå—æ‰æœ‰åˆå—å¥–åŠ±:è§£å†³ä¸´æ—¶æ€§åˆ†å‰,æœ€é•¿åˆæ³•é“¾<br>è½¯åˆ†å‰å’Œç¡¬åˆ†å‰<br>block reward<br>gas fee:uncle block can not get<br>åªæœ‰åˆ†å‰åç¬¬ä¸€ä¸ªåŒºå—åŠæ—¶åˆå¹¶<br>Block chain is secured by mining<br>bug bounty<br>ASIC(ç®—åŠ›å¼º,å†…å­˜è®¿é—®æ€§èƒ½ä¸Šå·®è·ä¸å¤§) resistanceï¼šmemory hard mining puzzle<br>LiteCoin<br>time-memory trade off<br>å†·å¯åŠ¨<br>16M(è½»ç»“ç‚¹) cache 1G(çŸ¿å·¥) dataset ä¸æ–­æ‰©å±•<br>ethashç®—æ³•<br>pre-mining </p>
<p>BIP: BitCoin Improvement proposal<br>EIP</p>
<p>Proof of stake:é—­ç¯ æ— æ³•ç›´æ¥å¯¹è´§å¸ç³»ç»Ÿé€ æˆæ”»å‡»<br>Proof of work: é€šè¿‡è´­ä¹°å¤§é‡ç®—åŠ›è®¾å¤‡å¯ä»¥å¯¹åŠ å¯†è´§å¸é€ æˆ51%æ”»å‡»<br>Proof of Deposit:<br>DPOS: Delegated Proof of Stake</p>
<p>nothing at stake:</p>
<p>ä»¥å¤ªåŠæƒç›Šè¯æ˜åè®®ï¼šCasper the Friendly Finally Gadget(FFG)<br>Validator:<br>epoch<br>Prepare message:<br>Commit Message:</p>
<p>å¤–éƒ¨è´¦æˆ·æ‰å¯ä»¥å‘å¸ƒä¸€ä¸ªäº¤æ˜“,æ²¡æœ‰ä»£ç <br>åˆçº¦è´¦æˆ·æ‰æœ‰ä»£ç </p>
<h1 id="å“ˆå¸Œç®—æ³•"><a href="#å“ˆå¸Œç®—æ³•" class="headerlink" title="å“ˆå¸Œç®—æ³•"></a>å“ˆå¸Œç®—æ³•</h1><h2 id="SHA256"><a href="#SHA256" class="headerlink" title="SHA256"></a>SHA256</h2><p>SHA256æ˜¯ç›®å‰å¸¸ç”¨çš„å“ˆå¸Œç®—æ³•ã€‚å¯¹äºä»»æ„é•¿åº¦çš„æ¶ˆæ¯ï¼ŒSHA256ä¼šäº§ç”Ÿä¸€ä¸ª256bité•¿çš„å“ˆå¸Œå€¼ï¼Œç§°ä½œæ¶ˆæ¯æ‘˜è¦(digest)ã€‚åªè¦åŸå§‹è®°å½•ä¸å˜ï¼ŒSHA256çš„å“ˆå¸Œå€¼ä¸å˜ã€‚å¦‚æœåŸå§‹è®°å½•å‘ç”Ÿå˜åŒ–ï¼Œå“ˆå¸Œå€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚å®é™…ä¸Šï¼Œå“ˆå¸Œç®—æ³•è™½ç„¶å­˜åœ¨å“ˆå¸Œç¢°æ’ï¼Œä½†æ˜¯åº”ç”¨ä¸­æ²¡æœ‰åŠæ³•ç¯¡æ”¹å†…å®¹è€Œä¸è¢«æ£€æµ‹å‡ºæ¥ã€‚<strong>å“ˆå¸Œç¢°æ’æ˜¯æŒ‡ï¼Œä¸¤æ¡ä¸åŒçš„åŸå§‹è®°å½•ï¼Œç»è¿‡SHA256ç®—æ³•å¯ä»¥å¾—åˆ°ç›¸åŒçš„å“ˆå¸Œå€¼</strong>ã€‚æ•°å­¦è¡¨ç¤ºï¼šSHA256(â€œxâ€)=H(x)ï¼›SHA256(â€œyâ€)=H(y)ï¼›H(x)=H(y)ï¼Œåˆ™ä¸ºå“ˆå¸Œç¢°æ’ã€‚ç”±äºå“ˆå¸Œç®—æ³•çš„è¾“å…¥ç©ºé—´æ˜¯æ— é™å¤§çš„ï¼Œå¯¹äºSHA256ç®—æ³•æ¥è¯´ï¼Œè¾“å‡ºçš„å“ˆå¸Œå€¼ä¸º256ä½ï¼Œæ¯ä¸€ä½çš„å–å€¼ä¸º0æˆ–1ï¼Œä¹Ÿå°±æ˜¯è¾“å‡ºç©ºé—´ä¸º2^256ç§å¯èƒ½ã€‚ç”±é¸½ç¬¼åŸç†ï¼Œå¯çŸ¥å¿…ç„¶æœ‰ä¸¤ä¸ªè¾“å…¥æ˜ å°„åˆ°åŒä¸€ä¸ªè¾“å‡ºï¼Œå³å“ˆå¸Œç¢°æ’æ˜¯å¿…ç„¶å­˜åœ¨çš„ã€‚ä½†æ˜¯ï¼Œå®é™…ä¸­ï¼Œæ²¡æœ‰ä»€ä¹ˆé«˜æ•ˆçš„æ–¹æ³•ï¼Œäººä¸ºçš„åˆ¶é€ å“ˆå¸Œç¢°æ’ã€‚ç»™å®šä¸€ä¸ªxï¼Œåªèƒ½é€šè¿‡æš´åŠ›æ±‚è§£(éå†)çš„æ–¹å¼æ‰¾åˆ°ä¸€ä¸ªyï¼Œä½¿å¾—H(x)=H(y)ã€‚å› æ­¤ï¼Œå®é™…ä¸­ä¸ºäº†ä¿è¯ä¼ è¾“æ¶ˆæ¯æ²¡æœ‰è¢«ç¯¡æ”¹ï¼Œé€šå¸¸æ˜¯å¯¹å“ˆå¸Œå€¼è¿›è¡ŒéªŒè¯ã€‚å“ˆå¸Œå€¼å’Œç§é’¥ç»“åˆï¼Œå°±å½¢æˆäº†ç­¾åï¼Œä»è€Œä¿è¯äº†å†…å®¹ä¸ä¼šè¢«ç¯¡æ”¹ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><a href="http://www.ruanyifeng.com/blog/2006/12/notes_on_cryptography.html" target="_blank" rel="noopener">å¯†ç å­¦ç¬”è®°</a><br><a href="http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html" target="_blank" rel="noopener">æ•°å­—ç­¾åæ˜¯ä»€ä¹ˆï¼Ÿ</a><br><a href="https://www.cnblogs.com/JeffreySun/archive/2010/06/24/1627247.html" target="_blank" rel="noopener">æ•°å­—è¯ä¹¦åŸç†</a><br><a href="https://blog.csdn.net/u011583927/article/details/80905740" target="_blank" rel="noopener">SHA256ç®—æ³•åŸç†è¯¦è§£</a><br><a href="https://blog.csdn.net/dbs1215/article/details/48953589?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">å¸¦ä½ å½»åº•ç†è§£RSAç®—æ³•åŸç†</a><br><a href="https://blog.csdn.net/gulang03/article/details/81176133?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">RSA åŠ å¯†ç®—æ³•åŸç†ç®€è¿°</a>  </p>
]]></content>
  </entry>
  <entry>
    <title>33-stlæºç å‰–æ(ä¸€)</title>
    <url>/2020/03/05/33-stl%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90(%E4%B8%80)/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="STLæ¨¡æ¿"><a href="#STLæ¨¡æ¿" class="headerlink" title="STLæ¨¡æ¿"></a>STLæ¨¡æ¿</h1><p>STL(Standard Template Libray)æ ‡å‡†æ¨¡æ¿åº“æ˜¯æƒ æ™®å®éªŒå®¤å¼€å‘çš„ä¸€ç³»åˆ—è½¯ä»¶çš„ç»Ÿç§°ã€‚STLä»å¹¿ä¹‰ä¸Šå°†åˆ†ä¸ºä¸‰ç±»ï¼šalgorithm(ç®—æ³•)ã€container(å®¹å™¨)å’Œiterator(è¿­ä»£å™¨)ã€‚å®¹å™¨å’Œç®—æ³•é€šè¿‡è¿­ä»£å™¨å¯ä»¥è¿›è¡Œæ— ç¼è¡”æ¥ã€‚åœ¨C++æ ‡å‡†ä¸­ï¼ŒSTLè¢«ç»„ç»‡ä¸ºä¸‹é¢çš„13ä¸ªå¤´æ–‡ä»¶ï¼š<algorithm>ã€<deque>ã€<functional>ã€<iterator>ã€<vector>ã€<list>ã€<map>ã€<memory>ã€<numeric>ã€<queue>ã€<set>ã€<stack> å’Œ<utility>ã€‚</p>
<h2 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h2><p><font color="red">å®¹å™¨æ˜¯ç”¨äºå­˜æ”¾æ•°æ®çš„ç±»æ¨¡æ¿</font>ã€‚å¯å˜é•¿æ•°ç»„ã€é“¾è¡¨ã€å¹³è¡¡äºŒå‰æ ‘ç­‰æ•°æ®ç»“æ„åœ¨STLä¸­éƒ½è¢«å®ç°ä¸ºå®¹å™¨ã€‚ç¨‹åºå‘˜ä½¿ç”¨å®¹å™¨æ—¶ï¼Œå³å°†å®¹å™¨ç±»æ¨¡æ¿å®ä¾‹åŒ–ä¸ºå®¹å™¨ç±»ï¼Œä¼šæŒ‡æ˜å®¹å™¨ä¸­å­˜æ”¾çš„å…ƒç´ æ˜¯ä»€ä¹ˆç±»å‹ã€‚å®¹å™¨ä¸­å¯ä»¥å­˜æ”¾åŸºæœ¬ç±»å‹ï¼Œä¹Ÿå¯ä»¥å­˜æ”¾å¯¹è±¡ã€‚å¯¹è±¡æˆ–åŸºæœ¬ç±»å‹çš„å˜é‡è¢«æ’å…¥å®¹å™¨ä¸­ï¼Œå®é™…æ’å…¥çš„æ˜¯å¯¹è±¡æˆ–å˜é‡çš„ä¸€ä¸ªå¤åˆ¶å“ã€‚<br>STLä¸­è®¸å¤šç®—æ³•(å³å‡½æ•°æ¨¡æ¿)ï¼Œå¦‚æ’åºã€æŸ¥æ‰¾ç­‰ç®—æ³•ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šå¯¹å®¹å™¨ä¸­çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚è¿™äº›ç®—æ³•åœ¨æ¯”è¾ƒå…ƒç´ æ˜¯å¦ç›¸ç­‰æ—¶é€šå¸¸ç”¨è¿ç®—ç¬¦è¿›è¡Œï¼Œæ¯”è¾ƒå¤§å°é€šå¸¸ç”¨ &lt; è¿ç®—ç¬¦è¿›è¡Œã€‚å› æ­¤ï¼Œè¢«æ”¾å…¥å®¹å™¨çš„å¯¹è±¡æ‰€å±çš„ç±»æœ€å¥½é‡è½½ == å’Œ &lt; è¿ç®—ç¬¦ï¼Œä»¥ä½¿å¾— ä¸¤ä¸ªå¯¹è±¡ç”¨ == å’Œ &lt; è¿›è¡Œæ¯”è¾ƒæ˜¯æœ‰å®šä¹‰çš„ã€‚</p>
<h3 id="é¡ºåºå®¹å™¨"><a href="#é¡ºåºå®¹å™¨" class="headerlink" title="é¡ºåºå®¹å™¨"></a>é¡ºåºå®¹å™¨</h3><p>é¡ºåºå®¹å™¨æœ‰ä»¥ä¸‹ä¸‰ç§ï¼šå¯å˜é•¿åŠ¨æ€æ•°ç»„ vectorã€åŒç«¯é˜Ÿåˆ— dequeã€åŒå‘é“¾è¡¨ listã€‚</p>
<p>å®ƒä»¬ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºé¡ºåºå®¹å™¨ï¼Œæ˜¯å› ä¸ºå…ƒç´ åœ¨å®¹å™¨ä¸­çš„ä½ç½®åŒå…ƒç´ çš„å€¼æ— å…³ï¼Œå³å®¹å™¨ä¸æ˜¯æ’åºçš„ã€‚å°†å…ƒç´ æ’å…¥å®¹å™¨æ—¶ï¼ŒæŒ‡å®šåœ¨ä»€ä¹ˆä½ç½®ï¼ˆå°¾éƒ¨ã€å¤´éƒ¨æˆ–ä¸­é—´æŸå¤„ï¼‰æ’å…¥ï¼Œå…ƒç´ å°±ä¼šä½äºä»€ä¹ˆä½ç½®ã€‚</p>
<ul>
<li>teacher.h</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Teacher   &#x2F;&#x2F; Teacheræ˜¯ç±» ç±»å‹</span><br><span class="line">&#123;</span><br><span class="line">    friend ostream&amp; operator&lt;&lt;(ostream&amp; out, const Teacher&amp; obj);</span><br><span class="line">public:</span><br><span class="line">	Teacher(string name, int age, const char* p &#x3D; NULL);</span><br><span class="line">	Teacher(const Teacher&amp; obj);</span><br><span class="line">	Teacher&amp; operator&#x3D;(Teacher&amp; obj);</span><br><span class="line">	~Teacher();</span><br><span class="line"></span><br><span class="line">	char* getContent();</span><br><span class="line">	void setContent(const char* p);</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">	int age;</span><br><span class="line">	string name;</span><br><span class="line">	char* pContent;</span><br><span class="line">	int clen;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>teacher.cpp</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &quot;teacher.h&quot;</span><br><span class="line"></span><br><span class="line">Teacher::Teacher()</span><br><span class="line">&#123;</span><br><span class="line">    this-&gt;name &#x3D; &quot;&quot;;</span><br><span class="line">    this-&gt;age &#x3D; -1;</span><br><span class="line">    this-&gt;pContent &#x3D; NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å®šä¹‰ä¸­ä¸è®¾ç½®é»˜è®¤å‚æ•°</span><br><span class="line">Teacher::Teacher(string name, int age, const char* p)</span><br><span class="line">&#123;</span><br><span class="line">	this-&gt;name &#x3D; name;</span><br><span class="line">	this-&gt;age &#x3D; age;</span><br><span class="line"></span><br><span class="line">    if (p &#x3D;&#x3D; NULL)</span><br><span class="line">		this-&gt;pContent &#x3D; NULL;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		clen &#x3D; strlen(p);</span><br><span class="line">		&#x2F;&#x2F; å †ä¸­ç”³è¯·ç©ºé—´</span><br><span class="line">		this-&gt;pContent &#x3D; new char[clen + 1];</span><br><span class="line">		strcpy(this-&gt;pContent, p);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Teacher::Teacher(const Teacher&amp; obj)</span><br><span class="line">&#123;</span><br><span class="line">	this-&gt;name &#x3D; obj.name;</span><br><span class="line">	this-&gt;age &#x3D; obj.age;</span><br><span class="line"></span><br><span class="line">	if (obj.pContent &#x3D;&#x3D; NULL)</span><br><span class="line">		this-&gt;pContent &#x3D; NULL;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		clen &#x3D; strlen(obj.pContent);</span><br><span class="line">		&#x2F;&#x2F; å †ä¸­ç”³è¯·ç©ºé—´</span><br><span class="line">		this-&gt;pContent &#x3D; new char[clen + 1];</span><br><span class="line">		strcpy(this-&gt;pContent, obj.pContent);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;	cout &lt;&lt; &quot;Teacher:&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;çš„Teacher(const Teacher&amp; obj)æ‹·è´æ„é€ å‡½æ•°&quot; &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Teacher&amp; Teacher::operator&#x3D;(Teacher&amp; obj)</span><br><span class="line">&#123;</span><br><span class="line">	this-&gt;name &#x3D; obj.name;</span><br><span class="line">	this-&gt;age &#x3D; obj.age;</span><br><span class="line"></span><br><span class="line">    if (obj.pContent &#x3D;&#x3D; NULL)</span><br><span class="line">		this-&gt;pContent &#x3D; NULL;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		clen &#x3D; strlen(obj.pContent);</span><br><span class="line">		&#x2F;&#x2F; å †ä¸­ç”³è¯·ç©ºé—´</span><br><span class="line">		this-&gt;pContent &#x3D; new char[clen + 1];</span><br><span class="line">		strcpy(this-&gt;pContent, obj.pContent);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Teacher::~Teacher()</span><br><span class="line">&#123;</span><br><span class="line">    if(this-&gt;pContent !&#x3D; NULL)</span><br><span class="line">        delete[] this-&gt;pContent;    &#x2F;&#x2F; ææ„åŠ¨æ€åˆ†é…çš„å†…å­˜ç©ºé—´</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">char* Teacher::getContent()</span><br><span class="line">&#123;</span><br><span class="line">    return this-&gt;pContent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Teacher::setContent(const char* p)</span><br><span class="line">&#123;</span><br><span class="line">    if (p &#x3D;&#x3D; NULL)</span><br><span class="line">		this-&gt;pContent &#x3D; NULL;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		clen &#x3D; strlen(p);</span><br><span class="line">		&#x2F;&#x2F; å †ä¸­ç”³è¯·ç©ºé—´</span><br><span class="line">		this-&gt;pContent &#x3D; new char[clen + 1];</span><br><span class="line">		strcpy(this-&gt;pContent, p);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ostream&amp; operator&lt;&lt;(ostream&amp; out, const Teacher&amp; obj)</span><br><span class="line">&#123;</span><br><span class="line">    out &lt;&lt; &quot;name&#x3D;&quot; &lt;&lt; obj.name &lt;&lt; &quot;,age&#x3D;&quot; &lt;&lt; obj.age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>myVector.hpp</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &quot;teacher.h&quot;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å®¹å™¨æ¨¡æ¿</span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">class MyVector</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    MyVector(int len&#x3D;2)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;len &#x3D; len;    &#x2F;&#x2F; å¼€è¾Ÿé»˜è®¤ç©ºé—´</span><br><span class="line">        this-&gt;pSpace &#x3D; new T[len];</span><br><span class="line">        count &#x3D; -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    MyVector(const MyVector&amp; obj)</span><br><span class="line">    &#123;</span><br><span class="line">        this-&gt;len &#x3D; obj.len;</span><br><span class="line">        this-&gt;pSpace &#x3D; new T[this-&gt;len];</span><br><span class="line">        this-&gt;count &#x3D; obj.count;</span><br><span class="line"></span><br><span class="line">        for(int i&#x3D;0; i&lt;obj.count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            this-&gt;pSpace[i] &#x3D; obj.pSpace[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void pushBack(T t)</span><br><span class="line">    &#123;</span><br><span class="line">        count++;</span><br><span class="line"></span><br><span class="line">        if(count &lt; this-&gt;len-1)</span><br><span class="line">        &#123;</span><br><span class="line">            pSpace[count] &#x3D; t;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            this-&gt;len +&#x3D; 10;</span><br><span class="line">            T* tmp &#x3D; new T[this-&gt;len];</span><br><span class="line"></span><br><span class="line">            for(int i&#x3D;0; i&lt;&#x3D;count; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                tmp[i] &#x3D; pSpace[i];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            delete[] pSpace;</span><br><span class="line">            pSpace &#x3D; tmp;</span><br><span class="line"></span><br><span class="line">            pSpace[count] &#x3D; t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~MyVector()</span><br><span class="line">    &#123;</span><br><span class="line">        if(pSpace !&#x3D; NULL)</span><br><span class="line">        &#123;</span><br><span class="line">            delete[] pSpace;</span><br><span class="line">            pSpace &#x3D; NULL;</span><br><span class="line">            len &#x3D; 0;</span><br><span class="line">            count &#x3D; -1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    T&amp; operator[](int index)</span><br><span class="line">    &#123;</span><br><span class="line">        return pSpace[index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    MyVector&amp; operator&#x3D;(const MyVector&amp; obj)</span><br><span class="line">    &#123;</span><br><span class="line">        if(pSpace !&#x3D; NULL)</span><br><span class="line">        &#123;</span><br><span class="line">            delete[] pSpace;</span><br><span class="line">            pSpace &#x3D; NULL;</span><br><span class="line">            len &#x3D; 0;</span><br><span class="line">            count &#x3D; -1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        len &#x3D; obj.len;</span><br><span class="line">        pSpace &#x3D; new T[len];</span><br><span class="line"></span><br><span class="line">        for(int i&#x3D;0; i&lt;len; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            pSpace[i] &#x3D; obj[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return *this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int size()</span><br><span class="line">    &#123;</span><br><span class="line">        return count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int print()</span><br><span class="line">    &#123;</span><br><span class="line">        for(int i&#x3D;0; i&lt;&#x3D;count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; pSpace[i] &lt;&lt; endl;  &#x2F;&#x2F; ç±»å¯¹è±¡éœ€è¦é‡è½½&lt;&lt;è¿ç®—ç¬¦</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    T* pSpace;</span><br><span class="line">    int len;</span><br><span class="line">    int count;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; å®¹å™¨ç±»</span><br><span class="line">    MyVector&lt;int&gt; intVector;</span><br><span class="line">    intVector.pushBack(0);</span><br><span class="line">    intVector.pushBack(1);</span><br><span class="line">    intVector.pushBack(2);</span><br><span class="line">    intVector.pushBack(3);</span><br><span class="line"></span><br><span class="line">    intVector.print();</span><br><span class="line"></span><br><span class="line">    MyVector&lt;Teacher&gt; classVector;</span><br><span class="line">    Teacher t1(&quot;lucy&quot;, 25);</span><br><span class="line">    Teacher t2(&quot;bob&quot;, 26);</span><br><span class="line">    Teacher t3(&quot;selena&quot;, 27);</span><br><span class="line">    Teacher t4(&quot;tomas&quot;, 28);</span><br><span class="line"></span><br><span class="line">    classVector.pushBack(t1);</span><br><span class="line">    classVector.pushBack(t2);</span><br><span class="line">    classVector.pushBack(t3);</span><br><span class="line">    classVector.pushBack(t4);</span><br><span class="line">    classVector.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…³è”å¼å®¹å™¨"><a href="#å…³è”å¼å®¹å™¨" class="headerlink" title="å…³è”å¼å®¹å™¨"></a>å…³è”å¼å®¹å™¨</h3><p>å…³è”å®¹å™¨æœ‰ä»¥ä¸‹å››ç§ï¼šsetã€multisetã€mapã€multimapã€‚å…³è”å®¹å™¨å†…çš„å…ƒç´ æ˜¯æ’åºçš„ã€‚æ’å…¥å…ƒç´ æ—¶ï¼Œå®¹å™¨ä¼šæŒ‰ä¸€å®šçš„æ’åºè§„åˆ™å°†å…ƒç´ æ”¾åˆ°é€‚å½“çš„ä½ç½®ä¸Šï¼Œå› æ­¤æ’å…¥å…ƒç´ æ—¶ä¸èƒ½æŒ‡å®šä½ç½®ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå…³è”å®¹å™¨ä¸­çš„å…ƒç´ æ˜¯ä»å°åˆ°å¤§æ’åºï¼ˆæˆ–æŒ‰å…³é”®å­—ä»å°åˆ°å¤§æ’åºï¼‰çš„ï¼Œè€Œä¸”ç”¨&lt;è¿ç®—ç¬¦æ¯”è¾ƒå…ƒç´ æˆ–å…³é”®å­—å¤§å°ã€‚å› ä¸ºæ˜¯æ’å¥½åºçš„ï¼Œæ‰€ä»¥å…³è”å®¹å™¨åœ¨æŸ¥æ‰¾æ—¶å…·æœ‰éå¸¸å¥½çš„æ€§èƒ½ã€‚</p>
<p>é™¤äº†ä»¥ä¸Šä¸¤ç±»å®¹å™¨å¤–ï¼ŒSTL è¿˜åœ¨ä¸¤ç±»å®¹å™¨çš„åŸºç¡€ä¸Šå±è”½ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œçªå‡ºæˆ–å¢åŠ å¦ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œå®ç°äº†ä¸‰ç§å®¹å™¨é€‚é…å™¨ï¼šæ ˆ stackã€é˜Ÿåˆ— queueã€ä¼˜å…ˆçº§é˜Ÿåˆ— priority_queueã€‚</p>
<p>å®¹å™¨éƒ½æ˜¯ç±»æ¨¡æ¿ã€‚å®ƒä»¬å®ä¾‹åŒ–åå°±æˆä¸ºå®¹å™¨ç±»ã€‚ç”¨å®¹å™¨ç±»å®šä¹‰çš„å¯¹è±¡ç§°ä¸ºå®¹å™¨å¯¹è±¡ã€‚</p>
<p>æ‰€æœ‰å®¹å™¨éƒ½æœ‰ä»¥ä¸‹ä¸¤ä¸ªæˆå‘˜å‡½æ•°ï¼š</p>
<ul>
<li>int size()ï¼šè¿”å›å®¹å™¨å¯¹è±¡ä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚</li>
<li>bool empty()ï¼šåˆ¤æ–­å®¹å™¨å¯¹è±¡æ˜¯å¦ä¸ºç©ºã€‚</li>
</ul>
<p>é¡ºåºå®¹å™¨å’Œå…³è”å®¹å™¨è¿˜æœ‰ä»¥ä¸‹æˆå‘˜å‡½æ•°ï¼š</p>
<ul>
<li>begin()ï¼šè¿”å›æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li>
<li>end()ï¼šè¿”å›æŒ‡å‘å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ åé¢çš„ä½ç½®çš„è¿­ä»£å™¨ã€‚</li>
<li>rbegin()ï¼šè¿”å›å®¹å™¨ä¸­å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ çš„åå‘è¿­ä»£å™¨ã€‚</li>
<li>rend()ï¼šè¿”å›å®¹å™¨ä¸­å€’æ•°æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åçš„åå‘è¿­ä»£å™¨ã€‚</li>
<li>erase(â€¦)ï¼šä»å®¹å™¨ä¸­åˆ é™¤ä¸€ä¸ªæˆ–å‡ ä¸ªå…ƒç´ ã€‚è¯¥å‡½æ•°å‚æ•°è¾ƒå¤æ‚ï¼Œæ­¤å¤„çœç•¥ã€‚</li>
<li>clear()ï¼šä»å®¹å™¨ä¸­åˆ é™¤æ‰€æœ‰å…ƒç´ ã€‚</li>
</ul>
<p>å¦‚æœä¸€ä¸ªå®¹å™¨æ˜¯ç©ºçš„ï¼Œåˆ™ begin() å’Œ end() çš„è¿”å›å€¼ç›¸ç­‰ï¼Œrbegin() å’Œ rend() çš„è¿”å›å€¼ä¹Ÿç›¸ç­‰ã€‚</p>
<p>é¡ºåºå®¹å™¨è¿˜æœ‰ä»¥ä¸‹å¸¸ç”¨æˆå‘˜å‡½æ•°ï¼š</p>
<ul>
<li>front()ï¼šè¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ã€‚</li>
<li>back()ï¼šè¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ã€‚</li>
<li>push_back()ï¼šåœ¨å®¹å™¨æœ«å°¾å¢åŠ æ–°å…ƒç´ ã€‚</li>
<li>pop_back()ï¼šåˆ é™¤å®¹å™¨æœ«å°¾çš„å…ƒç´ ã€‚</li>
<li>insert(â€¦)ï¼šæ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚è¯¥å‡½æ•°å‚æ•°è¾ƒå¤æ‚ï¼Œæ­¤å¤„çœç•¥ã€‚</li>
</ul>
<h2 id="è¿­ä»£å™¨"><a href="#è¿­ä»£å™¨" class="headerlink" title="è¿­ä»£å™¨"></a>è¿­ä»£å™¨</h2><p>è¿­ä»£å™¨åœ¨STLä¸­ç”¨æ¥å°†ç®—æ³•å’Œå®¹å™¨è”ç³»èµ·æ¥ï¼Œå‡ ä¹STLæä¾›çš„æ‰€æœ‰ç®—æ³•éƒ½æ˜¯é€šè¿‡è¿­ä»£å™¨å­˜å–å…ƒç´ åºåˆ—è¿›è¡Œå·¥ä½œçš„ï¼Œ<strong>æ¯ä¸€ä¸ªå®¹å™¨éƒ½å®šä¹‰äº†å…¶æœ¬èº«æ‰€ä¸“æœ‰çš„è¿­ä»£å™¨</strong>ï¼Œç”¨ä»¥å­˜å–å®¹å™¨ä¸­çš„å…ƒç´ ã€‚</p>
<h1 id="å®¹å™¨æ¨¡æ¿"><a href="#å®¹å™¨æ¨¡æ¿" class="headerlink" title="å®¹å™¨æ¨¡æ¿"></a>å®¹å™¨æ¨¡æ¿</h1><h2 id="string"><a href="#string" class="headerlink" title="string"></a>string</h2><p>Cè¯­è¨€ï¼šå­—ç¬¦ä¸²çš„ç»“å°¾å¸¦æœ‰â€™\0â€™ï¼Œstrlen(s)çš„ç»“æœä¸åŒ…æ‹¬â€™\0â€™ï¼Œsizeof(s)çš„ç»“æœåŒ…æ‹¬â€™\0â€™<br>C++ï¼šstringï¼Œs.size()çš„ç»“æœä¸åŒ…æ‹¬â€™\sâ€™ã€‚sizeof(s)æ˜¯stringç±»å‹çš„é»˜è®¤åˆ†é…çš„å†…å­˜ç©ºé—´ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># é»˜è®¤æ„é€ å‡½æ•°ï¼š</span><br><span class="line">string();	   </span><br><span class="line"># æ‹·è´æ„é€ å‡½æ•°ï¼š</span><br><span class="line">string(const string &amp;str);	&#x2F;&#x2F; æ„é€ ä¸€ä¸ªä¸strä¸€æ ·çš„string</span><br><span class="line"># å¸¦å‚æ•°çš„æ„é€ å‡½æ•°</span><br><span class="line">string(const char *s);      &#x2F;&#x2F; ç”¨å­—ç¬¦ä¸²såˆå§‹åŒ–</span><br><span class="line">string(int n,char c);       &#x2F;&#x2F; ç”¨nä¸ªå­—ç¬¦cåˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line">const char &amp;operator[] (int n) const;</span><br><span class="line">const char &amp;at(int n) const;</span><br><span class="line">char &amp;operator[] (int n);</span><br><span class="line">char &amp;at(int n);</span><br><span class="line"></span><br><span class="line">const char *c_str() const;   &#x2F;&#x2F; è¿”å›ä¸€ä¸ªä»¥&#39;\0&#39;ç»“å°¾çš„å­—ç¬¦ä¸²çš„é¦–åœ°å€</span><br><span class="line">int copy(char *s, int n, int pos&#x3D;0) const;     &#x2F;&#x2F; æŠŠå½“å‰ä¸²ä¸­ä»¥poså¼€å§‹çš„nä¸ªå­—ç¬¦æ‹·è´åˆ°ä»¥sä¸ºèµ·å§‹çš„å­—ç¬¦æ•°ç»„ä¸­ï¼Œè¿”å›å®é™…çš„æ‹·è´çš„æ•°ç›®</span><br><span class="line">int length() const;     &#x2F;&#x2F; è¿”å›å½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚é•¿åº¦ä¸åŒ…æ‹¬å­—ç¬¦ä¸²ç»“å°¾çš„&#39;\0&#39;ã€‚</span><br><span class="line">bool empty() const;     &#x2F;&#x2F; å½“å‰å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º</span><br><span class="line"></span><br><span class="line">string &amp;operator&#x3D;(const string &amp;s); &#x2F;&#x2F; æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</span><br><span class="line">string &amp;assign(const char *s);      &#x2F;&#x2F; æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</span><br><span class="line">string &amp;assign(const char *s, int n); &#x2F;&#x2F; æŠŠå­—ç¬¦ä¸²sçš„å‰nä¸ªå­—ç¬¦èµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</span><br><span class="line">string &amp;assign(const string &amp;s);    &#x2F;&#x2F; æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰å­—ç¬¦ä¸²</span><br><span class="line">string &amp;assign(int n, char c);       &#x2F;&#x2F; ç”¨nä¸ªå­—ç¬¦cèµ‹ç»™å½“å‰å­—ç¬¦ä¸²</span><br><span class="line">string &amp;assign(const string &amp;s,int start, int n);  &#x2F;&#x2F; æŠŠå­—ç¬¦ä¸²sä¸­ä»startå¼€å§‹çš„nä¸ªå­—ç¬¦èµ‹ç»™å½“å‰å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">string &amp;operator+&#x3D;(const string &amp;s);    &#x2F;&#x2F; æŠŠå­—ç¬¦ä¸²sè¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</span><br><span class="line">string &amp;operator+&#x3D;(const char *s);      &#x2F;&#x2F; æŠŠå­—ç¬¦ä¸²sè¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</span><br><span class="line">string &amp;append(const char *s);          &#x2F;&#x2F; æŠŠå­—ç¬¦ä¸²sè¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</span><br><span class="line">string &amp;append(const char *s,int n);    &#x2F;&#x2F; æŠŠå­—ç¬¦ä¸²sçš„å‰nä¸ªå­—ç¬¦è¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</span><br><span class="line">string &amp;append(const string &amp;s);        &#x2F;&#x2F; åŒoperator+&#x3D;()</span><br><span class="line">string &amp;append(const string &amp;s,int pos, int n); &#x2F;&#x2F; æŠŠå­—ç¬¦ä¸²sä¸­ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦è¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</span><br><span class="line">string &amp;append(int n, char c);          &#x2F;&#x2F; åœ¨å½“å‰å­—ç¬¦ä¸²ç»“å°¾æ·»åŠ nä¸ªå­—ç¬¦c</span><br><span class="line">string substr(int pos&#x3D;0, int n&#x3D;npos) const;    &#x2F;&#x2F; è¿”å›ç”±poså¼€å§‹çš„nä¸ªå­—ç¬¦ç»„æˆçš„å­å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">int compare(const string &amp;s) const;     &#x2F;&#x2F; ä¸å­—ç¬¦ä¸²sæ¯”è¾ƒ</span><br><span class="line">int compare(const char *s) const;       &#x2F;&#x2F; ä¸å­—ç¬¦ä¸²sæ¯”è¾ƒ</span><br><span class="line">&#x2F;&#x2F; compareå‡½æ•°åœ¨&gt;æ—¶è¿”å› 1ï¼Œ&lt;æ—¶è¿”å› -1ï¼Œ&#x3D;&#x3D;æ—¶è¿”å› 0ã€‚æ¯”è¾ƒåŒºåˆ†å¤§å°å†™ï¼Œæ¯”è¾ƒæ—¶å‚è€ƒå­—å…¸åºï¼Œæ’è¶Šå‰é¢çš„è¶Šå°ã€‚å¤§å†™çš„Aæ¯”å°å†™çš„aå°ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int find(char c, int pos&#x3D;0) const;              &#x2F;&#x2F; ä»poså¼€å§‹æŸ¥æ‰¾å­—ç¬¦cåœ¨å½“å‰å­—ç¬¦ä¸²çš„ä½ç½® </span><br><span class="line">int find(const char *s, int pos&#x3D;0) const;       &#x2F;&#x2F; ä»poså¼€å§‹æŸ¥æ‰¾å­—ç¬¦ä¸²såœ¨å½“å‰å­—ç¬¦ä¸²çš„ä½ç½®</span><br><span class="line">int find(const string &amp;s, int pos&#x3D;0) const;     &#x2F;&#x2F; ä»poså¼€å§‹æŸ¥æ‰¾å­—ç¬¦ä¸²såœ¨å½“å‰å­—ç¬¦ä¸²ä¸­çš„ä½ç½® </span><br><span class="line">&#x2F;&#x2F; findå‡½æ•°å¦‚æœæŸ¥æ‰¾ä¸åˆ°ï¼Œå°±è¿”å›-1</span><br><span class="line">int rfind(char c, int pos&#x3D;npos) const;          &#x2F;&#x2F; ä»poså¼€å§‹ä»åå‘å‰æŸ¥æ‰¾å­—ç¬¦cåœ¨å½“å‰å­—ç¬¦ä¸²ä¸­çš„ä½ç½® </span><br><span class="line">int rfind(const char *s, int pos&#x3D;npos) const;</span><br><span class="line">int rfind(const string &amp;s, int pos&#x3D;npos) const;</span><br><span class="line">&#x2F;&#x2F;rfindæ˜¯åå‘æŸ¥æ‰¾çš„æ„æ€ï¼Œå¦‚æœæŸ¥æ‰¾ä¸åˆ°ï¼Œ è¿”å›-1</span><br><span class="line"></span><br><span class="line"># æ›¿æ¢</span><br><span class="line">string &amp;replace(int pos, int n, const char *s); &#x2F;&#x2F; åˆ é™¤ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦ï¼Œç„¶ååœ¨poså¤„æ’å…¥ä¸²s</span><br><span class="line">string &amp;replace(int pos, int n, const string &amp;s);  &#x2F;&#x2F; åˆ é™¤ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦ï¼Œç„¶ååœ¨poså¤„æ’å…¥ä¸²s</span><br><span class="line">void swap(string &amp;s2);                          &#x2F;&#x2F; äº¤æ¢å½“å‰å­—ç¬¦ä¸²ä¸s2çš„å€¼</span><br><span class="line"></span><br><span class="line">string &amp;insert(int pos, const char *s);</span><br><span class="line">string &amp;insert(int pos, const string &amp;s);</span><br><span class="line">&#x2F;&#x2F; å‰ä¸¤ä¸ªå‡½æ•°åœ¨posä½ç½®æ’å…¥å­—ç¬¦ä¸²s</span><br><span class="line">string &amp;insert(int pos, int n, char c);     &#x2F;&#x2F; åœ¨posä½ç½® æ’å…¥nä¸ªå­—ç¬¦c</span><br><span class="line">string &amp;erase(int pos&#x3D;0, int n&#x3D;npos);       &#x2F;&#x2F; åˆ é™¤poså¼€å§‹çš„nä¸ªå­—ç¬¦ï¼Œè¿”å›ä¿®æ”¹åçš„å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">string to_string (int val);</span><br><span class="line">string to_string (long val);</span><br><span class="line">string to_string (long long val);</span><br><span class="line">string to_string (unsigned val);</span><br><span class="line">string to_string (unsigned long val);</span><br><span class="line">string to_string (unsigned long long val);</span><br><span class="line">string to_string (float val);</span><br><span class="line">string to_string (double val);</span><br><span class="line">string to_string (long double val);</span><br></pre></td></tr></table></figure>
<h2 id="vectorå®¹å™¨"><a href="#vectorå®¹å™¨" class="headerlink" title="vectorå®¹å™¨"></a>vectorå®¹å™¨</h2><p>å¤´æ–‡ä»¶ï¼š<code>#include &lt;vector&gt;</code>ã€‚vectoræ˜¯å¯å˜é•¿çš„åŠ¨æ€æ•°ç»„ï¼Œæ”¯æŒéšæœºè®¿é—®è¿­ä»£å™¨ã€‚vectorå®¹å™¨ä¸­ï¼Œç”¨ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„æ•°ç»„æ¥å­˜æ”¾å…ƒç´ ã€‚åŠ¨æ€åˆ†é…çš„å­˜å‚¨ç©ºé—´ä¸€èˆ¬éƒ½å¤§äºå­˜æ”¾å…ƒç´ æ‰€éœ€çš„ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œå“ªæ€•å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿä¼šåˆ†é… 32 ä¸ªå…ƒç´ çš„å­˜å‚¨ç©ºé—´ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåœ¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ æ—¶ä¸å¿…é‡æ–°åˆ†é…ç©ºé—´ï¼Œç›´æ¥å°†æ–°å…ƒç´ å†™å…¥é€‚å½“ä½ç½®å³å¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ·»åŠ æ–°å…ƒç´ çš„æ—¶é—´ä¹Ÿæ˜¯å¸¸æ•°ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœä¸æ–­æ·»åŠ æ–°å…ƒç´ ï¼Œå¤šå‡ºæ¥çš„ç©ºé—´å°±ä¼šç”¨å®Œï¼Œæ­¤æ—¶å†æ·»åŠ æ–°å…ƒç´ ï¼Œå°±ä¸å¾—ä¸é‡æ–°åˆ†é…å†…å­˜ç©ºé—´ï¼ŒæŠŠåŸæœ‰å†…å®¹å¤åˆ¶è¿‡å»åå†æ·»åŠ æ–°çš„å…ƒç´ ã€‚ç¢°åˆ°è¿™ç§æƒ…å†µï¼Œæ·»åŠ æ–°å…ƒç´ æ‰€èŠ±çš„æ—¶é—´å°±ä¸æ˜¯å¸¸æ•°ï¼Œè€Œæ˜¯å’Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°æˆæ­£æ¯”ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vector();       &#x2F;&#x2F; å®¹å™¨åˆå§‹åŒ–ä¸ºç©º</span><br><span class="line">vector(int n);  &#x2F;&#x2F; å°†å®¹å™¨åˆå§‹åŒ–ä¸ºæœ‰nä¸ªå…ƒç´ ï¼Œåˆå§‹å€¼ä¸º0</span><br><span class="line">vector(int n, const T&amp; val);   &#x2F;&#x2F; å‡å®šå…ƒç´ çš„ç±»å‹æ˜¯T,æ­¤æ„é€ å‡½æ•°å°†å®¹å™¨åˆå§‹åŒ–ä¸ºæœ‰nä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ çš„å€¼éƒ½æ˜¯val</span><br><span class="line">vector(iterator begin, iterator end);   &#x2F;&#x2F; beginå’Œendæ˜¯å…¶ä»–å®¹å™¨çš„è¿­ä»£å™¨(æˆ–æŒ‡é’ˆ)ã€‚å°†æœ¬vectorå®¹å™¨çš„å†…å®¹å˜æˆä¸å…¶ä»–å®¹å™¨ä¸Šçš„åŒºé—´[begin, end)ä¸€è‡´ã€‚</span><br><span class="line">vector(const vector&amp; obj);  &#x2F;&#x2F; æ‹·è´æ„é€ </span><br><span class="line"></span><br><span class="line">int size();   &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å…ƒç´ ä¸ªæ•°</span><br><span class="line">bool empty();     &#x2F;&#x2F; åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</span><br><span class="line">void push_back(const T&amp; val); &#x2F;&#x2F; å°†valæ·»åŠ åˆ°å®¹å™¨æœ«å°¾</span><br><span class="line">void pop_back();  &#x2F;&#x2F; åˆ é™¤å®¹å™¨æœ«å°¾çš„å…ƒç´ </span><br><span class="line">T&amp; front();     &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨</span><br><span class="line">T&amp; back();      &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨</span><br><span class="line"></span><br><span class="line">T&amp; at(index);   &#x2F;&#x2F; è¿”å›ç´¢å¼•indexæ‰€æŒ‡çš„æ•°æ® è¶Šç•ŒæŠ›å¼‚å¸¸</span><br><span class="line">vector[index];      &#x2F;&#x2F; è¿”å›ç´¢å¼•indexæ‰€æŒ‡çš„æ•°æ® è¶Šç•ŒæŠ¥é”™</span><br><span class="line"></span><br><span class="line">assign(begin, end); &#x2F;&#x2F; å°†[begin, end)åŒºé—´çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«</span><br><span class="line">assign(n, elem);    &#x2F;&#x2F; å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; vectorè½¬string</span><br><span class="line">vector&lt;int&gt; vec &#x3D; &#123;1, 2, 3, 4&#125;;</span><br><span class="line">string str;</span><br><span class="line">str.assign(vec.begin(), vec.end());</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; string è½¬vector</span><br><span class="line">string str &#x3D; &quot;1234&quot;;</span><br><span class="line">vector vec(str.begin(), str.end());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void swap( vector &lt;T&gt; &amp; v); 	&#x2F;&#x2F; å°†å®¹å™¨è‡ªèº«çš„å†…å®¹å’Œå¦ä¸€ä¸ªåŒç±»å‹çš„å®¹å™¨ v äº’æ¢</span><br><span class="line">resize(num);        &#x2F;&#x2F; é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumã€‚è‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</span><br><span class="line">resize(num, elem);  &#x2F;&#x2F; é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumã€‚è‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</span><br><span class="line"></span><br><span class="line">iterator insert(iterator i, const T &amp; val); 	&#x2F;&#x2F; å°† val æ’å…¥è¿­ä»£å™¨ i æŒ‡å‘çš„ä½ç½®ï¼Œè¿”å› i</span><br><span class="line">iterator insert( iterator i, iterator first, iterator last); 	&#x2F;&#x2F; å°†å…¶ä»–å®¹å™¨ä¸Šçš„åŒºé—´ [first, last) ä¸­çš„å…ƒç´ æ’å…¥è¿­ä»£å™¨ i æŒ‡å‘çš„ä½ç½®</span><br><span class="line">iterator erase(iterator i) ;	&#x2F;&#x2F; åˆ é™¤è¿­ä»£å™¨ i æŒ‡å‘çš„å…ƒç´ ï¼Œè¿”å›å€¼æ˜¯è¢«åˆ å…ƒç´ åé¢çš„å…ƒç´ çš„è¿­ä»£å™¨</span><br><span class="line">iterator erase(iterator first, iterator last); 	&#x2F;&#x2F; åˆ é™¤å®¹å™¨ä¸­çš„åŒºé—´ [first, last)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ­£å‘éå†</span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void printVector(const vector&lt;T&gt;&amp; v)</span><br><span class="line">&#123;</span><br><span class="line">    typename vector&lt;T&gt;::const_iterator it;</span><br><span class="line">    for(it&#x3D;v.begin(); it!&#x3D;v.end(); it++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; &quot; &quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; åå‘éå†</span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void printReverseVector(const vector&lt;T&gt;&amp; v)</span><br><span class="line">&#123;</span><br><span class="line">    typename vector&lt;T&gt;::const_reverse_iterator it;</span><br><span class="line">    for(it&#x3D;v.rbegin(); it!&#x3D;v.rend(); it++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; &quot; &quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">    int a[5] &#x3D; &#123;1, 2, 3, 4, 5&#125;;</span><br><span class="line">    vector&lt;int&gt; vec1(a, a+5); &#x2F;&#x2F; vector(iterator first, iterator last);</span><br><span class="line">    printVector&lt;int&gt;(vec1);   &#x2F;&#x2F; 1 2 3 4 5</span><br><span class="line"></span><br><span class="line">    vector&lt;int&gt; vec2(10, -1);   &#x2F;&#x2F; -1 -1 -1 -1 -1 -1 -1 -1 -1 -1</span><br><span class="line">    printVector(vec2);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å°†vec1 [begin, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«</span><br><span class="line">    vec2.assign(vec1.begin(), vec1.begin()+3);  &#x2F;&#x2F; 1  2 3</span><br><span class="line">    printVector(vec2);</span><br><span class="line"></span><br><span class="line">    vec2.assign(8, 3);  &#x2F;&#x2F; 3 3 3 3 3 3 3 3</span><br><span class="line">    printVector(vec2);</span><br><span class="line"></span><br><span class="line">    vec2.swap(vec1);    &#x2F;&#x2F; 1 2 3 4 5</span><br><span class="line">    printVector(vec2);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; vec2.front() &lt;&lt; endl;   &#x2F;&#x2F; 1</span><br><span class="line">    cout &lt;&lt; vec2.back() &lt;&lt; endl;    &#x2F;&#x2F; 5</span><br><span class="line"></span><br><span class="line">    vec2.front() &#x3D; -1;</span><br><span class="line">    vec2.back() &#x3D; -1;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; è·å–å¤´éƒ¨å…ƒç´ </span><br><span class="line">    cout &lt;&lt; vec2.front() &lt;&lt; endl;   &#x2F;&#x2F; -1</span><br><span class="line">    &#x2F;&#x2F; è·å–å°¾éƒ¨å…ƒç´ </span><br><span class="line">    cout &lt;&lt; vec2.back() &lt;&lt; endl;    &#x2F;&#x2F; -1</span><br><span class="line"></span><br><span class="line">    vec2.pop_back();</span><br><span class="line">    printVector(vec2);              &#x2F;&#x2F; -1 2 3 4</span><br><span class="line">    printReverseVector(vec2);       &#x2F;&#x2F; 4 3 2 -1</span><br><span class="line"></span><br><span class="line">    vec2.push_back(20);</span><br><span class="line">    printVector(vec2);              &#x2F;&#x2F; -1 2 3 4 20</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; åœ¨vec2.begin()+1å¤„æ’å…¥å…ƒç´ 33</span><br><span class="line">    vec2.insert(vec2.begin()+1, 33);</span><br><span class="line">    printVector(vec2);              &#x2F;&#x2F; -1 33 2 3 4 20</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; åˆ é™¤[begin, end)çš„å…ƒç´ </span><br><span class="line">    vec2.erase(vec2.begin(), vec2.begin()+1);</span><br><span class="line">    printVector(vec2);              &#x2F;&#x2F; 33 2 3 4 20</span><br><span class="line">    cout &lt;&lt; vec2.size() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 33 2 3 4 20 0 0 0 0 0</span><br><span class="line">    vec2.resize(10);         &#x2F;&#x2F; è¶…å‡ºéƒ¨åˆ†å¡«å……0</span><br><span class="line">    printVector(vec2);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 33 2 3 4 20 0 0 0</span><br><span class="line">    vec2.resize(8);          &#x2F;&#x2F; å®¹å™¨å˜çŸ­,åˆ é™¤å…ƒç´ </span><br><span class="line">    printVector(vec2);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 33 2 3 4 20 0 -1 -1 -1 -1</span><br><span class="line">    vec2.resize(10, -1);    &#x2F;&#x2F; è¶…å‡ºéƒ¨åˆ†å¡«å……-1</span><br><span class="line">    printVector(vec2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="stackå®¹å™¨"><a href="#stackå®¹å™¨" class="headerlink" title="stackå®¹å™¨"></a>stackå®¹å™¨</h2><p>å¤´æ–‡ä»¶ï¼š<code>#include &lt;stack&gt;</code>ã€‚æ ˆå®¹å™¨ï¼Œæ ˆæ˜¯ä¸€ç§åè¿›å…ˆå‡ºçš„å…ƒç´ åºåˆ—ï¼Œè®¿é—®å’Œåˆ é™¤éƒ½åªèƒ½å¯¹æ ˆé¡¶å…ƒç´ è¿›è¡Œï¼Œå¹¶ä¸”å…ƒç´ ä¹Ÿåªèƒ½è¢«æ·»åŠ åˆ°æ ˆé¡¶ã€‚æ ˆå†…å…ƒç´ ä¸èƒ½è®¿é—®ã€‚å¦‚æœä¸€å®šè¦è®¿é—®æ ˆå†…å…ƒç´ ï¼Œåªèƒ½å°†å…¶ä¸Šæ–¹çš„å…ƒç´ å…¨éƒ¨ä»æ ˆä¸­åˆ é™¤ï¼Œä½¿ä¹‹å˜æˆæ ˆé¡¶å…ƒç´ æ‰å¯ä»¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">stack.push(element);  &#x2F;&#x2F; å‹æ ˆ</span><br><span class="line">stack.pop();          &#x2F;&#x2F; å‡ºæ ˆ</span><br><span class="line">stack.top();          &#x2F;&#x2F; è·å–æ ˆé¡¶å…ƒç´ </span><br><span class="line">stack.empty();        &#x2F;&#x2F; åˆ¤æ–­å †æ ˆæ˜¯å¦ä¸ºç©º</span><br><span class="line">stack.size();         &#x2F;&#x2F; è¿”å›å †æ ˆå¤§å°</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">	stack&lt;int&gt; s;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; å…¥æ ˆ</span><br><span class="line">	for (int i&#x3D;0; i&lt;10; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		s.push(i);</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; &quot;size&#x3D;&quot; &lt;&lt; s.size() &lt;&lt; endl;    &#x2F;&#x2F; è¿”å›æ ˆçš„å¤§å°</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; å‡ºæ ˆ</span><br><span class="line">	while ( !s.empty() )    &#x2F;&#x2F; åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span><br><span class="line">	&#123;</span><br><span class="line">		int tmp &#x3D; s.top();  &#x2F;&#x2F; è·å–æ ˆé¡¶å…ƒç´ </span><br><span class="line">		cout &lt;&lt;  tmp &lt;&lt; &quot; &quot;;</span><br><span class="line">		s.pop();            &#x2F;&#x2F; å¼¹å‡ºæ ˆé¡¶å…ƒç´ </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Dequeå®¹å™¨"><a href="#Dequeå®¹å™¨" class="headerlink" title="Dequeå®¹å™¨"></a>Dequeå®¹å™¨</h2><p>dequeæ˜¯åŒç«¯æ•°ç»„ï¼Œå¯ä»¥éšæœºå­˜å–å…ƒç´ ã€‚dequeå¤´éƒ¨å’Œå°¾éƒ¨æ·»åŠ æˆ–ç§»é™¤å…ƒç´ éƒ½éå¸¸å¿«é€Ÿã€‚ä½†æ˜¯åœ¨ä¸­éƒ¨å®‰æ’å…ƒç´ æˆ–ç§»é™¤å…ƒç´ æ¯”è¾ƒè´¹æ—¶ã€‚<code>#include &lt;deque&gt;</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deque.push_back(elem);	&#x2F;&#x2F; åœ¨å®¹å™¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæ•°æ®</span><br><span class="line">deque.push_front(elem);	&#x2F;&#x2F; åœ¨å®¹å™¨å¤´éƒ¨æ’å…¥ä¸€ä¸ªæ•°æ®</span><br><span class="line">deque.pop_back();    	&#x2F;&#x2F; åˆ é™¤å®¹å™¨æœ€åä¸€ä¸ªæ•°æ®</span><br><span class="line">deque.pop_front();		&#x2F;&#x2F; åˆ é™¤å®¹å™¨ç¬¬ä¸€ä¸ªæ•°æ®</span><br><span class="line"></span><br><span class="line">deque.at(idx);      &#x2F;&#x2F; è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®ï¼Œå¦‚æœidxè¶Šç•Œï¼ŒæŠ›å‡ºout_of_range</span><br><span class="line">deque[idx];         &#x2F;&#x2F; è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®ï¼Œå¦‚æœidxè¶Šç•Œï¼Œä¸æŠ›å‡ºå¼‚å¸¸ï¼Œç›´æ¥å‡ºé”™</span><br><span class="line">deque.front();      &#x2F;&#x2F; è¿”å›ç¬¬ä¸€ä¸ªæ•°æ®</span><br><span class="line">deque.back();       &#x2F;&#x2F; è¿”å›æœ€åä¸€ä¸ªæ•°æ®</span><br><span class="line"></span><br><span class="line">deque.begin();      &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</span><br><span class="line">deque.end();        &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åçš„è¿­ä»£å™¨ã€‚</span><br><span class="line">deque.rbegin();     &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</span><br><span class="line">deque.rend();       &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å€’æ•°æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åçš„è¿­ä»£å™¨ã€‚</span><br><span class="line"></span><br><span class="line">deque(begin, end);      &#x2F;&#x2F; æ„é€ å‡½æ•°å°†[beg, end)åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚æ³¨æ„è¯¥åŒºé—´æ˜¯å·¦é—­å³å¼€çš„åŒºé—´</span><br><span class="line">deque(n,elem);          &#x2F;&#x2F; æ„é€ å‡½æ•°å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«ã€‚</span><br><span class="line">deque(const deque &amp;deq);  &#x2F;&#x2F; æ‹·è´æ„é€ å‡½æ•°ã€‚</span><br><span class="line"></span><br><span class="line">deque.assign(beg,end);  &#x2F;&#x2F; å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚æ³¨æ„è¯¥åŒºé—´æ˜¯å·¦é—­å³å¼€çš„åŒºé—´ã€‚</span><br><span class="line">deque.assign(n,elem);   &#x2F;&#x2F; å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</span><br><span class="line">deque&amp; operator&#x3D;(const deque &amp;deq);	    &#x2F;&#x2F; é‡è½½ç­‰å·æ“ä½œç¬¦ </span><br><span class="line">deque.swap(deq);        &#x2F;&#x2F; å°†vecä¸æœ¬èº«çš„å…ƒç´ äº’æ¢</span><br><span class="line"></span><br><span class="line">deque.size();	        &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</span><br><span class="line">deque.empty();	        &#x2F;&#x2F; åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</span><br><span class="line">deque.resize(num);      &#x2F;&#x2F; é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</span><br><span class="line">deque.resize(num, elem);  &#x2F;&#x2F; é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</span><br><span class="line"></span><br><span class="line">deque.insert(pos,elem);     &#x2F;&#x2F; åœ¨posä½ç½®æ’å…¥ä¸€ä¸ªelemå…ƒç´ çš„æ‹·è´ï¼Œè¿”å›æ–°æ•°æ®çš„ä½ç½®ã€‚</span><br><span class="line">deque.insert(pos,n,elem);   &#x2F;&#x2F; åœ¨posä½ç½®æ’å…¥nä¸ªelemæ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</span><br><span class="line">deque.insert(pos,begin,end);  &#x2F;&#x2F; åœ¨posä½ç½®æ’å…¥[begin,end)åŒºé—´çš„æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</span><br><span class="line"></span><br><span class="line">deque.clear();	            &#x2F;&#x2F; ç§»é™¤å®¹å™¨çš„æ‰€æœ‰æ•°æ®</span><br><span class="line">deque.erase(beg,end);       &#x2F;&#x2F; åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®</span><br><span class="line">deque.erase(pos);           &#x2F;&#x2F; åˆ é™¤posä½ç½®çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®</span><br></pre></td></tr></table></figure>
<h2 id="Queueå®¹å™¨"><a href="#Queueå®¹å™¨" class="headerlink" title="Queueå®¹å™¨"></a>Queueå®¹å™¨</h2><h1 id="include-ã€‚Queueæ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—å®¹å™¨"><a href="#include-ã€‚Queueæ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—å®¹å™¨" class="headerlink" title="include ã€‚Queueæ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—å®¹å™¨"></a>include <queue>ã€‚Queueæ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—å®¹å™¨</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">queue.push(element);  &#x2F;&#x2F; å…¥é˜Ÿ</span><br><span class="line">queue.pop();          &#x2F;&#x2F; å‡ºé˜Ÿ</span><br><span class="line">queue.empty();        &#x2F;&#x2F; åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span><br><span class="line">queue.size();         &#x2F;&#x2F; è¿”å›é˜Ÿåˆ—å¤§å°</span><br><span class="line">queue.front();        &#x2F;&#x2F; è¿”å›é˜Ÿé¦–å…ƒç´ </span><br><span class="line">queue.back();         &#x2F;&#x2F; è¿”å›é˜Ÿå°¾å…ƒç´ </span><br><span class="line"></span><br><span class="line">queue(const queue &amp;que);		        &#x2F;&#x2F; æ‹·è´æ„é€ å‡½æ•°</span><br><span class="line">queue&amp; operator&#x3D;(const queue &amp;que);	    &#x2F;&#x2F; é‡è½½ç­‰å·æ“ä½œç¬¦</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">void test()</span><br><span class="line">&#123;</span><br><span class="line">	queue&lt;int&gt; q;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; å…¥æ ˆ</span><br><span class="line">	for (int i&#x3D;0; i&lt;10; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		q.push(i);  &#x2F;&#x2F; å‘é˜Ÿå°¾æ·»åŠ å…ƒç´ </span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; &quot;size&#x3D;&quot; &lt;&lt; q.size() &lt;&lt; endl;    &#x2F;&#x2F; è¿”å›é˜Ÿåˆ—çš„å¤§å°</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; å‡ºæ ˆ</span><br><span class="line">	while ( !q.empty() )    &#x2F;&#x2F; åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span><br><span class="line">	&#123;</span><br><span class="line">		int first &#x3D; q.front();  &#x2F;&#x2F; è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line">		cout &lt;&lt;  first &lt;&lt; &quot; &quot;;</span><br><span class="line">		q.pop();                &#x2F;&#x2F; å¼¹å‡ºé˜Ÿå¤´å…ƒç´ </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="priority-queue"><a href="#priority-queue" class="headerlink" title="priority_queue"></a>priority_queue</h2><p>priority_queueæ˜¯ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œé»˜è®¤æ˜¯æœ€å¤§å€¼ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚#include <queue></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">priority_queue.empty()</span><br><span class="line">priority_queue.size()</span><br><span class="line">priority_queue.top()</span><br><span class="line">priority_queue.pop()</span><br><span class="line">priority_queue.push(item)</span><br><span class="line"></span><br><span class="line">priority_queue&lt;int, vector&lt;int&gt;, less&lt;int&gt; &gt; p1;    &#x2F;&#x2F; æœ€å¤§å€¼ä¼˜å…ˆçº§é˜Ÿåˆ—</span><br><span class="line">priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt; &gt; p2;  &#x2F;&#x2F; æœ€å°å€¼ä¼˜å…ˆçº§é˜Ÿåˆ—</span><br></pre></td></tr></table></figure>
<h2 id="setå®¹å™¨"><a href="#setå®¹å™¨" class="headerlink" title="setå®¹å™¨"></a>setå®¹å™¨</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set.insert(elem);       &#x2F;&#x2F; åœ¨å®¹å™¨ä¸­æ’å…¥å…ƒç´ ã€‚</span><br><span class="line">set.begin();            &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®çš„è¿­ä»£å™¨ã€‚</span><br><span class="line">set.end();              &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªæ•°æ®ä¹‹åçš„è¿­ä»£å™¨ã€‚</span><br><span class="line">set.rbegin();           &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</span><br><span class="line">set.rend();             &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å€’æ•°æœ€åä¸€ä¸ªå…ƒç´ çš„åé¢çš„è¿­ä»£å™¨ã€‚</span><br><span class="line"></span><br><span class="line">set&lt; int, less&lt;int&gt; &gt;  setIntA;      &#x2F;&#x2F; è¯¥å®¹å™¨æ˜¯æŒ‰å‡åºæ–¹å¼æ’åˆ—å…ƒç´  et&lt;int&gt; ç›¸å½“äº set&lt;int,less&lt;int&gt;&gt;ã€‚</span><br><span class="line">set&lt; int, greater&lt;int&gt; &gt; setIntB;    &#x2F;&#x2F; è¯¥å®¹å™¨æ˜¯æŒ‰é™åºæ–¹å¼æ’åˆ—å…ƒç´ </span><br><span class="line"></span><br><span class="line">set&lt;T&gt; s &#x3D; &#123;&#125;;</span><br><span class="line">set(begin, end);                    &#x2F;&#x2F; æ„é€ å‡½æ•°å°†[beg, end)åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚æ³¨æ„è¯¥åŒºé—´æ˜¯å·¦é—­å³å¼€çš„åŒºé—´</span><br><span class="line">set(const set &amp;st);		            &#x2F;&#x2F; æ‹·è´æ„é€ å‡½æ•°</span><br><span class="line">set&amp; operator&#x3D;(const set &amp;st);	    &#x2F;&#x2F; é‡è½½ç­‰å·æ“ä½œç¬¦</span><br><span class="line">set.swap(st);				        &#x2F;&#x2F; äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨</span><br><span class="line"></span><br><span class="line">set.size();	                        &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°ç›®</span><br><span class="line">set.empty();                        &#x2F;&#x2F; åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</span><br><span class="line"></span><br><span class="line">set.clear();		                &#x2F;&#x2F; æ¸…é™¤æ‰€æœ‰å…ƒç´ </span><br><span class="line">set.erase(pos);	                    &#x2F;&#x2F; åˆ é™¤posè¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</span><br><span class="line">set.erase(beg,end);	                &#x2F;&#x2F; åˆ é™¤åŒºé—´[beg,end)çš„æ‰€æœ‰å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</span><br><span class="line">set.erase(elem);                    &#x2F;&#x2F; åˆ é™¤å®¹å™¨ä¸­å€¼ä¸ºelemçš„å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">set.find(elem);                     &#x2F;&#x2F; æŸ¥æ‰¾elemå…ƒç´ ï¼Œè¿”å›æŒ‡å‘elemå…ƒç´ çš„è¿­ä»£å™¨</span><br><span class="line">set.count(elem);                    &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å€¼ä¸ºelemçš„å…ƒç´ ä¸ªæ•°ã€‚å¯¹setæ¥è¯´ï¼Œè¦ä¹ˆæ˜¯0ï¼Œè¦ä¹ˆæ˜¯1ã€‚å¯¹multisetæ¥è¯´ï¼Œå€¼å¯èƒ½å¤§äº1</span><br><span class="line">set.lower_bound(elem);              &#x2F;&#x2F; è¿”å›ç¬¬ä¸€ä¸ª&gt;&#x3D;elemå…ƒç´ çš„è¿­ä»£å™¨</span><br><span class="line">set.upper_bound(elem);	            &#x2F;&#x2F; è¿”å›ç¬¬ä¸€ä¸ª&gt;elemå…ƒç´ çš„è¿­ä»£å™¨</span><br><span class="line">set.equal_range(elem);		        &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­ä¸elemç›¸ç­‰çš„ä¸Šä¸‹é™çš„ä¸¤ä¸ªè¿­ä»£å™¨ã€‚ä¸Šé™æ˜¯é—­åŒºé—´ï¼Œä¸‹é™æ˜¯å¼€åŒºé—´ï¼Œå¦‚[beg,end)</span><br><span class="line"></span><br><span class="line">pair&lt;T1,T2&gt;å­˜æ”¾çš„ä¸¤ä¸ªå€¼çš„ç±»å‹ï¼Œå¯ä»¥ä¸ä¸€æ ·ï¼Œå¦‚T1ä¸ºintï¼ŒT2ä¸ºfloatã€‚T1,T2ä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰ç±»å‹ã€‚</span><br><span class="line">pair.firstæ˜¯pairé‡Œé¢çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œæ˜¯T1ç±»å‹ã€‚</span><br><span class="line">pair.secondæ˜¯pairé‡Œé¢çš„ç¬¬äºŒä¸ªå€¼ï¼Œæ˜¯T2ç±»å‹ã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lower_bound(begin, endï¼Œ val);        &#x2F;&#x2F; è¿”å›ç¬¬ä¸€ä¸ª&gt;&#x3D;elemå…ƒç´ çš„è¿­ä»£å™¨</span><br><span class="line">upper_bound(begin, end, val);         &#x2F;&#x2F; è¿”å›ç¬¬ä¸€ä¸ª&gt;elemå…ƒç´ çš„è¿­ä»£å™¨</span><br><span class="line">auto bounds &#x3D; equal_range(begin, end, val); &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­ä¸elemç›¸ç­‰çš„ä¸Šä¸‹é™çš„ä¸¤ä¸ªè¿­ä»£å™¨ã€‚ä¸Šé™æ˜¯é—­åŒºé—´ï¼Œä¸‹é™æ˜¯å¼€åŒºé—´ï¼Œå¦‚[beg,end)</span><br></pre></td></tr></table></figure>
<h2 id="mapå®¹å™¨"><a href="#mapå®¹å™¨" class="headerlink" title="mapå®¹å™¨"></a>mapå®¹å™¨</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">map.insert(...);    &#x2F;&#x2F; å¾€å®¹å™¨æ’å…¥å…ƒç´ ï¼Œè¿”å›pair&lt;iterator,bool&gt;</span><br><span class="line"># åœ¨mapä¸­æ’å…¥å…ƒç´ çš„ä¸‰ç§æ–¹å¼ï¼Œå‡è®¾map&lt;int, string&gt; mapStu;</span><br><span class="line"># 1. é€šè¿‡pairçš„æ–¹å¼æ’å…¥å¯¹è±¡</span><br><span class="line">mapStu.insert( pair&lt;int,string&gt;(3,&quot;lana&quot;) );</span><br><span class="line"># 2. é€šè¿‡pairçš„æ–¹å¼æ’å…¥å¯¹è±¡</span><br><span class="line">mapStu.insert( make_pair(3, â€œlanaâ€) );</span><br><span class="line"># 3. é€šè¿‡value_typeçš„æ–¹å¼æ’å…¥å¯¹è±¡</span><br><span class="line">mapStu.insert(  map&lt;int,string&gt;::value_type( 3,&quot;lana&quot;)  );</span><br><span class="line"># 4. é€šè¿‡æ•°ç»„çš„æ–¹å¼æ’å…¥å€¼</span><br><span class="line">mapStu[3] &#x3D; â€œlana&quot;;</span><br><span class="line"></span><br><span class="line"># å‰ä¸‰ç§æ–¹æ³•ï¼Œé‡‡ç”¨çš„æ˜¯insert()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›å€¼ä¸ºpair&lt;iterator,bool&gt; </span><br><span class="line"># ç¬¬å››ç§æ–¹æ³•éå¸¸ç›´è§‚ï¼Œä½†å­˜åœ¨ä¸€ä¸ªæ€§èƒ½çš„é—®é¢˜ã€‚æ’å…¥3æ—¶ï¼Œå…ˆåœ¨mapStuä¸­æŸ¥æ‰¾ä¸»é”®ä¸º3çš„é¡¹ï¼Œè‹¥æ²¡å‘ç°ï¼Œåˆ™å°†ä¸€ä¸ªé”®ä¸º3ï¼Œå€¼ä¸ºåˆå§‹åŒ–å€¼çš„å¯¹ç»„æ’å…¥åˆ°mapStuä¸­ï¼Œç„¶åå†å°†å€¼ä¿®æ”¹æˆâ€œå°åˆ˜â€ã€‚è‹¥å‘ç°å·²å­˜åœ¨3è¿™ä¸ªé”®ï¼Œåˆ™ä¿®æ”¹è¿™ä¸ªé”®å¯¹åº”çš„valueã€‚</span><br><span class="line"></span><br><span class="line">string strName &#x3D; mapStu[2];   &#x2F;&#x2F; å–æ“ä½œæˆ–æ’å…¥æ“ä½œåªæœ‰å½“mapStuå­˜åœ¨2è¿™ä¸ªé”®æ—¶æ‰æ˜¯æ­£ç¡®çš„å–æ“ä½œï¼Œå¦åˆ™ä¼šè‡ªåŠ¨æ’å…¥ä¸€ä¸ªå®ä¾‹ï¼Œé”®ä¸º2ï¼Œå€¼ä¸ºåˆå§‹åŒ–å€¼(0)ã€‚</span><br><span class="line"></span><br><span class="line">for (map&lt;int,string&gt;::iterator it&#x3D;mapA.begin(); it!&#x3D;mapA.end(); ++it)</span><br><span class="line">&#123;</span><br><span class="line">    pair&lt;int, string&gt; pr &#x3D; *it;</span><br><span class="line">    int iKey &#x3D; pr.first;</span><br><span class="line">    string strValue &#x3D; pr.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">map&lt; T1, T2, less&lt;T1&gt; &gt;  mapA;      &#x2F;&#x2F; è¯¥å®¹å™¨æ˜¯æŒ‰é”®çš„å‡åºæ–¹å¼æ’åˆ—å…ƒç´ ã€‚æœªæŒ‡å®šå‡½æ•°å¯¹è±¡ï¼Œé»˜è®¤é‡‡ç”¨less&lt;T1&gt;å‡½æ•°å¯¹è±¡ã€‚</span><br><span class="line">map&lt; T1, T2, greater&lt;T1&gt; &gt; mapB;    &#x2F;&#x2F; è¯¥å®¹å™¨æ˜¯æŒ‰é”®çš„é™åºæ–¹å¼æ’åˆ—å…ƒç´ ã€‚</span><br><span class="line"># less&lt;T1&gt;ä¸greater&lt;T1&gt;  å¯ä»¥æ›¿æ¢æˆå…¶å®ƒçš„å‡½æ•°å¯¹è±¡functorã€‚</span><br><span class="line"># å¯ç¼–å†™è‡ªå®šä¹‰å‡½æ•°å¯¹è±¡ä»¥è¿›è¡Œè‡ªå®šä¹‰ç±»å‹çš„æ¯”è¾ƒï¼Œä½¿ç”¨æ–¹æ³•ä¸setæ„é€ æ—¶æ‰€ç”¨çš„å‡½æ•°å¯¹è±¡ä¸€æ ·ã€‚</span><br><span class="line">map.begin();        &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®çš„è¿­ä»£å™¨ã€‚</span><br><span class="line">map.end();          &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªæ•°æ®ä¹‹åçš„è¿­ä»£å™¨ã€‚</span><br><span class="line">map.rbegin();       &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</span><br><span class="line">map.rend();         &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å€’æ•°æœ€åä¸€ä¸ªå…ƒç´ çš„åé¢çš„è¿­ä»£å™¨ã€‚</span><br><span class="line"></span><br><span class="line">map(const map &amp;mp);		        &#x2F;&#x2F; æ‹·è´æ„é€ å‡½æ•°</span><br><span class="line">map&amp; operator&#x3D;(const map &amp;mp);	&#x2F;&#x2F; é‡è½½ç­‰å·æ“ä½œç¬¦</span><br><span class="line">map.swap(mp);				    &#x2F;&#x2F; äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨</span><br><span class="line"></span><br><span class="line">map.size();	        &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°ç›®</span><br><span class="line">map.empty();        &#x2F;&#x2F; åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</span><br><span class="line"></span><br><span class="line">map.clear();		&#x2F;&#x2F; åˆ é™¤æ‰€æœ‰å…ƒç´ </span><br><span class="line">map.erase(pos);	    &#x2F;&#x2F; åˆ é™¤posè¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨</span><br><span class="line">map.erase(beg,end);	&#x2F;&#x2F; åˆ é™¤åŒºé—´[beg,end)çš„æ‰€æœ‰å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨    mapA.erase(mapA.begin());</span><br><span class="line">map.erase(keyElem); &#x2F;&#x2F; åˆ é™¤å®¹å™¨ä¸­keyä¸ºkeyElemçš„å¯¹ç»„ mapA.erase(5);  </span><br><span class="line"></span><br><span class="line">map.find(key);      &#x2F;&#x2F; æŸ¥æ‰¾é”®keyæ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨ï¼Œè¿”å›è¯¥é”®çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼›è‹¥ä¸å­˜åœ¨ï¼Œè¿”å›map.end();</span><br><span class="line">map.count(keyElem); &#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­keyä¸ºkeyElemçš„å¯¹ç»„ä¸ªæ•°ã€‚å¯¹mapæ¥è¯´ï¼Œè¦ä¹ˆæ˜¯0ï¼Œè¦ä¹ˆæ˜¯1ã€‚å¯¹multimapæ¥è¯´ï¼Œå€¼å¯èƒ½å¤§äº1ã€‚</span><br><span class="line">map.lower_bound(keyElem);       &#x2F;&#x2F; è¿”å›ç¬¬ä¸€ä¸ªkey&gt;&#x3D;keyElemå…ƒç´ çš„è¿­ä»£å™¨ã€‚</span><br><span class="line">map.upper_bound(keyElem);	    &#x2F;&#x2F; è¿”å›ç¬¬ä¸€ä¸ªkey&gt;keyElemå…ƒç´ çš„è¿­ä»£å™¨ã€‚</span><br><span class="line"></span><br><span class="line">map.equal_range(keyElem);		&#x2F;&#x2F; è¿”å›å®¹å™¨ä¸­keyä¸keyElemç›¸ç­‰çš„ä¸Šä¸‹é™çš„ä¸¤ä¸ªè¿­ä»£å™¨ã€‚ä¸Šé™æ˜¯é—­åŒºé—´ï¼Œä¸‹é™æ˜¯å¼€åŒºé—´ï¼Œå¦‚[begin,end)ã€‚</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><a href="http://c.biancheng.net/view/331.html" target="_blank" rel="noopener">C++å®¹å™¨ï¼ˆSTLå®¹å™¨ï¼‰</a></p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>cpp</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>32-linux-ç½‘ç»œç¼–ç¨‹</title>
    <url>/2020/03/03/32-linux-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h1><p>NATæ˜ å°„ï¼š<br>æ‰“æ´æœºåˆ¶ï¼š</p>
<h2 id="å¥—æ¥å­—"><a href="#å¥—æ¥å­—" class="headerlink" title="å¥—æ¥å­—"></a>å¥—æ¥å­—</h2><p>IPåœ°å€ï¼šæ ‡è¯†ä¸»æœºã€‚ç«¯å£å·ï¼šè¡¨ç¤ºä¸»æœºä¸­çš„ä¸€ä¸ªè¿›ç¨‹ã€‚socketæ˜¯linuxçš„ä¼ªæ–‡ä»¶(ä¸å­˜å‚¨æ•°æ®ï¼Œä¸å ä»»ä½•ç©ºé—´)ç±»å‹ã€‚åœ¨ç½‘ç»œé€šä¿¡ä¸­ï¼Œå¥—æ¥å­—æ˜¯æˆå¯¹å‡ºç°çš„ã€‚<br>æ¯ä¸ªå¥—æ¥å­—éƒ½æœ‰ä¸€ä¸ªå‘é€ç¼“å†²åŒºå’Œä¸€ä¸ªæ¥æ”¶ç¼“å†²åŒºã€‚ä¸€ç«¯çš„å‘é€ç¼“å†²åŒºå¯¹åº”å¦ä¸€ç«¯çš„æ¥æ”¶ç¼“å†²åŒºã€‚</p>
<p><img src="/images/32-linux-ç½‘ç»œç¼–ç¨‹/5.å¥—æ¥å­—.png" alt="&quot;5.å¥—æ¥å­—&quot;"></p>
<ul>
<li>linuxçš„7ç§æ–‡ä»¶ç±»å‹ï¼š</li>
</ul>
<ol>
<li>æ™®é€šæ–‡ä»¶ç±»å‹(-)</li>
<li>ç›®å½•æ–‡ä»¶(d)</li>
<li>å—è®¾å¤‡(b)å’Œ å­—ç¬¦è®¾å¤‡(c)</li>
<li>å¥—æ¥å­—æ–‡ä»¶(s)</li>
<li>ç®¡é“æ–‡ä»¶(p)</li>
<li>ç¬¦å·é“¾æ¥(l)</li>
</ol>
<h2 id="ç½‘ç»œå­—èŠ‚åºå’Œä¸»æœºå­—èŠ‚åºçš„è½¬æ¢"><a href="#ç½‘ç»œå­—èŠ‚åºå’Œä¸»æœºå­—èŠ‚åºçš„è½¬æ¢" class="headerlink" title="ç½‘ç»œå­—èŠ‚åºå’Œä¸»æœºå­—èŠ‚åºçš„è½¬æ¢"></a>ç½‘ç»œå­—èŠ‚åºå’Œä¸»æœºå­—èŠ‚åºçš„è½¬æ¢</h2><p>å¤§ç«¯ï¼šä½åœ°å€é«˜å­—èŠ‚<br>å°ç«¯ï¼šä½åœ°å€ä½å­—èŠ‚<br>ç½‘ç»œæ•°æ®æµé‡‡ç”¨å¤§ç«¯å­—èŠ‚åº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;arpa&#x2F;inet.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; hè¡¨ç¤ºhost nè¡¨ç¤ºnetwork lè¡¨ç¤º32ä½é•¿æ•´æ•° 2è¡¨ç¤º16ä½çŸ­æ•´æ•°</span><br><span class="line">uint32_t htonl(uint32_t hostlong);</span><br><span class="line">uint16_t htons(uint16_t hostshort);</span><br><span class="line">uint32_t ntohl(uint32_t netlong);</span><br><span class="line">uint16_t ntohs(uint16_t netshort);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;arpa&#x2F;inet.h&gt;</span><br><span class="line">int inet_pton(int af, const char *src, void *dst);  &#x2F;&#x2F; ç‚¹åˆ†åè¿›åˆ¶ å­—ç¬¦ä¸²è½¬ç½‘ç»œå­—èŠ‚åº</span><br><span class="line">const char *inet_ntop(int af, const void *src, char *dst, socklen_t size);  &#x2F;&#x2F; ç½‘ç»œå­—èŠ‚åºè½¬ç‚¹åˆ†åè¿›åˆ¶å­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">struct sockaddr &#123;</span><br><span class="line">	sa_family_t sa_family; 		&#x2F;* address family, AF_xxx *&#x2F;</span><br><span class="line">	char sa_data[14];			&#x2F;* 14 bytes of protocol address *&#x2F;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct sockaddr_in &#123;</span><br><span class="line">	__kernel_sa_family_t sin_family; 			&#x2F;* Address family *&#x2F;  	åœ°å€ç»“æ„ç±»å‹</span><br><span class="line">	__be16 sin_port;					 		        &#x2F;* Port number *&#x2F;		ç«¯å£å·</span><br><span class="line">	struct in_addr sin_addr;					    &#x2F;* Internet address *&#x2F;	IPåœ°å€</span><br><span class="line"></span><br><span class="line">	&#x2F;* Pad to size of &#96;struct sockaddr&#39;. *&#x2F;</span><br><span class="line">	unsigned char __pad[__SOCK_SIZE__ - sizeof(short int) -</span><br><span class="line">	sizeof(unsigned short int) - sizeof(struct in_addr)];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct in_addr &#123;						&#x2F;* Internet address. *&#x2F;</span><br><span class="line">	__be32 s_addr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="ç½‘ç»œå¥—æ¥å­—å‡½æ•°"><a href="#ç½‘ç»œå¥—æ¥å­—å‡½æ•°" class="headerlink" title="ç½‘ç»œå¥—æ¥å­—å‡½æ•°"></a>ç½‘ç»œå¥—æ¥å­—å‡½æ•°</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;sys&#x2F;types.h&gt; &#x2F;* See NOTES *&#x2F;</span><br><span class="line">#include &lt;sys&#x2F;socket.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; socket()æ‰“å¼€ä¸€ä¸ªç½‘ç»œé€šè®¯ç«¯å£ï¼Œå¦‚æœæˆåŠŸè¿”å›æ–‡ä»¶æè¿°ç¬¦(è¯»å†™)</span><br><span class="line">int socket(int domain, int type, int protocol); </span><br><span class="line">domain:</span><br><span class="line">	AF_INET è¿™æ˜¯å¤§å¤šæ•°ç”¨æ¥äº§ç”Ÿsocketçš„åè®®ï¼Œä½¿ç”¨TCPæˆ–UDPæ¥ä¼ è¾“ï¼Œç”¨IPv4çš„åœ°å€</span><br><span class="line">	AF_INET6 ä¸ä¸Šé¢ç±»ä¼¼ï¼Œä¸è¿‡æ˜¯æ¥ç”¨IPv6çš„åœ°å€</span><br><span class="line">type:</span><br><span class="line">	SOCK_STREAM è¿™ä¸ªåè®®æ˜¯æŒ‰ç…§é¡ºåºçš„ã€å¯é çš„ã€æ•°æ®å®Œæ•´çš„åŸºäºå­—èŠ‚æµçš„è¿æ¥ã€‚è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨æœ€å¤šçš„socketç±»å‹ï¼Œè¿™ä¸ªsocketæ˜¯ä½¿ç”¨TCPæ¥è¿›è¡Œä¼ è¾“ã€‚</span><br><span class="line">	SOCK_DGRAM è¿™ä¸ªåè®®æ˜¯æ— è¿æ¥çš„ã€å›ºå®šé•¿åº¦çš„ä¼ è¾“è°ƒç”¨ã€‚è¯¥åè®®æ˜¯ä¸å¯é çš„ï¼Œä½¿ç”¨UDPæ¥è¿›è¡Œå®ƒçš„è¿æ¥ã€‚</span><br><span class="line">protocol:</span><br><span class="line">	ä¼ 0 è¡¨ç¤ºä½¿ç”¨é»˜è®¤åè®®ã€‚</span><br><span class="line">è¿”å›å€¼ï¼š</span><br><span class="line">	æˆåŠŸï¼šè¿”å›æŒ‡å‘æ–°åˆ›å»ºçš„socketçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¤±è´¥ï¼šè¿”å›-1ï¼Œè®¾ç½®errno</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;sys&#x2F;types.h&gt; &#x2F;* See NOTES *&#x2F;</span><br><span class="line">#include &lt;sys&#x2F;socket.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æœåŠ¡å™¨ç»‘å®šå›ºå®šç½‘ç»œåœ°å€å’Œç«¯å£å·</span><br><span class="line">int bind(int sockfd, const struct sockaddr *addr, socklen_t addrlen);</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">  sockfdï¼šsocketæ–‡ä»¶æè¿°ç¬¦</span><br><span class="line">  addr: æ„é€ å‡ºIPåœ°å€åŠ ç«¯å£å·</span><br><span class="line">  addrlen: sizeof(addr)é•¿åº¦</span><br><span class="line">è¿”å›å€¼ï¼š</span><br><span class="line">	æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å›-1, è®¾ç½®errno</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;sys&#x2F;types.h&gt; &#x2F;* See NOTES *&#x2F;</span><br><span class="line">#include &lt;sys&#x2F;socket.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; åŒæ—¶å…è®¸å¤šå°‘ä¸ªå®¢æˆ·ç«¯å»ºç«‹è¿æ¥</span><br><span class="line">int listen(int sockfd, int backlog);</span><br><span class="line">sockfd:</span><br><span class="line">	socketæ–‡ä»¶æè¿°ç¬¦</span><br><span class="line">backlog:</span><br><span class="line">	æ’é˜Ÿå»ºç«‹3æ¬¡æ¡æ‰‹é˜Ÿåˆ—å’Œåˆšåˆšå»ºç«‹3æ¬¡æ¡æ‰‹é˜Ÿåˆ—çš„é“¾æ¥æ•°å’Œ</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;sys&#x2F;types.h&gt; 		&#x2F;* See NOTES *&#x2F;</span><br><span class="line">#include &lt;sys&#x2F;socket.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ä¸‰æ¬¡æ¡æ‰‹å®Œæˆåï¼ŒæœåŠ¡å™¨è°ƒç”¨accept()æ¥æ”¶è¿æ¥ï¼Œå¦‚æœæœåŠ¡å™¨è°ƒç”¨accept()æ—¶è¿˜æ²¡æœ‰å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œå°±é˜»å¡ç­‰å¾…ç›´åˆ°æœ‰å®¢æˆ·ç«¯è¿æ¥ä¸Šæ¥ã€‚</span><br><span class="line">int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);</span><br><span class="line">sockdf:</span><br><span class="line">	socketæ–‡ä»¶æè¿°ç¬¦</span><br><span class="line">addr:</span><br><span class="line">	ä¼ å‡ºå‚æ•°ï¼Œè¿”å›é“¾æ¥å®¢æˆ·ç«¯åœ°å€ä¿¡æ¯ï¼Œå«IPåœ°å€å’Œç«¯å£å·</span><br><span class="line">addrlen:</span><br><span class="line">	ä¼ å…¥ä¼ å‡ºå‚æ•°ï¼ˆå€¼-ç»“æœï¼‰,ä¼ å…¥sizeof(addr)å¤§å°ï¼Œå‡½æ•°è¿”å›æ—¶è¿”å›çœŸæ­£æ¥æ”¶åˆ°åœ°å€ç»“æ„ä½“çš„å¤§å°</span><br><span class="line">è¿”å›å€¼ï¼š</span><br><span class="line">	æˆåŠŸè¿”å›ä¸€ä¸ªæ–°çš„socketæ–‡ä»¶æè¿°ç¬¦ï¼Œç”¨äºå’Œå®¢æˆ·ç«¯é€šä¿¡ï¼Œå¤±è´¥è¿”å›-1ï¼Œè®¾ç½®errno</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;sys&#x2F;types.h&gt; 					&#x2F;* See NOTES *&#x2F;</span><br><span class="line">#include &lt;sys&#x2F;socket.h&gt;</span><br><span class="line"></span><br><span class="line">int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen);</span><br><span class="line">sockdf:</span><br><span class="line">	socketæ–‡ä»¶æè¿°ç¬¦</span><br><span class="line">addr:</span><br><span class="line">	ä¼ å…¥å‚æ•°ï¼ŒæŒ‡å®šæœåŠ¡å™¨ç«¯åœ°å€ä¿¡æ¯ï¼Œå«IPåœ°å€å’Œç«¯å£å·</span><br><span class="line">addrlen:</span><br><span class="line">	ä¼ å…¥å‚æ•°,ä¼ å…¥sizeof(addr)å¤§å°</span><br><span class="line">è¿”å›å€¼ï¼š</span><br><span class="line">	æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å›-1ï¼Œè®¾ç½®errno</span><br></pre></td></tr></table></figure>
<h1 id="TCP-IPåè®®"><a href="#TCP-IPåè®®" class="headerlink" title="TCP/IPåè®®"></a>TCP/IPåè®®</h1><p><img src="/images/32-linux-ç½‘ç»œç¼–ç¨‹/1.ç½‘ç»œä½“ç³»ç»“æ„.jpg" alt="&quot;1.ç½‘ç»œä½“ç³»ç»“æ„&quot;"></p>
<p>TCPåœ¨ä¸å¯é çš„IPå±‚ä¸Šæä¾›äº†ä¸€ä¸ªå¯é çš„ä¼ è¾“å±‚ï¼šä¼ è¾“æ–¹ä¼ é€’çš„æ•°æ®æŠ¥æ˜¯éœ€è¦æ¥æ”¶æ–¹ç¡®è®¤çš„ã€‚IPå±‚å°†æ•°æ®å‘é€ç»™æ¥æ”¶æ–¹è¿™ä¸€è¿‡ç¨‹æ˜¯ä¸å¯é çš„ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨æ•°æ®ä¸¢å¤±ã€‚ä¸€æ—¦æ•°æ®<br>ä¸¢å¤±ï¼Œæ¥æ”¶æ–¹ä¼šè¦æ±‚ä¼ è¾“æ–¹é‡ä¼ ä¸€ä»½ã€‚è¿™æ ·ä¼ è¾“æ–¹å°±è¿›è¡Œè¶…æ—¶é‡ä¼ ï¼Œå¦‚æœIPå±‚æˆåŠŸæŠŠæ•°æ®æŠ•é€’ç»™æ¥æ”¶æ–¹ï¼Œå°±ä¸åœ¨éœ€è¦è¶…æ—¶é‡ä¼ äº†ã€‚</p>
<p>TCPå¯é ï¼šç¡®è®¤å’Œé‡ä¼ æœºåˆ¶ï¼›æ•°æ®æ’åºï¼›æµé‡æ§åˆ¶ï¼›æ‹¥å¡æ§åˆ¶</p>
<h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><h3 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h3><p>TCPæä¾›é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚åè®®ã€‚é¢å‘è¿æ¥çš„é€šä¿¡è¿‡ç¨‹åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼šè¿æ¥å»ºç«‹ã€æ•°æ®ä¼ è¾“å’Œè¿æ¥é‡Šæ”¾ã€‚è¿æ¥å»ºç«‹åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´éœ€è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ã€‚åœ¨socketç¼–ç¨‹ä¸­ï¼Œä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ç”±å®¢æˆ·ç«¯æ‰§è¡Œconnectæ¥è§¦å‘ã€‚<br><img src="/images/32-linux-ç½‘ç»œç¼–ç¨‹/2.ä¸‰æ¬¡æ¡æ‰‹.png" alt="&quot;2.ä¸‰æ¬¡æ¡æ‰‹&quot;"></p>
<p><strong>ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·æœºçš„TCPé¦–å…ˆå‘æœåŠ¡å™¨çš„TCPå‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µã€‚è¿™ä¸ªç‰¹æ®Šçš„æŠ¥æ–‡æ®µä¸­<strong>ä¸å«åº”ç”¨å±‚æ•°æ®</strong>ï¼Œå…¶é¦–éƒ¨ä¸­çš„SYNåŒæ­¥ä½è¢«ç½®ä¸º1ã€‚å¦å¤–å®¢æˆ·æœºä¼šéšæœºé€‰æ‹©ä¸€ä¸ªèµ·å§‹åºå·seq=x(è¿æ¥è¯·æ±‚æŠ¥æ–‡ä¸æºå¸¦æ•°æ®ï¼Œä½†è¦æ¶ˆè€—æ‰ä¸€ä¸ªåºå·)ã€‚[SYN=1ï¼ŒACK=0ï¼Œseq=x]</li>
<li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨TCPæ”¶åˆ°è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µåï¼Œå¦‚åŒæ„å»ºç«‹è¿æ¥ï¼Œå°±å‘å®¢æˆ·æœºå‘å›ç¡®è®¤ï¼Œ<strong>å¹¶ä¸ºè¯¥TCPè¿æ¥åˆ†é…TCPç¼“å­˜å’Œå˜é‡</strong>ã€‚åœ¨ç¡®è®¤æŠ¥æ–‡æ®µä¸­ï¼ŒSYNå’ŒACKä½éƒ½è¢«ç½®ä¸º1ï¼Œç¡®è®¤å·å­—æ®µackçš„å€¼ä¸ºx+1ï¼Œå¹¶ä¸”æœåŠ¡å™¨éšæœºäº§ç”Ÿèµ·å§‹åºå·seq=y(ç¡®è®¤æŠ¥æ–‡ä¸æºå¸¦æ•°æ®ï¼Œä½†ä¹Ÿè¦æ¶ˆè€—æ‰ä¸€ä¸ªåºå·)ã€‚[SYN=1ï¼ŒACK=1ï¼Œack=x+1ï¼Œseq=y]ã€‚é€šè¿‡æœåŠ¡å™¨å‘è¿‡æ¥çš„x+1ç¡®è®¤å·å­—æ®µå¯ä»¥ç¡®è®¤æœåŠ¡å™¨æ”¶åˆ°äº†è¿æ¥è¯·æ±‚ï¼Œå› ä¸ºåªæœ‰æ”¶åˆ°äº†è¿æ¥è¯·æ±‚æ‰çŸ¥é“å®¢æˆ·æœºå‘é€ä¿¡æ¯åŒ…å«seq=xã€‚</li>
<li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå½“å®¢æˆ·æœºæ”¶åˆ°ç¡®è®¤æŠ¥æ–‡æ®µåï¼Œè¿˜è¦å‘æœåŠ¡å™¨ç»™å‡ºç¡®è®¤ï¼Œå¹¶ä¸”ä¹Ÿè¦<strong>ç»™è¯¥è¿æ¥åˆ†é…ç¼“å­˜å’Œå˜é‡</strong>ã€‚è¿™ä¸ªæŠ¥æ–‡æ®µçš„ACKæ ‡å¿—ä½è¢«ç½®ä¸º1ï¼Œåºå·å­—æ®µseqä¸ºx+1ï¼Œç¡®è®¤å·å­—æ®µack=y+1ã€‚è¯¥æŠ¥æ–‡æ®µå¯ä»¥æºå¸¦æ•°æ®ï¼Œå¦‚æœä¸æºå¸¦æ•°æ®åˆ™ä¸æ¶ˆè€—åºå·ã€‚[ACK=1ï¼Œseq=x+1ï¼Œack=y+1]</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>åºå·å­—æ®µseqï¼šå 4ä¸ªå­—èŠ‚ã€‚TCPæ˜¯é¢å‘å­—èŠ‚æµçš„(ä¹Ÿå°±æ˜¯TCPä¼ é€æ—¶æ˜¯æŒ‰ç…§ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚æ¥ä¼ é€çš„)ï¼Œæ‰€ä»¥TCPè¿æ¥ä¸­ä¼ é€çš„æ•°æ®æµä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚éƒ½ç¼–ä¸Šä¸€ä¸ªåºå·ã€‚åºå·å­—æ®µçš„å€¼åˆ™æŒ‡çš„æ˜¯æœ¬æŠ¥æ–‡æ®µæ‰€å‘é€çš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚</li>
<li>ç¡®è®¤å·å­—æ®µackï¼šå 4ä¸ªå­—èŠ‚ã€‚ç¡®è®¤å·å­—æ®µæ˜¯æœŸæœ›æ”¶åˆ°å¯¹æ–¹çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚è‹¥ç¡®è®¤å·=Nï¼Œè¡¨ç¤ºåˆ°åºå·N-1ä¸ºæ­¢çš„æ‰€æœ‰æ•°æ®éƒ½å·²æ­£ç¡®æ”¶åˆ°ã€‚</li>
<li>ç¡®è®¤ä½ACKï¼šåªæœ‰å½“ACK=1æ—¶ç¡®è®¤å¥½å­—æ®µæ‰æœ‰æ•ˆã€‚å½“ACK=0æ—¶ï¼Œç¡®è®¤å·æ— æ•ˆã€‚TCPè§„å®šï¼Œåœ¨è¿æ¥å»ºç«‹åæ‰€æœ‰ä¼ é€çš„æŠ¥æ–‡æ®µéƒ½å¿…é¡»æŠŠACKç½®1ã€‚</li>
<li>åŒæ­¥ä½SYNï¼šåŒæ­¥SYN=1è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æˆ–è¿æ¥æ¥æ”¶æŠ¥æ–‡ã€‚å½“SYN=1ï¼ŒACK=0æ—¶ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡ï¼Œå¯¹æ–¹è‹¥åŒæ„å»ºç«‹è¿æ¥ï¼Œåˆ™åœ¨å“åº”æŠ¥æ–‡ä¸­ä½¿ç”¨SYN=1ï¼ŒACK=1ã€‚</li>
</ul>
<h3 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h3><p><img src="/images/32-linux-ç½‘ç»œç¼–ç¨‹/3.å››æ¬¡æŒ¥æ‰‹.png" alt="&quot;3.å››æ¬¡æŒ¥æ‰‹&quot;"></p>
<p><strong>å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·æœºæ‰“ç®—å…³é—­è¿æ¥ï¼Œå°±å‘å…¶TCPå‘é€ä¸€ä¸ªè¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼Œå¹¶åœæ­¢å†å‘é€æ•°æ®ï¼Œä¸»åŠ¨å…³é—­TCPè¿æ¥ï¼Œè¯¥æŠ¥æ–‡æ®µçš„FINæ ‡å¿—ä½è¢«ç½®1ï¼Œseq=uï¼Œå®ƒç­‰äºå‰é¢å·²ä¼ é€è¿‡çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ 1(FINæŠ¥æ–‡æ®µå³ä½¿ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿè¦æ¶ˆè€—æ‰ä¸€ä¸ªåºå·)ã€‚TCPæ˜¯å…¨åŒå·¥çš„ï¼Œå³å¯ä»¥æƒ³è±¡æˆä¸€æ¡TCPè¿æ¥ä¸Šæœ‰ä¸¤æ¡æ•°æ®é€šè·¯ã€‚å½“å‘é€FINæŠ¥æ–‡æ—¶ï¼Œå‘é€FINçš„ä¸€æ®µå°±ä¸èƒ½å†å‘é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å…³é—­äº†å…¶ä¸­ä¸€æ¡æ•°æ®é€šè·¯ï¼Œä½†å¯¹æ–¹è¿˜å¯ä»¥å‘é€æ•°æ®ã€‚</li>
<li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µåå³å‘å‡ºç¡®è®¤ï¼Œç¡®è®¤å·ack=u+1ï¼Œè€Œè¿™ä¸ªæŠ¥æ–‡æ®µè‡ªå·±çš„åºå·æ˜¯vï¼Œç­‰äºå®ƒå‰é¢å·²ä¼ é€è¿‡çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ 1ã€‚æ­¤æ—¶ï¼Œä»å®¢æˆ·æœºåˆ°æœåŠ¡å™¨è¿™ä¸ªæ–¹å‘çš„è¿æ¥å°±é‡Šæ”¾äº†ï¼ŒTCPè¿æ¥å¤„äºåŠå…³é—­çŠ¶æ€ã€‚ä½†æœåŠ¡å™¨è‹¥å‘é€æ•°æ®ï¼Œå®¢æˆ·ç«¯ä»è¦æ¥æ”¶ï¼Œå³ä»æœåŠ¡å™¨åˆ°å®¢æˆ·æœºè¿™ä¸ªæ–¹å‘çš„è¿æ¥å¹¶æœªå…³é—­ã€‚</li>
<li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šè‹¥æœåŠ¡å™¨å·²ç»æ²¡æœ‰è¦å‘å®¢æˆ·æœºå‘é€çš„æ•°æ®ï¼Œå°±é€šçŸ¥TCPé‡Šæ”¾è¿æ¥ï¼Œæ­¤æ—¶å…¶å‘å‡ºFIN=1çš„è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µã€‚</li>
<li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·æœºæ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µåï¼Œå¿…é¡»å‘å‡ºç¡®è®¤ã€‚åœ¨ç¡®è®¤æŠ¥æ–‡æ®µä¸­ï¼ŒACKå­—æ®µè¢«ç½®ä¸º1ï¼Œç¡®è®¤å¥½ack=w+1ï¼Œåºå·seq=u+1ã€‚æ­¤æ—¶TCPè¿æ¥è¿˜æ²¡æœ‰é‡Šæ”¾æ‰ï¼Œå¿…é¡»ç»è¿‡æ—¶é—´ç­‰å¾…è®¡æ—¶å™¨è®¾ç½®çš„æ—¶é—´2MSLåï¼ŒAæ‰è¿›å…¥è¿æ¥å…³é—­çŠ¶æ€ã€‚</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>ç»ˆæ­¢ä½FINï¼šç”¨æ¥é‡Šæ”¾ä¸€ä¸ªè¿æ¥ã€‚FIN=1è¡¨æ˜æ­¤æŠ¥æ–‡æ®µçš„å‘é€æ–¹çš„æ•°æ®å·²å‘é€å®Œæ¯•ï¼Œå¹¶è¦æ±‚é‡Šæ”¾ä¼ è¾“è¿æ¥ã€‚</li>
</ul>
<h3 id="ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"><a href="#ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"></a>ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</h3><p><strong>ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹</strong>ï¼š<br>é¦–å…ˆï¼ŒTCPæ˜¯é¢å‘è¿æ¥çš„ã€‚æ­£å¸¸æ¥è¯´å»ºç«‹è¿æ¥éœ€è¦å››æ­¥ï¼š<br>ç¬¬ä¸€æ­¥ï¼šå®¢æˆ·æœºå‘æœåŠ¡å™¨å‘é€è¿æ¥è¯·æ±‚ã€‚[SYN=1ï¼ŒACK=0ï¼Œseq=x]<br>ç¬¬äºŒæ­¥ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·æœºçš„è¿æ¥è¯·æ±‚ï¼Œå‘å›å“åº”ã€‚[SYN=1ï¼ŒACK=1ï¼Œack=x+1]<br>ç¬¬ä¸‰æ­¥ï¼šæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€è¿æ¥è¯·æ±‚ã€‚[SYN=1ï¼ŒACK=0ï¼Œseq=y]<br>ç¬¬å››æ­¥ï¼šå®¢æˆ·æœºæ¥æ”¶åˆ°æœåŠ¡å™¨çš„è¿æ¥è¯·æ±‚ï¼Œå‘å›å“åº”ã€‚[SYN=1ï¼ŒACK=1ï¼Œack=y+1]</p>
<p>æ˜¾ç„¶ï¼Œç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥å…¶å®æ˜¯å¯ä»¥åˆå¹¶çš„ã€‚æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·æœºçš„è¿æ¥è¯·æ±‚ï¼Œå‘å›å“åº”çš„åŒæ—¶å¯ä»¥å‘å®¢æˆ·æœºè¯·æ±‚è¿æ¥ã€‚<br>åŒæ—¶ï¼Œç¬¬å››æ­¥ä¸­SYN=1åœ¨ç¬¬ä¸‰æ¬¡æ¡æ‰‹ä¸­çœå»äº†ã€‚åŸå› åœ¨äºç¬¬å››æ­¥å®¢æˆ·æœºæ¥æ”¶çš„æœåŠ¡å™¨çš„è¿æ¥è¯·æ±‚åï¼Œæ­¤æ—¶å®¢æˆ·æœºå’ŒæœåŠ¡å™¨éƒ½å·²ç»å‡†å¤‡å¥½äº†ã€‚æ‰€ä»¥å®¢æˆ·æœºå¯ä»¥åœ¨è¿™ä¸ªå“åº”ä¸­å¼€å§‹ä¼ è¾“æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ è¾“æ•°æ®ã€‚å› ä¸ºåŒæ­¥SYN=1è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æˆ–è¿æ¥æ¥æ”¶æŠ¥æ–‡ï¼Œæ‰€ä»¥ç¬¬ä¸‰æ¬¡æ¡æ‰‹SYN=0ã€‚ç»¼ä¸Šä¸‰æ¬¡æ¡æ‰‹æ€»ç»“å¦‚ä¸‹ï¼š<br>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·æœºå‘æœåŠ¡å™¨å‘é€è¿æ¥è¯·æ±‚ã€‚[SYN=1ï¼ŒACK=0ï¼Œseq=x]<br>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·æœºçš„è¿æ¥è¯·æ±‚ï¼Œå‘å›å“åº”å¹¶å‘é€è¿æ¥è¯·æ±‚ã€‚[SYN=1ï¼ŒACK=1ï¼Œack=x+1ï¼Œseq=y]<br>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·æœºæ¥æ”¶åˆ°æœåŠ¡å™¨çš„è¿æ¥è¯·æ±‚ï¼Œå‘å›å“åº”(å¯ä»¥æºå¸¦æ•°æ®ä¹Ÿå¯ä»¥ä¸æºå¸¦æ•°æ®)ã€‚[SYN=0ï¼ŒACK=1ï¼Œack=y+1ï¼Œseq=x+1]</p>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·æœºæ‰“ç®—å…³é—­è¿æ¥ã€‚[FIN=1ï¼Œseq=u]</li>
<li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µåå³å‘å‡ºç¡®è®¤ã€‚[ACK=1ï¼Œseq=vï¼Œack=u+1]</li>
<li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨æ‰“ç®—å…³é—­è¿æ¥ã€‚[FIN=1ï¼ŒACK=1ï¼Œseq=wï¼Œack=u+1]</li>
<li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·æœºæ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µåï¼Œå¿…é¡»å‘å‡ºç¡®è®¤ã€‚[ACK=1ï¼Œseq=u+1ï¼Œack=w+1]</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li><p>ä¸ºä»€ä¹ˆè¦è¿›è¡Œå››æ¬¡æŒ¥æ‰‹ï¼Ÿ<br>å®¢æˆ·æœºå…³é—­æœåŠ¡å™¨è¿æ¥å’ŒæœåŠ¡å™¨å…³é—­å®¢æˆ·æœºè¿æ¥ä¹‹é—´å¯èƒ½è¿˜æœ‰æ•°æ®ä¼ è¾“ã€‚</p>
</li>
<li><p>å¦‚ä½•ä¿è¯æ¯æ¬¡å‘é€çš„æŠ¥æ–‡æ®µéƒ½è¢«å¯¹æ–¹æˆåŠŸå¤„ç†äº†å‘¢ï¼Ÿ<br>è¶…æ—¶é‡ä¼ æœºåˆ¶ã€‚å³å‘é€æŠ¥æ–‡æ®µåï¼Œå¦‚æœæ²¡æœ‰æ¥æ”¶åˆ°å¯¹æ–¹çš„å“åº”ï¼Œå°±ä¼šé‡æ–°å‘é€æŠ¥æ–‡æ®µã€‚ä»å¦ä¸€ä¸ªè§’åº¦è®²ï¼Œè¿™ä¸ªèµ„æºä¹Ÿä¼šä¿ç•™ä¸€æ®µæ—¶é—´ã€‚</p>
</li>
<li><p>å¦‚ä½•ä¿è¯ç¬¬å››æ¬¡æŒ¥æ‰‹æœåŠ¡å™¨æˆåŠŸæ¥æ”¶åˆ°äº†å‘¢ï¼Ÿ<br>æœåŠ¡å™¨æ‰“ç®—å…³é—­è¿æ¥çš„å¿…è¦æ¡ä»¶æ˜¯ï¼šå®¢æˆ·æœºå›åº”å¯ä»¥å…³é—­è¿æ¥å¹¶æˆåŠŸè¢«æœåŠ¡å™¨æ¥å—åˆ°ã€‚<br>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹æœåŠ¡å™¨å‘é€çš„æŠ¥æ–‡æ®µå¯èƒ½å‡ºç°ä¸‰ç§æƒ…å†µï¼šå®¢æˆ·ç«¯æˆåŠŸæ¥æ”¶é‡Šæ”¾è¿æ¥è¯·æ±‚ï¼Œç¬¬å››æ¬¡æŒ¥æ‰‹çš„å“åº”æŠ¥æ–‡æ®µè¢«æœåŠ¡å™¨æˆåŠŸæ¥æ”¶ã€‚æ­¤æ—¶å…³é—­è¿æ¥ï¼›å®¢æˆ·ç«¯æˆåŠŸæ¥æ”¶é‡Šæ”¾è¿æ¥è¯·æ±‚ï¼Œç¬¬å››æ¬¡æŒ¥æ‰‹çš„å“åº”æŠ¥æ–‡æ®µå› ç½‘ç»œé—®é¢˜æ²¡æœ‰è¢«æœåŠ¡å™¨æ¥æ”¶ã€‚æ­¤æ—¶æœåŠ¡å™¨è¶…æ—¶é‡ä¼ ï¼›å®¢æˆ·ç«¯æ²¡æœ‰æ¥æ”¶åˆ°é‡Šæ”¾è¿æ¥è¯·æ±‚ã€‚æ­¤æ—¶æœåŠ¡å™¨è¶…æ—¶é‡ä¼ ã€‚ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œç¬¬å››æ¬¡æŒ¥æ‰‹ä¹‹åï¼Œå®¢æˆ·ç«¯ä¸ä¼šå‘æœåŠ¡å™¨å‘é€æŠ¥æ–‡æ®µã€‚æ­¤æ—¶å¦‚æœæœåŠ¡å™¨æ²¡æœ‰æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„æŠ¥æ–‡æ®µï¼Œå°±ä¼šè¶…æ—¶é‡ä¼ ã€‚æ‰€ä»¥å®¢æˆ·ç«¯éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´çš„2å€(2MSLï¼ŒMaximum Segment Lifetime)ã€‚å¦‚æœåœ¨è¿™æ®µæ—¶é—´ä¸­æ²¡æœ‰å†æ¬¡æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å…³é—­è¿æ¥è¯·æ±‚ï¼Œå°±è¯´æ˜æœåŠ¡å™¨æ¥æ”¶åˆ°äº†å®¢æˆ·æœºçš„å“åº”æŠ¥æ–‡ã€‚</p>
</li>
<li><p>ä¸ºä»€ä¹ˆä¸€èˆ¬éƒ½æ˜¯å®¢æˆ·ç«¯å…ˆæŒ¥æ‰‹ï¼Ÿ<br>å¦‚æœæ˜¯æœåŠ¡å™¨å…ˆç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼Œåˆ™å®¢æˆ·ç«¯è¿›è¡Œç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ã€‚ç¬¬å››æ¬¡æœåŠ¡å™¨å“åº”ï¼Œä¸ºäº†ä¿è¯å®¢æˆ·ç«¯æ”¶åˆ°è¿™ä¸ªå“åº”ï¼ŒæœåŠ¡å™¨éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚åœ¨è¿™æ®µæ—¶é—´æœåŠ¡å™¨çš„èµ„æºå°±ä¸ä¼šé‡Šæ”¾ï¼ŒåŒæ—¶æœåŠ¡å™¨ç”±äºç»‘å®šäº†ç«¯å£ï¼Œåˆ™è¿™æ®µæ—¶é—´è¯¥ç«¯å£å°±ä¸èƒ½è¢«ä½¿ç”¨äº†ã€‚æ­¤æ—¶ï¼Œå¦‚æœé‡æ–°è¿è¡ŒæœåŠ¡ç«¯ç¨‹åºï¼ŒæœåŠ¡å™¨ç¨‹åºå°±ä¼šå‡ºç°å¥—æ¥å­—å ç”¨çš„é—®é¢˜ã€‚<br>è€Œå®¢æˆ·ç«¯æ˜¯ä¸ç»‘å®šå…·ä½“ç«¯å£çš„ï¼Œå¦‚æœæ˜¯å®¢æˆ·ç«¯å…ˆæŒ¥æ‰‹ï¼Œè¿™æ¬¡è¿æ¥çš„ç«¯å£å³ä½¿å› ä¸º2MSLçš„èµ„æºä¿ç•™æ—¶é—´ä¸èƒ½ä½¿ç”¨ã€‚å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ç”¨å…¶ä»–çš„ç«¯å£ä¸æœåŠ¡å™¨è¿›è¡Œè¿æ¥ã€‚</p>
</li>
</ul>
<h2 id="linuxç½‘ç»œå¥—æ¥å­—"><a href="#linuxç½‘ç»œå¥—æ¥å­—" class="headerlink" title="linuxç½‘ç»œå¥—æ¥å­—"></a>linuxç½‘ç»œå¥—æ¥å­—</h2><p><img src="/images/32-linux-ç½‘ç»œç¼–ç¨‹/4.linuxç½‘ç»œé€šä¿¡.png" alt="&quot;4.linuxç½‘ç»œé€šä¿¡&quot;"></p>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://www.jianshu.com/p/6e9e4156ece3" target="_blank" rel="noopener">ä¸€ç¯‡æ–‡ç« å¸¦ä½ è¯¦è§£ HTTP åè®®ï¼ˆç½‘ç»œåè®®ç¯‡ä¸€ï¼‰</a><br><a href="https://www.jianshu.com/p/9f3e879a4c9c" target="_blank" rel="noopener">ä¸€ç¯‡æ–‡ç« å¸¦ä½ ç†Ÿæ‚‰ TCP/IP åè®®ï¼ˆç½‘ç»œåè®®ç¯‡äºŒï¼‰</a></p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>35-linux-çº¿ç¨‹</title>
    <url>/2020/04/02/35-linux-%E7%BA%BF%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><a id="more"></a>
<h1 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h1><p>Linuxä¸‹çš„çº¿ç¨‹æœ¬è´¨ä¸Šæ˜¯è½»é‡çº§çš„è¿›ç¨‹(Light-Weight Process, LWP)ã€‚çº¿ç¨‹å·å’Œçº¿ç¨‹IDæ˜¯æœ‰åŒºåˆ«çš„ã€‚çº¿ç¨‹å·(LWP)ç»™å†…æ ¸çœ‹çš„ï¼Œçº¿ç¨‹IDç»™ç”¨æˆ·çœ‹çš„ã€‚<br>æ‰¾åˆ°ç¨‹åºå¯¹åº”çš„è¿›ç¨‹IDï¼Œ<code>ps -Lf pid</code>æŸ¥çœ‹çº¿ç¨‹çš„LWPå·ã€‚CPUæ ¹æ®çº¿ç¨‹çš„LWPå·è°ƒç”¨çº¿ç¨‹ã€‚</p>
<ul>
<li>è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</li>
</ul>
<ol>
<li>Linuxçš„è¿›ç¨‹æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œæ‹¥æœ‰PCB;Linuxçš„çº¿ç¨‹ä¹‹é—´å…±äº«åœ°å€ç©ºé—´ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰PCBã€‚ä»å†…æ ¸çœ‹è¿›ç¨‹å’Œçº¿ç¨‹æ˜¯ä¸€æ ·çš„ã€‚</li>
<li>Linuxçš„è¿›ç¨‹æ˜¯æœ€å°èµ„æºåˆ†é…å•å…ƒ;Linuxçº¿ç¨‹æ˜¯æœ€å°æ‰§è¡Œå•å…ƒã€‚</li>
</ol>
<p>çº¿ç¨‹å…±äº«èµ„æºï¼šæ–‡ä»¶æè¿°ç¬¦è¡¨ã€æ¯ç§ä¿¡å·çš„å¤„ç†æ–¹å¼ã€å½“å‰å·¥ä½œç›®å½•ã€ç”¨æˆ·IDå’Œç»„IDã€å†…å­˜åœ°å€ç©ºé—´(.text/.data/.bss/heap/åŠ¨æ€åº“åŠ è½½åŒº/ç¯å¢ƒå˜é‡/å‘½ä»¤è¡Œå‚æ•°)<br>çº¿ç¨‹éå…±äº«èµ„æºï¼šçº¿ç¨‹idã€å¤„ç†å™¨ç°åœºå’Œæ ˆæŒ‡é’ˆ(å†…æ ¸æ ˆ)ã€ç‹¬ç«‹çš„æ ˆç©ºé—´(ç”¨æˆ·æ ˆ)ã€.errnoå˜é‡ã€ä¿¡å·å±è”½å­—ã€è°ƒåº¦ä¼˜å…ˆçº§</p>
<p>çˆ¶å­è¿›ç¨‹ä¹‹é—´å…±äº«èµ„æºï¼šå…¨å±€å˜é‡ã€.dataã€.textã€æ ˆã€å †ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·IDã€å®¿ä¸»ç›®å½•ã€è¿›ç¨‹å·¥ä½œç›®å½•ã€ä¿¡å·å¤„ç†æ–¹å¼<br>çˆ¶å­è¿›ç¨‹ä¹‹é—´ä¸å…±äº«èµ„æºï¼šè¿›ç¨‹IDã€forkè¿”å›å€¼ã€è¿›ç¨‹è¿è¡Œæ—¶é—´ã€é—¹é’Ÿ(å®šæ—¶å™¨)ã€æœªå†³ä¿¡å·é›†</p>
<h2 id="çº¿ç¨‹åˆ›å»ºã€é€€å‡ºå’Œå›æ”¶"><a href="#çº¿ç¨‹åˆ›å»ºã€é€€å‡ºå’Œå›æ”¶" class="headerlink" title="çº¿ç¨‹åˆ›å»ºã€é€€å‡ºå’Œå›æ”¶"></a>çº¿ç¨‹åˆ›å»ºã€é€€å‡ºå’Œå›æ”¶</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; è·å–çº¿ç¨‹ID</span><br><span class="line">pthread_t pthread_self(void);	</span><br><span class="line">è¿”å›å€¼ï¼šçº¿ç¨‹IDï¼špthread_tç±»å‹ï¼Œæœ¬è´¨ï¼šåœ¨Linuxä¸‹ä¸ºæ— ç¬¦å·æ•´æ•°(%lu)ã€‚çº¿ç¨‹IDæ˜¯ä¸€ä¸ªè¿›ç¨‹å†…éƒ¨çš„è¯†åˆ«ä¸åŒçº¿ç¨‹çš„æ ‡å¿—ã€‚(ä¸¤ä¸ªè¿›ç¨‹é—´ï¼Œçº¿ç¨‹IDå…è®¸ç›¸åŒ)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; çº¿ç¨‹åˆ›å»º</span><br><span class="line">int pthread_create(pthread_t *thread, const pthread_attr_t *attr, void *(*start_routine) (void *), void *arg);</span><br><span class="line">å‚æ•°ï¼š	</span><br><span class="line">  thread: ä¼ å‡ºå‚æ•°ï¼Œè¡¨ç¤ºæ–°åˆ›å»ºçš„å­çº¿ç¨‹id(pthread_tæ˜¯æ— ç¬¦å·é•¿æ•´å‹) </span><br><span class="line">	attr: é€šå¸¸ä¼ NULLï¼Œè¡¨ç¤ºä½¿ç”¨çº¿ç¨‹é»˜è®¤å±æ€§(çº¿ç¨‹ä¸åˆ†ç¦»ï¼Œå­çº¿ç¨‹è¦çˆ¶çº¿ç¨‹å›æ”¶)ã€‚è®¾ç½®è¯¥å‚æ•°å¯ä»¥å®ç°çº¿ç¨‹åˆ†ç¦»ã€‚</span><br><span class="line">	start_routine: å‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘çº¿ç¨‹ä¸»å‡½æ•°(çº¿ç¨‹ä½“)ï¼Œè¯¥å‡½æ•°è¿è¡Œç»“æŸï¼Œåˆ™çº¿ç¨‹ç»“æŸã€‚</span><br><span class="line">	arg: çº¿ç¨‹ä¸»å‡½æ•°æ‰§è¡ŒæœŸé—´æ‰€ä½¿ç”¨çš„å‚æ•°ã€‚</span><br><span class="line">è¿”å›å€¼ï¼š</span><br><span class="line">  æˆåŠŸï¼š0ï¼›	å¤±è´¥ï¼šé”™è¯¯å·	-----&gt;Linuxç¯å¢ƒä¸‹ï¼Œæ‰€æœ‰çº¿ç¨‹ç‰¹ç‚¹ï¼Œå¤±è´¥å‡ç›´æ¥è¿”å›é”™è¯¯å·ã€‚</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; çº¿ç¨‹é€€å‡º</span><br><span class="line">void pthread_exit(void *retval);	</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">  retval: è¡¨ç¤ºçº¿ç¨‹é€€å‡ºçŠ¶æ€ï¼Œé€šå¸¸ä¼ NULL</span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line">  çº¿ç¨‹ä¸­ä¸å¯ä»¥ä½¿ç”¨exitå‡½æ•°é€€å‡ºçº¿ç¨‹,exitå‡½æ•°æ—¶é€€å‡ºè¿›ç¨‹çš„ã€‚ä½¿ç”¨exitå‡½æ•°ä¼šå¯¼è‡´æ‰€æœ‰çº¿ç¨‹éƒ½é€€å‡ºã€‚</span><br><span class="line">  returnï¼šè¿”å›åˆ°è°ƒç”¨å‡½æ•°(åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œreturnå’Œexitçš„æ•ˆæœä¸€æ ·)</span><br><span class="line">	pthread_exit()ï¼šå°†è°ƒç”¨è¯¥å‡½æ•°çš„çº¿ç¨‹é€€å‡º(ä¸ç®¡æ˜¯åœ¨çº¿ç¨‹ä¸­çš„å“ªä¸ªå‡½æ•°ï¼Œä¸€æ—¦è°ƒç”¨è¿™ä¸ªå‡½æ•°å°±ä¼šé€€å‡ºçº¿ç¨‹)			</span><br><span class="line">	exit: å°†è¿›ç¨‹é€€å‡º</span><br><span class="line"></span><br><span class="line">int pthread_join(pthread_t thread, void **retval); æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼šé”™è¯¯å·</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">  threadï¼šè¦å›æ”¶çš„å­è¿›ç¨‹çš„çº¿ç¨‹ID(æ³¨æ„ï¼šä¸æ˜¯æŒ‡é’ˆ)</span><br><span class="line">  retvalï¼šå­˜å‚¨çº¿ç¨‹ç»“æŸçŠ¶æ€</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è°ƒç”¨pthread_create()åˆ›å»ºæ–°çš„çº¿ç¨‹åï¼Œå½“å‰çº¿ç¨‹ä»pthread_create()è¿”å›ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œè€Œæ–°çš„çº¿ç¨‹æ‰€æ‰§è¡Œçš„ä»£ç ç”±æˆ‘ä»¬ä¼ ç»™pthread_createçš„å‡½æ•°æŒ‡é’ˆstart_routineå†³å®šã€‚start_routineå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯é€šè¿‡pthread_createçš„argå‚æ•°ä¼ é€’ç»™å®ƒçš„ï¼Œè¯¥å‚æ•°çš„ç±»å‹ä¸ºvoid <em>ï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‰ä»€ä¹ˆç±»å‹è§£é‡Šç”±è°ƒç”¨è€…è‡ªå·±å®šä¹‰ã€‚start_routineçš„è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯void </em>ï¼Œè¿™ä¸ªæŒ‡é’ˆçš„å«ä¹‰åŒæ ·ç”±è°ƒç”¨è€…è‡ªå·±å®šä¹‰ã€‚start_routineè¿”å›æ—¶ï¼Œè¿™ä¸ªçº¿ç¨‹å°±é€€å‡ºäº†ï¼Œå…¶å®ƒçº¿ç¨‹å¯ä»¥è°ƒç”¨pthread_joinå¾—åˆ°start_routineçš„è¿”å›å€¼ã€‚</p>
<p>pthread_createæˆåŠŸè¿”å›åï¼Œæ–°åˆ›å»ºçš„çº¿ç¨‹çš„idè¢«å¡«å†™åˆ°threadå‚æ•°æ‰€æŒ‡å‘çš„å†…å­˜å•å…ƒã€‚æˆ‘ä»¬çŸ¥é“è¿›ç¨‹idçš„ç±»å‹æ˜¯pid_tï¼Œæ¯ä¸ªè¿›ç¨‹çš„idåœ¨æ•´ä¸ªç³»ç»Ÿä¸­æ˜¯å”¯ä¸€çš„ï¼Œè°ƒç”¨getpid()å¯ä»¥è·å¾—å½“å‰è¿›ç¨‹çš„idã€‚çº¿ç¨‹idçš„ç±»å‹æ˜¯thread_tï¼Œå®ƒåªåœ¨å½“å‰è¿›ç¨‹ä¸­ä¿è¯æ˜¯å”¯ä¸€çš„ï¼Œè°ƒç”¨pthread_self()å¯ä»¥è·å¾—å½“å‰çº¿ç¨‹çš„idã€‚</p>
<ul>
<li><p>return/exit/pthread_exit</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">void *tfn(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line"></span><br><span class="line">	i &#x3D; (int)arg; &#x2F;&#x2F; å¼ºè½¬</span><br><span class="line">	if (i &#x3D;&#x3D; 2)</span><br><span class="line">		pthread_exit(NULL); &#x2F;&#x2F; é€€å‡ºçº¿ç¨‹</span><br><span class="line"></span><br><span class="line">	sleep(i);	 &#x2F;&#x2F; é€šè¿‡iæ¥åŒºåˆ«æ¯ä¸ªçº¿ç¨‹</span><br><span class="line">	printf(&quot;I&#39;m %dth thread, Thread_ID &#x3D; %lu\n&quot;, i+1, pthread_self());</span><br><span class="line"></span><br><span class="line">	return NULL;  &#x2F;&#x2F; è¿”å›åˆ°è°ƒç”¨å‡½æ•°,å’Œpthread_exitä½œç”¨ä¸€æ ·,è¿”å›å€¼å¯ä»¥ç”¨pthread_joinæ¥æ”¶</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">	int n &#x3D; 5, i;</span><br><span class="line">	pthread_t tid;</span><br><span class="line"></span><br><span class="line">	if (argc &#x3D;&#x3D; 2)</span><br><span class="line">		n &#x3D; atoi(argv[1]);</span><br><span class="line"></span><br><span class="line">	for (i&#x3D;0; i&lt;n; i++) &#123;</span><br><span class="line">		pthread_create(&amp;tid, NULL, tfn, (void *)i);	&#x2F;&#x2F; ä¸èƒ½ç”¨æŒ‡é’ˆ,è¿™æ ·æŒ‡å‘ä¸»çº¿ç¨‹çš„æ ˆç©ºé—´</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  pthread_exit(NULL); &#x2F;&#x2F; ä¸»çº¿ç¨‹é€€å‡ºå¯¹å­çº¿ç¨‹æ²¡æœ‰å½±å“</span><br><span class="line">&#x2F;&#x2F;	sleep(n);</span><br><span class="line">	printf(&quot;I am main, I&#39;m a thread!\n&quot; </span><br><span class="line">			&quot;main_thread_ID &#x3D; %lu\n&quot;, pthread_self());</span><br><span class="line"></span><br><span class="line">	return 0; &#x2F;&#x2F; ä¸»çº¿ç¨‹ä¸­returnå’Œexitçš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½ä¼šä½¿æ‰€æœ‰çº¿ç¨‹é€€å‡º</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>çº¿ç¨‹å›æ”¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">typedef struct&#123;</span><br><span class="line">	int a;</span><br><span class="line">	int b;</span><br><span class="line">&#125; exit_t;</span><br><span class="line"></span><br><span class="line">void *tfn(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">	exit_t *ret;</span><br><span class="line">	ret &#x3D; malloc(sizeof(exit_t)); </span><br><span class="line"></span><br><span class="line">	ret-&gt;a &#x3D; 100;</span><br><span class="line">	ret-&gt;b &#x3D; 300;</span><br><span class="line">	pthread_exit((void *)ret);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	pthread_t tid;</span><br><span class="line">	exit_t *retval;</span><br><span class="line"></span><br><span class="line">	pthread_create(&amp;tid, NULL, tfn, NULL);</span><br><span class="line">	&#x2F;&#x2F; è°ƒç”¨pthread_joinå¯ä»¥è·å–çº¿ç¨‹çš„é€€å‡ºçŠ¶æ€</span><br><span class="line">	pthread_join(tid, (void **)&amp;retval);</span><br><span class="line">	printf(&quot;a &#x3D; %d, b &#x3D; %d \n&quot;, retval-&gt;a, retval-&gt;b);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="çº¿ç¨‹åˆ†ç¦»"><a href="#çº¿ç¨‹åˆ†ç¦»" class="headerlink" title="çº¿ç¨‹åˆ†ç¦»"></a>çº¿ç¨‹åˆ†ç¦»</h2><p>çº¿ç¨‹åˆ†ç¦»çŠ¶æ€ï¼šæŒ‡å®šè¯¥çŠ¶æ€ï¼Œçº¿ç¨‹ä¸»åŠ¨ä¸ä¸»æ§çº¿ç¨‹æ–­å¼€å…³ç³»ã€‚çº¿ç¨‹ç»“æŸåï¼Œå…¶é€€å‡ºçŠ¶æ€ä¸ç”±å…¶ä»–çº¿ç¨‹è·å–ï¼Œè€Œç›´æ¥è‡ªå·±è‡ªåŠ¨é‡Šæ”¾ã€‚çº¿ç¨‹åˆ†ç¦»æœ‰ä¸¤ç§æ–¹æ³•ï¼šè°ƒç”¨pthread_detachå‡½æ•°<br>æˆ–è€…é€šè¿‡pthread_createçš„çº¿ç¨‹å±æ€§å‚æ•°attræ¥è®¾ç½®çº¿ç¨‹åˆ†ç¦»ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œçº¿ç¨‹ç»ˆæ­¢åï¼Œå…¶ç»ˆæ­¢çŠ¶æ€ä¸€ç›´ä¿ç•™åˆ°å…¶å®ƒçº¿ç¨‹è°ƒç”¨pthread_joinè·å–å®ƒçš„çŠ¶æ€ä¸ºæ­¢ã€‚ä½†æ˜¯çº¿ç¨‹è¢«ç½®ä¸ºdetachçŠ¶æ€æ—¶ï¼Œçº¿ç¨‹ä¸€æ—¦ç»ˆæ­¢å°±ç«‹åˆ»å›æ”¶å®ƒå ç”¨çš„æ‰€æœ‰èµ„æºï¼Œè€Œä¸ä¿ç•™ç»ˆæ­¢çŠ¶æ€ã€‚ä¸èƒ½å¯¹ä¸€ä¸ªå·²ç»å¤„äºdetachçŠ¶æ€çš„çº¿ç¨‹è°ƒç”¨pthread_joinï¼Œè¿™æ ·çš„è°ƒç”¨å°†è¿”å›EINVALã€‚å¦‚æœå·²ç»å¯¹ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº†pthread_detachå°±ä¸èƒ½å†è°ƒç”¨pthread_joinäº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; æ€æ­»(å–æ¶ˆçº¿ç¨‹) çº¿ç¨‹å¯ä»¥è°ƒç”¨è¯¥å‡½æ•°å¯ä»¥ç»ˆæ­¢è‡ªå·±ä¹Ÿå¯ä»¥ç»ˆæ­¢ç»Ÿä¸€è¿›ç¨‹ä¸­çš„å¦ä¸€ä¸ªçº¿ç¨‹</span><br><span class="line">int pthread_cancel(pthread_t thread);	æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼šé”™è¯¯å· </span><br><span class="line"></span><br><span class="line">çº¿ç¨‹çš„å–æ¶ˆå¹¶ä¸æ˜¯å®æ—¶çš„ï¼Œæœ‰ä¸€å®šçš„å»¶æ—¶ã€‚éœ€è¦ç­‰å¾…çº¿ç¨‹åˆ°è¾¾æŸä¸ªå–æ¶ˆç‚¹(æ£€æŸ¥ç‚¹)ã€‚</span><br><span class="line">å–æ¶ˆç‚¹ï¼šæ˜¯çº¿ç¨‹æ£€æŸ¥æ˜¯å¦è¢«å–æ¶ˆï¼Œå¹¶æŒ‰è¯·æ±‚è¿›è¡ŒåŠ¨ä½œçš„ä¸€ä¸ªä½ç½®ã€‚é€šå¸¸æ˜¯ä¸€äº›ç³»ç»Ÿè°ƒç”¨ï¼šcreatï¼Œopenï¼Œpauseï¼Œcloseï¼Œreadï¼Œwriteç­‰	</span><br><span class="line"></span><br><span class="line">pthread_testcancel(); &#x2F;&#x2F; è¿™ä¸ªå‡½æ•°å¯ä»¥è®¾ç½®ä¸€ä¸ªå–æ¶ˆç‚¹</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">void *tfn1(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;thread 1 returning\n&quot;);</span><br><span class="line">	return (void *)1; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void *tfn2(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;thread 2 exiting\n&quot;);</span><br><span class="line">	pthread_exit((void *)2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void *tfn3(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">	while (1) &#123;</span><br><span class="line">		pthread_testcancel();	&#x2F;&#x2F; è‡ªå·±æ·»åŠ å–æ¶ˆç‚¹</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	pthread_t tid;</span><br><span class="line">	void *tret &#x3D; NULL;</span><br><span class="line"></span><br><span class="line">	pthread_create(&amp;tid, NULL, tfn1, NULL);</span><br><span class="line">	pthread_join(tid, &amp;tret);</span><br><span class="line">	printf(&quot;thread 1 exit code &#x3D; %d\n\n&quot;, (int)tret); &#x2F;&#x2F; tret&#x3D;1</span><br><span class="line"></span><br><span class="line">	pthread_create(&amp;tid, NULL, tfn2, NULL);</span><br><span class="line">	pthread_join(tid, &amp;tret);</span><br><span class="line">	printf(&quot;thread 2 exit code &#x3D; %d\n\n&quot;, (int)tret); &#x2F;&#x2F; tret&#x3D;2</span><br><span class="line"></span><br><span class="line">	pthread_create(&amp;tid, NULL, tfn3, NULL);</span><br><span class="line">	sleep(3);</span><br><span class="line">	pthread_cancel(tid);        &#x2F;&#x2F; æœ‰å–æ¶ˆç‚¹æ‰èƒ½å–æ¶ˆ</span><br><span class="line">	pthread_join(tid, &amp;tret);   &#x2F;&#x2F; å›æ”¶å¤±è´¥ tret&#x3D;-1</span><br><span class="line">	printf(&quot;thread 3 exit code &#x3D; %d\n&quot;, (int)tret);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çº¿ç¨‹çš„åˆ†ç¦»çŠ¶æ€å†³å®šä¸€ä¸ªçº¿ç¨‹ä»¥ä»€ä¹ˆæ ·çš„æ–¹å¼æ¥ç»ˆæ­¢è‡ªå·±ã€‚<br><strong>éåˆ†ç¦»çŠ¶æ€</strong>ï¼šçº¿ç¨‹çš„é»˜è®¤å±æ€§æ˜¯éåˆ†ç¦»çŠ¶æ€ã€‚è¿™ç§æƒ…å†µä¸‹ï¼ŒåŸæœ‰çš„çº¿ç¨‹ç­‰å¾…åˆ›å»ºçš„çº¿ç¨‹ç»“æŸã€‚<br>  åªæœ‰å½“pthread_join()å‡½æ•°è¿”å›æ—¶ï¼Œåˆ›å»ºçš„çº¿ç¨‹æ‰ç®—ç»ˆæ­¢ï¼Œæ‰èƒ½é‡Šæ”¾è‡ªå·±å ç”¨çš„ç³»ç»Ÿèµ„æºã€‚<br><strong>åˆ†ç¦»çŠ¶æ€</strong>ï¼šåˆ†ç¦»çº¿ç¨‹æ²¡æœ‰è¢«å…¶ä»–çš„çº¿ç¨‹æ‰€ç­‰å¾…ï¼Œè¿è¡Œç»“æŸçº¿ç¨‹å°±ç»ˆæ­¢äº†ï¼Œé©¬ä¸Šé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; çº¿ç¨‹åˆ†ç¦»</span><br><span class="line">int pthread_detach(pthread_t thread);	æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼šé”™è¯¯å·</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; çº¿ç¨‹å±æ€§</span><br><span class="line">typedef struct</span><br><span class="line">&#123;</span><br><span class="line">  int etachstate; 	  &#x2F;&#x2F; çº¿ç¨‹çš„åˆ†ç¦»çŠ¶æ€</span><br><span class="line">  int schedpolicy; 	  &#x2F;&#x2F; çº¿ç¨‹è°ƒåº¦ç­–ç•¥</span><br><span class="line">  struct sched_param	schedparam; 	&#x2F;&#x2F; çº¿ç¨‹çš„è°ƒåº¦å‚æ•°</span><br><span class="line">  int inheritsched; 	&#x2F;&#x2F; çº¿ç¨‹çš„ç»§æ‰¿æ€§</span><br><span class="line">  int scope; 		      &#x2F;&#x2F; çº¿ç¨‹çš„ä½œç”¨åŸŸ</span><br><span class="line">  size_t guardsize; 	&#x2F;&#x2F; çº¿ç¨‹æ ˆæœ«å°¾çš„è­¦æˆ’ç¼“å†²åŒºå¤§å°</span><br><span class="line">  int stackaddr_set;  &#x2F;&#x2F; çº¿ç¨‹çš„æ ˆè®¾ç½®</span><br><span class="line">  void* stackaddr; 	  &#x2F;&#x2F; çº¿ç¨‹æ ˆçš„ä½ç½®</span><br><span class="line">  size_t stacksize; 	&#x2F;&#x2F; çº¿ç¨‹æ ˆçš„å¤§å°</span><br><span class="line">&#125; pthread_attr_t; </span><br><span class="line"></span><br><span class="line">å±æ€§å€¼ä¸èƒ½ç›´æ¥è®¾ç½®ï¼Œé¡»ä½¿ç”¨ç›¸å…³å‡½æ•°è¿›è¡Œæ“ä½œã€‚</span><br><span class="line">åˆå§‹åŒ–çš„å‡½æ•°ä¸ºpthread_attr_initï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»åœ¨pthread_createå‡½æ•°ä¹‹å‰è°ƒç”¨ã€‚</span><br><span class="line">ä¹‹åé¡»ç”¨pthread_attr_destroyå‡½æ•°æ¥é‡Šæ”¾èµ„æºã€‚</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; åˆå§‹åŒ–çº¿ç¨‹å±æ€§</span><br><span class="line">int pthread_attr_init(pthread_attr_t *attr); æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼šé”™è¯¯å·</span><br><span class="line">&#x2F;&#x2F; é”€æ¯çº¿ç¨‹å±æ€§æ‰€å ç”¨çš„èµ„æº</span><br><span class="line">int pthread_attr_destroy(pthread_attr_t *attr); æˆåŠŸï¼š0ï¼›å¤±è´¥ï¼šé”™è¯¯å·</span><br><span class="line">&#x2F;&#x2F; è®¾ç½®çº¿ç¨‹å±æ€§ï¼Œåˆ†ç¦»oréåˆ†ç¦»</span><br><span class="line">int pthread_attr_setdetachstate(pthread_attr_t *attr, int detachstate); </span><br><span class="line">&#x2F;&#x2F; è·å–çº¿ç¨‹å±æ€§ï¼Œåˆ†ç¦»oréåˆ†ç¦»</span><br><span class="line">pthread_attr_getdetachstate(pthread_attr_t *attr, int *detachstate); </span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">  attrï¼šå·²åˆå§‹åŒ–çš„çº¿ç¨‹å±æ€§</span><br><span class="line">  detachstateï¼š	PTHREAD_CREATE_DETACHED(åˆ†ç¦»çº¿ç¨‹)&#x2F;PTHREAD _CREATE_JOINABLE(éåˆ†ç¦»çº¿ç¨‹)</span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line">  å¦‚æœè®¾ç½®ä¸€ä¸ªçº¿ç¨‹ä¸ºåˆ†ç¦»çº¿ç¨‹ï¼Œè€Œè¿™ä¸ªçº¿ç¨‹è¿è¡Œåˆéå¸¸å¿«ï¼Œå®ƒå¾ˆå¯èƒ½åœ¨pthread_createå‡½æ•°è¿”å›ä¹‹å‰å°±ç»ˆæ­¢äº†ã€‚</span><br><span class="line">  å®ƒç»ˆæ­¢ä»¥åå°±å¯èƒ½å°†çº¿ç¨‹å·å’Œç³»ç»Ÿèµ„æºç§»äº¤ç»™å…¶ä»–çš„çº¿ç¨‹ä½¿ç”¨ï¼Œè¿™æ ·è°ƒç”¨pthread_createçš„çº¿ç¨‹å°±å¾—åˆ°äº†é”™è¯¯çš„çº¿ç¨‹å·ã€‚</span><br><span class="line">  è¦é¿å…è¿™ç§æƒ…å†µå¯ä»¥é‡‡å–ä¸€å®šçš„åŒæ­¥æªæ–½ï¼Œæœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€æ˜¯å¯ä»¥åœ¨è¢«åˆ›å»ºçš„çº¿ç¨‹é‡Œè°ƒç”¨pthread_cond_timedwaitå‡½æ•°ï¼Œè®©è¿™ä¸ªçº¿ç¨‹ç­‰å¾…ä¸€ä¼šå„¿ï¼Œç•™å‡ºè¶³å¤Ÿçš„æ—¶é—´è®©å‡½æ•°pthread_createè¿”å›ã€‚è®¾ç½®ä¸€æ®µç­‰å¾…æ—¶é—´ï¼Œæ˜¯åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹é‡Œå¸¸ç”¨çš„æ–¹æ³•ã€‚ä½†æ˜¯æ³¨æ„ä¸è¦ä½¿ç”¨è¯¸å¦‚wait()ä¹‹ç±»çš„å‡½æ•°ï¼Œå®ƒä»¬æ˜¯ä½¿æ•´ä¸ªè¿›ç¨‹ç¡çœ ï¼Œå¹¶ä¸èƒ½è§£å†³çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">void *tfn(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;thread: pid &#x3D; %d, tid &#x3D; %lu\n&quot;, getpid(), pthread_self());</span><br><span class="line"></span><br><span class="line">	return NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	pthread_t tid;</span><br><span class="line">	void *tret;</span><br><span class="line"></span><br><span class="line">	int ret &#x3D; pthread_create(&amp;tid, NULL, tfn, NULL);</span><br><span class="line">	if(ret !&#x3D; 0)</span><br><span class="line">	&#123;</span><br><span class="line">		fprintf(stderr, &quot;pthread_create error: %s\n&quot;, strerror(ret));</span><br><span class="line">		exit(1);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	ret &#x3D; pthread_detach(tid);   </span><br><span class="line">	if(ret !&#x3D; 0)</span><br><span class="line">	&#123;</span><br><span class="line">		fprintf(stderr, &quot;pthread_detach error: %s\n&quot;, strerror(ret));</span><br><span class="line">		exit(1);</span><br><span class="line">	&#125;	</span><br><span class="line"></span><br><span class="line">	sleep(1);</span><br><span class="line"></span><br><span class="line">	ret &#x3D; pthread_join(tid, &amp;tret);</span><br><span class="line">	if (ret !&#x3D; 0)</span><br><span class="line">		fprintf(stderr, &quot;pthread_join %s\n&quot;, strerror(ret));</span><br><span class="line">	else</span><br><span class="line">		fprintf(stderr, &quot;thread exit code %d\n&quot;, (int)tret);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">void *tfn(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;thread: pid &#x3D; %d, tid &#x3D; %lu\n&quot;, getpid(), pthread_self());</span><br><span class="line"></span><br><span class="line">	return NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	pthread_t tid;</span><br><span class="line">	pthread_attr_t attr;			&#x2F;&#x2F; é€šè¿‡çº¿ç¨‹å±æ€§æ¥è®¾ç½®æ¸¸ç¦»æ€</span><br><span class="line">	void *tret;</span><br><span class="line">		</span><br><span class="line">	int ret &#x3D; pthread_attr_init(&amp;attr);</span><br><span class="line">	if(ret !&#x3D; 0)</span><br><span class="line">	&#123;</span><br><span class="line">		fprintf(stderr, &quot;attr_init error %s\n&quot;, strerror(ret));</span><br><span class="line">		exit(1);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	ret &#x3D; pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_DETACHED);</span><br><span class="line">	if(ret !&#x3D; 0)</span><br><span class="line">	&#123;</span><br><span class="line">		fprintf(stderr, &quot;attr_setdetachstate error %s\n&quot;, strerror(ret));</span><br><span class="line">		exit(1);</span><br><span class="line">	&#125;	</span><br><span class="line">	</span><br><span class="line">	ret &#x3D; pthread_create(&amp;tid, &amp;attr, tfn, NULL);</span><br><span class="line">	if(ret !&#x3D; 0)</span><br><span class="line">	&#123;</span><br><span class="line">		fprintf(stderr, &quot;pthread_create error %s\n&quot;, strerror(ret));</span><br><span class="line">		exit(1);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	sleep(1);</span><br><span class="line"></span><br><span class="line">	ret &#x3D; pthread_join(tid, &amp;tret);</span><br><span class="line">	if (ret !&#x3D; 0)</span><br><span class="line">		fprintf(stderr, &quot;pthread_join %s\n&quot;, strerror(ret));</span><br><span class="line">	else</span><br><span class="line">		fprintf(stderr, &quot;thread exit code %d\n&quot;, (int)tret);	</span><br><span class="line"></span><br><span class="line">	ret &#x3D; pthread_attr_destroy(&amp;attr);</span><br><span class="line">	if(ret !&#x3D; 0)</span><br><span class="line">	&#123;</span><br><span class="line">		fprintf(stderr, &quot;pthread_create error %s\n&quot;, strerror(ret));</span><br><span class="line">		exit(1);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨æ„ï¼š</li>
</ul>
<ol>
<li>å¦‚ä½•é¿å…åƒµå°¸çº¿ç¨‹ï¼Ÿ<br>pthread_joinå›æ”¶ï¼›pthread_detachè®¾ç½®çº¿ç¨‹åˆ†ç¦»ï¼›pthread_createæŒ‡å®šåˆ†ç¦»å±æ€§</li>
<li>åº”é¿å…åœ¨å¤šçº¿ç¨‹æ¨¡å‹ä¸­è°ƒç”¨forkï¼Œé¿å…å¼•å…¥ä¿¡å·æœºåˆ¶ã€‚</li>
<li>mallocå’Œmmapç”³è¯·çš„å†…å­˜å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹é‡Šæ”¾</li>
</ol>
<h1 id="çº¿ç¨‹åŒæ­¥"><a href="#çº¿ç¨‹åŒæ­¥" class="headerlink" title="çº¿ç¨‹åŒæ­¥"></a>çº¿ç¨‹åŒæ­¥</h1><p>ä¸¤ä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªå…¨å±€å˜é‡è¿›è¡Œè®¿é—®ï¼Œä¼šå¯¼è‡´èµ„æºä¸åŒæ­¥çš„æƒ…å†µï¼Œæœ€åå¯¹å…¨å±€å˜é‡çš„æ“ä½œæ··ä¹±ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line"></span><br><span class="line">#define MAX 10000</span><br><span class="line">int number;</span><br><span class="line"></span><br><span class="line">pthread_mutex_t mutex;</span><br><span class="line"></span><br><span class="line">void err_thread(int ret, char *str)</span><br><span class="line">&#123;</span><br><span class="line">    if (ret !&#x3D; 0) &#123;</span><br><span class="line">        fprintf(stderr, &quot;%s:%s\n&quot;, str, strerror(ret));</span><br><span class="line">        pthread_exit(NULL);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void* funcA_num(void* arg)</span><br><span class="line">&#123;</span><br><span class="line">	for(int i&#x3D;0; i&lt;MAX; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		int cur &#x3D; number;</span><br><span class="line">		cur++;</span><br><span class="line">		number &#x3D; cur;</span><br><span class="line">		printf(&quot;Thread A, id &#x3D; %lu, number &#x3D; %d\n&quot;, pthread_self(), number);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	return NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void* funcB_num(void* arg)</span><br><span class="line">&#123;</span><br><span class="line">	for(int i&#x3D;0; i&lt;MAX; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		int cur &#x3D; number;</span><br><span class="line">		cur++;</span><br><span class="line">		number &#x3D; cur;</span><br><span class="line">		printf(&quot;Thread B, id &#x3D; %lu, number &#x3D; %d\n&quot;, pthread_self(), number);	</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	return NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç”±äºæ²¡æœ‰é”,å¯¼è‡´++æ“ä½œä¸æ˜¯æœ‰åºçš„,æœ€ç»ˆç»“æœåˆ°ä¸äº†20000</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    pthread_t p1, p2;</span><br><span class="line">	</span><br><span class="line">	pthread_mutex_init(&amp;mutex, NULL);</span><br><span class="line"></span><br><span class="line">    int ret &#x3D; pthread_create(&amp;p1, NULL, funcA_num, NULL);</span><br><span class="line">    err_thread(ret, &quot;pthread_create error&quot;);</span><br><span class="line"></span><br><span class="line">    ret &#x3D; pthread_create(&amp;p2, NULL, funcB_num, NULL);</span><br><span class="line">    err_thread(ret, &quot;pthread_create error&quot;);</span><br><span class="line">    </span><br><span class="line">    pthread_join(p1, NULL);</span><br><span class="line">	pthread_join(p2, NULL);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äº’æ–¥é‡"><a href="#äº’æ–¥é‡" class="headerlink" title="äº’æ–¥é‡"></a>äº’æ–¥é‡</h2><p>Linuxä¸­æä¾›ä¸€æŠŠäº’æ–¥é”mutex(ä¹Ÿç§°ä¹‹ä¸ºäº’æ–¥é‡)ã€‚æ¯ä¸ªçº¿ç¨‹åœ¨å¯¹èµ„æºæ“ä½œå‰éƒ½å°è¯•å…ˆåŠ é”ï¼ŒæˆåŠŸåŠ é”æ‰èƒ½æ“ä½œï¼Œæ“ä½œç»“æŸè§£é”ã€‚<br>èµ„æºè¿˜æ˜¯å…±äº«çš„ï¼Œçº¿ç¨‹é—´ä¹Ÿè¿˜æ˜¯ç«äº‰çš„ï¼Œä½†é€šè¿‡â€œé”â€å°±å°†èµ„æºçš„è®¿é—®å˜æˆäº’æ–¥æ“ä½œï¼Œè€Œåä¸æ—¶é—´æœ‰å…³çš„é”™è¯¯ä¹Ÿä¸ä¼šå†äº§ç”Ÿäº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int pthread_mutex_init(pthread_mutex_t *restrict mutex, const pthread_mutexattr_t *restrict attr);</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">	mutex: ä¼ å‡ºå‚æ•°ï¼Œè°ƒç”¨æ—¶åº”ä¼ &amp;mutex </span><br><span class="line">		restrictå…³é”®å­—ï¼šåªç”¨äºé™åˆ¶æŒ‡é’ˆï¼Œå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæ‰€æœ‰ä¿®æ”¹è¯¥æŒ‡é’ˆæŒ‡å‘å†…å­˜ä¸­å†…å®¹çš„æ“ä½œï¼Œåªèƒ½é€šè¿‡æœ¬æŒ‡é’ˆå®Œæˆã€‚ä¸èƒ½é€šè¿‡é™¤æœ¬æŒ‡é’ˆä»¥å¤–çš„å…¶ä»–å˜é‡æˆ–æŒ‡é’ˆä¿®æ”¹</span><br><span class="line">	attr: äº’æ–¥é‡å±æ€§ã€‚æ˜¯ä¸€ä¸ªä¼ å…¥å‚æ•°ï¼Œé€šå¸¸ä¼ NULLï¼Œé€‰ç”¨é»˜è®¤å±æ€§(çº¿ç¨‹é—´å…±äº«)</span><br><span class="line"></span><br><span class="line">1. é™æ€åˆå§‹åŒ–ï¼šå¦‚æœäº’æ–¥é” mutex æ˜¯é™æ€åˆ†é…çš„(å®šä¹‰åœ¨å…¨å±€ï¼Œæˆ–åŠ äº†staticå…³é”®å­—ä¿®é¥°)ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å®è¿›è¡Œåˆå§‹åŒ–ã€‚</span><br><span class="line">	æ¯”å¦‚ï¼š pthead_mutex_t muetx &#x3D; PTHREAD_MUTEX_INITIALIZER;</span><br><span class="line">2. åŠ¨æ€åˆå§‹åŒ–ï¼šå±€éƒ¨å˜é‡åº”é‡‡ç”¨åŠ¨æ€åˆå§‹åŒ–ã€‚æ¯”å¦‚ï¼špthread_mutex_init(&amp;mutex, NULL)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; çº¿ç¨‹åŠ é”</span><br><span class="line">int pthread_mutex_lock(pthread_mutex_t *mutex);	&#x2F;&#x2F; lockå°è¯•åŠ é”ï¼Œå¦‚æœåŠ é”ä¸æˆåŠŸï¼Œçº¿ç¨‹é˜»å¡ç›´åˆ°æŒæœ‰è¯¥äº’æ–¥é‡çš„å…¶ä»–çº¿ç¨‹è§£é”ä¸ºæ­¢ã€‚</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; çº¿ç¨‹è§£é”</span><br><span class="line">int pthread_mutex_unlock(pthread_mutex_t *mutex);	&#x2F;&#x2F; unlockè§£é”ï¼ŒåŒæ—¶å°†é˜»å¡åœ¨è¯¥é”ä¸Šçš„æ‰€æœ‰çº¿ç¨‹å…¨éƒ¨å”¤é†’ã€‚</span><br><span class="line">													&#x2F;&#x2F; è‡³äºå“ªä¸ªçº¿ç¨‹å…ˆè¢«å”¤é†’ï¼Œå–å†³äºä¼˜å…ˆçº§ã€è°ƒåº¦ã€‚é»˜è®¤ï¼šå…ˆé˜»å¡ã€å…ˆå”¤é†’ã€‚</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å°è¯•åŠ é”</span><br><span class="line">int pthread_mutex_trylock(pthread_mutex_t *mutex);	&#x2F;&#x2F; trylockåŠ é”å¤±è´¥ç›´æ¥è¿”å›é”™è¯¯å·EBUSYï¼Œä¸é˜»å¡ã€‚</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é”€æ¯ä¸€ä¸ªäº’æ–¥é”</span><br><span class="line">int pthread_mutex_destroy(pthread_mutex_t *mutex);</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š<br>    åœ¨è®¿é—®å…±äº«èµ„æºå‰åŠ é”ï¼Œè®¿é—®ç»“æŸåç«‹å³è§£é”ã€‚é”çš„â€œç²’åº¦â€åº”è¶Šå°è¶Šå¥½ã€‚<br>    çº¿ç¨‹åŠ é”è¦é¿å…æ­»é”çš„æƒ…å†µï¼š</p>
<pre><code>    1. çº¿ç¨‹1æ‹¥æœ‰Aé”ï¼Œè¯·æ±‚è·å¾—Bé”ï¼›çº¿ç¨‹2æ‹¥æœ‰Bé”ï¼Œè¯·æ±‚è·å¾—Aé”
    2. çº¿ç¨‹è¯•å›¾å¯¹åŒä¸€ä¸ªäº’æ–¥é‡åŠ é”ä¸¤æ¬¡
</code></pre><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line"></span><br><span class="line">#define MAX 10000</span><br><span class="line">int number;</span><br><span class="line"></span><br><span class="line">pthread_mutex_t mutex;</span><br><span class="line"></span><br><span class="line">void err_thread(int ret, char *str)</span><br><span class="line">&#123;</span><br><span class="line">    if (ret !&#x3D; 0) &#123;</span><br><span class="line">        fprintf(stderr, &quot;%s:%s\n&quot;, str, strerror(ret));</span><br><span class="line">        pthread_exit(NULL);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void* funcA_num(void* arg)</span><br><span class="line">&#123;</span><br><span class="line">	for(int i&#x3D;0; i&lt;MAX; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		pthread_mutex_lock(&amp;mutex);</span><br><span class="line">		int cur &#x3D; number;</span><br><span class="line">		cur++;</span><br><span class="line">		number &#x3D; cur;</span><br><span class="line">		printf(&quot;Thread A, id &#x3D; %lu, number &#x3D; %d\n&quot;, pthread_self(), number);</span><br><span class="line">		pthread_mutex_unlock(&amp;mutex);</span><br><span class="line">		usleep(10);		&#x2F;&#x2F; ä¿è¯å…¶å®ƒçº¿ç¨‹æœ‰æ‹¿åˆ°é”çš„å¯èƒ½æ€§</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	return NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void* funcB_num(void* arg)</span><br><span class="line">&#123;</span><br><span class="line">	for(int i&#x3D;0; i&lt;MAX; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		pthread_mutex_lock(&amp;mutex);	&#x2F;&#x2F; ä¸¤ä¸ªçº¿ç¨‹éƒ½è¦åŠ é”ï¼Œä¸€ä¸ªçº¿ç¨‹åŠ é”å¦ä¸€ä¸ªçº¿ç¨‹ä¸åŠ é”ç­‰äºæ²¡åŠ é”</span><br><span class="line">		int cur &#x3D; number;</span><br><span class="line">		cur++;</span><br><span class="line">		number &#x3D; cur;</span><br><span class="line">		printf(&quot;Thread B, id &#x3D; %lu, number &#x3D; %d\n&quot;, pthread_self(), number);</span><br><span class="line">		pthread_mutex_unlock(&amp;mutex);		</span><br><span class="line">		usleep(10);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	return NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    pthread_t p1, p2;</span><br><span class="line">	</span><br><span class="line">	pthread_mutex_init(&amp;mutex, NULL);</span><br><span class="line"></span><br><span class="line">    int ret &#x3D; pthread_create(&amp;p1, NULL, funcA_num, NULL);</span><br><span class="line">    err_thread(ret, &quot;pthread_create error&quot;);</span><br><span class="line"></span><br><span class="line">    ret &#x3D; pthread_create(&amp;p2, NULL, funcB_num, NULL);</span><br><span class="line">    err_thread(ret, &quot;pthread_create error&quot;);</span><br><span class="line">    </span><br><span class="line">    pthread_join(p1, NULL);</span><br><span class="line">	pthread_join(p2, NULL);</span><br><span class="line"></span><br><span class="line">    pthread_mutex_destroy(&amp;mutex);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¯»å†™é”"><a href="#è¯»å†™é”" class="headerlink" title="è¯»å†™é”"></a>è¯»å†™é”</h2><p>ä¸€æŠŠè¯»å†™é”å…·å¤‡ä¸‰ç§çŠ¶æ€ï¼šè¯»æ¨¡å¼ä¸‹åŠ é”çŠ¶æ€ (è¯»é”)ï¼›å†™æ¨¡å¼ä¸‹åŠ é”çŠ¶æ€ (å†™é”)ï¼›ä¸åŠ é”çŠ¶æ€ã€‚</p>
<p>è¯»å†™é”æ˜¯â€œå†™æ¨¡å¼åŠ é”â€æ—¶ï¼Œ è§£é”å‰ï¼Œæ‰€æœ‰å¯¹è¯¥é”åŠ é”çš„çº¿ç¨‹éƒ½ä¼šè¢«é˜»å¡ã€‚<br>è¯»å†™é”æ˜¯â€œè¯»æ¨¡å¼åŠ é”â€æ—¶ï¼Œ å¦‚æœçº¿ç¨‹ä»¥è¯»æ¨¡å¼å¯¹å…¶åŠ é”ä¼šæˆåŠŸï¼›å¦‚æœçº¿ç¨‹ä»¥å†™æ¨¡å¼åŠ é”ä¼šé˜»å¡ã€‚<br>è¯»å†™é”æ˜¯â€œè¯»æ¨¡å¼åŠ é”â€æ—¶ï¼Œ æ—¢æœ‰è¯•å›¾ä»¥å†™æ¨¡å¼åŠ é”çš„çº¿ç¨‹ï¼Œä¹Ÿæœ‰è¯•å›¾ä»¥è¯»æ¨¡å¼åŠ é”çš„çº¿ç¨‹ã€‚é‚£ä¹ˆè¯»å†™é”ä¼šé˜»å¡éšåçš„è¯»æ¨¡å¼é”è¯·æ±‚ï¼Œä¼˜å…ˆæ»¡è¶³å†™æ¨¡å¼é”ã€‚å³è¯»é”ã€å†™é”å¹¶è¡Œé˜»å¡ï¼Œ<strong>å†™é”ä¼˜å…ˆçº§é«˜</strong>ã€‚</p>
<p>è¯»å†™é”ä¹Ÿå«å…±äº«-ç‹¬å é”ã€‚å½“è¯»å†™é”ä»¥è¯»æ¨¡å¼é”ä½æ—¶ï¼Œå®ƒæ˜¯ä»¥å…±äº«æ¨¡å¼é”ä½çš„ï¼›å½“å®ƒä»¥å†™æ¨¡å¼é”ä½æ—¶ï¼Œå®ƒæ˜¯ä»¥ç‹¬å æ¨¡å¼é”ä½çš„ã€‚å†™ç‹¬å ã€è¯»å…±äº«ã€‚è¯»å†™é”éå¸¸é€‚åˆäºå¯¹æ•°æ®ç»“æ„è¯»çš„æ¬¡æ•°è¿œå¤§äºå†™çš„æƒ…å†µã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; åˆå§‹åŒ–ä¸€æŠŠè¯»å†™é”</span><br><span class="line">int pthread_rwlock_init(pthread_rwlock_t *restrict rwlock, const pthread_rwlockattr_t *restrict attr);</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">	attrè¡¨è¯»å†™é”å±æ€§ï¼Œé€šå¸¸ä½¿ç”¨é»˜è®¤å±æ€§ï¼Œä¼ NULLå³å¯ã€‚</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é”€æ¯ä¸€æŠŠè¯»å†™é”</span><br><span class="line">int pthread_rwlock_destroy(pthread_rwlock_t *rwlock);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ä»¥è¯»æ–¹å¼è¯·æ±‚è¯»å†™é”ï¼ˆè¯·æ±‚è¯»é”ï¼‰</span><br><span class="line">int pthread_rwlock_rdlock(pthread_rwlock_t *rwlock);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ä»¥å†™æ–¹å¼è¯·æ±‚è¯»å†™é”ï¼ˆè¯·æ±‚å†™é”ï¼‰</span><br><span class="line">int pthread_rwlock_wrlock(pthread_rwlock_t *rwlock);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; è§£é”</span><br><span class="line">int pthread_rwlock_unlock(pthread_rwlock_t *rwlock);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; éé˜»å¡ä»¥è¯»æ–¹å¼è¯·æ±‚è¯»å†™é”ï¼ˆéé˜»å¡è¯·æ±‚è¯»é”ï¼‰</span><br><span class="line">int pthread_rwlock_tryrdlock(pthread_rwlock_t *rwlock);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; éé˜»å¡ä»¥å†™æ–¹å¼è¯·æ±‚è¯»å†™é”ï¼ˆéé˜»å¡è¯·æ±‚å†™é”ï¼‰</span><br><span class="line">int pthread_rwlock_trywrlock(pthread_rwlock_t *rwlock);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line"></span><br><span class="line">int counter;</span><br><span class="line">pthread_rwlock_t rwlock;</span><br><span class="line"></span><br><span class="line">&#x2F;* 3ä¸ªçº¿ç¨‹ä¸å®šæ—¶å†™åŒä¸€å…¨å±€èµ„æºï¼Œ5ä¸ªçº¿ç¨‹ä¸å®šæ—¶è¯»åŒä¸€å…¨å±€èµ„æº *&#x2F;</span><br><span class="line">void *write_func(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">    int t;</span><br><span class="line">    int i &#x3D; (int)arg;</span><br><span class="line">    while (1) &#123;</span><br><span class="line">        pthread_rwlock_wrlock(&amp;rwlock);</span><br><span class="line">        t &#x3D; counter;   </span><br><span class="line">        usleep(1000);</span><br><span class="line">        printf(&quot;write_func %d: %lu: counter&#x3D;%d ++counter&#x3D;%d\n&quot;, i, pthread_self(), t, ++counter);</span><br><span class="line">        pthread_rwlock_unlock(&amp;rwlock);</span><br><span class="line">        usleep(10000);</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    return NULL;</span><br><span class="line">&#125;</span><br><span class="line">void *read_func(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">    int i &#x3D; (int)arg;</span><br><span class="line"></span><br><span class="line">    while (1) &#123;</span><br><span class="line">        pthread_rwlock_rdlock(&amp;rwlock);</span><br><span class="line">        printf(&quot;read_func %d: %lu: %d\n&quot;, i, pthread_self(), counter);</span><br><span class="line">        pthread_rwlock_unlock(&amp;rwlock);</span><br><span class="line">        usleep(1000);</span><br><span class="line">    &#125;</span><br><span class="line">    return NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    int i;</span><br><span class="line">    pthread_t tid[8];</span><br><span class="line"></span><br><span class="line">    pthread_rwlock_init(&amp;rwlock, NULL);</span><br><span class="line"></span><br><span class="line">    for (i&#x3D;0; i&lt;3; i++)</span><br><span class="line">        pthread_create(&amp;tid[i], NULL, write_func, (void *)i);</span><br><span class="line"></span><br><span class="line">    for (i&#x3D;0; i&lt;5; i++)</span><br><span class="line">        pthread_create(&amp;tid[i+3], NULL, read_func, (void *)i);</span><br><span class="line"></span><br><span class="line">    for (i&#x3D;0; i&lt;8; i++)</span><br><span class="line">        pthread_join(tid[i], NULL);</span><br><span class="line"></span><br><span class="line">    pthread_rwlock_destroy(&amp;rwlock);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¡ä»¶å˜é‡"><a href="#æ¡ä»¶å˜é‡" class="headerlink" title="æ¡ä»¶å˜é‡"></a>æ¡ä»¶å˜é‡</h2><p>æ¡ä»¶å˜é‡æœ¬èº«ä¸æ˜¯é”ï¼Œå¯ä»¥é€ æˆçº¿ç¨‹é˜»å¡ï¼Œé€šå¸¸å’Œäº’æ–¥é”é…åˆä½¿ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; åˆå§‹åŒ–ä¸€ä¸ªæ¡ä»¶å˜é‡</span><br><span class="line">int pthread_cond_init(pthread_cond_t *restrict cond, const pthread_condattr_t *restrict attr);		</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">	attrï¼šæ¡ä»¶å˜é‡å±æ€§ï¼Œé€šå¸¸ä¸ºé»˜è®¤å€¼ï¼Œä¼ NULLå³å¯</span><br><span class="line"></span><br><span class="line">ä¹Ÿå¯ä»¥ä½¿ç”¨é™æ€åˆå§‹åŒ–çš„æ–¹æ³•ï¼Œåˆå§‹åŒ–æ¡ä»¶å˜é‡ï¼špthread_cond_t cond &#x3D; PTHREAD_COND_INITIALIZER;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é˜»å¡ç­‰å¾…ä¸€ä¸ªæ¡ä»¶å˜é‡</span><br><span class="line">int pthread_cond_wait(pthread_cond_t *restrict cond, pthread_mutex_t *restrict mutex);</span><br><span class="line">å‡½æ•°ä½œç”¨ï¼š</span><br><span class="line">1. é˜»å¡ç­‰å¾…æ¡ä»¶å˜é‡condæ»¡è¶³	</span><br><span class="line">2. é‡Šæ”¾å·²æŒæ¡çš„äº’æ–¥é”ï¼ˆè§£é”äº’æ–¥é‡ï¼‰ç›¸å½“äºpthread_mutex_unlock(&amp;mutex); ç¬¬1æ­¥å’Œç¬¬2æ­¥æ˜¯åŸå­æ“ä½œã€‚</span><br><span class="line">3. å½“è¢«å”¤é†’ï¼Œpthread_cond_waitå‡½æ•°è¿”å›æ—¶ï¼Œè§£é™¤é˜»å¡å¹¶é‡æ–°ç”³è¯·è·å–äº’æ–¥é”pthread_mutex_lock(&amp;mutex);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é™æ—¶ç­‰å¾…ä¸€ä¸ªæ¡ä»¶å˜é‡</span><br><span class="line">int pthread_cond_timedwait(pthread_cond_t *restrict cond, pthread_mutex_t *restrict mutex, const struct timespec *restrict abstime);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å”¤é†’è‡³å°‘ä¸€ä¸ªé˜»å¡åœ¨æ¡ä»¶å˜é‡ä¸Šçš„çº¿ç¨‹</span><br><span class="line">int pthread_cond_signal(pthread_cond_t *cond);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å”¤é†’å…¨éƒ¨é˜»å¡åœ¨æ¡ä»¶å˜é‡ä¸Šçš„çº¿ç¨‹</span><br><span class="line">int pthread_cond_broadcast(pthread_cond_t *cond);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é”€æ¯ä¸€ä¸ªæ¡ä»¶å˜é‡</span><br><span class="line">int pthread_cond_destroy(pthread_cond_t *cond);</span><br></pre></td></tr></table></figure>
<ul>
<li>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; å€ŸåŠ©æ¡ä»¶å˜é‡æ¨¡æ‹Ÿ ç”Ÿäº§è€…-æ¶ˆè´¹è€… é—®é¢˜</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é“¾è¡¨ä½œä¸ºå…¬äº«æ•°æ®,éœ€è¢«äº’æ–¥é‡ä¿æŠ¤</span><br><span class="line">struct msg &#123;</span><br><span class="line">    struct msg *next;</span><br><span class="line">    int num;</span><br><span class="line">&#125;;</span><br><span class="line">struct msg *head;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é™æ€åˆå§‹åŒ– ä¸€ä¸ªæ¡ä»¶å˜é‡ å’Œ ä¸€ä¸ªäº’æ–¥é‡</span><br><span class="line">pthread_cond_t has_product &#x3D; PTHREAD_COND_INITIALIZER;</span><br><span class="line">pthread_mutex_t lock &#x3D; PTHREAD_MUTEX_INITIALIZER;</span><br><span class="line"></span><br><span class="line">void *consumer(void *p)</span><br><span class="line">&#123;</span><br><span class="line">    struct msg *mp;</span><br><span class="line"></span><br><span class="line">    for (;;) &#123;</span><br><span class="line">        pthread_mutex_lock(&amp;lock);</span><br><span class="line">        while (head &#x3D;&#x3D; NULL) &#123;           	&#x2F;&#x2F; å¤´æŒ‡é’ˆä¸ºç©º,è¯´æ˜æ²¡æœ‰èŠ‚ç‚¹ å¤šä¸ªæ¶ˆè´¹è€…ä¸å¯ä»¥ä¸ºif</span><br><span class="line">            pthread_cond_wait(&amp;has_product, &amp;lock);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mp &#x3D; head;      </span><br><span class="line">        head &#x3D; mp-&gt;next;                	&#x2F;&#x2F; æ¨¡æ‹Ÿæ¶ˆè´¹æ‰ä¸€ä¸ªäº§å“</span><br><span class="line">        pthread_mutex_unlock(&amp;lock);</span><br><span class="line"></span><br><span class="line">        printf(&quot;Consume %lu-------------%d\n&quot;, pthread_self(), mp-&gt;num);</span><br><span class="line">        free(mp);</span><br><span class="line">        sleep(rand() % 8 + 4);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void *producer(void *p)</span><br><span class="line">&#123;</span><br><span class="line">    struct msg *mp;</span><br><span class="line"></span><br><span class="line">    for (;;) &#123;</span><br><span class="line">        mp &#x3D; malloc(sizeof(struct msg));</span><br><span class="line">        mp-&gt;num &#x3D; rand() % 1000 + 1;        &#x2F;&#x2F; æ¨¡æ‹Ÿç”Ÿäº§ä¸€ä¸ªäº§å“</span><br><span class="line">        printf(&quot;Produce -------------%d\n&quot;, mp-&gt;num);</span><br><span class="line"></span><br><span class="line">        pthread_mutex_lock(&amp;lock);</span><br><span class="line">        mp-&gt;next &#x3D; head;</span><br><span class="line">        head &#x3D; mp;</span><br><span class="line">        pthread_mutex_unlock(&amp;lock);</span><br><span class="line"></span><br><span class="line">        pthread_cond_signal(&amp;has_product);  &#x2F;&#x2F; å°†ç­‰å¾…åœ¨è¯¥æ¡ä»¶å˜é‡ä¸Šçš„ä¸€ä¸ªçº¿ç¨‹å”¤é†’</span><br><span class="line"></span><br><span class="line">        sleep(1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    pthread_t pid, cid[4];</span><br><span class="line">    srand(time(NULL));</span><br><span class="line">	int i &#x3D; 0;</span><br><span class="line"></span><br><span class="line">    pthread_create(&amp;pid, NULL, producer, NULL);</span><br><span class="line"></span><br><span class="line">    for (i&#x3D;0; i&lt;4; i++)</span><br><span class="line">        pthread_create(&amp;cid[i], NULL, consumer, NULL);</span><br><span class="line"></span><br><span class="line">	pthread_join(pid, NULL);</span><br><span class="line">    for (i&#x3D;0; i&lt;4; i++)</span><br><span class="line">        pthread_join(cid[i], NULL);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›¸è¾ƒäºmutexè€Œè¨€ï¼Œæ¡ä»¶å˜é‡å¯ä»¥å‡å°‘ç«äº‰ã€‚å¦‚ç›´æ¥ä½¿ç”¨mutexï¼Œé™¤äº†ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ä¹‹é—´è¦ç«äº‰äº’æ–¥é‡ä»¥å¤–ï¼Œæ¶ˆè´¹è€…ä¹‹é—´ä¹Ÿéœ€è¦ç«äº‰äº’æ–¥é‡ã€‚ä½†å¦‚æœä»“åº“ä¸­æ²¡æœ‰æ•°æ®ï¼Œæ¶ˆè´¹è€…ä¹‹é—´ç«äº‰äº’æ–¥é”æ˜¯æ— æ„ä¹‰çš„ã€‚æœ‰äº†æ¡ä»¶å˜é‡æœºåˆ¶ä»¥åï¼Œåªæœ‰ç”Ÿäº§è€…å®Œæˆç”Ÿäº§ï¼Œæ‰ä¼šå¼•èµ·æ¶ˆè´¹è€…ä¹‹é—´çš„ç«äº‰ï¼Œæé«˜äº†ç¨‹åºæ•ˆç‡ã€‚</p>
<h2 id="ä¿¡å·é‡-çº¿ç¨‹-è¿›ç¨‹åŒæ­¥"><a href="#ä¿¡å·é‡-çº¿ç¨‹-è¿›ç¨‹åŒæ­¥" class="headerlink" title="ä¿¡å·é‡(çº¿ç¨‹/è¿›ç¨‹åŒæ­¥)"></a>ä¿¡å·é‡(çº¿ç¨‹/è¿›ç¨‹åŒæ­¥)</h2><p>ç›¸å½“äºåˆå§‹åŒ–å€¼ä¸ºNçš„äº’æ–¥é‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; åˆå§‹åŒ–ä¸€ä¸ªä¿¡å·é‡semaphore</span><br><span class="line">int sem_init(sem_t *sem, int pshared, unsigned int value);</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">	semï¼šä¿¡å·é‡	</span><br><span class="line">	psharedï¼špsharedå–0ç”¨äºçº¿ç¨‹é—´ï¼›1ç”¨äºè¿›ç¨‹é—´åŒæ­¥</span><br><span class="line">	valueï¼šæŒ‡å®šä¿¡å·é‡åˆå€¼ï¼Œå†³å®šäº†å ç”¨ä¿¡å·é‡çš„çº¿ç¨‹çš„ä¸ªæ•°ã€‚</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç»™ä¿¡å·é‡åŠ é” --æ“ä½œ</span><br><span class="line">int sem_wait(sem_t *sem);</span><br><span class="line">ä¿¡å·é‡å¤§äº0ï¼Œåˆ™ä¿¡å·é‡--ï¼›ä¿¡å·é‡ç­‰äº0ï¼Œé€ æˆçº¿ç¨‹é˜»å¡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç»™ä¿¡å·é‡è§£é” ++æ“ä½œ åŒæ—¶å”¤é†’é˜»å¡åœ¨ä¿¡å·é‡ä¸Šçš„çº¿ç¨‹</span><br><span class="line">int sem_post(sem_t *sem);	</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å°è¯•å¯¹ä¿¡å·é‡åŠ é” --æ“ä½œ</span><br><span class="line">int sem_trywait(sem_t *sem);	</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é™æ—¶å°è¯•å¯¹ä¿¡å·é‡åŠ é” --æ“ä½œ</span><br><span class="line">int sem_timedwait(sem_t *sem, const struct timespec *abs_timeout);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é”€æ¯ä¸€ä¸ªä¿¡å·é‡</span><br><span class="line">int sem_destroy(sem_t *sem);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;*ä¿¡å·é‡å®ç° ç”Ÿäº§è€… æ¶ˆè´¹è€…é—®é¢˜*&#x2F;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;semaphore.h&gt;</span><br><span class="line"></span><br><span class="line">#define NUM 5       </span><br><span class="line"></span><br><span class="line">typedef struct node</span><br><span class="line">&#123;</span><br><span class="line">	int data;</span><br><span class="line">	struct node* next;</span><br><span class="line">&#125;Node;        	&#x2F;&#x2F; é“¾è¡¨çš„é•¿åº¦å—ä¿¡å·é‡æ§åˆ¶</span><br><span class="line"></span><br><span class="line">Node* head &#x3D; NULL;                              </span><br><span class="line">sem_t blank_number, product_number;                 &#x2F;&#x2F; ç©ºæ ¼å­ä¿¡å·é‡, äº§å“ä¿¡å·é‡</span><br><span class="line"></span><br><span class="line">void *producer(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">    while (1) &#123;</span><br><span class="line">        sem_wait(&amp;blank_number);                    &#x2F;&#x2F; ç”Ÿäº§è€…å°†ç©ºæ ¼å­æ•°--,ä¸º0åˆ™é˜»å¡ç­‰å¾…</span><br><span class="line">		</span><br><span class="line">        Node* node &#x3D; (Node*)malloc(sizeof(Node));</span><br><span class="line">        node-&gt;data &#x3D; rand() % 100 + 1;</span><br><span class="line">		node-&gt;next &#x3D; head;</span><br><span class="line">		head &#x3D; node;</span><br><span class="line">		printf(&quot;producer: %lu, %d\n&quot;, pthread_self(), node-&gt;data);</span><br><span class="line">		</span><br><span class="line">        sem_post(&amp;product_number);                 </span><br><span class="line">        sleep(rand()%1);</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	return NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void *consumer(void *arg)</span><br><span class="line">&#123;</span><br><span class="line">	int j &#x3D; (int)arg;</span><br><span class="line">    int i &#x3D; 0;</span><br><span class="line">	</span><br><span class="line">    while (1) </span><br><span class="line">	&#123;</span><br><span class="line">        sem_wait(&amp;product_number);                  &#x2F;&#x2F; æ¶ˆè´¹è€…å°†äº§å“æ•°--,ä¸º0åˆ™é˜»å¡ç­‰å¾…</span><br><span class="line">		</span><br><span class="line">		Node* del &#x3D; head;</span><br><span class="line">		head &#x3D; head-&gt;next;</span><br><span class="line">		</span><br><span class="line">        printf(&quot;Consumer %d: -----------%lu, %d\n&quot;, j, pthread_self(), del-&gt;data);</span><br><span class="line">		free(del);</span><br><span class="line"></span><br><span class="line">        sem_post(&amp;blank_number);                    &#x2F;&#x2F; æ¶ˆè´¹æ‰ä»¥å,å°†ç©ºæ ¼å­æ•°++</span><br><span class="line">        sleep(rand()%3); </span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	return NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    pthread_t pid, cid[4];</span><br><span class="line">	int i &#x3D; 0;</span><br><span class="line">	</span><br><span class="line">    sem_init(&amp;blank_number, 0, NUM);                &#x2F;&#x2F; åˆå§‹åŒ–ç©ºæ ¼å­ä¿¡å·é‡ä¸º5</span><br><span class="line">    sem_init(&amp;product_number, 0, 0);                &#x2F;&#x2F; äº§å“æ•°ä¸º0</span><br><span class="line"></span><br><span class="line">    pthread_create(&amp;pid, NULL, producer, NULL);</span><br><span class="line">    </span><br><span class="line">    for (i&#x3D;0; i&lt;4; i++)</span><br><span class="line">        pthread_create(&amp;cid[i], NULL, consumer, (void*)i);</span><br><span class="line"></span><br><span class="line">	pthread_join(pid, NULL);</span><br><span class="line">    for (i&#x3D;0; i&lt;4; i++)</span><br><span class="line">        pthread_join(cid[i], NULL);</span><br><span class="line"></span><br><span class="line">    sem_destroy(&amp;blank_number);</span><br><span class="line">    sem_destroy(&amp;product_number);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¿›ç¨‹åŒæ­¥"><a href="#è¿›ç¨‹åŒæ­¥" class="headerlink" title="è¿›ç¨‹åŒæ­¥"></a>è¿›ç¨‹åŒæ­¥</h2><p>è¿›ç¨‹é—´ä¹Ÿå¯ä»¥ä½¿ç”¨äº’æ–¥é”ï¼Œæ¥è¾¾åˆ°åŒæ­¥çš„ç›®çš„ã€‚ä½†åº”åœ¨pthread_mutex_initåˆå§‹åŒ–ä¹‹å‰ï¼Œä¿®æ”¹å…¶å±æ€§ä¸ºè¿›ç¨‹é—´å…±äº«ã€‚</p>
<h3 id="äº’æ–¥é‡-1"><a href="#äº’æ–¥é‡-1" class="headerlink" title="äº’æ–¥é‡"></a>äº’æ–¥é‡</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; åˆå§‹åŒ–ä¸€ä¸ªmutexå±æ€§å¯¹è±¡</span><br><span class="line">int pthread_mutexattr_init(pthread_mutexattr_t *attr);</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">	pthread_mutexattr_t mattr ç±»å‹ç”¨äºå®šä¹‰mutexé”çš„å±æ€§</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é”€æ¯mutexå±æ€§å¯¹è±¡ (è€Œéé”€æ¯é”)</span><br><span class="line">int pthread_mutexattr_destroy(pthread_mutexattr_t *attr);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ä¿®æ”¹mutexå±æ€§ã€‚</span><br><span class="line">int pthread_mutexattr_setpshared(pthread_mutexattr_t *attr, int pshared);</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">	psharedå–å€¼ï¼šçº¿ç¨‹é”ï¼šPTHREAD_PROCESS_PRIVATE (mutexçš„é»˜è®¤å±æ€§å³ä¸ºçº¿ç¨‹é”ï¼Œè¿›ç¨‹é—´ç§æœ‰)</span><br><span class="line">				è¿›ç¨‹é”ï¼šPTHREAD_PROCESS_SHARED</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;pthread.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;mman.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line"></span><br><span class="line">struct mt &#123;</span><br><span class="line">    int num;</span><br><span class="line">    pthread_mutex_t mutex;</span><br><span class="line">    pthread_mutexattr_t mutexattr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    int fd, i;</span><br><span class="line">    struct mt *mm;</span><br><span class="line">    pid_t pid;</span><br><span class="line"></span><br><span class="line">    fd &#x3D; open(&quot;mt_test&quot;, O_CREAT|O_RDWR, 0777);</span><br><span class="line">    ftruncate(fd, sizeof(*mm));</span><br><span class="line">	</span><br><span class="line">    mm &#x3D; mmap(NULL, sizeof(*mm), PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0);</span><br><span class="line">    close(fd);</span><br><span class="line">    unlink(&quot;mt_test&quot;);</span><br><span class="line">    &#x2F;&#x2F;mm &#x3D; mmap(NULL, sizeof(*mm), PROT_READ|PROT_WRITE, MAP_SHARED|MAP_ANON, -1, 0);</span><br><span class="line"></span><br><span class="line">    memset(mm, 0, sizeof(*mm));</span><br><span class="line"></span><br><span class="line">    pthread_mutexattr_init(&amp;mm-&gt;mutexattr);                                  &#x2F;&#x2F; åˆå§‹åŒ–mutexå±æ€§å¯¹è±¡</span><br><span class="line">    pthread_mutexattr_setpshared(&amp;mm-&gt;mutexattr, PTHREAD_PROCESS_SHARED);    &#x2F;&#x2F; ä¿®æ”¹å±æ€§ä¸ºè¿›ç¨‹é—´å…±äº«</span><br><span class="line"></span><br><span class="line">    pthread_mutex_init(&amp;mm-&gt;mutex, &amp;mm-&gt;mutexattr);                          &#x2F;&#x2F; åˆå§‹åŒ–ä¸€æŠŠmutexç</span><br><span class="line"></span><br><span class="line">    pid &#x3D; fork();</span><br><span class="line">    if (pid &#x3D;&#x3D; 0) &#123;</span><br><span class="line">        for (i&#x3D;0; i&lt;10; i++) &#123;</span><br><span class="line">            pthread_mutex_lock(&amp;mm-&gt;mutex);</span><br><span class="line">            (mm-&gt;num)++;</span><br><span class="line">            printf(&quot;child------num++	%d\n&quot;, mm-&gt;num);</span><br><span class="line">            pthread_mutex_unlock(&amp;mm-&gt;mutex);</span><br><span class="line">            sleep(1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else if (pid &gt; 0) &#123;</span><br><span class="line">        for (i&#x3D;0; i&lt;10; i++) &#123;</span><br><span class="line">            sleep(1);</span><br><span class="line">            pthread_mutex_lock(&amp;mm-&gt;mutex);</span><br><span class="line">            mm-&gt;num +&#x3D; 2;</span><br><span class="line">            printf(&quot;parent------num+&#x3D;2  %d\n&quot;, mm-&gt;num);</span><br><span class="line">            pthread_mutex_unlock(&amp;mm-&gt;mutex);</span><br><span class="line">        &#125;</span><br><span class="line">        wait(NULL);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pthread_mutexattr_destroy(&amp;mm-&gt;mutexattr);          &#x2F;&#x2F; é”€æ¯mutexå±æ€§å¯¹è±¡</span><br><span class="line">    pthread_mutex_destroy(&amp;mm-&gt;mutex);                  &#x2F;&#x2F; é”€æ¯mutex</span><br><span class="line">    munmap(mm,sizeof(*mm));                             &#x2F;&#x2F; é‡Šæ”¾æ˜ å°„åŒº</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ–‡ä»¶é”"><a href="#æ–‡ä»¶é”" class="headerlink" title="æ–‡ä»¶é”"></a>æ–‡ä»¶é”</h3><p><a href="https://www.cnblogs.com/wanghuaijun/p/7738788.html" target="_blank" rel="noopener"> Linuxçš„è¿›ç¨‹é—´é€šä¿¡-æ–‡ä»¶å’Œæ–‡ä»¶é”</a><br>æ–‡ä»¶é”ä¸èƒ½ç”¨äºçº¿ç¨‹é—´ã€‚</p>
<h3 id="æ¡ä»¶å˜é‡-1"><a href="#æ¡ä»¶å˜é‡-1" class="headerlink" title="æ¡ä»¶å˜é‡"></a>æ¡ä»¶å˜é‡</h3><h3 id="ä¿¡å·é‡"><a href="#ä¿¡å·é‡" class="headerlink" title="ä¿¡å·é‡"></a>ä¿¡å·é‡</h3><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>çº¿ç¨‹åŒæ­¥æœ‰å››ç§æ–¹å¼ï¼šäº’æ–¥é”ã€è¯»å†™é”(é€‚åˆå¤šçº¿ç¨‹ä¸­è¯»é”å¤šï¼Œå†™é”å°‘çš„æƒ…å†µã€‚å†™é”ä¼˜å…ˆçº§é«˜äºè¯»é”)ã€æ¡ä»¶å˜é‡(é˜»å¡çº¿ç¨‹)ã€ä¿¡å·é‡ã€‚</p>
]]></content>
  </entry>
</search>
